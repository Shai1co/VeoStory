import{g as d}from"./index-BKTkXBJZ.js";const u="https://api.stability.ai/v2beta/stable-image/generate";async function E(a,s={}){console.log("üé® [DEBUG] Starting Stable Diffusion image generation..."),console.log("üé® [DEBUG] Prompt:",a.substring(0,100)+(a.length>100?"...":""));const{negativePrompt:t="",aspectRatio:e="16:9",model:r="core",seed:i}=s;console.log("üé® [DEBUG] Options:",{negativePrompt:t.substring(0,50)+(t.length>50?"...":""),aspectRatio:e,model:r,seed:i});const l=`${u}/${r}`,n=new FormData;n.append("prompt",a),t&&n.append("negative_prompt",t),n.append("aspect_ratio",e),n.append("output_format","png"),i!==void 0&&n.append("seed",i.toString());const g=d("STABILITY_API_KEY");if(!g)throw console.error("‚ùå [DEBUG] STABILITY_API_KEY not configured"),new Error("STABILITY_API_KEY is not set. Please configure your API keys.");console.log("üé® [DEBUG] Sending request to Stability AI API..."),console.log("üé® [DEBUG] Endpoint:",l);const o=await fetch(l,{method:"POST",headers:{accept:"image/*",authorization:`Bearer ${g}`},body:n});if(console.log("üé® [DEBUG] Stability AI response status:",o.status),!o.ok){const p=await o.text().catch(()=>"");throw console.error("‚ùå [DEBUG] Stability AI error:",o.status,p),new Error(`Stability AI Image Generation error: ${o.status} - ${p||o.statusText}`)}console.log("üì• [DEBUG] Converting response to blob...");const c=await o.blob();console.log("üì• [DEBUG] Image blob size:",c.size,"bytes"),console.log("üîÑ [DEBUG] Converting blob to base64 data URL...");const b=await B(c);return console.log("‚úÖ [DEBUG] Stability AI image generation completed"),b}function B(a){return new Promise((s,t)=>{const e=new FileReader;e.onloadend=()=>{console.log("üîÑ [DEBUG] Base64 conversion completed, data URL length:",e.result.length),s(e.result)},e.onerror=r=>{console.error("‚ùå [DEBUG] FileReader error during base64 conversion:",r),t(r)},e.readAsDataURL(a)})}export{E as generateStableImage};
