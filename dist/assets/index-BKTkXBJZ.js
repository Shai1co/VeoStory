var fE=Object.defineProperty;var Fh=i=>{throw TypeError(i)};var mE=(i,t,l)=>t in i?fE(i,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):i[t]=l;var Bt=(i,t,l)=>mE(i,typeof t!="symbol"?t+"":t,l),Jh=(i,t,l)=>t.has(i)||Fh("Cannot "+l);var _e=(i,t,l)=>(Jh(i,t,"read from private field"),l?l.call(i):t.get(i)),Ti=(i,t,l)=>t.has(i)?Fh("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(i):t.set(i,l),Ol=(i,t,l,a)=>(Jh(i,t,"write to private field"),a?a.call(i,l):t.set(i,l),l);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))a(r);new MutationObserver(r=>{for(const c of r)if(c.type==="childList")for(const m of c.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&a(m)}).observe(document,{childList:!0,subtree:!0});function l(r){const c={};return r.integrity&&(c.integrity=r.integrity),r.referrerPolicy&&(c.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?c.credentials="include":r.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function a(r){if(r.ep)return;r.ep=!0;const c=l(r);fetch(r.href,c)}})();function $g(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var dc={exports:{}},Hl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kh;function hE(){if(Kh)return Hl;Kh=1;var i=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function l(a,r,c){var m=null;if(c!==void 0&&(m=""+c),r.key!==void 0&&(m=""+r.key),"key"in r){c={};for(var g in r)g!=="key"&&(c[g]=r[g])}else c=r;return r=c.ref,{$$typeof:i,type:a,key:m,ref:r!==void 0?r:null,props:c}}return Hl.Fragment=t,Hl.jsx=l,Hl.jsxs=l,Hl}var $h;function pE(){return $h||($h=1,dc.exports=hE()),dc.exports}var E=pE(),fc={exports:{}},Te={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xh;function gE(){if(Xh)return Te;Xh=1;var i=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),l=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),m=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),x=Symbol.for("react.activity"),S=Symbol.iterator;function b(R){return R===null||typeof R!="object"?null:(R=S&&R[S]||R["@@iterator"],typeof R=="function"?R:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_=Object.assign,G={};function M(R,Y,ee){this.props=R,this.context=Y,this.refs=G,this.updater=ee||A}M.prototype.isReactComponent={},M.prototype.setState=function(R,Y){if(typeof R!="object"&&typeof R!="function"&&R!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,R,Y,"setState")},M.prototype.forceUpdate=function(R){this.updater.enqueueForceUpdate(this,R,"forceUpdate")};function B(){}B.prototype=M.prototype;function V(R,Y,ee){this.props=R,this.context=Y,this.refs=G,this.updater=ee||A}var $=V.prototype=new B;$.constructor=V,_($,M.prototype),$.isPureReactComponent=!0;var Q=Array.isArray;function j(){}var W={H:null,A:null,T:null,S:null},me=Object.prototype.hasOwnProperty;function te(R,Y,ee){var oe=ee.ref;return{$$typeof:i,type:R,key:Y,ref:oe!==void 0?oe:null,props:ee}}function ge(R,Y){return te(R.type,Y,R.props)}function Ce(R){return typeof R=="object"&&R!==null&&R.$$typeof===i}function he(R){var Y={"=":"=0",":":"=2"};return"$"+R.replace(/[=:]/g,function(ee){return Y[ee]})}var ve=/\/+/g;function Ue(R,Y){return typeof R=="object"&&R!==null&&R.key!=null?he(""+R.key):Y.toString(36)}function ke(R){switch(R.status){case"fulfilled":return R.value;case"rejected":throw R.reason;default:switch(typeof R.status=="string"?R.then(j,j):(R.status="pending",R.then(function(Y){R.status==="pending"&&(R.status="fulfilled",R.value=Y)},function(Y){R.status==="pending"&&(R.status="rejected",R.reason=Y)})),R.status){case"fulfilled":return R.value;case"rejected":throw R.reason}}throw R}function k(R,Y,ee,oe,Ee){var Ae=typeof R;(Ae==="undefined"||Ae==="boolean")&&(R=null);var Ie=!1;if(R===null)Ie=!0;else switch(Ae){case"bigint":case"string":case"number":Ie=!0;break;case"object":switch(R.$$typeof){case i:case t:Ie=!0;break;case v:return Ie=R._init,k(Ie(R._payload),Y,ee,oe,Ee)}}if(Ie)return Ee=Ee(R),Ie=oe===""?"."+Ue(R,0):oe,Q(Ee)?(ee="",Ie!=null&&(ee=Ie.replace(ve,"$&/")+"/"),k(Ee,Y,ee,"",function(dt){return dt})):Ee!=null&&(Ce(Ee)&&(Ee=ge(Ee,ee+(Ee.key==null||R&&R.key===Ee.key?"":(""+Ee.key).replace(ve,"$&/")+"/")+Ie)),Y.push(Ee)),1;Ie=0;var yt=oe===""?".":oe+":";if(Q(R))for(var Qe=0;Qe<R.length;Qe++)oe=R[Qe],Ae=yt+Ue(oe,Qe),Ie+=k(oe,Y,ee,Ae,Ee);else if(Qe=b(R),typeof Qe=="function")for(R=Qe.call(R),Qe=0;!(oe=R.next()).done;)oe=oe.value,Ae=yt+Ue(oe,Qe++),Ie+=k(oe,Y,ee,Ae,Ee);else if(Ae==="object"){if(typeof R.then=="function")return k(ke(R),Y,ee,oe,Ee);throw Y=String(R),Error("Objects are not valid as a React child (found: "+(Y==="[object Object]"?"object with keys {"+Object.keys(R).join(", ")+"}":Y)+"). If you meant to render a collection of children, use an array instead.")}return Ie}function X(R,Y,ee){if(R==null)return R;var oe=[],Ee=0;return k(R,oe,"","",function(Ae){return Y.call(ee,Ae,Ee++)}),oe}function Z(R){if(R._status===-1){var Y=R._result;Y=Y(),Y.then(function(ee){(R._status===0||R._status===-1)&&(R._status=1,R._result=ee)},function(ee){(R._status===0||R._status===-1)&&(R._status=2,R._result=ee)}),R._status===-1&&(R._status=0,R._result=Y)}if(R._status===1)return R._result.default;throw R._result}var ye=typeof reportError=="function"?reportError:function(R){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Y=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof R=="object"&&R!==null&&typeof R.message=="string"?String(R.message):String(R),error:R});if(!window.dispatchEvent(Y))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",R);return}console.error(R)},we={map:X,forEach:function(R,Y,ee){X(R,function(){Y.apply(this,arguments)},ee)},count:function(R){var Y=0;return X(R,function(){Y++}),Y},toArray:function(R){return X(R,function(Y){return Y})||[]},only:function(R){if(!Ce(R))throw Error("React.Children.only expected to receive a single React element child.");return R}};return Te.Activity=x,Te.Children=we,Te.Component=M,Te.Fragment=l,Te.Profiler=r,Te.PureComponent=V,Te.StrictMode=a,Te.Suspense=y,Te.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=W,Te.__COMPILER_RUNTIME={__proto__:null,c:function(R){return W.H.useMemoCache(R)}},Te.cache=function(R){return function(){return R.apply(null,arguments)}},Te.cacheSignal=function(){return null},Te.cloneElement=function(R,Y,ee){if(R==null)throw Error("The argument must be a React element, but you passed "+R+".");var oe=_({},R.props),Ee=R.key;if(Y!=null)for(Ae in Y.key!==void 0&&(Ee=""+Y.key),Y)!me.call(Y,Ae)||Ae==="key"||Ae==="__self"||Ae==="__source"||Ae==="ref"&&Y.ref===void 0||(oe[Ae]=Y[Ae]);var Ae=arguments.length-2;if(Ae===1)oe.children=ee;else if(1<Ae){for(var Ie=Array(Ae),yt=0;yt<Ae;yt++)Ie[yt]=arguments[yt+2];oe.children=Ie}return te(R.type,Ee,oe)},Te.createContext=function(R){return R={$$typeof:m,_currentValue:R,_currentValue2:R,_threadCount:0,Provider:null,Consumer:null},R.Provider=R,R.Consumer={$$typeof:c,_context:R},R},Te.createElement=function(R,Y,ee){var oe,Ee={},Ae=null;if(Y!=null)for(oe in Y.key!==void 0&&(Ae=""+Y.key),Y)me.call(Y,oe)&&oe!=="key"&&oe!=="__self"&&oe!=="__source"&&(Ee[oe]=Y[oe]);var Ie=arguments.length-2;if(Ie===1)Ee.children=ee;else if(1<Ie){for(var yt=Array(Ie),Qe=0;Qe<Ie;Qe++)yt[Qe]=arguments[Qe+2];Ee.children=yt}if(R&&R.defaultProps)for(oe in Ie=R.defaultProps,Ie)Ee[oe]===void 0&&(Ee[oe]=Ie[oe]);return te(R,Ae,Ee)},Te.createRef=function(){return{current:null}},Te.forwardRef=function(R){return{$$typeof:g,render:R}},Te.isValidElement=Ce,Te.lazy=function(R){return{$$typeof:v,_payload:{_status:-1,_result:R},_init:Z}},Te.memo=function(R,Y){return{$$typeof:h,type:R,compare:Y===void 0?null:Y}},Te.startTransition=function(R){var Y=W.T,ee={};W.T=ee;try{var oe=R(),Ee=W.S;Ee!==null&&Ee(ee,oe),typeof oe=="object"&&oe!==null&&typeof oe.then=="function"&&oe.then(j,ye)}catch(Ae){ye(Ae)}finally{Y!==null&&ee.types!==null&&(Y.types=ee.types),W.T=Y}},Te.unstable_useCacheRefresh=function(){return W.H.useCacheRefresh()},Te.use=function(R){return W.H.use(R)},Te.useActionState=function(R,Y,ee){return W.H.useActionState(R,Y,ee)},Te.useCallback=function(R,Y){return W.H.useCallback(R,Y)},Te.useContext=function(R){return W.H.useContext(R)},Te.useDebugValue=function(){},Te.useDeferredValue=function(R,Y){return W.H.useDeferredValue(R,Y)},Te.useEffect=function(R,Y){return W.H.useEffect(R,Y)},Te.useEffectEvent=function(R){return W.H.useEffectEvent(R)},Te.useId=function(){return W.H.useId()},Te.useImperativeHandle=function(R,Y,ee){return W.H.useImperativeHandle(R,Y,ee)},Te.useInsertionEffect=function(R,Y){return W.H.useInsertionEffect(R,Y)},Te.useLayoutEffect=function(R,Y){return W.H.useLayoutEffect(R,Y)},Te.useMemo=function(R,Y){return W.H.useMemo(R,Y)},Te.useOptimistic=function(R,Y){return W.H.useOptimistic(R,Y)},Te.useReducer=function(R,Y,ee){return W.H.useReducer(R,Y,ee)},Te.useRef=function(R){return W.H.useRef(R)},Te.useState=function(R){return W.H.useState(R)},Te.useSyncExternalStore=function(R,Y,ee){return W.H.useSyncExternalStore(R,Y,ee)},Te.useTransition=function(){return W.H.useTransition()},Te.version="19.2.0",Te}var Qh;function Yc(){return Qh||(Qh=1,fc.exports=gE()),fc.exports}var O=Yc();const Xg=$g(O);var mc={exports:{}},zl={},hc={exports:{}},pc={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zh;function yE(){return Zh||(Zh=1,(function(i){function t(k,X){var Z=k.length;k.push(X);e:for(;0<Z;){var ye=Z-1>>>1,we=k[ye];if(0<r(we,X))k[ye]=X,k[Z]=we,Z=ye;else break e}}function l(k){return k.length===0?null:k[0]}function a(k){if(k.length===0)return null;var X=k[0],Z=k.pop();if(Z!==X){k[0]=Z;e:for(var ye=0,we=k.length,R=we>>>1;ye<R;){var Y=2*(ye+1)-1,ee=k[Y],oe=Y+1,Ee=k[oe];if(0>r(ee,Z))oe<we&&0>r(Ee,ee)?(k[ye]=Ee,k[oe]=Z,ye=oe):(k[ye]=ee,k[Y]=Z,ye=Y);else if(oe<we&&0>r(Ee,Z))k[ye]=Ee,k[oe]=Z,ye=oe;else break e}}return X}function r(k,X){var Z=k.sortIndex-X.sortIndex;return Z!==0?Z:k.id-X.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;i.unstable_now=function(){return c.now()}}else{var m=Date,g=m.now();i.unstable_now=function(){return m.now()-g}}var y=[],h=[],v=1,x=null,S=3,b=!1,A=!1,_=!1,G=!1,M=typeof setTimeout=="function"?setTimeout:null,B=typeof clearTimeout=="function"?clearTimeout:null,V=typeof setImmediate<"u"?setImmediate:null;function $(k){for(var X=l(h);X!==null;){if(X.callback===null)a(h);else if(X.startTime<=k)a(h),X.sortIndex=X.expirationTime,t(y,X);else break;X=l(h)}}function Q(k){if(_=!1,$(k),!A)if(l(y)!==null)A=!0,j||(j=!0,he());else{var X=l(h);X!==null&&ke(Q,X.startTime-k)}}var j=!1,W=-1,me=5,te=-1;function ge(){return G?!0:!(i.unstable_now()-te<me)}function Ce(){if(G=!1,j){var k=i.unstable_now();te=k;var X=!0;try{e:{A=!1,_&&(_=!1,B(W),W=-1),b=!0;var Z=S;try{t:{for($(k),x=l(y);x!==null&&!(x.expirationTime>k&&ge());){var ye=x.callback;if(typeof ye=="function"){x.callback=null,S=x.priorityLevel;var we=ye(x.expirationTime<=k);if(k=i.unstable_now(),typeof we=="function"){x.callback=we,$(k),X=!0;break t}x===l(y)&&a(y),$(k)}else a(y);x=l(y)}if(x!==null)X=!0;else{var R=l(h);R!==null&&ke(Q,R.startTime-k),X=!1}}break e}finally{x=null,S=Z,b=!1}X=void 0}}finally{X?he():j=!1}}}var he;if(typeof V=="function")he=function(){V(Ce)};else if(typeof MessageChannel<"u"){var ve=new MessageChannel,Ue=ve.port2;ve.port1.onmessage=Ce,he=function(){Ue.postMessage(null)}}else he=function(){M(Ce,0)};function ke(k,X){W=M(function(){k(i.unstable_now())},X)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(k){k.callback=null},i.unstable_forceFrameRate=function(k){0>k||125<k?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):me=0<k?Math.floor(1e3/k):5},i.unstable_getCurrentPriorityLevel=function(){return S},i.unstable_next=function(k){switch(S){case 1:case 2:case 3:var X=3;break;default:X=S}var Z=S;S=X;try{return k()}finally{S=Z}},i.unstable_requestPaint=function(){G=!0},i.unstable_runWithPriority=function(k,X){switch(k){case 1:case 2:case 3:case 4:case 5:break;default:k=3}var Z=S;S=k;try{return X()}finally{S=Z}},i.unstable_scheduleCallback=function(k,X,Z){var ye=i.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?ye+Z:ye):Z=ye,k){case 1:var we=-1;break;case 2:we=250;break;case 5:we=1073741823;break;case 4:we=1e4;break;default:we=5e3}return we=Z+we,k={id:v++,callback:X,priorityLevel:k,startTime:Z,expirationTime:we,sortIndex:-1},Z>ye?(k.sortIndex=Z,t(h,k),l(y)===null&&k===l(h)&&(_?(B(W),W=-1):_=!0,ke(Q,Z-ye))):(k.sortIndex=we,t(y,k),A||b||(A=!0,j||(j=!0,he()))),k},i.unstable_shouldYield=ge,i.unstable_wrapCallback=function(k){var X=S;return function(){var Z=S;S=X;try{return k.apply(this,arguments)}finally{S=Z}}}})(pc)),pc}var Wh;function vE(){return Wh||(Wh=1,hc.exports=yE()),hc.exports}var gc={exports:{}},_t={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jh;function EE(){if(jh)return _t;jh=1;var i=Yc();function t(y){var h="https://react.dev/errors/"+y;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)h+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+y+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(){}var a={d:{f:l,r:function(){throw Error(t(522))},D:l,C:l,L:l,m:l,X:l,S:l,M:l},p:0,findDOMNode:null},r=Symbol.for("react.portal");function c(y,h,v){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:x==null?null:""+x,children:y,containerInfo:h,implementation:v}}var m=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(y,h){if(y==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return _t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,_t.createPortal=function(y,h){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(t(299));return c(y,h,null,v)},_t.flushSync=function(y){var h=m.T,v=a.p;try{if(m.T=null,a.p=2,y)return y()}finally{m.T=h,a.p=v,a.d.f()}},_t.preconnect=function(y,h){typeof y=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,a.d.C(y,h))},_t.prefetchDNS=function(y){typeof y=="string"&&a.d.D(y)},_t.preinit=function(y,h){if(typeof y=="string"&&h&&typeof h.as=="string"){var v=h.as,x=g(v,h.crossOrigin),S=typeof h.integrity=="string"?h.integrity:void 0,b=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;v==="style"?a.d.S(y,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:x,integrity:S,fetchPriority:b}):v==="script"&&a.d.X(y,{crossOrigin:x,integrity:S,fetchPriority:b,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},_t.preinitModule=function(y,h){if(typeof y=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var v=g(h.as,h.crossOrigin);a.d.M(y,{crossOrigin:v,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&a.d.M(y)},_t.preload=function(y,h){if(typeof y=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var v=h.as,x=g(v,h.crossOrigin);a.d.L(y,v,{crossOrigin:x,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},_t.preloadModule=function(y,h){if(typeof y=="string")if(h){var v=g(h.as,h.crossOrigin);a.d.m(y,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:v,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else a.d.m(y)},_t.requestFormReset=function(y){a.d.r(y)},_t.unstable_batchedUpdates=function(y,h){return y(h)},_t.useFormState=function(y,h,v){return m.H.useFormState(y,h,v)},_t.useFormStatus=function(){return m.H.useHostTransitionStatus()},_t.version="19.2.0",_t}var ep;function TE(){if(ep)return gc.exports;ep=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(t){console.error(t)}}return i(),gc.exports=EE(),gc.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tp;function xE(){if(tp)return zl;tp=1;var i=vE(),t=Yc(),l=TE();function a(e){var n="https://react.dev/errors/"+e;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)n+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function c(e){var n=e,o=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(o=n.return),e=n.return;while(e)}return n.tag===3?o:null}function m(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function g(e){if(e.tag===31){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function y(e){if(c(e)!==e)throw Error(a(188))}function h(e){var n=e.alternate;if(!n){if(n=c(e),n===null)throw Error(a(188));return n!==e?null:e}for(var o=e,s=n;;){var d=o.return;if(d===null)break;var p=d.alternate;if(p===null){if(s=d.return,s!==null){o=s;continue}break}if(d.child===p.child){for(p=d.child;p;){if(p===o)return y(d),e;if(p===s)return y(d),n;p=p.sibling}throw Error(a(188))}if(o.return!==s.return)o=d,s=p;else{for(var T=!1,w=d.child;w;){if(w===o){T=!0,o=d,s=p;break}if(w===s){T=!0,s=d,o=p;break}w=w.sibling}if(!T){for(w=p.child;w;){if(w===o){T=!0,o=p,s=d;break}if(w===s){T=!0,s=p,o=d;break}w=w.sibling}if(!T)throw Error(a(189))}}if(o.alternate!==s)throw Error(a(190))}if(o.tag!==3)throw Error(a(188));return o.stateNode.current===o?e:n}function v(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e;for(e=e.child;e!==null;){if(n=v(e),n!==null)return n;e=e.sibling}return null}var x=Object.assign,S=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),A=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),G=Symbol.for("react.strict_mode"),M=Symbol.for("react.profiler"),B=Symbol.for("react.consumer"),V=Symbol.for("react.context"),$=Symbol.for("react.forward_ref"),Q=Symbol.for("react.suspense"),j=Symbol.for("react.suspense_list"),W=Symbol.for("react.memo"),me=Symbol.for("react.lazy"),te=Symbol.for("react.activity"),ge=Symbol.for("react.memo_cache_sentinel"),Ce=Symbol.iterator;function he(e){return e===null||typeof e!="object"?null:(e=Ce&&e[Ce]||e["@@iterator"],typeof e=="function"?e:null)}var ve=Symbol.for("react.client.reference");function Ue(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===ve?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case _:return"Fragment";case M:return"Profiler";case G:return"StrictMode";case Q:return"Suspense";case j:return"SuspenseList";case te:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case A:return"Portal";case V:return e.displayName||"Context";case B:return(e._context.displayName||"Context")+".Consumer";case $:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case W:return n=e.displayName||null,n!==null?n:Ue(e.type)||"Memo";case me:n=e._payload,e=e._init;try{return Ue(e(n))}catch{}}return null}var ke=Array.isArray,k=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X=l.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Z={pending:!1,data:null,method:null,action:null},ye=[],we=-1;function R(e){return{current:e}}function Y(e){0>we||(e.current=ye[we],ye[we]=null,we--)}function ee(e,n){we++,ye[we]=e.current,e.current=n}var oe=R(null),Ee=R(null),Ae=R(null),Ie=R(null);function yt(e,n){switch(ee(Ae,n),ee(Ee,e),ee(oe,null),n.nodeType){case 9:case 11:e=(e=n.documentElement)&&(e=e.namespaceURI)?hh(e):0;break;default:if(e=n.tagName,n=n.namespaceURI)n=hh(n),e=ph(n,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}Y(oe),ee(oe,e)}function Qe(){Y(oe),Y(Ee),Y(Ae)}function dt(e){e.memoizedState!==null&&ee(Ie,e);var n=oe.current,o=ph(n,e.type);n!==o&&(ee(Ee,e),ee(oe,o))}function _i(e){Ee.current===e&&(Y(oe),Y(Ee)),Ie.current===e&&(Y(Ie),Pl._currentValue=Z)}var It,$o;function nt(e){if(It===void 0)try{throw Error()}catch(o){var n=o.stack.trim().match(/\n( *(at )?)/);It=n&&n[1]||"",$o=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+It+e+$o}var ji=!1;function Ke(e,n){if(!e||ji)return"";ji=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var s={DetermineComponentFrameRoot:function(){try{if(n){var J=function(){throw Error()};if(Object.defineProperty(J.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(J,[])}catch(P){var L=P}Reflect.construct(e,[],J)}else{try{J.call()}catch(P){L=P}e.call(J.prototype)}}else{try{throw Error()}catch(P){L=P}(J=e())&&typeof J.catch=="function"&&J.catch(function(){})}}catch(P){if(P&&L&&typeof P.stack=="string")return[P.stack,L.stack]}return[null,null]}};s.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(s.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(s.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var p=s.DetermineComponentFrameRoot(),T=p[0],w=p[1];if(T&&w){var C=T.split(`
`),U=w.split(`
`);for(d=s=0;s<C.length&&!C[s].includes("DetermineComponentFrameRoot");)s++;for(;d<U.length&&!U[d].includes("DetermineComponentFrameRoot");)d++;if(s===C.length||d===U.length)for(s=C.length-1,d=U.length-1;1<=s&&0<=d&&C[s]!==U[d];)d--;for(;1<=s&&0<=d;s--,d--)if(C[s]!==U[d]){if(s!==1||d!==1)do if(s--,d--,0>d||C[s]!==U[d]){var H=`
`+C[s].replace(" at new "," at ");return e.displayName&&H.includes("<anonymous>")&&(H=H.replace("<anonymous>",e.displayName)),H}while(1<=s&&0<=d);break}}}finally{ji=!1,Error.prepareStackTrace=o}return(o=e?e.displayName||e.name:"")?nt(o):""}function Wl(e,n){switch(e.tag){case 26:case 27:case 5:return nt(e.type);case 16:return nt("Lazy");case 13:return e.child!==n&&n!==null?nt("Suspense Fallback"):nt("Suspense");case 19:return nt("SuspenseList");case 0:case 15:return Ke(e.type,!1);case 11:return Ke(e.type.render,!1);case 1:return Ke(e.type,!0);case 31:return nt("Activity");default:return""}}function Jn(e){try{var n="",o=null;do n+=Wl(e,o),o=e,e=e.return;while(e);return n}catch(s){return`
Error generating stack: `+s.message+`
`+s.stack}}var Xo=Object.prototype.hasOwnProperty,rn=i.unstable_scheduleCallback,Ci=i.unstable_cancelCallback,wn=i.unstable_shouldYield,jl=i.unstable_requestPaint,St=i.unstable_now,un=i.unstable_getCurrentPriorityLevel,eo=i.unstable_ImmediatePriority,An=i.unstable_UserBlockingPriority,Kn=i.unstable_NormalPriority,ea=i.unstable_LowPriority,Qo=i.unstable_IdlePriority,bt=i.log,Ws=i.unstable_setDisableYieldValue,bi=null,$e=null;function Vt(e){if(typeof bt=="function"&&Ws(e),$e&&typeof $e.setStrictMode=="function")try{$e.setStrictMode(bi,e)}catch{}}var wt=Math.clz32?Math.clz32:tr,js=Math.log,er=Math.LN2;function tr(e){return e>>>=0,e===0?32:31-(js(e)/er|0)|0}var $n=256,Xn=262144,to=4194304;function hn(e){var n=e&42;if(n!==0)return n;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function no(e,n,o){var s=e.pendingLanes;if(s===0)return 0;var d=0,p=e.suspendedLanes,T=e.pingedLanes;e=e.warmLanes;var w=s&134217727;return w!==0?(s=w&~p,s!==0?d=hn(s):(T&=w,T!==0?d=hn(T):o||(o=w&~e,o!==0&&(d=hn(o))))):(w=s&~p,w!==0?d=hn(w):T!==0?d=hn(T):o||(o=s&~e,o!==0&&(d=hn(o)))),d===0?0:n!==0&&n!==d&&(n&p)===0&&(p=d&-d,o=n&-n,p>=o||p===32&&(o&4194048)!==0)?n:d}function Ri(e,n){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&n)===0}function nr(e,n){switch(e){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ta(){var e=to;return to<<=1,(to&62914560)===0&&(to=4194304),e}function Zo(e){for(var n=[],o=0;31>o;o++)n.push(e);return n}function Ni(e,n){e.pendingLanes|=n,n!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function ir(e,n,o,s,d,p){var T=e.pendingLanes;e.pendingLanes=o,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=o,e.entangledLanes&=o,e.errorRecoveryDisabledLanes&=o,e.shellSuspendCounter=0;var w=e.entanglements,C=e.expirationTimes,U=e.hiddenUpdates;for(o=T&~o;0<o;){var H=31-wt(o),J=1<<H;w[H]=0,C[H]=-1;var L=U[H];if(L!==null)for(U[H]=null,H=0;H<L.length;H++){var P=L[H];P!==null&&(P.lane&=-536870913)}o&=~J}s!==0&&Qn(e,s,0),p!==0&&d===0&&e.tag!==0&&(e.suspendedLanes|=p&~(T&~n))}function Qn(e,n,o){e.pendingLanes|=n,e.suspendedLanes&=~n;var s=31-wt(n);e.entangledLanes|=n,e.entanglements[s]=e.entanglements[s]|1073741824|o&261930}function na(e,n){var o=e.entangledLanes|=n;for(e=e.entanglements;o;){var s=31-wt(o),d=1<<s;d&n|e[s]&n&&(e[s]|=n),o&=~d}}function ia(e,n){var o=n&-n;return o=(o&42)!==0?1:Wo(o),(o&(e.suspendedLanes|n))!==0?0:o}function Wo(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function jo(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function oa(){var e=X.p;return e!==0?e:(e=window.event,e===void 0?32:Bh(e.type))}function la(e,n){var o=X.p;try{return X.p=e,n()}finally{X.p=o}}var pn=Math.random().toString(36).slice(2),ft="__reactFiber$"+pn,At="__reactProps$"+pn,_n="__reactContainer$"+pn,q="__reactEvents$"+pn,F="__reactListeners$"+pn,K="__reactHandles$"+pn,ae="__reactResources$"+pn,ne="__reactMarker$"+pn;function ce(e){delete e[ft],delete e[At],delete e[q],delete e[F],delete e[K]}function ue(e){var n=e[ft];if(n)return n;for(var o=e.parentNode;o;){if(n=o[_n]||o[ft]){if(o=n.alternate,n.child!==null||o!==null&&o.child!==null)for(e=Sh(e);e!==null;){if(o=e[ft])return o;e=Sh(e)}return n}e=o,o=e.parentNode}return null}function de(e){if(e=e[ft]||e[_n]){var n=e.tag;if(n===5||n===6||n===13||n===31||n===26||n===27||n===3)return e}return null}function et(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e.stateNode;throw Error(a(33))}function qe(e){var n=e[ae];return n||(n=e[ae]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function Xe(e){e[ne]=!0}var io=new Set,Ot={};function gn(e,n){oo(e,n),oo(e+"Capture",n)}function oo(e,n){for(Ot[e]=n,e=0;e<n.length;e++)io.add(n[e])}var iv=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),id={},od={};function ov(e){return Xo.call(od,e)?!0:Xo.call(id,e)?!1:iv.test(e)?od[e]=!0:(id[e]=!0,!1)}function aa(e,n,o){if(ov(n))if(o===null)e.removeAttribute(n);else{switch(typeof o){case"undefined":case"function":case"symbol":e.removeAttribute(n);return;case"boolean":var s=n.toLowerCase().slice(0,5);if(s!=="data-"&&s!=="aria-"){e.removeAttribute(n);return}}e.setAttribute(n,""+o)}}function sa(e,n,o){if(o===null)e.removeAttribute(n);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttribute(n,""+o)}}function Cn(e,n,o,s){if(s===null)e.removeAttribute(o);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(o);return}e.setAttributeNS(n,o,""+s)}}function Qt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function ld(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function lv(e,n,o){var s=Object.getOwnPropertyDescriptor(e.constructor.prototype,n);if(!e.hasOwnProperty(n)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var d=s.get,p=s.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return d.call(this)},set:function(T){o=""+T,p.call(this,T)}}),Object.defineProperty(e,n,{enumerable:s.enumerable}),{getValue:function(){return o},setValue:function(T){o=""+T},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function or(e){if(!e._valueTracker){var n=ld(e)?"checked":"value";e._valueTracker=lv(e,n,""+e[n])}}function ad(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var o=n.getValue(),s="";return e&&(s=ld(e)?e.checked?"true":"false":e.value),e=s,e!==o?(n.setValue(e),!0):!1}function ra(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var av=/[\n"\\]/g;function Zt(e){return e.replace(av,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function lr(e,n,o,s,d,p,T,w){e.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?e.type=T:e.removeAttribute("type"),n!=null?T==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+Qt(n)):e.value!==""+Qt(n)&&(e.value=""+Qt(n)):T!=="submit"&&T!=="reset"||e.removeAttribute("value"),n!=null?ar(e,T,Qt(n)):o!=null?ar(e,T,Qt(o)):s!=null&&e.removeAttribute("value"),d==null&&p!=null&&(e.defaultChecked=!!p),d!=null&&(e.checked=d&&typeof d!="function"&&typeof d!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?e.name=""+Qt(w):e.removeAttribute("name")}function sd(e,n,o,s,d,p,T,w){if(p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(e.type=p),n!=null||o!=null){if(!(p!=="submit"&&p!=="reset"||n!=null)){or(e);return}o=o!=null?""+Qt(o):"",n=n!=null?""+Qt(n):o,w||n===e.value||(e.value=n),e.defaultValue=n}s=s??d,s=typeof s!="function"&&typeof s!="symbol"&&!!s,e.checked=w?e.checked:!!s,e.defaultChecked=!!s,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(e.name=T),or(e)}function ar(e,n,o){n==="number"&&ra(e.ownerDocument)===e||e.defaultValue===""+o||(e.defaultValue=""+o)}function lo(e,n,o,s){if(e=e.options,n){n={};for(var d=0;d<o.length;d++)n["$"+o[d]]=!0;for(o=0;o<e.length;o++)d=n.hasOwnProperty("$"+e[o].value),e[o].selected!==d&&(e[o].selected=d),d&&s&&(e[o].defaultSelected=!0)}else{for(o=""+Qt(o),n=null,d=0;d<e.length;d++){if(e[d].value===o){e[d].selected=!0,s&&(e[d].defaultSelected=!0);return}n!==null||e[d].disabled||(n=e[d])}n!==null&&(n.selected=!0)}}function rd(e,n,o){if(n!=null&&(n=""+Qt(n),n!==e.value&&(e.value=n),o==null)){e.defaultValue!==n&&(e.defaultValue=n);return}e.defaultValue=o!=null?""+Qt(o):""}function ud(e,n,o,s){if(n==null){if(s!=null){if(o!=null)throw Error(a(92));if(ke(s)){if(1<s.length)throw Error(a(93));s=s[0]}o=s}o==null&&(o=""),n=o}o=Qt(n),e.defaultValue=o,s=e.textContent,s===o&&s!==""&&s!==null&&(e.value=s),or(e)}function ao(e,n){if(n){var o=e.firstChild;if(o&&o===e.lastChild&&o.nodeType===3){o.nodeValue=n;return}}e.textContent=n}var sv=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function cd(e,n,o){var s=n.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?s?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="":s?e.setProperty(n,o):typeof o!="number"||o===0||sv.has(n)?n==="float"?e.cssFloat=o:e[n]=(""+o).trim():e[n]=o+"px"}function dd(e,n,o){if(n!=null&&typeof n!="object")throw Error(a(62));if(e=e.style,o!=null){for(var s in o)!o.hasOwnProperty(s)||n!=null&&n.hasOwnProperty(s)||(s.indexOf("--")===0?e.setProperty(s,""):s==="float"?e.cssFloat="":e[s]="");for(var d in n)s=n[d],n.hasOwnProperty(d)&&o[d]!==s&&cd(e,d,s)}else for(var p in n)n.hasOwnProperty(p)&&cd(e,p,n[p])}function sr(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var rv=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),uv=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ua(e){return uv.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function bn(){}var rr=null;function ur(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var so=null,ro=null;function fd(e){var n=de(e);if(n&&(e=n.stateNode)){var o=e[At]||null;e:switch(e=n.stateNode,n.type){case"input":if(lr(e,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),n=o.name,o.type==="radio"&&n!=null){for(o=e;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Zt(""+n)+'"][type="radio"]'),n=0;n<o.length;n++){var s=o[n];if(s!==e&&s.form===e.form){var d=s[At]||null;if(!d)throw Error(a(90));lr(s,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(n=0;n<o.length;n++)s=o[n],s.form===e.form&&ad(s)}break e;case"textarea":rd(e,o.value,o.defaultValue);break e;case"select":n=o.value,n!=null&&lo(e,!!o.multiple,n,!1)}}}var cr=!1;function md(e,n,o){if(cr)return e(n,o);cr=!0;try{var s=e(n);return s}finally{if(cr=!1,(so!==null||ro!==null)&&(Qa(),so&&(n=so,e=ro,ro=so=null,fd(n),e)))for(n=0;n<e.length;n++)fd(e[n])}}function el(e,n){var o=e.stateNode;if(o===null)return null;var s=o[At]||null;if(s===null)return null;o=s[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(o&&typeof o!="function")throw Error(a(231,n,typeof o));return o}var Rn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),dr=!1;if(Rn)try{var tl={};Object.defineProperty(tl,"passive",{get:function(){dr=!0}}),window.addEventListener("test",tl,tl),window.removeEventListener("test",tl,tl)}catch{dr=!1}var Zn=null,fr=null,ca=null;function hd(){if(ca)return ca;var e,n=fr,o=n.length,s,d="value"in Zn?Zn.value:Zn.textContent,p=d.length;for(e=0;e<o&&n[e]===d[e];e++);var T=o-e;for(s=1;s<=T&&n[o-s]===d[p-s];s++);return ca=d.slice(e,1<s?1-s:void 0)}function da(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function fa(){return!0}function pd(){return!1}function Dt(e){function n(o,s,d,p,T){this._reactName=o,this._targetInst=d,this.type=s,this.nativeEvent=p,this.target=T,this.currentTarget=null;for(var w in e)e.hasOwnProperty(w)&&(o=e[w],this[w]=o?o(p):p[w]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?fa:pd,this.isPropagationStopped=pd,this}return x(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=fa)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=fa)},persist:function(){},isPersistent:fa}),n}var Mi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ma=Dt(Mi),nl=x({},Mi,{view:0,detail:0}),cv=Dt(nl),mr,hr,il,ha=x({},nl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:gr,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==il&&(il&&e.type==="mousemove"?(mr=e.screenX-il.screenX,hr=e.screenY-il.screenY):hr=mr=0,il=e),mr)},movementY:function(e){return"movementY"in e?e.movementY:hr}}),gd=Dt(ha),dv=x({},ha,{dataTransfer:0}),fv=Dt(dv),mv=x({},nl,{relatedTarget:0}),pr=Dt(mv),hv=x({},Mi,{animationName:0,elapsedTime:0,pseudoElement:0}),pv=Dt(hv),gv=x({},Mi,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),yv=Dt(gv),vv=x({},Mi,{data:0}),yd=Dt(vv),Ev={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Tv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sv(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=xv[e])?!!n[e]:!1}function gr(){return Sv}var wv=x({},nl,{key:function(e){if(e.key){var n=Ev[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=da(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Tv[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:gr,charCode:function(e){return e.type==="keypress"?da(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?da(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Av=Dt(wv),_v=x({},ha,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),vd=Dt(_v),Cv=x({},nl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:gr}),bv=Dt(Cv),Rv=x({},Mi,{propertyName:0,elapsedTime:0,pseudoElement:0}),Nv=Dt(Rv),Mv=x({},ha,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Iv=Dt(Mv),Dv=x({},Mi,{newState:0,oldState:0}),Uv=Dt(Dv),kv=[9,13,27,32],yr=Rn&&"CompositionEvent"in window,ol=null;Rn&&"documentMode"in document&&(ol=document.documentMode);var Lv=Rn&&"TextEvent"in window&&!ol,Ed=Rn&&(!yr||ol&&8<ol&&11>=ol),Td=" ",xd=!1;function Sd(e,n){switch(e){case"keyup":return kv.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function wd(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var uo=!1;function Gv(e,n){switch(e){case"compositionend":return wd(n);case"keypress":return n.which!==32?null:(xd=!0,Td);case"textInput":return e=n.data,e===Td&&xd?null:e;default:return null}}function Pv(e,n){if(uo)return e==="compositionend"||!yr&&Sd(e,n)?(e=hd(),ca=fr=Zn=null,uo=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return Ed&&n.locale!=="ko"?null:n.data;default:return null}}var Bv={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ad(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!Bv[e.type]:n==="textarea"}function _d(e,n,o,s){so?ro?ro.push(s):ro=[s]:so=s,n=is(n,"onChange"),0<n.length&&(o=new ma("onChange","change",null,o,s),e.push({event:o,listeners:n}))}var ll=null,al=null;function qv(e){rh(e,0)}function pa(e){var n=et(e);if(ad(n))return e}function Cd(e,n){if(e==="change")return n}var bd=!1;if(Rn){var vr;if(Rn){var Er="oninput"in document;if(!Er){var Rd=document.createElement("div");Rd.setAttribute("oninput","return;"),Er=typeof Rd.oninput=="function"}vr=Er}else vr=!1;bd=vr&&(!document.documentMode||9<document.documentMode)}function Nd(){ll&&(ll.detachEvent("onpropertychange",Md),al=ll=null)}function Md(e){if(e.propertyName==="value"&&pa(al)){var n=[];_d(n,al,e,ur(e)),md(qv,n)}}function Vv(e,n,o){e==="focusin"?(Nd(),ll=n,al=o,ll.attachEvent("onpropertychange",Md)):e==="focusout"&&Nd()}function Ov(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return pa(al)}function Hv(e,n){if(e==="click")return pa(n)}function zv(e,n){if(e==="input"||e==="change")return pa(n)}function Yv(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var Ht=typeof Object.is=="function"?Object.is:Yv;function sl(e,n){if(Ht(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var o=Object.keys(e),s=Object.keys(n);if(o.length!==s.length)return!1;for(s=0;s<o.length;s++){var d=o[s];if(!Xo.call(n,d)||!Ht(e[d],n[d]))return!1}return!0}function Id(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Dd(e,n){var o=Id(e);e=0;for(var s;o;){if(o.nodeType===3){if(s=e+o.textContent.length,e<=n&&s>=n)return{node:o,offset:n-e};e=s}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=Id(o)}}function Ud(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?Ud(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function kd(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var n=ra(e.document);n instanceof e.HTMLIFrameElement;){try{var o=typeof n.contentWindow.location.href=="string"}catch{o=!1}if(o)e=n.contentWindow;else break;n=ra(e.document)}return n}function Tr(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}var Fv=Rn&&"documentMode"in document&&11>=document.documentMode,co=null,xr=null,rl=null,Sr=!1;function Ld(e,n,o){var s=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Sr||co==null||co!==ra(s)||(s=co,"selectionStart"in s&&Tr(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),rl&&sl(rl,s)||(rl=s,s=is(xr,"onSelect"),0<s.length&&(n=new ma("onSelect","select",null,n,o),e.push({event:n,listeners:s}),n.target=co)))}function Ii(e,n){var o={};return o[e.toLowerCase()]=n.toLowerCase(),o["Webkit"+e]="webkit"+n,o["Moz"+e]="moz"+n,o}var fo={animationend:Ii("Animation","AnimationEnd"),animationiteration:Ii("Animation","AnimationIteration"),animationstart:Ii("Animation","AnimationStart"),transitionrun:Ii("Transition","TransitionRun"),transitionstart:Ii("Transition","TransitionStart"),transitioncancel:Ii("Transition","TransitionCancel"),transitionend:Ii("Transition","TransitionEnd")},wr={},Gd={};Rn&&(Gd=document.createElement("div").style,"AnimationEvent"in window||(delete fo.animationend.animation,delete fo.animationiteration.animation,delete fo.animationstart.animation),"TransitionEvent"in window||delete fo.transitionend.transition);function Di(e){if(wr[e])return wr[e];if(!fo[e])return e;var n=fo[e],o;for(o in n)if(n.hasOwnProperty(o)&&o in Gd)return wr[e]=n[o];return e}var Pd=Di("animationend"),Bd=Di("animationiteration"),qd=Di("animationstart"),Jv=Di("transitionrun"),Kv=Di("transitionstart"),$v=Di("transitioncancel"),Vd=Di("transitionend"),Od=new Map,Ar="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ar.push("scrollEnd");function cn(e,n){Od.set(e,n),gn(n,[e])}var ga=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Wt=[],mo=0,_r=0;function ya(){for(var e=mo,n=_r=mo=0;n<e;){var o=Wt[n];Wt[n++]=null;var s=Wt[n];Wt[n++]=null;var d=Wt[n];Wt[n++]=null;var p=Wt[n];if(Wt[n++]=null,s!==null&&d!==null){var T=s.pending;T===null?d.next=d:(d.next=T.next,T.next=d),s.pending=d}p!==0&&Hd(o,d,p)}}function va(e,n,o,s){Wt[mo++]=e,Wt[mo++]=n,Wt[mo++]=o,Wt[mo++]=s,_r|=s,e.lanes|=s,e=e.alternate,e!==null&&(e.lanes|=s)}function Cr(e,n,o,s){return va(e,n,o,s),Ea(e)}function Ui(e,n){return va(e,null,null,n),Ea(e)}function Hd(e,n,o){e.lanes|=o;var s=e.alternate;s!==null&&(s.lanes|=o);for(var d=!1,p=e.return;p!==null;)p.childLanes|=o,s=p.alternate,s!==null&&(s.childLanes|=o),p.tag===22&&(e=p.stateNode,e===null||e._visibility&1||(d=!0)),e=p,p=p.return;return e.tag===3?(p=e.stateNode,d&&n!==null&&(d=31-wt(o),e=p.hiddenUpdates,s=e[d],s===null?e[d]=[n]:s.push(n),n.lane=o|536870912),p):null}function Ea(e){if(50<Ml)throw Ml=0,Lu=null,Error(a(185));for(var n=e.return;n!==null;)e=n,n=e.return;return e.tag===3?e.stateNode:null}var ho={};function Xv(e,n,o,s){this.tag=e,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zt(e,n,o,s){return new Xv(e,n,o,s)}function br(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Nn(e,n){var o=e.alternate;return o===null?(o=zt(e.tag,n,e.key,e.mode),o.elementType=e.elementType,o.type=e.type,o.stateNode=e.stateNode,o.alternate=e,e.alternate=o):(o.pendingProps=n,o.type=e.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=e.flags&65011712,o.childLanes=e.childLanes,o.lanes=e.lanes,o.child=e.child,o.memoizedProps=e.memoizedProps,o.memoizedState=e.memoizedState,o.updateQueue=e.updateQueue,n=e.dependencies,o.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},o.sibling=e.sibling,o.index=e.index,o.ref=e.ref,o.refCleanup=e.refCleanup,o}function zd(e,n){e.flags&=65011714;var o=e.alternate;return o===null?(e.childLanes=0,e.lanes=n,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=o.childLanes,e.lanes=o.lanes,e.child=o.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=o.memoizedProps,e.memoizedState=o.memoizedState,e.updateQueue=o.updateQueue,e.type=o.type,n=o.dependencies,e.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),e}function Ta(e,n,o,s,d,p){var T=0;if(s=e,typeof e=="function")br(e)&&(T=1);else if(typeof e=="string")T=eE(e,o,oe.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case te:return e=zt(31,o,n,d),e.elementType=te,e.lanes=p,e;case _:return ki(o.children,d,p,n);case G:T=8,d|=24;break;case M:return e=zt(12,o,n,d|2),e.elementType=M,e.lanes=p,e;case Q:return e=zt(13,o,n,d),e.elementType=Q,e.lanes=p,e;case j:return e=zt(19,o,n,d),e.elementType=j,e.lanes=p,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case V:T=10;break e;case B:T=9;break e;case $:T=11;break e;case W:T=14;break e;case me:T=16,s=null;break e}T=29,o=Error(a(130,e===null?"null":typeof e,"")),s=null}return n=zt(T,o,n,d),n.elementType=e,n.type=s,n.lanes=p,n}function ki(e,n,o,s){return e=zt(7,e,s,n),e.lanes=o,e}function Rr(e,n,o){return e=zt(6,e,null,n),e.lanes=o,e}function Yd(e){var n=zt(18,null,null,0);return n.stateNode=e,n}function Nr(e,n,o){return n=zt(4,e.children!==null?e.children:[],e.key,n),n.lanes=o,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}var Fd=new WeakMap;function jt(e,n){if(typeof e=="object"&&e!==null){var o=Fd.get(e);return o!==void 0?o:(n={value:e,source:n,stack:Jn(n)},Fd.set(e,n),n)}return{value:e,source:n,stack:Jn(n)}}var po=[],go=0,xa=null,ul=0,en=[],tn=0,Wn=null,yn=1,vn="";function Mn(e,n){po[go++]=ul,po[go++]=xa,xa=e,ul=n}function Jd(e,n,o){en[tn++]=yn,en[tn++]=vn,en[tn++]=Wn,Wn=e;var s=yn;e=vn;var d=32-wt(s)-1;s&=~(1<<d),o+=1;var p=32-wt(n)+d;if(30<p){var T=d-d%5;p=(s&(1<<T)-1).toString(32),s>>=T,d-=T,yn=1<<32-wt(n)+d|o<<d|s,vn=p+e}else yn=1<<p|o<<d|s,vn=e}function Mr(e){e.return!==null&&(Mn(e,1),Jd(e,1,0))}function Ir(e){for(;e===xa;)xa=po[--go],po[go]=null,ul=po[--go],po[go]=null;for(;e===Wn;)Wn=en[--tn],en[tn]=null,vn=en[--tn],en[tn]=null,yn=en[--tn],en[tn]=null}function Kd(e,n){en[tn++]=yn,en[tn++]=vn,en[tn++]=Wn,yn=n.id,vn=n.overflow,Wn=e}var vt=null,Ze=null,De=!1,jn=null,nn=!1,Dr=Error(a(519));function ei(e){var n=Error(a(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw cl(jt(n,e)),Dr}function $d(e){var n=e.stateNode,o=e.type,s=e.memoizedProps;switch(n[ft]=e,n[At]=s,o){case"dialog":Re("cancel",n),Re("close",n);break;case"iframe":case"object":case"embed":Re("load",n);break;case"video":case"audio":for(o=0;o<Dl.length;o++)Re(Dl[o],n);break;case"source":Re("error",n);break;case"img":case"image":case"link":Re("error",n),Re("load",n);break;case"details":Re("toggle",n);break;case"input":Re("invalid",n),sd(n,s.value,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name,!0);break;case"select":Re("invalid",n);break;case"textarea":Re("invalid",n),ud(n,s.value,s.defaultValue,s.children)}o=s.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||n.textContent===""+o||s.suppressHydrationWarning===!0||fh(n.textContent,o)?(s.popover!=null&&(Re("beforetoggle",n),Re("toggle",n)),s.onScroll!=null&&Re("scroll",n),s.onScrollEnd!=null&&Re("scrollend",n),s.onClick!=null&&(n.onclick=bn),n=!0):n=!1,n||ei(e,!0)}function Xd(e){for(vt=e.return;vt;)switch(vt.tag){case 5:case 31:case 13:nn=!1;return;case 27:case 3:nn=!0;return;default:vt=vt.return}}function yo(e){if(e!==vt)return!1;if(!De)return Xd(e),De=!0,!1;var n=e.tag,o;if((o=n!==3&&n!==27)&&((o=n===5)&&(o=e.type,o=!(o!=="form"&&o!=="button")||Qu(e.type,e.memoizedProps)),o=!o),o&&Ze&&ei(e),Xd(e),n===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(a(317));Ze=xh(e)}else if(n===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(a(317));Ze=xh(e)}else n===27?(n=Ze,hi(e.type)?(e=tc,tc=null,Ze=e):Ze=n):Ze=vt?ln(e.stateNode.nextSibling):null;return!0}function Li(){Ze=vt=null,De=!1}function Ur(){var e=jn;return e!==null&&(Gt===null?Gt=e:Gt.push.apply(Gt,e),jn=null),e}function cl(e){jn===null?jn=[e]:jn.push(e)}var kr=R(null),Gi=null,In=null;function ti(e,n,o){ee(kr,n._currentValue),n._currentValue=o}function Dn(e){e._currentValue=kr.current,Y(kr)}function Lr(e,n,o){for(;e!==null;){var s=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,s!==null&&(s.childLanes|=n)):s!==null&&(s.childLanes&n)!==n&&(s.childLanes|=n),e===o)break;e=e.return}}function Gr(e,n,o,s){var d=e.child;for(d!==null&&(d.return=e);d!==null;){var p=d.dependencies;if(p!==null){var T=d.child;p=p.firstContext;e:for(;p!==null;){var w=p;p=d;for(var C=0;C<n.length;C++)if(w.context===n[C]){p.lanes|=o,w=p.alternate,w!==null&&(w.lanes|=o),Lr(p.return,o,e),s||(T=null);break e}p=w.next}}else if(d.tag===18){if(T=d.return,T===null)throw Error(a(341));T.lanes|=o,p=T.alternate,p!==null&&(p.lanes|=o),Lr(T,o,e),T=null}else T=d.child;if(T!==null)T.return=d;else for(T=d;T!==null;){if(T===e){T=null;break}if(d=T.sibling,d!==null){d.return=T.return,T=d;break}T=T.return}d=T}}function vo(e,n,o,s){e=null;for(var d=n,p=!1;d!==null;){if(!p){if((d.flags&524288)!==0)p=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var T=d.alternate;if(T===null)throw Error(a(387));if(T=T.memoizedProps,T!==null){var w=d.type;Ht(d.pendingProps.value,T.value)||(e!==null?e.push(w):e=[w])}}else if(d===Ie.current){if(T=d.alternate,T===null)throw Error(a(387));T.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(e!==null?e.push(Pl):e=[Pl])}d=d.return}e!==null&&Gr(n,e,o,s),n.flags|=262144}function Sa(e){for(e=e.firstContext;e!==null;){if(!Ht(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Pi(e){Gi=e,In=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Et(e){return Qd(Gi,e)}function wa(e,n){return Gi===null&&Pi(e),Qd(e,n)}function Qd(e,n){var o=n._currentValue;if(n={context:n,memoizedValue:o,next:null},In===null){if(e===null)throw Error(a(308));In=n,e.dependencies={lanes:0,firstContext:n},e.flags|=524288}else In=In.next=n;return o}var Qv=typeof AbortController<"u"?AbortController:function(){var e=[],n=this.signal={aborted:!1,addEventListener:function(o,s){e.push(s)}};this.abort=function(){n.aborted=!0,e.forEach(function(o){return o()})}},Zv=i.unstable_scheduleCallback,Wv=i.unstable_NormalPriority,st={$$typeof:V,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Pr(){return{controller:new Qv,data:new Map,refCount:0}}function dl(e){e.refCount--,e.refCount===0&&Zv(Wv,function(){e.controller.abort()})}var fl=null,Br=0,Eo=0,To=null;function jv(e,n){if(fl===null){var o=fl=[];Br=0,Eo=Ou(),To={status:"pending",value:void 0,then:function(s){o.push(s)}}}return Br++,n.then(Zd,Zd),n}function Zd(){if(--Br===0&&fl!==null){To!==null&&(To.status="fulfilled");var e=fl;fl=null,Eo=0,To=null;for(var n=0;n<e.length;n++)(0,e[n])()}}function e0(e,n){var o=[],s={status:"pending",value:null,reason:null,then:function(d){o.push(d)}};return e.then(function(){s.status="fulfilled",s.value=n;for(var d=0;d<o.length;d++)(0,o[d])(n)},function(d){for(s.status="rejected",s.reason=d,d=0;d<o.length;d++)(0,o[d])(void 0)}),s}var Wd=k.S;k.S=function(e,n){Gm=St(),typeof n=="object"&&n!==null&&typeof n.then=="function"&&jv(e,n),Wd!==null&&Wd(e,n)};var Bi=R(null);function qr(){var e=Bi.current;return e!==null?e:Fe.pooledCache}function Aa(e,n){n===null?ee(Bi,Bi.current):ee(Bi,n.pool)}function jd(){var e=qr();return e===null?null:{parent:st._currentValue,pool:e}}var xo=Error(a(460)),Vr=Error(a(474)),_a=Error(a(542)),Ca={then:function(){}};function ef(e){return e=e.status,e==="fulfilled"||e==="rejected"}function tf(e,n,o){switch(o=e[o],o===void 0?e.push(n):o!==n&&(n.then(bn,bn),n=o),n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,of(e),e;default:if(typeof n.status=="string")n.then(bn,bn);else{if(e=Fe,e!==null&&100<e.shellSuspendCounter)throw Error(a(482));e=n,e.status="pending",e.then(function(s){if(n.status==="pending"){var d=n;d.status="fulfilled",d.value=s}},function(s){if(n.status==="pending"){var d=n;d.status="rejected",d.reason=s}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,of(e),e}throw Vi=n,xo}}function qi(e){try{var n=e._init;return n(e._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(Vi=o,xo):o}}var Vi=null;function nf(){if(Vi===null)throw Error(a(459));var e=Vi;return Vi=null,e}function of(e){if(e===xo||e===_a)throw Error(a(483))}var So=null,ml=0;function ba(e){var n=ml;return ml+=1,So===null&&(So=[]),tf(So,e,n)}function hl(e,n){n=n.props.ref,e.ref=n!==void 0?n:null}function Ra(e,n){throw n.$$typeof===S?Error(a(525)):(e=Object.prototype.toString.call(n),Error(a(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)))}function lf(e){function n(I,N){if(e){var D=I.deletions;D===null?(I.deletions=[N],I.flags|=16):D.push(N)}}function o(I,N){if(!e)return null;for(;N!==null;)n(I,N),N=N.sibling;return null}function s(I){for(var N=new Map;I!==null;)I.key!==null?N.set(I.key,I):N.set(I.index,I),I=I.sibling;return N}function d(I,N){return I=Nn(I,N),I.index=0,I.sibling=null,I}function p(I,N,D){return I.index=D,e?(D=I.alternate,D!==null?(D=D.index,D<N?(I.flags|=67108866,N):D):(I.flags|=67108866,N)):(I.flags|=1048576,N)}function T(I){return e&&I.alternate===null&&(I.flags|=67108866),I}function w(I,N,D,z){return N===null||N.tag!==6?(N=Rr(D,I.mode,z),N.return=I,N):(N=d(N,D),N.return=I,N)}function C(I,N,D,z){var fe=D.type;return fe===_?H(I,N,D.props.children,z,D.key):N!==null&&(N.elementType===fe||typeof fe=="object"&&fe!==null&&fe.$$typeof===me&&qi(fe)===N.type)?(N=d(N,D.props),hl(N,D),N.return=I,N):(N=Ta(D.type,D.key,D.props,null,I.mode,z),hl(N,D),N.return=I,N)}function U(I,N,D,z){return N===null||N.tag!==4||N.stateNode.containerInfo!==D.containerInfo||N.stateNode.implementation!==D.implementation?(N=Nr(D,I.mode,z),N.return=I,N):(N=d(N,D.children||[]),N.return=I,N)}function H(I,N,D,z,fe){return N===null||N.tag!==7?(N=ki(D,I.mode,z,fe),N.return=I,N):(N=d(N,D),N.return=I,N)}function J(I,N,D){if(typeof N=="string"&&N!==""||typeof N=="number"||typeof N=="bigint")return N=Rr(""+N,I.mode,D),N.return=I,N;if(typeof N=="object"&&N!==null){switch(N.$$typeof){case b:return D=Ta(N.type,N.key,N.props,null,I.mode,D),hl(D,N),D.return=I,D;case A:return N=Nr(N,I.mode,D),N.return=I,N;case me:return N=qi(N),J(I,N,D)}if(ke(N)||he(N))return N=ki(N,I.mode,D,null),N.return=I,N;if(typeof N.then=="function")return J(I,ba(N),D);if(N.$$typeof===V)return J(I,wa(I,N),D);Ra(I,N)}return null}function L(I,N,D,z){var fe=N!==null?N.key:null;if(typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint")return fe!==null?null:w(I,N,""+D,z);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case b:return D.key===fe?C(I,N,D,z):null;case A:return D.key===fe?U(I,N,D,z):null;case me:return D=qi(D),L(I,N,D,z)}if(ke(D)||he(D))return fe!==null?null:H(I,N,D,z,null);if(typeof D.then=="function")return L(I,N,ba(D),z);if(D.$$typeof===V)return L(I,N,wa(I,D),z);Ra(I,D)}return null}function P(I,N,D,z,fe){if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return I=I.get(D)||null,w(N,I,""+z,fe);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case b:return I=I.get(z.key===null?D:z.key)||null,C(N,I,z,fe);case A:return I=I.get(z.key===null?D:z.key)||null,U(N,I,z,fe);case me:return z=qi(z),P(I,N,D,z,fe)}if(ke(z)||he(z))return I=I.get(D)||null,H(N,I,z,fe,null);if(typeof z.then=="function")return P(I,N,D,ba(z),fe);if(z.$$typeof===V)return P(I,N,D,wa(N,z),fe);Ra(N,z)}return null}function le(I,N,D,z){for(var fe=null,Le=null,re=N,Se=N=0,Me=null;re!==null&&Se<D.length;Se++){re.index>Se?(Me=re,re=null):Me=re.sibling;var Ge=L(I,re,D[Se],z);if(Ge===null){re===null&&(re=Me);break}e&&re&&Ge.alternate===null&&n(I,re),N=p(Ge,N,Se),Le===null?fe=Ge:Le.sibling=Ge,Le=Ge,re=Me}if(Se===D.length)return o(I,re),De&&Mn(I,Se),fe;if(re===null){for(;Se<D.length;Se++)re=J(I,D[Se],z),re!==null&&(N=p(re,N,Se),Le===null?fe=re:Le.sibling=re,Le=re);return De&&Mn(I,Se),fe}for(re=s(re);Se<D.length;Se++)Me=P(re,I,Se,D[Se],z),Me!==null&&(e&&Me.alternate!==null&&re.delete(Me.key===null?Se:Me.key),N=p(Me,N,Se),Le===null?fe=Me:Le.sibling=Me,Le=Me);return e&&re.forEach(function(Ei){return n(I,Ei)}),De&&Mn(I,Se),fe}function pe(I,N,D,z){if(D==null)throw Error(a(151));for(var fe=null,Le=null,re=N,Se=N=0,Me=null,Ge=D.next();re!==null&&!Ge.done;Se++,Ge=D.next()){re.index>Se?(Me=re,re=null):Me=re.sibling;var Ei=L(I,re,Ge.value,z);if(Ei===null){re===null&&(re=Me);break}e&&re&&Ei.alternate===null&&n(I,re),N=p(Ei,N,Se),Le===null?fe=Ei:Le.sibling=Ei,Le=Ei,re=Me}if(Ge.done)return o(I,re),De&&Mn(I,Se),fe;if(re===null){for(;!Ge.done;Se++,Ge=D.next())Ge=J(I,Ge.value,z),Ge!==null&&(N=p(Ge,N,Se),Le===null?fe=Ge:Le.sibling=Ge,Le=Ge);return De&&Mn(I,Se),fe}for(re=s(re);!Ge.done;Se++,Ge=D.next())Ge=P(re,I,Se,Ge.value,z),Ge!==null&&(e&&Ge.alternate!==null&&re.delete(Ge.key===null?Se:Ge.key),N=p(Ge,N,Se),Le===null?fe=Ge:Le.sibling=Ge,Le=Ge);return e&&re.forEach(function(dE){return n(I,dE)}),De&&Mn(I,Se),fe}function Ye(I,N,D,z){if(typeof D=="object"&&D!==null&&D.type===_&&D.key===null&&(D=D.props.children),typeof D=="object"&&D!==null){switch(D.$$typeof){case b:e:{for(var fe=D.key;N!==null;){if(N.key===fe){if(fe=D.type,fe===_){if(N.tag===7){o(I,N.sibling),z=d(N,D.props.children),z.return=I,I=z;break e}}else if(N.elementType===fe||typeof fe=="object"&&fe!==null&&fe.$$typeof===me&&qi(fe)===N.type){o(I,N.sibling),z=d(N,D.props),hl(z,D),z.return=I,I=z;break e}o(I,N);break}else n(I,N);N=N.sibling}D.type===_?(z=ki(D.props.children,I.mode,z,D.key),z.return=I,I=z):(z=Ta(D.type,D.key,D.props,null,I.mode,z),hl(z,D),z.return=I,I=z)}return T(I);case A:e:{for(fe=D.key;N!==null;){if(N.key===fe)if(N.tag===4&&N.stateNode.containerInfo===D.containerInfo&&N.stateNode.implementation===D.implementation){o(I,N.sibling),z=d(N,D.children||[]),z.return=I,I=z;break e}else{o(I,N);break}else n(I,N);N=N.sibling}z=Nr(D,I.mode,z),z.return=I,I=z}return T(I);case me:return D=qi(D),Ye(I,N,D,z)}if(ke(D))return le(I,N,D,z);if(he(D)){if(fe=he(D),typeof fe!="function")throw Error(a(150));return D=fe.call(D),pe(I,N,D,z)}if(typeof D.then=="function")return Ye(I,N,ba(D),z);if(D.$$typeof===V)return Ye(I,N,wa(I,D),z);Ra(I,D)}return typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint"?(D=""+D,N!==null&&N.tag===6?(o(I,N.sibling),z=d(N,D),z.return=I,I=z):(o(I,N),z=Rr(D,I.mode,z),z.return=I,I=z),T(I)):o(I,N)}return function(I,N,D,z){try{ml=0;var fe=Ye(I,N,D,z);return So=null,fe}catch(re){if(re===xo||re===_a)throw re;var Le=zt(29,re,null,I.mode);return Le.lanes=z,Le.return=I,Le}finally{}}}var Oi=lf(!0),af=lf(!1),ni=!1;function Or(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Hr(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function ii(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function oi(e,n,o){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,(Be&2)!==0){var d=s.pending;return d===null?n.next=n:(n.next=d.next,d.next=n),s.pending=n,n=Ea(e),Hd(e,null,o),n}return va(e,s,n,o),Ea(e)}function pl(e,n,o){if(n=n.updateQueue,n!==null&&(n=n.shared,(o&4194048)!==0)){var s=n.lanes;s&=e.pendingLanes,o|=s,n.lanes=o,na(e,o)}}function zr(e,n){var o=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,o===s)){var d=null,p=null;if(o=o.firstBaseUpdate,o!==null){do{var T={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};p===null?d=p=T:p=p.next=T,o=o.next}while(o!==null);p===null?d=p=n:p=p.next=n}else d=p=n;o={baseState:s.baseState,firstBaseUpdate:d,lastBaseUpdate:p,shared:s.shared,callbacks:s.callbacks},e.updateQueue=o;return}e=o.lastBaseUpdate,e===null?o.firstBaseUpdate=n:e.next=n,o.lastBaseUpdate=n}var Yr=!1;function gl(){if(Yr){var e=To;if(e!==null)throw e}}function yl(e,n,o,s){Yr=!1;var d=e.updateQueue;ni=!1;var p=d.firstBaseUpdate,T=d.lastBaseUpdate,w=d.shared.pending;if(w!==null){d.shared.pending=null;var C=w,U=C.next;C.next=null,T===null?p=U:T.next=U,T=C;var H=e.alternate;H!==null&&(H=H.updateQueue,w=H.lastBaseUpdate,w!==T&&(w===null?H.firstBaseUpdate=U:w.next=U,H.lastBaseUpdate=C))}if(p!==null){var J=d.baseState;T=0,H=U=C=null,w=p;do{var L=w.lane&-536870913,P=L!==w.lane;if(P?(Ne&L)===L:(s&L)===L){L!==0&&L===Eo&&(Yr=!0),H!==null&&(H=H.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});e:{var le=e,pe=w;L=n;var Ye=o;switch(pe.tag){case 1:if(le=pe.payload,typeof le=="function"){J=le.call(Ye,J,L);break e}J=le;break e;case 3:le.flags=le.flags&-65537|128;case 0:if(le=pe.payload,L=typeof le=="function"?le.call(Ye,J,L):le,L==null)break e;J=x({},J,L);break e;case 2:ni=!0}}L=w.callback,L!==null&&(e.flags|=64,P&&(e.flags|=8192),P=d.callbacks,P===null?d.callbacks=[L]:P.push(L))}else P={lane:L,tag:w.tag,payload:w.payload,callback:w.callback,next:null},H===null?(U=H=P,C=J):H=H.next=P,T|=L;if(w=w.next,w===null){if(w=d.shared.pending,w===null)break;P=w,w=P.next,P.next=null,d.lastBaseUpdate=P,d.shared.pending=null}}while(!0);H===null&&(C=J),d.baseState=C,d.firstBaseUpdate=U,d.lastBaseUpdate=H,p===null&&(d.shared.lanes=0),ui|=T,e.lanes=T,e.memoizedState=J}}function sf(e,n){if(typeof e!="function")throw Error(a(191,e));e.call(n)}function rf(e,n){var o=e.callbacks;if(o!==null)for(e.callbacks=null,e=0;e<o.length;e++)sf(o[e],n)}var wo=R(null),Na=R(0);function uf(e,n){e=On,ee(Na,e),ee(wo,n),On=e|n.baseLanes}function Fr(){ee(Na,On),ee(wo,wo.current)}function Jr(){On=Na.current,Y(wo),Y(Na)}var Yt=R(null),on=null;function li(e){var n=e.alternate;ee(lt,lt.current&1),ee(Yt,e),on===null&&(n===null||wo.current!==null||n.memoizedState!==null)&&(on=e)}function Kr(e){ee(lt,lt.current),ee(Yt,e),on===null&&(on=e)}function cf(e){e.tag===22?(ee(lt,lt.current),ee(Yt,e),on===null&&(on=e)):ai()}function ai(){ee(lt,lt.current),ee(Yt,Yt.current)}function Ft(e){Y(Yt),on===e&&(on=null),Y(lt)}var lt=R(0);function Ma(e){for(var n=e;n!==null;){if(n.tag===13){var o=n.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||ju(o)||ec(o)))return n}else if(n.tag===19&&(n.memoizedProps.revealOrder==="forwards"||n.memoizedProps.revealOrder==="backwards"||n.memoizedProps.revealOrder==="unstable_legacy-backwards"||n.memoizedProps.revealOrder==="together")){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var Un=0,xe=null,He=null,rt=null,Ia=!1,Ao=!1,Hi=!1,Da=0,vl=0,_o=null,t0=0;function it(){throw Error(a(321))}function $r(e,n){if(n===null)return!1;for(var o=0;o<n.length&&o<e.length;o++)if(!Ht(e[o],n[o]))return!1;return!0}function Xr(e,n,o,s,d,p){return Un=p,xe=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,k.H=e===null||e.memoizedState===null?Kf:cu,Hi=!1,p=o(s,d),Hi=!1,Ao&&(p=ff(n,o,s,d)),df(e),p}function df(e){k.H=xl;var n=He!==null&&He.next!==null;if(Un=0,rt=He=xe=null,Ia=!1,vl=0,_o=null,n)throw Error(a(300));e===null||ut||(e=e.dependencies,e!==null&&Sa(e)&&(ut=!0))}function ff(e,n,o,s){xe=e;var d=0;do{if(Ao&&(_o=null),vl=0,Ao=!1,25<=d)throw Error(a(301));if(d+=1,rt=He=null,e.updateQueue!=null){var p=e.updateQueue;p.lastEffect=null,p.events=null,p.stores=null,p.memoCache!=null&&(p.memoCache.index=0)}k.H=$f,p=n(o,s)}while(Ao);return p}function n0(){var e=k.H,n=e.useState()[0];return n=typeof n.then=="function"?El(n):n,e=e.useState()[0],(He!==null?He.memoizedState:null)!==e&&(xe.flags|=1024),n}function Qr(){var e=Da!==0;return Da=0,e}function Zr(e,n,o){n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~o}function Wr(e){if(Ia){for(e=e.memoizedState;e!==null;){var n=e.queue;n!==null&&(n.pending=null),e=e.next}Ia=!1}Un=0,rt=He=xe=null,Ao=!1,vl=Da=0,_o=null}function Rt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return rt===null?xe.memoizedState=rt=e:rt=rt.next=e,rt}function at(){if(He===null){var e=xe.alternate;e=e!==null?e.memoizedState:null}else e=He.next;var n=rt===null?xe.memoizedState:rt.next;if(n!==null)rt=n,He=e;else{if(e===null)throw xe.alternate===null?Error(a(467)):Error(a(310));He=e,e={memoizedState:He.memoizedState,baseState:He.baseState,baseQueue:He.baseQueue,queue:He.queue,next:null},rt===null?xe.memoizedState=rt=e:rt=rt.next=e}return rt}function Ua(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function El(e){var n=vl;return vl+=1,_o===null&&(_o=[]),e=tf(_o,e,n),n=xe,(rt===null?n.memoizedState:rt.next)===null&&(n=n.alternate,k.H=n===null||n.memoizedState===null?Kf:cu),e}function ka(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return El(e);if(e.$$typeof===V)return Et(e)}throw Error(a(438,String(e)))}function jr(e){var n=null,o=xe.updateQueue;if(o!==null&&(n=o.memoCache),n==null){var s=xe.alternate;s!==null&&(s=s.updateQueue,s!==null&&(s=s.memoCache,s!=null&&(n={data:s.data.map(function(d){return d.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),o===null&&(o=Ua(),xe.updateQueue=o),o.memoCache=n,o=n.data[n.index],o===void 0)for(o=n.data[n.index]=Array(e),s=0;s<e;s++)o[s]=ge;return n.index++,o}function kn(e,n){return typeof n=="function"?n(e):n}function La(e){var n=at();return eu(n,He,e)}function eu(e,n,o){var s=e.queue;if(s===null)throw Error(a(311));s.lastRenderedReducer=o;var d=e.baseQueue,p=s.pending;if(p!==null){if(d!==null){var T=d.next;d.next=p.next,p.next=T}n.baseQueue=d=p,s.pending=null}if(p=e.baseState,d===null)e.memoizedState=p;else{n=d.next;var w=T=null,C=null,U=n,H=!1;do{var J=U.lane&-536870913;if(J!==U.lane?(Ne&J)===J:(Un&J)===J){var L=U.revertLane;if(L===0)C!==null&&(C=C.next={lane:0,revertLane:0,gesture:null,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null}),J===Eo&&(H=!0);else if((Un&L)===L){U=U.next,L===Eo&&(H=!0);continue}else J={lane:0,revertLane:U.revertLane,gesture:null,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null},C===null?(w=C=J,T=p):C=C.next=J,xe.lanes|=L,ui|=L;J=U.action,Hi&&o(p,J),p=U.hasEagerState?U.eagerState:o(p,J)}else L={lane:J,revertLane:U.revertLane,gesture:U.gesture,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null},C===null?(w=C=L,T=p):C=C.next=L,xe.lanes|=J,ui|=J;U=U.next}while(U!==null&&U!==n);if(C===null?T=p:C.next=w,!Ht(p,e.memoizedState)&&(ut=!0,H&&(o=To,o!==null)))throw o;e.memoizedState=p,e.baseState=T,e.baseQueue=C,s.lastRenderedState=p}return d===null&&(s.lanes=0),[e.memoizedState,s.dispatch]}function tu(e){var n=at(),o=n.queue;if(o===null)throw Error(a(311));o.lastRenderedReducer=e;var s=o.dispatch,d=o.pending,p=n.memoizedState;if(d!==null){o.pending=null;var T=d=d.next;do p=e(p,T.action),T=T.next;while(T!==d);Ht(p,n.memoizedState)||(ut=!0),n.memoizedState=p,n.baseQueue===null&&(n.baseState=p),o.lastRenderedState=p}return[p,s]}function mf(e,n,o){var s=xe,d=at(),p=De;if(p){if(o===void 0)throw Error(a(407));o=o()}else o=n();var T=!Ht((He||d).memoizedState,o);if(T&&(d.memoizedState=o,ut=!0),d=d.queue,ou(gf.bind(null,s,d,e),[e]),d.getSnapshot!==n||T||rt!==null&&rt.memoizedState.tag&1){if(s.flags|=2048,Co(9,{destroy:void 0},pf.bind(null,s,d,o,n),null),Fe===null)throw Error(a(349));p||(Un&127)!==0||hf(s,n,o)}return o}function hf(e,n,o){e.flags|=16384,e={getSnapshot:n,value:o},n=xe.updateQueue,n===null?(n=Ua(),xe.updateQueue=n,n.stores=[e]):(o=n.stores,o===null?n.stores=[e]:o.push(e))}function pf(e,n,o,s){n.value=o,n.getSnapshot=s,yf(n)&&vf(e)}function gf(e,n,o){return o(function(){yf(n)&&vf(e)})}function yf(e){var n=e.getSnapshot;e=e.value;try{var o=n();return!Ht(e,o)}catch{return!0}}function vf(e){var n=Ui(e,2);n!==null&&Pt(n,e,2)}function nu(e){var n=Rt();if(typeof e=="function"){var o=e;if(e=o(),Hi){Vt(!0);try{o()}finally{Vt(!1)}}}return n.memoizedState=n.baseState=e,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:kn,lastRenderedState:e},n}function Ef(e,n,o,s){return e.baseState=o,eu(e,He,typeof s=="function"?s:kn)}function i0(e,n,o,s,d){if(Ba(e))throw Error(a(485));if(e=n.action,e!==null){var p={payload:d,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){p.listeners.push(T)}};k.T!==null?o(!0):p.isTransition=!1,s(p),o=n.pending,o===null?(p.next=n.pending=p,Tf(n,p)):(p.next=o.next,n.pending=o.next=p)}}function Tf(e,n){var o=n.action,s=n.payload,d=e.state;if(n.isTransition){var p=k.T,T={};k.T=T;try{var w=o(d,s),C=k.S;C!==null&&C(T,w),xf(e,n,w)}catch(U){iu(e,n,U)}finally{p!==null&&T.types!==null&&(p.types=T.types),k.T=p}}else try{p=o(d,s),xf(e,n,p)}catch(U){iu(e,n,U)}}function xf(e,n,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(s){Sf(e,n,s)},function(s){return iu(e,n,s)}):Sf(e,n,o)}function Sf(e,n,o){n.status="fulfilled",n.value=o,wf(n),e.state=o,n=e.pending,n!==null&&(o=n.next,o===n?e.pending=null:(o=o.next,n.next=o,Tf(e,o)))}function iu(e,n,o){var s=e.pending;if(e.pending=null,s!==null){s=s.next;do n.status="rejected",n.reason=o,wf(n),n=n.next;while(n!==s)}e.action=null}function wf(e){e=e.listeners;for(var n=0;n<e.length;n++)(0,e[n])()}function Af(e,n){return n}function _f(e,n){if(De){var o=Fe.formState;if(o!==null){e:{var s=xe;if(De){if(Ze){t:{for(var d=Ze,p=nn;d.nodeType!==8;){if(!p){d=null;break t}if(d=ln(d.nextSibling),d===null){d=null;break t}}p=d.data,d=p==="F!"||p==="F"?d:null}if(d){Ze=ln(d.nextSibling),s=d.data==="F!";break e}}ei(s)}s=!1}s&&(n=o[0])}}return o=Rt(),o.memoizedState=o.baseState=n,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Af,lastRenderedState:n},o.queue=s,o=Yf.bind(null,xe,s),s.dispatch=o,s=nu(!1),p=uu.bind(null,xe,!1,s.queue),s=Rt(),d={state:n,dispatch:null,action:e,pending:null},s.queue=d,o=i0.bind(null,xe,d,p,o),d.dispatch=o,s.memoizedState=e,[n,o,!1]}function Cf(e){var n=at();return bf(n,He,e)}function bf(e,n,o){if(n=eu(e,n,Af)[0],e=La(kn)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var s=El(n)}catch(T){throw T===xo?_a:T}else s=n;n=at();var d=n.queue,p=d.dispatch;return o!==n.memoizedState&&(xe.flags|=2048,Co(9,{destroy:void 0},o0.bind(null,d,o),null)),[s,p,e]}function o0(e,n){e.action=n}function Rf(e){var n=at(),o=He;if(o!==null)return bf(n,o,e);at(),n=n.memoizedState,o=at();var s=o.queue.dispatch;return o.memoizedState=e,[n,s,!1]}function Co(e,n,o,s){return e={tag:e,create:o,deps:s,inst:n,next:null},n=xe.updateQueue,n===null&&(n=Ua(),xe.updateQueue=n),o=n.lastEffect,o===null?n.lastEffect=e.next=e:(s=o.next,o.next=e,e.next=s,n.lastEffect=e),e}function Nf(){return at().memoizedState}function Ga(e,n,o,s){var d=Rt();xe.flags|=e,d.memoizedState=Co(1|n,{destroy:void 0},o,s===void 0?null:s)}function Pa(e,n,o,s){var d=at();s=s===void 0?null:s;var p=d.memoizedState.inst;He!==null&&s!==null&&$r(s,He.memoizedState.deps)?d.memoizedState=Co(n,p,o,s):(xe.flags|=e,d.memoizedState=Co(1|n,p,o,s))}function Mf(e,n){Ga(8390656,8,e,n)}function ou(e,n){Pa(2048,8,e,n)}function l0(e){xe.flags|=4;var n=xe.updateQueue;if(n===null)n=Ua(),xe.updateQueue=n,n.events=[e];else{var o=n.events;o===null?n.events=[e]:o.push(e)}}function If(e){var n=at().memoizedState;return l0({ref:n,nextImpl:e}),function(){if((Be&2)!==0)throw Error(a(440));return n.impl.apply(void 0,arguments)}}function Df(e,n){return Pa(4,2,e,n)}function Uf(e,n){return Pa(4,4,e,n)}function kf(e,n){if(typeof n=="function"){e=e();var o=n(e);return function(){typeof o=="function"?o():n(null)}}if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function Lf(e,n,o){o=o!=null?o.concat([e]):null,Pa(4,4,kf.bind(null,n,e),o)}function lu(){}function Gf(e,n){var o=at();n=n===void 0?null:n;var s=o.memoizedState;return n!==null&&$r(n,s[1])?s[0]:(o.memoizedState=[e,n],e)}function Pf(e,n){var o=at();n=n===void 0?null:n;var s=o.memoizedState;if(n!==null&&$r(n,s[1]))return s[0];if(s=e(),Hi){Vt(!0);try{e()}finally{Vt(!1)}}return o.memoizedState=[s,n],s}function au(e,n,o){return o===void 0||(Un&1073741824)!==0&&(Ne&261930)===0?e.memoizedState=n:(e.memoizedState=o,e=Bm(),xe.lanes|=e,ui|=e,o)}function Bf(e,n,o,s){return Ht(o,n)?o:wo.current!==null?(e=au(e,o,s),Ht(e,n)||(ut=!0),e):(Un&42)===0||(Un&1073741824)!==0&&(Ne&261930)===0?(ut=!0,e.memoizedState=o):(e=Bm(),xe.lanes|=e,ui|=e,n)}function qf(e,n,o,s,d){var p=X.p;X.p=p!==0&&8>p?p:8;var T=k.T,w={};k.T=w,uu(e,!1,n,o);try{var C=d(),U=k.S;if(U!==null&&U(w,C),C!==null&&typeof C=="object"&&typeof C.then=="function"){var H=e0(C,s);Tl(e,n,H,$t(e))}else Tl(e,n,s,$t(e))}catch(J){Tl(e,n,{then:function(){},status:"rejected",reason:J},$t())}finally{X.p=p,T!==null&&w.types!==null&&(T.types=w.types),k.T=T}}function a0(){}function su(e,n,o,s){if(e.tag!==5)throw Error(a(476));var d=Vf(e).queue;qf(e,d,n,Z,o===null?a0:function(){return Of(e),o(s)})}function Vf(e){var n=e.memoizedState;if(n!==null)return n;n={memoizedState:Z,baseState:Z,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:kn,lastRenderedState:Z},next:null};var o={};return n.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:kn,lastRenderedState:o},next:null},e.memoizedState=n,e=e.alternate,e!==null&&(e.memoizedState=n),n}function Of(e){var n=Vf(e);n.next===null&&(n=e.alternate.memoizedState),Tl(e,n.next.queue,{},$t())}function ru(){return Et(Pl)}function Hf(){return at().memoizedState}function zf(){return at().memoizedState}function s0(e){for(var n=e.return;n!==null;){switch(n.tag){case 24:case 3:var o=$t();e=ii(o);var s=oi(n,e,o);s!==null&&(Pt(s,n,o),pl(s,n,o)),n={cache:Pr()},e.payload=n;return}n=n.return}}function r0(e,n,o){var s=$t();o={lane:s,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},Ba(e)?Ff(n,o):(o=Cr(e,n,o,s),o!==null&&(Pt(o,e,s),Jf(o,n,s)))}function Yf(e,n,o){var s=$t();Tl(e,n,o,s)}function Tl(e,n,o,s){var d={lane:s,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(Ba(e))Ff(n,d);else{var p=e.alternate;if(e.lanes===0&&(p===null||p.lanes===0)&&(p=n.lastRenderedReducer,p!==null))try{var T=n.lastRenderedState,w=p(T,o);if(d.hasEagerState=!0,d.eagerState=w,Ht(w,T))return va(e,n,d,0),Fe===null&&ya(),!1}catch{}finally{}if(o=Cr(e,n,d,s),o!==null)return Pt(o,e,s),Jf(o,n,s),!0}return!1}function uu(e,n,o,s){if(s={lane:2,revertLane:Ou(),gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null},Ba(e)){if(n)throw Error(a(479))}else n=Cr(e,o,s,2),n!==null&&Pt(n,e,2)}function Ba(e){var n=e.alternate;return e===xe||n!==null&&n===xe}function Ff(e,n){Ao=Ia=!0;var o=e.pending;o===null?n.next=n:(n.next=o.next,o.next=n),e.pending=n}function Jf(e,n,o){if((o&4194048)!==0){var s=n.lanes;s&=e.pendingLanes,o|=s,n.lanes=o,na(e,o)}}var xl={readContext:Et,use:ka,useCallback:it,useContext:it,useEffect:it,useImperativeHandle:it,useLayoutEffect:it,useInsertionEffect:it,useMemo:it,useReducer:it,useRef:it,useState:it,useDebugValue:it,useDeferredValue:it,useTransition:it,useSyncExternalStore:it,useId:it,useHostTransitionStatus:it,useFormState:it,useActionState:it,useOptimistic:it,useMemoCache:it,useCacheRefresh:it};xl.useEffectEvent=it;var Kf={readContext:Et,use:ka,useCallback:function(e,n){return Rt().memoizedState=[e,n===void 0?null:n],e},useContext:Et,useEffect:Mf,useImperativeHandle:function(e,n,o){o=o!=null?o.concat([e]):null,Ga(4194308,4,kf.bind(null,n,e),o)},useLayoutEffect:function(e,n){return Ga(4194308,4,e,n)},useInsertionEffect:function(e,n){Ga(4,2,e,n)},useMemo:function(e,n){var o=Rt();n=n===void 0?null:n;var s=e();if(Hi){Vt(!0);try{e()}finally{Vt(!1)}}return o.memoizedState=[s,n],s},useReducer:function(e,n,o){var s=Rt();if(o!==void 0){var d=o(n);if(Hi){Vt(!0);try{o(n)}finally{Vt(!1)}}}else d=n;return s.memoizedState=s.baseState=d,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:d},s.queue=e,e=e.dispatch=r0.bind(null,xe,e),[s.memoizedState,e]},useRef:function(e){var n=Rt();return e={current:e},n.memoizedState=e},useState:function(e){e=nu(e);var n=e.queue,o=Yf.bind(null,xe,n);return n.dispatch=o,[e.memoizedState,o]},useDebugValue:lu,useDeferredValue:function(e,n){var o=Rt();return au(o,e,n)},useTransition:function(){var e=nu(!1);return e=qf.bind(null,xe,e.queue,!0,!1),Rt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,n,o){var s=xe,d=Rt();if(De){if(o===void 0)throw Error(a(407));o=o()}else{if(o=n(),Fe===null)throw Error(a(349));(Ne&127)!==0||hf(s,n,o)}d.memoizedState=o;var p={value:o,getSnapshot:n};return d.queue=p,Mf(gf.bind(null,s,p,e),[e]),s.flags|=2048,Co(9,{destroy:void 0},pf.bind(null,s,p,o,n),null),o},useId:function(){var e=Rt(),n=Fe.identifierPrefix;if(De){var o=vn,s=yn;o=(s&~(1<<32-wt(s)-1)).toString(32)+o,n="_"+n+"R_"+o,o=Da++,0<o&&(n+="H"+o.toString(32)),n+="_"}else o=t0++,n="_"+n+"r_"+o.toString(32)+"_";return e.memoizedState=n},useHostTransitionStatus:ru,useFormState:_f,useActionState:_f,useOptimistic:function(e){var n=Rt();n.memoizedState=n.baseState=e;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=o,n=uu.bind(null,xe,!0,o),o.dispatch=n,[e,n]},useMemoCache:jr,useCacheRefresh:function(){return Rt().memoizedState=s0.bind(null,xe)},useEffectEvent:function(e){var n=Rt(),o={impl:e};return n.memoizedState=o,function(){if((Be&2)!==0)throw Error(a(440));return o.impl.apply(void 0,arguments)}}},cu={readContext:Et,use:ka,useCallback:Gf,useContext:Et,useEffect:ou,useImperativeHandle:Lf,useInsertionEffect:Df,useLayoutEffect:Uf,useMemo:Pf,useReducer:La,useRef:Nf,useState:function(){return La(kn)},useDebugValue:lu,useDeferredValue:function(e,n){var o=at();return Bf(o,He.memoizedState,e,n)},useTransition:function(){var e=La(kn)[0],n=at().memoizedState;return[typeof e=="boolean"?e:El(e),n]},useSyncExternalStore:mf,useId:Hf,useHostTransitionStatus:ru,useFormState:Cf,useActionState:Cf,useOptimistic:function(e,n){var o=at();return Ef(o,He,e,n)},useMemoCache:jr,useCacheRefresh:zf};cu.useEffectEvent=If;var $f={readContext:Et,use:ka,useCallback:Gf,useContext:Et,useEffect:ou,useImperativeHandle:Lf,useInsertionEffect:Df,useLayoutEffect:Uf,useMemo:Pf,useReducer:tu,useRef:Nf,useState:function(){return tu(kn)},useDebugValue:lu,useDeferredValue:function(e,n){var o=at();return He===null?au(o,e,n):Bf(o,He.memoizedState,e,n)},useTransition:function(){var e=tu(kn)[0],n=at().memoizedState;return[typeof e=="boolean"?e:El(e),n]},useSyncExternalStore:mf,useId:Hf,useHostTransitionStatus:ru,useFormState:Rf,useActionState:Rf,useOptimistic:function(e,n){var o=at();return He!==null?Ef(o,He,e,n):(o.baseState=e,[e,o.queue.dispatch])},useMemoCache:jr,useCacheRefresh:zf};$f.useEffectEvent=If;function du(e,n,o,s){n=e.memoizedState,o=o(s,n),o=o==null?n:x({},n,o),e.memoizedState=o,e.lanes===0&&(e.updateQueue.baseState=o)}var fu={enqueueSetState:function(e,n,o){e=e._reactInternals;var s=$t(),d=ii(s);d.payload=n,o!=null&&(d.callback=o),n=oi(e,d,s),n!==null&&(Pt(n,e,s),pl(n,e,s))},enqueueReplaceState:function(e,n,o){e=e._reactInternals;var s=$t(),d=ii(s);d.tag=1,d.payload=n,o!=null&&(d.callback=o),n=oi(e,d,s),n!==null&&(Pt(n,e,s),pl(n,e,s))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var o=$t(),s=ii(o);s.tag=2,n!=null&&(s.callback=n),n=oi(e,s,o),n!==null&&(Pt(n,e,o),pl(n,e,o))}};function Xf(e,n,o,s,d,p,T){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,p,T):n.prototype&&n.prototype.isPureReactComponent?!sl(o,s)||!sl(d,p):!0}function Qf(e,n,o,s){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(o,s),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(o,s),n.state!==e&&fu.enqueueReplaceState(n,n.state,null)}function zi(e,n){var o=n;if("ref"in n){o={};for(var s in n)s!=="ref"&&(o[s]=n[s])}if(e=e.defaultProps){o===n&&(o=x({},o));for(var d in e)o[d]===void 0&&(o[d]=e[d])}return o}function Zf(e){ga(e)}function Wf(e){console.error(e)}function jf(e){ga(e)}function qa(e,n){try{var o=e.onUncaughtError;o(n.value,{componentStack:n.stack})}catch(s){setTimeout(function(){throw s})}}function em(e,n,o){try{var s=e.onCaughtError;s(o.value,{componentStack:o.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function mu(e,n,o){return o=ii(o),o.tag=3,o.payload={element:null},o.callback=function(){qa(e,n)},o}function tm(e){return e=ii(e),e.tag=3,e}function nm(e,n,o,s){var d=o.type.getDerivedStateFromError;if(typeof d=="function"){var p=s.value;e.payload=function(){return d(p)},e.callback=function(){em(n,o,s)}}var T=o.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(e.callback=function(){em(n,o,s),typeof d!="function"&&(ci===null?ci=new Set([this]):ci.add(this));var w=s.stack;this.componentDidCatch(s.value,{componentStack:w!==null?w:""})})}function u0(e,n,o,s,d){if(o.flags|=32768,s!==null&&typeof s=="object"&&typeof s.then=="function"){if(n=o.alternate,n!==null&&vo(n,o,d,!0),o=Yt.current,o!==null){switch(o.tag){case 31:case 13:return on===null?Za():o.alternate===null&&ot===0&&(ot=3),o.flags&=-257,o.flags|=65536,o.lanes=d,s===Ca?o.flags|=16384:(n=o.updateQueue,n===null?o.updateQueue=new Set([s]):n.add(s),Bu(e,s,d)),!1;case 22:return o.flags|=65536,s===Ca?o.flags|=16384:(n=o.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([s])},o.updateQueue=n):(o=n.retryQueue,o===null?n.retryQueue=new Set([s]):o.add(s)),Bu(e,s,d)),!1}throw Error(a(435,o.tag))}return Bu(e,s,d),Za(),!1}if(De)return n=Yt.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=d,s!==Dr&&(e=Error(a(422),{cause:s}),cl(jt(e,o)))):(s!==Dr&&(n=Error(a(423),{cause:s}),cl(jt(n,o))),e=e.current.alternate,e.flags|=65536,d&=-d,e.lanes|=d,s=jt(s,o),d=mu(e.stateNode,s,d),zr(e,d),ot!==4&&(ot=2)),!1;var p=Error(a(520),{cause:s});if(p=jt(p,o),Nl===null?Nl=[p]:Nl.push(p),ot!==4&&(ot=2),n===null)return!0;s=jt(s,o),o=n;do{switch(o.tag){case 3:return o.flags|=65536,e=d&-d,o.lanes|=e,e=mu(o.stateNode,s,e),zr(o,e),!1;case 1:if(n=o.type,p=o.stateNode,(o.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(ci===null||!ci.has(p))))return o.flags|=65536,d&=-d,o.lanes|=d,d=tm(d),nm(d,e,o,s),zr(o,d),!1}o=o.return}while(o!==null);return!1}var hu=Error(a(461)),ut=!1;function Tt(e,n,o,s){n.child=e===null?af(n,null,o,s):Oi(n,e.child,o,s)}function im(e,n,o,s,d){o=o.render;var p=n.ref;if("ref"in s){var T={};for(var w in s)w!=="ref"&&(T[w]=s[w])}else T=s;return Pi(n),s=Xr(e,n,o,T,p,d),w=Qr(),e!==null&&!ut?(Zr(e,n,d),Ln(e,n,d)):(De&&w&&Mr(n),n.flags|=1,Tt(e,n,s,d),n.child)}function om(e,n,o,s,d){if(e===null){var p=o.type;return typeof p=="function"&&!br(p)&&p.defaultProps===void 0&&o.compare===null?(n.tag=15,n.type=p,lm(e,n,p,s,d)):(e=Ta(o.type,null,s,n,n.mode,d),e.ref=n.ref,e.return=n,n.child=e)}if(p=e.child,!Su(e,d)){var T=p.memoizedProps;if(o=o.compare,o=o!==null?o:sl,o(T,s)&&e.ref===n.ref)return Ln(e,n,d)}return n.flags|=1,e=Nn(p,s),e.ref=n.ref,e.return=n,n.child=e}function lm(e,n,o,s,d){if(e!==null){var p=e.memoizedProps;if(sl(p,s)&&e.ref===n.ref)if(ut=!1,n.pendingProps=s=p,Su(e,d))(e.flags&131072)!==0&&(ut=!0);else return n.lanes=e.lanes,Ln(e,n,d)}return pu(e,n,o,s,d)}function am(e,n,o,s){var d=s.children,p=e!==null?e.memoizedState:null;if(e===null&&n.stateNode===null&&(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.mode==="hidden"){if((n.flags&128)!==0){if(p=p!==null?p.baseLanes|o:o,e!==null){for(s=n.child=e.child,d=0;s!==null;)d=d|s.lanes|s.childLanes,s=s.sibling;s=d&~p}else s=0,n.child=null;return sm(e,n,p,o,s)}if((o&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},e!==null&&Aa(n,p!==null?p.cachePool:null),p!==null?uf(n,p):Fr(),cf(n);else return s=n.lanes=536870912,sm(e,n,p!==null?p.baseLanes|o:o,o,s)}else p!==null?(Aa(n,p.cachePool),uf(n,p),ai(),n.memoizedState=null):(e!==null&&Aa(n,null),Fr(),ai());return Tt(e,n,d,o),n.child}function Sl(e,n){return e!==null&&e.tag===22||n.stateNode!==null||(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.sibling}function sm(e,n,o,s,d){var p=qr();return p=p===null?null:{parent:st._currentValue,pool:p},n.memoizedState={baseLanes:o,cachePool:p},e!==null&&Aa(n,null),Fr(),cf(n),e!==null&&vo(e,n,s,!0),n.childLanes=d,null}function Va(e,n){return n=Ha({mode:n.mode,children:n.children},e.mode),n.ref=e.ref,e.child=n,n.return=e,n}function rm(e,n,o){return Oi(n,e.child,null,o),e=Va(n,n.pendingProps),e.flags|=2,Ft(n),n.memoizedState=null,e}function c0(e,n,o){var s=n.pendingProps,d=(n.flags&128)!==0;if(n.flags&=-129,e===null){if(De){if(s.mode==="hidden")return e=Va(n,s),n.lanes=536870912,Sl(null,e);if(Kr(n),(e=Ze)?(e=Th(e,nn),e=e!==null&&e.data==="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:Wn!==null?{id:yn,overflow:vn}:null,retryLane:536870912,hydrationErrors:null},o=Yd(e),o.return=n,n.child=o,vt=n,Ze=null)):e=null,e===null)throw ei(n);return n.lanes=536870912,null}return Va(n,s)}var p=e.memoizedState;if(p!==null){var T=p.dehydrated;if(Kr(n),d)if(n.flags&256)n.flags&=-257,n=rm(e,n,o);else if(n.memoizedState!==null)n.child=e.child,n.flags|=128,n=null;else throw Error(a(558));else if(ut||vo(e,n,o,!1),d=(o&e.childLanes)!==0,ut||d){if(s=Fe,s!==null&&(T=ia(s,o),T!==0&&T!==p.retryLane))throw p.retryLane=T,Ui(e,T),Pt(s,e,T),hu;Za(),n=rm(e,n,o)}else e=p.treeContext,Ze=ln(T.nextSibling),vt=n,De=!0,jn=null,nn=!1,e!==null&&Kd(n,e),n=Va(n,s),n.flags|=4096;return n}return e=Nn(e.child,{mode:s.mode,children:s.children}),e.ref=n.ref,n.child=e,e.return=n,e}function Oa(e,n){var o=n.ref;if(o===null)e!==null&&e.ref!==null&&(n.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(a(284));(e===null||e.ref!==o)&&(n.flags|=4194816)}}function pu(e,n,o,s,d){return Pi(n),o=Xr(e,n,o,s,void 0,d),s=Qr(),e!==null&&!ut?(Zr(e,n,d),Ln(e,n,d)):(De&&s&&Mr(n),n.flags|=1,Tt(e,n,o,d),n.child)}function um(e,n,o,s,d,p){return Pi(n),n.updateQueue=null,o=ff(n,s,o,d),df(e),s=Qr(),e!==null&&!ut?(Zr(e,n,p),Ln(e,n,p)):(De&&s&&Mr(n),n.flags|=1,Tt(e,n,o,p),n.child)}function cm(e,n,o,s,d){if(Pi(n),n.stateNode===null){var p=ho,T=o.contextType;typeof T=="object"&&T!==null&&(p=Et(T)),p=new o(s,p),n.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=fu,n.stateNode=p,p._reactInternals=n,p=n.stateNode,p.props=s,p.state=n.memoizedState,p.refs={},Or(n),T=o.contextType,p.context=typeof T=="object"&&T!==null?Et(T):ho,p.state=n.memoizedState,T=o.getDerivedStateFromProps,typeof T=="function"&&(du(n,o,T,s),p.state=n.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(T=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),T!==p.state&&fu.enqueueReplaceState(p,p.state,null),yl(n,s,p,d),gl(),p.state=n.memoizedState),typeof p.componentDidMount=="function"&&(n.flags|=4194308),s=!0}else if(e===null){p=n.stateNode;var w=n.memoizedProps,C=zi(o,w);p.props=C;var U=p.context,H=o.contextType;T=ho,typeof H=="object"&&H!==null&&(T=Et(H));var J=o.getDerivedStateFromProps;H=typeof J=="function"||typeof p.getSnapshotBeforeUpdate=="function",w=n.pendingProps!==w,H||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(w||U!==T)&&Qf(n,p,s,T),ni=!1;var L=n.memoizedState;p.state=L,yl(n,s,p,d),gl(),U=n.memoizedState,w||L!==U||ni?(typeof J=="function"&&(du(n,o,J,s),U=n.memoizedState),(C=ni||Xf(n,o,C,s,L,U,T))?(H||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(n.flags|=4194308)):(typeof p.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=s,n.memoizedState=U),p.props=s,p.state=U,p.context=T,s=C):(typeof p.componentDidMount=="function"&&(n.flags|=4194308),s=!1)}else{p=n.stateNode,Hr(e,n),T=n.memoizedProps,H=zi(o,T),p.props=H,J=n.pendingProps,L=p.context,U=o.contextType,C=ho,typeof U=="object"&&U!==null&&(C=Et(U)),w=o.getDerivedStateFromProps,(U=typeof w=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(T!==J||L!==C)&&Qf(n,p,s,C),ni=!1,L=n.memoizedState,p.state=L,yl(n,s,p,d),gl();var P=n.memoizedState;T!==J||L!==P||ni||e!==null&&e.dependencies!==null&&Sa(e.dependencies)?(typeof w=="function"&&(du(n,o,w,s),P=n.memoizedState),(H=ni||Xf(n,o,H,s,L,P,C)||e!==null&&e.dependencies!==null&&Sa(e.dependencies))?(U||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(s,P,C),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(s,P,C)),typeof p.componentDidUpdate=="function"&&(n.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof p.componentDidUpdate!="function"||T===e.memoizedProps&&L===e.memoizedState||(n.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||T===e.memoizedProps&&L===e.memoizedState||(n.flags|=1024),n.memoizedProps=s,n.memoizedState=P),p.props=s,p.state=P,p.context=C,s=H):(typeof p.componentDidUpdate!="function"||T===e.memoizedProps&&L===e.memoizedState||(n.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||T===e.memoizedProps&&L===e.memoizedState||(n.flags|=1024),s=!1)}return p=s,Oa(e,n),s=(n.flags&128)!==0,p||s?(p=n.stateNode,o=s&&typeof o.getDerivedStateFromError!="function"?null:p.render(),n.flags|=1,e!==null&&s?(n.child=Oi(n,e.child,null,d),n.child=Oi(n,null,o,d)):Tt(e,n,o,d),n.memoizedState=p.state,e=n.child):e=Ln(e,n,d),e}function dm(e,n,o,s){return Li(),n.flags|=256,Tt(e,n,o,s),n.child}var gu={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function yu(e){return{baseLanes:e,cachePool:jd()}}function vu(e,n,o){return e=e!==null?e.childLanes&~o:0,n&&(e|=Kt),e}function fm(e,n,o){var s=n.pendingProps,d=!1,p=(n.flags&128)!==0,T;if((T=p)||(T=e!==null&&e.memoizedState===null?!1:(lt.current&2)!==0),T&&(d=!0,n.flags&=-129),T=(n.flags&32)!==0,n.flags&=-33,e===null){if(De){if(d?li(n):ai(),(e=Ze)?(e=Th(e,nn),e=e!==null&&e.data!=="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:Wn!==null?{id:yn,overflow:vn}:null,retryLane:536870912,hydrationErrors:null},o=Yd(e),o.return=n,n.child=o,vt=n,Ze=null)):e=null,e===null)throw ei(n);return ec(e)?n.lanes=32:n.lanes=536870912,null}var w=s.children;return s=s.fallback,d?(ai(),d=n.mode,w=Ha({mode:"hidden",children:w},d),s=ki(s,d,o,null),w.return=n,s.return=n,w.sibling=s,n.child=w,s=n.child,s.memoizedState=yu(o),s.childLanes=vu(e,T,o),n.memoizedState=gu,Sl(null,s)):(li(n),Eu(n,w))}var C=e.memoizedState;if(C!==null&&(w=C.dehydrated,w!==null)){if(p)n.flags&256?(li(n),n.flags&=-257,n=Tu(e,n,o)):n.memoizedState!==null?(ai(),n.child=e.child,n.flags|=128,n=null):(ai(),w=s.fallback,d=n.mode,s=Ha({mode:"visible",children:s.children},d),w=ki(w,d,o,null),w.flags|=2,s.return=n,w.return=n,s.sibling=w,n.child=s,Oi(n,e.child,null,o),s=n.child,s.memoizedState=yu(o),s.childLanes=vu(e,T,o),n.memoizedState=gu,n=Sl(null,s));else if(li(n),ec(w)){if(T=w.nextSibling&&w.nextSibling.dataset,T)var U=T.dgst;T=U,s=Error(a(419)),s.stack="",s.digest=T,cl({value:s,source:null,stack:null}),n=Tu(e,n,o)}else if(ut||vo(e,n,o,!1),T=(o&e.childLanes)!==0,ut||T){if(T=Fe,T!==null&&(s=ia(T,o),s!==0&&s!==C.retryLane))throw C.retryLane=s,Ui(e,s),Pt(T,e,s),hu;ju(w)||Za(),n=Tu(e,n,o)}else ju(w)?(n.flags|=192,n.child=e.child,n=null):(e=C.treeContext,Ze=ln(w.nextSibling),vt=n,De=!0,jn=null,nn=!1,e!==null&&Kd(n,e),n=Eu(n,s.children),n.flags|=4096);return n}return d?(ai(),w=s.fallback,d=n.mode,C=e.child,U=C.sibling,s=Nn(C,{mode:"hidden",children:s.children}),s.subtreeFlags=C.subtreeFlags&65011712,U!==null?w=Nn(U,w):(w=ki(w,d,o,null),w.flags|=2),w.return=n,s.return=n,s.sibling=w,n.child=s,Sl(null,s),s=n.child,w=e.child.memoizedState,w===null?w=yu(o):(d=w.cachePool,d!==null?(C=st._currentValue,d=d.parent!==C?{parent:C,pool:C}:d):d=jd(),w={baseLanes:w.baseLanes|o,cachePool:d}),s.memoizedState=w,s.childLanes=vu(e,T,o),n.memoizedState=gu,Sl(e.child,s)):(li(n),o=e.child,e=o.sibling,o=Nn(o,{mode:"visible",children:s.children}),o.return=n,o.sibling=null,e!==null&&(T=n.deletions,T===null?(n.deletions=[e],n.flags|=16):T.push(e)),n.child=o,n.memoizedState=null,o)}function Eu(e,n){return n=Ha({mode:"visible",children:n},e.mode),n.return=e,e.child=n}function Ha(e,n){return e=zt(22,e,null,n),e.lanes=0,e}function Tu(e,n,o){return Oi(n,e.child,null,o),e=Eu(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function mm(e,n,o){e.lanes|=n;var s=e.alternate;s!==null&&(s.lanes|=n),Lr(e.return,n,o)}function xu(e,n,o,s,d,p){var T=e.memoizedState;T===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:s,tail:o,tailMode:d,treeForkCount:p}:(T.isBackwards=n,T.rendering=null,T.renderingStartTime=0,T.last=s,T.tail=o,T.tailMode=d,T.treeForkCount=p)}function hm(e,n,o){var s=n.pendingProps,d=s.revealOrder,p=s.tail;s=s.children;var T=lt.current,w=(T&2)!==0;if(w?(T=T&1|2,n.flags|=128):T&=1,ee(lt,T),Tt(e,n,s,o),s=De?ul:0,!w&&e!==null&&(e.flags&128)!==0)e:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&mm(e,o,n);else if(e.tag===19)mm(e,o,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break e;for(;e.sibling===null;){if(e.return===null||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(d){case"forwards":for(o=n.child,d=null;o!==null;)e=o.alternate,e!==null&&Ma(e)===null&&(d=o),o=o.sibling;o=d,o===null?(d=n.child,n.child=null):(d=o.sibling,o.sibling=null),xu(n,!1,d,o,p,s);break;case"backwards":case"unstable_legacy-backwards":for(o=null,d=n.child,n.child=null;d!==null;){if(e=d.alternate,e!==null&&Ma(e)===null){n.child=d;break}e=d.sibling,d.sibling=o,o=d,d=e}xu(n,!0,o,null,p,s);break;case"together":xu(n,!1,null,null,void 0,s);break;default:n.memoizedState=null}return n.child}function Ln(e,n,o){if(e!==null&&(n.dependencies=e.dependencies),ui|=n.lanes,(o&n.childLanes)===0)if(e!==null){if(vo(e,n,o,!1),(o&n.childLanes)===0)return null}else return null;if(e!==null&&n.child!==e.child)throw Error(a(153));if(n.child!==null){for(e=n.child,o=Nn(e,e.pendingProps),n.child=o,o.return=n;e.sibling!==null;)e=e.sibling,o=o.sibling=Nn(e,e.pendingProps),o.return=n;o.sibling=null}return n.child}function Su(e,n){return(e.lanes&n)!==0?!0:(e=e.dependencies,!!(e!==null&&Sa(e)))}function d0(e,n,o){switch(n.tag){case 3:yt(n,n.stateNode.containerInfo),ti(n,st,e.memoizedState.cache),Li();break;case 27:case 5:dt(n);break;case 4:yt(n,n.stateNode.containerInfo);break;case 10:ti(n,n.type,n.memoizedProps.value);break;case 31:if(n.memoizedState!==null)return n.flags|=128,Kr(n),null;break;case 13:var s=n.memoizedState;if(s!==null)return s.dehydrated!==null?(li(n),n.flags|=128,null):(o&n.child.childLanes)!==0?fm(e,n,o):(li(n),e=Ln(e,n,o),e!==null?e.sibling:null);li(n);break;case 19:var d=(e.flags&128)!==0;if(s=(o&n.childLanes)!==0,s||(vo(e,n,o,!1),s=(o&n.childLanes)!==0),d){if(s)return hm(e,n,o);n.flags|=128}if(d=n.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),ee(lt,lt.current),s)break;return null;case 22:return n.lanes=0,am(e,n,o,n.pendingProps);case 24:ti(n,st,e.memoizedState.cache)}return Ln(e,n,o)}function pm(e,n,o){if(e!==null)if(e.memoizedProps!==n.pendingProps)ut=!0;else{if(!Su(e,o)&&(n.flags&128)===0)return ut=!1,d0(e,n,o);ut=(e.flags&131072)!==0}else ut=!1,De&&(n.flags&1048576)!==0&&Jd(n,ul,n.index);switch(n.lanes=0,n.tag){case 16:e:{var s=n.pendingProps;if(e=qi(n.elementType),n.type=e,typeof e=="function")br(e)?(s=zi(e,s),n.tag=1,n=cm(null,n,e,s,o)):(n.tag=0,n=pu(null,n,e,s,o));else{if(e!=null){var d=e.$$typeof;if(d===$){n.tag=11,n=im(null,n,e,s,o);break e}else if(d===W){n.tag=14,n=om(null,n,e,s,o);break e}}throw n=Ue(e)||e,Error(a(306,n,""))}}return n;case 0:return pu(e,n,n.type,n.pendingProps,o);case 1:return s=n.type,d=zi(s,n.pendingProps),cm(e,n,s,d,o);case 3:e:{if(yt(n,n.stateNode.containerInfo),e===null)throw Error(a(387));s=n.pendingProps;var p=n.memoizedState;d=p.element,Hr(e,n),yl(n,s,null,o);var T=n.memoizedState;if(s=T.cache,ti(n,st,s),s!==p.cache&&Gr(n,[st],o,!0),gl(),s=T.element,p.isDehydrated)if(p={element:s,isDehydrated:!1,cache:T.cache},n.updateQueue.baseState=p,n.memoizedState=p,n.flags&256){n=dm(e,n,s,o);break e}else if(s!==d){d=jt(Error(a(424)),n),cl(d),n=dm(e,n,s,o);break e}else{switch(e=n.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Ze=ln(e.firstChild),vt=n,De=!0,jn=null,nn=!0,o=af(n,null,s,o),n.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(Li(),s===d){n=Ln(e,n,o);break e}Tt(e,n,s,o)}n=n.child}return n;case 26:return Oa(e,n),e===null?(o=Ch(n.type,null,n.pendingProps,null))?n.memoizedState=o:De||(o=n.type,e=n.pendingProps,s=os(Ae.current).createElement(o),s[ft]=n,s[At]=e,xt(s,o,e),Xe(s),n.stateNode=s):n.memoizedState=Ch(n.type,e.memoizedProps,n.pendingProps,e.memoizedState),null;case 27:return dt(n),e===null&&De&&(s=n.stateNode=wh(n.type,n.pendingProps,Ae.current),vt=n,nn=!0,d=Ze,hi(n.type)?(tc=d,Ze=ln(s.firstChild)):Ze=d),Tt(e,n,n.pendingProps.children,o),Oa(e,n),e===null&&(n.flags|=4194304),n.child;case 5:return e===null&&De&&((d=s=Ze)&&(s=O0(s,n.type,n.pendingProps,nn),s!==null?(n.stateNode=s,vt=n,Ze=ln(s.firstChild),nn=!1,d=!0):d=!1),d||ei(n)),dt(n),d=n.type,p=n.pendingProps,T=e!==null?e.memoizedProps:null,s=p.children,Qu(d,p)?s=null:T!==null&&Qu(d,T)&&(n.flags|=32),n.memoizedState!==null&&(d=Xr(e,n,n0,null,null,o),Pl._currentValue=d),Oa(e,n),Tt(e,n,s,o),n.child;case 6:return e===null&&De&&((e=o=Ze)&&(o=H0(o,n.pendingProps,nn),o!==null?(n.stateNode=o,vt=n,Ze=null,e=!0):e=!1),e||ei(n)),null;case 13:return fm(e,n,o);case 4:return yt(n,n.stateNode.containerInfo),s=n.pendingProps,e===null?n.child=Oi(n,null,s,o):Tt(e,n,s,o),n.child;case 11:return im(e,n,n.type,n.pendingProps,o);case 7:return Tt(e,n,n.pendingProps,o),n.child;case 8:return Tt(e,n,n.pendingProps.children,o),n.child;case 12:return Tt(e,n,n.pendingProps.children,o),n.child;case 10:return s=n.pendingProps,ti(n,n.type,s.value),Tt(e,n,s.children,o),n.child;case 9:return d=n.type._context,s=n.pendingProps.children,Pi(n),d=Et(d),s=s(d),n.flags|=1,Tt(e,n,s,o),n.child;case 14:return om(e,n,n.type,n.pendingProps,o);case 15:return lm(e,n,n.type,n.pendingProps,o);case 19:return hm(e,n,o);case 31:return c0(e,n,o);case 22:return am(e,n,o,n.pendingProps);case 24:return Pi(n),s=Et(st),e===null?(d=qr(),d===null&&(d=Fe,p=Pr(),d.pooledCache=p,p.refCount++,p!==null&&(d.pooledCacheLanes|=o),d=p),n.memoizedState={parent:s,cache:d},Or(n),ti(n,st,d)):((e.lanes&o)!==0&&(Hr(e,n),yl(n,null,null,o),gl()),d=e.memoizedState,p=n.memoizedState,d.parent!==s?(d={parent:s,cache:s},n.memoizedState=d,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=d),ti(n,st,s)):(s=p.cache,ti(n,st,s),s!==d.cache&&Gr(n,[st],o,!0))),Tt(e,n,n.pendingProps.children,o),n.child;case 29:throw n.pendingProps}throw Error(a(156,n.tag))}function Gn(e){e.flags|=4}function wu(e,n,o,s,d){if((n=(e.mode&32)!==0)&&(n=!1),n){if(e.flags|=16777216,(d&335544128)===d)if(e.stateNode.complete)e.flags|=8192;else if(Hm())e.flags|=8192;else throw Vi=Ca,Vr}else e.flags&=-16777217}function gm(e,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Ih(n))if(Hm())e.flags|=8192;else throw Vi=Ca,Vr}function za(e,n){n!==null&&(e.flags|=4),e.flags&16384&&(n=e.tag!==22?ta():536870912,e.lanes|=n,Mo|=n)}function wl(e,n){if(!De)switch(e.tailMode){case"hidden":n=e.tail;for(var o=null;n!==null;)n.alternate!==null&&(o=n),n=n.sibling;o===null?e.tail=null:o.sibling=null;break;case"collapsed":o=e.tail;for(var s=null;o!==null;)o.alternate!==null&&(s=o),o=o.sibling;s===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function We(e){var n=e.alternate!==null&&e.alternate.child===e.child,o=0,s=0;if(n)for(var d=e.child;d!==null;)o|=d.lanes|d.childLanes,s|=d.subtreeFlags&65011712,s|=d.flags&65011712,d.return=e,d=d.sibling;else for(d=e.child;d!==null;)o|=d.lanes|d.childLanes,s|=d.subtreeFlags,s|=d.flags,d.return=e,d=d.sibling;return e.subtreeFlags|=s,e.childLanes=o,n}function f0(e,n,o){var s=n.pendingProps;switch(Ir(n),n.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return We(n),null;case 1:return We(n),null;case 3:return o=n.stateNode,s=null,e!==null&&(s=e.memoizedState.cache),n.memoizedState.cache!==s&&(n.flags|=2048),Dn(st),Qe(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(e===null||e.child===null)&&(yo(n)?Gn(n):e===null||e.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,Ur())),We(n),null;case 26:var d=n.type,p=n.memoizedState;return e===null?(Gn(n),p!==null?(We(n),gm(n,p)):(We(n),wu(n,d,null,s,o))):p?p!==e.memoizedState?(Gn(n),We(n),gm(n,p)):(We(n),n.flags&=-16777217):(e=e.memoizedProps,e!==s&&Gn(n),We(n),wu(n,d,e,s,o)),null;case 27:if(_i(n),o=Ae.current,d=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==s&&Gn(n);else{if(!s){if(n.stateNode===null)throw Error(a(166));return We(n),null}e=oe.current,yo(n)?$d(n):(e=wh(d,s,o),n.stateNode=e,Gn(n))}return We(n),null;case 5:if(_i(n),d=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==s&&Gn(n);else{if(!s){if(n.stateNode===null)throw Error(a(166));return We(n),null}if(p=oe.current,yo(n))$d(n);else{var T=os(Ae.current);switch(p){case 1:p=T.createElementNS("http://www.w3.org/2000/svg",d);break;case 2:p=T.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;default:switch(d){case"svg":p=T.createElementNS("http://www.w3.org/2000/svg",d);break;case"math":p=T.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;case"script":p=T.createElement("div"),p.innerHTML="<script><\/script>",p=p.removeChild(p.firstChild);break;case"select":p=typeof s.is=="string"?T.createElement("select",{is:s.is}):T.createElement("select"),s.multiple?p.multiple=!0:s.size&&(p.size=s.size);break;default:p=typeof s.is=="string"?T.createElement(d,{is:s.is}):T.createElement(d)}}p[ft]=n,p[At]=s;e:for(T=n.child;T!==null;){if(T.tag===5||T.tag===6)p.appendChild(T.stateNode);else if(T.tag!==4&&T.tag!==27&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===n)break e;for(;T.sibling===null;){if(T.return===null||T.return===n)break e;T=T.return}T.sibling.return=T.return,T=T.sibling}n.stateNode=p;e:switch(xt(p,d,s),d){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&Gn(n)}}return We(n),wu(n,n.type,e===null?null:e.memoizedProps,n.pendingProps,o),null;case 6:if(e&&n.stateNode!=null)e.memoizedProps!==s&&Gn(n);else{if(typeof s!="string"&&n.stateNode===null)throw Error(a(166));if(e=Ae.current,yo(n)){if(e=n.stateNode,o=n.memoizedProps,s=null,d=vt,d!==null)switch(d.tag){case 27:case 5:s=d.memoizedProps}e[ft]=n,e=!!(e.nodeValue===o||s!==null&&s.suppressHydrationWarning===!0||fh(e.nodeValue,o)),e||ei(n,!0)}else e=os(e).createTextNode(s),e[ft]=n,n.stateNode=e}return We(n),null;case 31:if(o=n.memoizedState,e===null||e.memoizedState!==null){if(s=yo(n),o!==null){if(e===null){if(!s)throw Error(a(318));if(e=n.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(a(557));e[ft]=n}else Li(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;We(n),e=!1}else o=Ur(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=o),e=!0;if(!e)return n.flags&256?(Ft(n),n):(Ft(n),null);if((n.flags&128)!==0)throw Error(a(558))}return We(n),null;case 13:if(s=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(d=yo(n),s!==null&&s.dehydrated!==null){if(e===null){if(!d)throw Error(a(318));if(d=n.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(a(317));d[ft]=n}else Li(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;We(n),d=!1}else d=Ur(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=d),d=!0;if(!d)return n.flags&256?(Ft(n),n):(Ft(n),null)}return Ft(n),(n.flags&128)!==0?(n.lanes=o,n):(o=s!==null,e=e!==null&&e.memoizedState!==null,o&&(s=n.child,d=null,s.alternate!==null&&s.alternate.memoizedState!==null&&s.alternate.memoizedState.cachePool!==null&&(d=s.alternate.memoizedState.cachePool.pool),p=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(p=s.memoizedState.cachePool.pool),p!==d&&(s.flags|=2048)),o!==e&&o&&(n.child.flags|=8192),za(n,n.updateQueue),We(n),null);case 4:return Qe(),e===null&&Fu(n.stateNode.containerInfo),We(n),null;case 10:return Dn(n.type),We(n),null;case 19:if(Y(lt),s=n.memoizedState,s===null)return We(n),null;if(d=(n.flags&128)!==0,p=s.rendering,p===null)if(d)wl(s,!1);else{if(ot!==0||e!==null&&(e.flags&128)!==0)for(e=n.child;e!==null;){if(p=Ma(e),p!==null){for(n.flags|=128,wl(s,!1),e=p.updateQueue,n.updateQueue=e,za(n,e),n.subtreeFlags=0,e=o,o=n.child;o!==null;)zd(o,e),o=o.sibling;return ee(lt,lt.current&1|2),De&&Mn(n,s.treeForkCount),n.child}e=e.sibling}s.tail!==null&&St()>$a&&(n.flags|=128,d=!0,wl(s,!1),n.lanes=4194304)}else{if(!d)if(e=Ma(p),e!==null){if(n.flags|=128,d=!0,e=e.updateQueue,n.updateQueue=e,za(n,e),wl(s,!0),s.tail===null&&s.tailMode==="hidden"&&!p.alternate&&!De)return We(n),null}else 2*St()-s.renderingStartTime>$a&&o!==536870912&&(n.flags|=128,d=!0,wl(s,!1),n.lanes=4194304);s.isBackwards?(p.sibling=n.child,n.child=p):(e=s.last,e!==null?e.sibling=p:n.child=p,s.last=p)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=St(),e.sibling=null,o=lt.current,ee(lt,d?o&1|2:o&1),De&&Mn(n,s.treeForkCount),e):(We(n),null);case 22:case 23:return Ft(n),Jr(),s=n.memoizedState!==null,e!==null?e.memoizedState!==null!==s&&(n.flags|=8192):s&&(n.flags|=8192),s?(o&536870912)!==0&&(n.flags&128)===0&&(We(n),n.subtreeFlags&6&&(n.flags|=8192)):We(n),o=n.updateQueue,o!==null&&za(n,o.retryQueue),o=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(o=e.memoizedState.cachePool.pool),s=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(s=n.memoizedState.cachePool.pool),s!==o&&(n.flags|=2048),e!==null&&Y(Bi),null;case 24:return o=null,e!==null&&(o=e.memoizedState.cache),n.memoizedState.cache!==o&&(n.flags|=2048),Dn(st),We(n),null;case 25:return null;case 30:return null}throw Error(a(156,n.tag))}function m0(e,n){switch(Ir(n),n.tag){case 1:return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return Dn(st),Qe(),e=n.flags,(e&65536)!==0&&(e&128)===0?(n.flags=e&-65537|128,n):null;case 26:case 27:case 5:return _i(n),null;case 31:if(n.memoizedState!==null){if(Ft(n),n.alternate===null)throw Error(a(340));Li()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 13:if(Ft(n),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(a(340));Li()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return Y(lt),null;case 4:return Qe(),null;case 10:return Dn(n.type),null;case 22:case 23:return Ft(n),Jr(),e!==null&&Y(Bi),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 24:return Dn(st),null;case 25:return null;default:return null}}function ym(e,n){switch(Ir(n),n.tag){case 3:Dn(st),Qe();break;case 26:case 27:case 5:_i(n);break;case 4:Qe();break;case 31:n.memoizedState!==null&&Ft(n);break;case 13:Ft(n);break;case 19:Y(lt);break;case 10:Dn(n.type);break;case 22:case 23:Ft(n),Jr(),e!==null&&Y(Bi);break;case 24:Dn(st)}}function Al(e,n){try{var o=n.updateQueue,s=o!==null?o.lastEffect:null;if(s!==null){var d=s.next;o=d;do{if((o.tag&e)===e){s=void 0;var p=o.create,T=o.inst;s=p(),T.destroy=s}o=o.next}while(o!==d)}}catch(w){Oe(n,n.return,w)}}function si(e,n,o){try{var s=n.updateQueue,d=s!==null?s.lastEffect:null;if(d!==null){var p=d.next;s=p;do{if((s.tag&e)===e){var T=s.inst,w=T.destroy;if(w!==void 0){T.destroy=void 0,d=n;var C=o,U=w;try{U()}catch(H){Oe(d,C,H)}}}s=s.next}while(s!==p)}}catch(H){Oe(n,n.return,H)}}function vm(e){var n=e.updateQueue;if(n!==null){var o=e.stateNode;try{rf(n,o)}catch(s){Oe(e,e.return,s)}}}function Em(e,n,o){o.props=zi(e.type,e.memoizedProps),o.state=e.memoizedState;try{o.componentWillUnmount()}catch(s){Oe(e,n,s)}}function _l(e,n){try{var o=e.ref;if(o!==null){switch(e.tag){case 26:case 27:case 5:var s=e.stateNode;break;case 30:s=e.stateNode;break;default:s=e.stateNode}typeof o=="function"?e.refCleanup=o(s):o.current=s}}catch(d){Oe(e,n,d)}}function En(e,n){var o=e.ref,s=e.refCleanup;if(o!==null)if(typeof s=="function")try{s()}catch(d){Oe(e,n,d)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(d){Oe(e,n,d)}else o.current=null}function Tm(e){var n=e.type,o=e.memoizedProps,s=e.stateNode;try{e:switch(n){case"button":case"input":case"select":case"textarea":o.autoFocus&&s.focus();break e;case"img":o.src?s.src=o.src:o.srcSet&&(s.srcset=o.srcSet)}}catch(d){Oe(e,e.return,d)}}function Au(e,n,o){try{var s=e.stateNode;L0(s,e.type,o,n),s[At]=n}catch(d){Oe(e,e.return,d)}}function xm(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&hi(e.type)||e.tag===4}function _u(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||xm(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&hi(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Cu(e,n,o){var s=e.tag;if(s===5||s===6)e=e.stateNode,n?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(e,n):(n=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,n.appendChild(e),o=o._reactRootContainer,o!=null||n.onclick!==null||(n.onclick=bn));else if(s!==4&&(s===27&&hi(e.type)&&(o=e.stateNode,n=null),e=e.child,e!==null))for(Cu(e,n,o),e=e.sibling;e!==null;)Cu(e,n,o),e=e.sibling}function Ya(e,n,o){var s=e.tag;if(s===5||s===6)e=e.stateNode,n?o.insertBefore(e,n):o.appendChild(e);else if(s!==4&&(s===27&&hi(e.type)&&(o=e.stateNode),e=e.child,e!==null))for(Ya(e,n,o),e=e.sibling;e!==null;)Ya(e,n,o),e=e.sibling}function Sm(e){var n=e.stateNode,o=e.memoizedProps;try{for(var s=e.type,d=n.attributes;d.length;)n.removeAttributeNode(d[0]);xt(n,s,o),n[ft]=e,n[At]=o}catch(p){Oe(e,e.return,p)}}var Pn=!1,ct=!1,bu=!1,wm=typeof WeakSet=="function"?WeakSet:Set,pt=null;function h0(e,n){if(e=e.containerInfo,$u=ds,e=kd(e),Tr(e)){if("selectionStart"in e)var o={start:e.selectionStart,end:e.selectionEnd};else e:{o=(o=e.ownerDocument)&&o.defaultView||window;var s=o.getSelection&&o.getSelection();if(s&&s.rangeCount!==0){o=s.anchorNode;var d=s.anchorOffset,p=s.focusNode;s=s.focusOffset;try{o.nodeType,p.nodeType}catch{o=null;break e}var T=0,w=-1,C=-1,U=0,H=0,J=e,L=null;t:for(;;){for(var P;J!==o||d!==0&&J.nodeType!==3||(w=T+d),J!==p||s!==0&&J.nodeType!==3||(C=T+s),J.nodeType===3&&(T+=J.nodeValue.length),(P=J.firstChild)!==null;)L=J,J=P;for(;;){if(J===e)break t;if(L===o&&++U===d&&(w=T),L===p&&++H===s&&(C=T),(P=J.nextSibling)!==null)break;J=L,L=J.parentNode}J=P}o=w===-1||C===-1?null:{start:w,end:C}}else o=null}o=o||{start:0,end:0}}else o=null;for(Xu={focusedElem:e,selectionRange:o},ds=!1,pt=n;pt!==null;)if(n=pt,e=n.child,(n.subtreeFlags&1028)!==0&&e!==null)e.return=n,pt=e;else for(;pt!==null;){switch(n=pt,p=n.alternate,e=n.flags,n.tag){case 0:if((e&4)!==0&&(e=n.updateQueue,e=e!==null?e.events:null,e!==null))for(o=0;o<e.length;o++)d=e[o],d.ref.impl=d.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&p!==null){e=void 0,o=n,d=p.memoizedProps,p=p.memoizedState,s=o.stateNode;try{var le=zi(o.type,d);e=s.getSnapshotBeforeUpdate(le,p),s.__reactInternalSnapshotBeforeUpdate=e}catch(pe){Oe(o,o.return,pe)}}break;case 3:if((e&1024)!==0){if(e=n.stateNode.containerInfo,o=e.nodeType,o===9)Wu(e);else if(o===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Wu(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(a(163))}if(e=n.sibling,e!==null){e.return=n.return,pt=e;break}pt=n.return}}function Am(e,n,o){var s=o.flags;switch(o.tag){case 0:case 11:case 15:qn(e,o),s&4&&Al(5,o);break;case 1:if(qn(e,o),s&4)if(e=o.stateNode,n===null)try{e.componentDidMount()}catch(T){Oe(o,o.return,T)}else{var d=zi(o.type,n.memoizedProps);n=n.memoizedState;try{e.componentDidUpdate(d,n,e.__reactInternalSnapshotBeforeUpdate)}catch(T){Oe(o,o.return,T)}}s&64&&vm(o),s&512&&_l(o,o.return);break;case 3:if(qn(e,o),s&64&&(e=o.updateQueue,e!==null)){if(n=null,o.child!==null)switch(o.child.tag){case 27:case 5:n=o.child.stateNode;break;case 1:n=o.child.stateNode}try{rf(e,n)}catch(T){Oe(o,o.return,T)}}break;case 27:n===null&&s&4&&Sm(o);case 26:case 5:qn(e,o),n===null&&s&4&&Tm(o),s&512&&_l(o,o.return);break;case 12:qn(e,o);break;case 31:qn(e,o),s&4&&bm(e,o);break;case 13:qn(e,o),s&4&&Rm(e,o),s&64&&(e=o.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(o=w0.bind(null,o),z0(e,o))));break;case 22:if(s=o.memoizedState!==null||Pn,!s){n=n!==null&&n.memoizedState!==null||ct,d=Pn;var p=ct;Pn=s,(ct=n)&&!p?Vn(e,o,(o.subtreeFlags&8772)!==0):qn(e,o),Pn=d,ct=p}break;case 30:break;default:qn(e,o)}}function _m(e){var n=e.alternate;n!==null&&(e.alternate=null,_m(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&ce(n)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var tt=null,Ut=!1;function Bn(e,n,o){for(o=o.child;o!==null;)Cm(e,n,o),o=o.sibling}function Cm(e,n,o){if($e&&typeof $e.onCommitFiberUnmount=="function")try{$e.onCommitFiberUnmount(bi,o)}catch{}switch(o.tag){case 26:ct||En(o,n),Bn(e,n,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:ct||En(o,n);var s=tt,d=Ut;hi(o.type)&&(tt=o.stateNode,Ut=!1),Bn(e,n,o),kl(o.stateNode),tt=s,Ut=d;break;case 5:ct||En(o,n);case 6:if(s=tt,d=Ut,tt=null,Bn(e,n,o),tt=s,Ut=d,tt!==null)if(Ut)try{(tt.nodeType===9?tt.body:tt.nodeName==="HTML"?tt.ownerDocument.body:tt).removeChild(o.stateNode)}catch(p){Oe(o,n,p)}else try{tt.removeChild(o.stateNode)}catch(p){Oe(o,n,p)}break;case 18:tt!==null&&(Ut?(e=tt,vh(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,o.stateNode),Bo(e)):vh(tt,o.stateNode));break;case 4:s=tt,d=Ut,tt=o.stateNode.containerInfo,Ut=!0,Bn(e,n,o),tt=s,Ut=d;break;case 0:case 11:case 14:case 15:si(2,o,n),ct||si(4,o,n),Bn(e,n,o);break;case 1:ct||(En(o,n),s=o.stateNode,typeof s.componentWillUnmount=="function"&&Em(o,n,s)),Bn(e,n,o);break;case 21:Bn(e,n,o);break;case 22:ct=(s=ct)||o.memoizedState!==null,Bn(e,n,o),ct=s;break;default:Bn(e,n,o)}}function bm(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Bo(e)}catch(o){Oe(n,n.return,o)}}}function Rm(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Bo(e)}catch(o){Oe(n,n.return,o)}}function p0(e){switch(e.tag){case 31:case 13:case 19:var n=e.stateNode;return n===null&&(n=e.stateNode=new wm),n;case 22:return e=e.stateNode,n=e._retryCache,n===null&&(n=e._retryCache=new wm),n;default:throw Error(a(435,e.tag))}}function Fa(e,n){var o=p0(e);n.forEach(function(s){if(!o.has(s)){o.add(s);var d=A0.bind(null,e,s);s.then(d,d)}})}function kt(e,n){var o=n.deletions;if(o!==null)for(var s=0;s<o.length;s++){var d=o[s],p=e,T=n,w=T;e:for(;w!==null;){switch(w.tag){case 27:if(hi(w.type)){tt=w.stateNode,Ut=!1;break e}break;case 5:tt=w.stateNode,Ut=!1;break e;case 3:case 4:tt=w.stateNode.containerInfo,Ut=!0;break e}w=w.return}if(tt===null)throw Error(a(160));Cm(p,T,d),tt=null,Ut=!1,p=d.alternate,p!==null&&(p.return=null),d.return=null}if(n.subtreeFlags&13886)for(n=n.child;n!==null;)Nm(n,e),n=n.sibling}var dn=null;function Nm(e,n){var o=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:kt(n,e),Lt(e),s&4&&(si(3,e,e.return),Al(3,e),si(5,e,e.return));break;case 1:kt(n,e),Lt(e),s&512&&(ct||o===null||En(o,o.return)),s&64&&Pn&&(e=e.updateQueue,e!==null&&(s=e.callbacks,s!==null&&(o=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=o===null?s:o.concat(s))));break;case 26:var d=dn;if(kt(n,e),Lt(e),s&512&&(ct||o===null||En(o,o.return)),s&4){var p=o!==null?o.memoizedState:null;if(s=e.memoizedState,o===null)if(s===null)if(e.stateNode===null){e:{s=e.type,o=e.memoizedProps,d=d.ownerDocument||d;t:switch(s){case"title":p=d.getElementsByTagName("title")[0],(!p||p[ne]||p[ft]||p.namespaceURI==="http://www.w3.org/2000/svg"||p.hasAttribute("itemprop"))&&(p=d.createElement(s),d.head.insertBefore(p,d.querySelector("head > title"))),xt(p,s,o),p[ft]=e,Xe(p),s=p;break e;case"link":var T=Nh("link","href",d).get(s+(o.href||""));if(T){for(var w=0;w<T.length;w++)if(p=T[w],p.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&p.getAttribute("rel")===(o.rel==null?null:o.rel)&&p.getAttribute("title")===(o.title==null?null:o.title)&&p.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){T.splice(w,1);break t}}p=d.createElement(s),xt(p,s,o),d.head.appendChild(p);break;case"meta":if(T=Nh("meta","content",d).get(s+(o.content||""))){for(w=0;w<T.length;w++)if(p=T[w],p.getAttribute("content")===(o.content==null?null:""+o.content)&&p.getAttribute("name")===(o.name==null?null:o.name)&&p.getAttribute("property")===(o.property==null?null:o.property)&&p.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&p.getAttribute("charset")===(o.charSet==null?null:o.charSet)){T.splice(w,1);break t}}p=d.createElement(s),xt(p,s,o),d.head.appendChild(p);break;default:throw Error(a(468,s))}p[ft]=e,Xe(p),s=p}e.stateNode=s}else Mh(d,e.type,e.stateNode);else e.stateNode=Rh(d,s,e.memoizedProps);else p!==s?(p===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):p.count--,s===null?Mh(d,e.type,e.stateNode):Rh(d,s,e.memoizedProps)):s===null&&e.stateNode!==null&&Au(e,e.memoizedProps,o.memoizedProps)}break;case 27:kt(n,e),Lt(e),s&512&&(ct||o===null||En(o,o.return)),o!==null&&s&4&&Au(e,e.memoizedProps,o.memoizedProps);break;case 5:if(kt(n,e),Lt(e),s&512&&(ct||o===null||En(o,o.return)),e.flags&32){d=e.stateNode;try{ao(d,"")}catch(le){Oe(e,e.return,le)}}s&4&&e.stateNode!=null&&(d=e.memoizedProps,Au(e,d,o!==null?o.memoizedProps:d)),s&1024&&(bu=!0);break;case 6:if(kt(n,e),Lt(e),s&4){if(e.stateNode===null)throw Error(a(162));s=e.memoizedProps,o=e.stateNode;try{o.nodeValue=s}catch(le){Oe(e,e.return,le)}}break;case 3:if(ss=null,d=dn,dn=ls(n.containerInfo),kt(n,e),dn=d,Lt(e),s&4&&o!==null&&o.memoizedState.isDehydrated)try{Bo(n.containerInfo)}catch(le){Oe(e,e.return,le)}bu&&(bu=!1,Mm(e));break;case 4:s=dn,dn=ls(e.stateNode.containerInfo),kt(n,e),Lt(e),dn=s;break;case 12:kt(n,e),Lt(e);break;case 31:kt(n,e),Lt(e),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,Fa(e,s)));break;case 13:kt(n,e),Lt(e),e.child.flags&8192&&e.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(Ka=St()),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,Fa(e,s)));break;case 22:d=e.memoizedState!==null;var C=o!==null&&o.memoizedState!==null,U=Pn,H=ct;if(Pn=U||d,ct=H||C,kt(n,e),ct=H,Pn=U,Lt(e),s&8192)e:for(n=e.stateNode,n._visibility=d?n._visibility&-2:n._visibility|1,d&&(o===null||C||Pn||ct||Yi(e)),o=null,n=e;;){if(n.tag===5||n.tag===26){if(o===null){C=o=n;try{if(p=C.stateNode,d)T=p.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{w=C.stateNode;var J=C.memoizedProps.style,L=J!=null&&J.hasOwnProperty("display")?J.display:null;w.style.display=L==null||typeof L=="boolean"?"":(""+L).trim()}}catch(le){Oe(C,C.return,le)}}}else if(n.tag===6){if(o===null){C=n;try{C.stateNode.nodeValue=d?"":C.memoizedProps}catch(le){Oe(C,C.return,le)}}}else if(n.tag===18){if(o===null){C=n;try{var P=C.stateNode;d?Eh(P,!0):Eh(C.stateNode,!1)}catch(le){Oe(C,C.return,le)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===e)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;o===n&&(o=null),n=n.return}o===n&&(o=null),n.sibling.return=n.return,n=n.sibling}s&4&&(s=e.updateQueue,s!==null&&(o=s.retryQueue,o!==null&&(s.retryQueue=null,Fa(e,o))));break;case 19:kt(n,e),Lt(e),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,Fa(e,s)));break;case 30:break;case 21:break;default:kt(n,e),Lt(e)}}function Lt(e){var n=e.flags;if(n&2){try{for(var o,s=e.return;s!==null;){if(xm(s)){o=s;break}s=s.return}if(o==null)throw Error(a(160));switch(o.tag){case 27:var d=o.stateNode,p=_u(e);Ya(e,p,d);break;case 5:var T=o.stateNode;o.flags&32&&(ao(T,""),o.flags&=-33);var w=_u(e);Ya(e,w,T);break;case 3:case 4:var C=o.stateNode.containerInfo,U=_u(e);Cu(e,U,C);break;default:throw Error(a(161))}}catch(H){Oe(e,e.return,H)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function Mm(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var n=e;Mm(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),e=e.sibling}}function qn(e,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)Am(e,n.alternate,n),n=n.sibling}function Yi(e){for(e=e.child;e!==null;){var n=e;switch(n.tag){case 0:case 11:case 14:case 15:si(4,n,n.return),Yi(n);break;case 1:En(n,n.return);var o=n.stateNode;typeof o.componentWillUnmount=="function"&&Em(n,n.return,o),Yi(n);break;case 27:kl(n.stateNode);case 26:case 5:En(n,n.return),Yi(n);break;case 22:n.memoizedState===null&&Yi(n);break;case 30:Yi(n);break;default:Yi(n)}e=e.sibling}}function Vn(e,n,o){for(o=o&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var s=n.alternate,d=e,p=n,T=p.flags;switch(p.tag){case 0:case 11:case 15:Vn(d,p,o),Al(4,p);break;case 1:if(Vn(d,p,o),s=p,d=s.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(U){Oe(s,s.return,U)}if(s=p,d=s.updateQueue,d!==null){var w=s.stateNode;try{var C=d.shared.hiddenCallbacks;if(C!==null)for(d.shared.hiddenCallbacks=null,d=0;d<C.length;d++)sf(C[d],w)}catch(U){Oe(s,s.return,U)}}o&&T&64&&vm(p),_l(p,p.return);break;case 27:Sm(p);case 26:case 5:Vn(d,p,o),o&&s===null&&T&4&&Tm(p),_l(p,p.return);break;case 12:Vn(d,p,o);break;case 31:Vn(d,p,o),o&&T&4&&bm(d,p);break;case 13:Vn(d,p,o),o&&T&4&&Rm(d,p);break;case 22:p.memoizedState===null&&Vn(d,p,o),_l(p,p.return);break;case 30:break;default:Vn(d,p,o)}n=n.sibling}}function Ru(e,n){var o=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(o=e.memoizedState.cachePool.pool),e=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(e=n.memoizedState.cachePool.pool),e!==o&&(e!=null&&e.refCount++,o!=null&&dl(o))}function Nu(e,n){e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&dl(e))}function fn(e,n,o,s){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Im(e,n,o,s),n=n.sibling}function Im(e,n,o,s){var d=n.flags;switch(n.tag){case 0:case 11:case 15:fn(e,n,o,s),d&2048&&Al(9,n);break;case 1:fn(e,n,o,s);break;case 3:fn(e,n,o,s),d&2048&&(e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&dl(e)));break;case 12:if(d&2048){fn(e,n,o,s),e=n.stateNode;try{var p=n.memoizedProps,T=p.id,w=p.onPostCommit;typeof w=="function"&&w(T,n.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(C){Oe(n,n.return,C)}}else fn(e,n,o,s);break;case 31:fn(e,n,o,s);break;case 13:fn(e,n,o,s);break;case 23:break;case 22:p=n.stateNode,T=n.alternate,n.memoizedState!==null?p._visibility&2?fn(e,n,o,s):Cl(e,n):p._visibility&2?fn(e,n,o,s):(p._visibility|=2,bo(e,n,o,s,(n.subtreeFlags&10256)!==0||!1)),d&2048&&Ru(T,n);break;case 24:fn(e,n,o,s),d&2048&&Nu(n.alternate,n);break;default:fn(e,n,o,s)}}function bo(e,n,o,s,d){for(d=d&&((n.subtreeFlags&10256)!==0||!1),n=n.child;n!==null;){var p=e,T=n,w=o,C=s,U=T.flags;switch(T.tag){case 0:case 11:case 15:bo(p,T,w,C,d),Al(8,T);break;case 23:break;case 22:var H=T.stateNode;T.memoizedState!==null?H._visibility&2?bo(p,T,w,C,d):Cl(p,T):(H._visibility|=2,bo(p,T,w,C,d)),d&&U&2048&&Ru(T.alternate,T);break;case 24:bo(p,T,w,C,d),d&&U&2048&&Nu(T.alternate,T);break;default:bo(p,T,w,C,d)}n=n.sibling}}function Cl(e,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var o=e,s=n,d=s.flags;switch(s.tag){case 22:Cl(o,s),d&2048&&Ru(s.alternate,s);break;case 24:Cl(o,s),d&2048&&Nu(s.alternate,s);break;default:Cl(o,s)}n=n.sibling}}var bl=8192;function Ro(e,n,o){if(e.subtreeFlags&bl)for(e=e.child;e!==null;)Dm(e,n,o),e=e.sibling}function Dm(e,n,o){switch(e.tag){case 26:Ro(e,n,o),e.flags&bl&&e.memoizedState!==null&&tE(o,dn,e.memoizedState,e.memoizedProps);break;case 5:Ro(e,n,o);break;case 3:case 4:var s=dn;dn=ls(e.stateNode.containerInfo),Ro(e,n,o),dn=s;break;case 22:e.memoizedState===null&&(s=e.alternate,s!==null&&s.memoizedState!==null?(s=bl,bl=16777216,Ro(e,n,o),bl=s):Ro(e,n,o));break;default:Ro(e,n,o)}}function Um(e){var n=e.alternate;if(n!==null&&(e=n.child,e!==null)){n.child=null;do n=e.sibling,e.sibling=null,e=n;while(e!==null)}}function Rl(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var o=0;o<n.length;o++){var s=n[o];pt=s,Lm(s,e)}Um(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)km(e),e=e.sibling}function km(e){switch(e.tag){case 0:case 11:case 15:Rl(e),e.flags&2048&&si(9,e,e.return);break;case 3:Rl(e);break;case 12:Rl(e);break;case 22:var n=e.stateNode;e.memoizedState!==null&&n._visibility&2&&(e.return===null||e.return.tag!==13)?(n._visibility&=-3,Ja(e)):Rl(e);break;default:Rl(e)}}function Ja(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var o=0;o<n.length;o++){var s=n[o];pt=s,Lm(s,e)}Um(e)}for(e=e.child;e!==null;){switch(n=e,n.tag){case 0:case 11:case 15:si(8,n,n.return),Ja(n);break;case 22:o=n.stateNode,o._visibility&2&&(o._visibility&=-3,Ja(n));break;default:Ja(n)}e=e.sibling}}function Lm(e,n){for(;pt!==null;){var o=pt;switch(o.tag){case 0:case 11:case 15:si(8,o,n);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var s=o.memoizedState.cachePool.pool;s!=null&&s.refCount++}break;case 24:dl(o.memoizedState.cache)}if(s=o.child,s!==null)s.return=o,pt=s;else e:for(o=e;pt!==null;){s=pt;var d=s.sibling,p=s.return;if(_m(s),s===o){pt=null;break e}if(d!==null){d.return=p,pt=d;break e}pt=p}}}var g0={getCacheForType:function(e){var n=Et(st),o=n.data.get(e);return o===void 0&&(o=e(),n.data.set(e,o)),o},cacheSignal:function(){return Et(st).controller.signal}},y0=typeof WeakMap=="function"?WeakMap:Map,Be=0,Fe=null,be=null,Ne=0,Ve=0,Jt=null,ri=!1,No=!1,Mu=!1,On=0,ot=0,ui=0,Fi=0,Iu=0,Kt=0,Mo=0,Nl=null,Gt=null,Du=!1,Ka=0,Gm=0,$a=1/0,Xa=null,ci=null,mt=0,di=null,Io=null,Hn=0,Uu=0,ku=null,Pm=null,Ml=0,Lu=null;function $t(){return(Be&2)!==0&&Ne!==0?Ne&-Ne:k.T!==null?Ou():oa()}function Bm(){if(Kt===0)if((Ne&536870912)===0||De){var e=Xn;Xn<<=1,(Xn&3932160)===0&&(Xn=262144),Kt=e}else Kt=536870912;return e=Yt.current,e!==null&&(e.flags|=32),Kt}function Pt(e,n,o){(e===Fe&&(Ve===2||Ve===9)||e.cancelPendingCommit!==null)&&(Do(e,0),fi(e,Ne,Kt,!1)),Ni(e,o),((Be&2)===0||e!==Fe)&&(e===Fe&&((Be&2)===0&&(Fi|=o),ot===4&&fi(e,Ne,Kt,!1)),Tn(e))}function qm(e,n,o){if((Be&6)!==0)throw Error(a(327));var s=!o&&(n&127)===0&&(n&e.expiredLanes)===0||Ri(e,n),d=s?T0(e,n):Pu(e,n,!0),p=s;do{if(d===0){No&&!s&&fi(e,n,0,!1);break}else{if(o=e.current.alternate,p&&!v0(o)){d=Pu(e,n,!1),p=!1;continue}if(d===2){if(p=n,e.errorRecoveryDisabledLanes&p)var T=0;else T=e.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){n=T;e:{var w=e;d=Nl;var C=w.current.memoizedState.isDehydrated;if(C&&(Do(w,T).flags|=256),T=Pu(w,T,!1),T!==2){if(Mu&&!C){w.errorRecoveryDisabledLanes|=p,Fi|=p,d=4;break e}p=Gt,Gt=d,p!==null&&(Gt===null?Gt=p:Gt.push.apply(Gt,p))}d=T}if(p=!1,d!==2)continue}}if(d===1){Do(e,0),fi(e,n,0,!0);break}e:{switch(s=e,p=d,p){case 0:case 1:throw Error(a(345));case 4:if((n&4194048)!==n)break;case 6:fi(s,n,Kt,!ri);break e;case 2:Gt=null;break;case 3:case 5:break;default:throw Error(a(329))}if((n&62914560)===n&&(d=Ka+300-St(),10<d)){if(fi(s,n,Kt,!ri),no(s,0,!0)!==0)break e;Hn=n,s.timeoutHandle=gh(Vm.bind(null,s,o,Gt,Xa,Du,n,Kt,Fi,Mo,ri,p,"Throttled",-0,0),d);break e}Vm(s,o,Gt,Xa,Du,n,Kt,Fi,Mo,ri,p,null,-0,0)}}break}while(!0);Tn(e)}function Vm(e,n,o,s,d,p,T,w,C,U,H,J,L,P){if(e.timeoutHandle=-1,J=n.subtreeFlags,J&8192||(J&16785408)===16785408){J={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:bn},Dm(n,p,J);var le=(p&62914560)===p?Ka-St():(p&4194048)===p?Gm-St():0;if(le=nE(J,le),le!==null){Hn=p,e.cancelPendingCommit=le($m.bind(null,e,n,p,o,s,d,T,w,C,H,J,null,L,P)),fi(e,p,T,!U);return}}$m(e,n,p,o,s,d,T,w,C)}function v0(e){for(var n=e;;){var o=n.tag;if((o===0||o===11||o===15)&&n.flags&16384&&(o=n.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var s=0;s<o.length;s++){var d=o[s],p=d.getSnapshot;d=d.value;try{if(!Ht(p(),d))return!1}catch{return!1}}if(o=n.child,n.subtreeFlags&16384&&o!==null)o.return=n,n=o;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function fi(e,n,o,s){n&=~Iu,n&=~Fi,e.suspendedLanes|=n,e.pingedLanes&=~n,s&&(e.warmLanes|=n),s=e.expirationTimes;for(var d=n;0<d;){var p=31-wt(d),T=1<<p;s[p]=-1,d&=~T}o!==0&&Qn(e,o,n)}function Qa(){return(Be&6)===0?(Il(0),!1):!0}function Gu(){if(be!==null){if(Ve===0)var e=be.return;else e=be,In=Gi=null,Wr(e),So=null,ml=0,e=be;for(;e!==null;)ym(e.alternate,e),e=e.return;be=null}}function Do(e,n){var o=e.timeoutHandle;o!==-1&&(e.timeoutHandle=-1,B0(o)),o=e.cancelPendingCommit,o!==null&&(e.cancelPendingCommit=null,o()),Hn=0,Gu(),Fe=e,be=o=Nn(e.current,null),Ne=n,Ve=0,Jt=null,ri=!1,No=Ri(e,n),Mu=!1,Mo=Kt=Iu=Fi=ui=ot=0,Gt=Nl=null,Du=!1,(n&8)!==0&&(n|=n&32);var s=e.entangledLanes;if(s!==0)for(e=e.entanglements,s&=n;0<s;){var d=31-wt(s),p=1<<d;n|=e[d],s&=~p}return On=n,ya(),o}function Om(e,n){xe=null,k.H=xl,n===xo||n===_a?(n=nf(),Ve=3):n===Vr?(n=nf(),Ve=4):Ve=n===hu?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,Jt=n,be===null&&(ot=1,qa(e,jt(n,e.current)))}function Hm(){var e=Yt.current;return e===null?!0:(Ne&4194048)===Ne?on===null:(Ne&62914560)===Ne||(Ne&536870912)!==0?e===on:!1}function zm(){var e=k.H;return k.H=xl,e===null?xl:e}function Ym(){var e=k.A;return k.A=g0,e}function Za(){ot=4,ri||(Ne&4194048)!==Ne&&Yt.current!==null||(No=!0),(ui&134217727)===0&&(Fi&134217727)===0||Fe===null||fi(Fe,Ne,Kt,!1)}function Pu(e,n,o){var s=Be;Be|=2;var d=zm(),p=Ym();(Fe!==e||Ne!==n)&&(Xa=null,Do(e,n)),n=!1;var T=ot;e:do try{if(Ve!==0&&be!==null){var w=be,C=Jt;switch(Ve){case 8:Gu(),T=6;break e;case 3:case 2:case 9:case 6:Yt.current===null&&(n=!0);var U=Ve;if(Ve=0,Jt=null,Uo(e,w,C,U),o&&No){T=0;break e}break;default:U=Ve,Ve=0,Jt=null,Uo(e,w,C,U)}}E0(),T=ot;break}catch(H){Om(e,H)}while(!0);return n&&e.shellSuspendCounter++,In=Gi=null,Be=s,k.H=d,k.A=p,be===null&&(Fe=null,Ne=0,ya()),T}function E0(){for(;be!==null;)Fm(be)}function T0(e,n){var o=Be;Be|=2;var s=zm(),d=Ym();Fe!==e||Ne!==n?(Xa=null,$a=St()+500,Do(e,n)):No=Ri(e,n);e:do try{if(Ve!==0&&be!==null){n=be;var p=Jt;t:switch(Ve){case 1:Ve=0,Jt=null,Uo(e,n,p,1);break;case 2:case 9:if(ef(p)){Ve=0,Jt=null,Jm(n);break}n=function(){Ve!==2&&Ve!==9||Fe!==e||(Ve=7),Tn(e)},p.then(n,n);break e;case 3:Ve=7;break e;case 4:Ve=5;break e;case 7:ef(p)?(Ve=0,Jt=null,Jm(n)):(Ve=0,Jt=null,Uo(e,n,p,7));break;case 5:var T=null;switch(be.tag){case 26:T=be.memoizedState;case 5:case 27:var w=be;if(T?Ih(T):w.stateNode.complete){Ve=0,Jt=null;var C=w.sibling;if(C!==null)be=C;else{var U=w.return;U!==null?(be=U,Wa(U)):be=null}break t}}Ve=0,Jt=null,Uo(e,n,p,5);break;case 6:Ve=0,Jt=null,Uo(e,n,p,6);break;case 8:Gu(),ot=6;break e;default:throw Error(a(462))}}x0();break}catch(H){Om(e,H)}while(!0);return In=Gi=null,k.H=s,k.A=d,Be=o,be!==null?0:(Fe=null,Ne=0,ya(),ot)}function x0(){for(;be!==null&&!wn();)Fm(be)}function Fm(e){var n=pm(e.alternate,e,On);e.memoizedProps=e.pendingProps,n===null?Wa(e):be=n}function Jm(e){var n=e,o=n.alternate;switch(n.tag){case 15:case 0:n=um(o,n,n.pendingProps,n.type,void 0,Ne);break;case 11:n=um(o,n,n.pendingProps,n.type.render,n.ref,Ne);break;case 5:Wr(n);default:ym(o,n),n=be=zd(n,On),n=pm(o,n,On)}e.memoizedProps=e.pendingProps,n===null?Wa(e):be=n}function Uo(e,n,o,s){In=Gi=null,Wr(n),So=null,ml=0;var d=n.return;try{if(u0(e,d,n,o,Ne)){ot=1,qa(e,jt(o,e.current)),be=null;return}}catch(p){if(d!==null)throw be=d,p;ot=1,qa(e,jt(o,e.current)),be=null;return}n.flags&32768?(De||s===1?e=!0:No||(Ne&536870912)!==0?e=!1:(ri=e=!0,(s===2||s===9||s===3||s===6)&&(s=Yt.current,s!==null&&s.tag===13&&(s.flags|=16384))),Km(n,e)):Wa(n)}function Wa(e){var n=e;do{if((n.flags&32768)!==0){Km(n,ri);return}e=n.return;var o=f0(n.alternate,n,On);if(o!==null){be=o;return}if(n=n.sibling,n!==null){be=n;return}be=n=e}while(n!==null);ot===0&&(ot=5)}function Km(e,n){do{var o=m0(e.alternate,e);if(o!==null){o.flags&=32767,be=o;return}if(o=e.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!n&&(e=e.sibling,e!==null)){be=e;return}be=e=o}while(e!==null);ot=6,be=null}function $m(e,n,o,s,d,p,T,w,C){e.cancelPendingCommit=null;do ja();while(mt!==0);if((Be&6)!==0)throw Error(a(327));if(n!==null){if(n===e.current)throw Error(a(177));if(p=n.lanes|n.childLanes,p|=_r,ir(e,o,p,T,w,C),e===Fe&&(be=Fe=null,Ne=0),Io=n,di=e,Hn=o,Uu=p,ku=d,Pm=s,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,_0(Kn,function(){return jm(),null})):(e.callbackNode=null,e.callbackPriority=0),s=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||s){s=k.T,k.T=null,d=X.p,X.p=2,T=Be,Be|=4;try{h0(e,n,o)}finally{Be=T,X.p=d,k.T=s}}mt=1,Xm(),Qm(),Zm()}}function Xm(){if(mt===1){mt=0;var e=di,n=Io,o=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||o){o=k.T,k.T=null;var s=X.p;X.p=2;var d=Be;Be|=4;try{Nm(n,e);var p=Xu,T=kd(e.containerInfo),w=p.focusedElem,C=p.selectionRange;if(T!==w&&w&&w.ownerDocument&&Ud(w.ownerDocument.documentElement,w)){if(C!==null&&Tr(w)){var U=C.start,H=C.end;if(H===void 0&&(H=U),"selectionStart"in w)w.selectionStart=U,w.selectionEnd=Math.min(H,w.value.length);else{var J=w.ownerDocument||document,L=J&&J.defaultView||window;if(L.getSelection){var P=L.getSelection(),le=w.textContent.length,pe=Math.min(C.start,le),Ye=C.end===void 0?pe:Math.min(C.end,le);!P.extend&&pe>Ye&&(T=Ye,Ye=pe,pe=T);var I=Dd(w,pe),N=Dd(w,Ye);if(I&&N&&(P.rangeCount!==1||P.anchorNode!==I.node||P.anchorOffset!==I.offset||P.focusNode!==N.node||P.focusOffset!==N.offset)){var D=J.createRange();D.setStart(I.node,I.offset),P.removeAllRanges(),pe>Ye?(P.addRange(D),P.extend(N.node,N.offset)):(D.setEnd(N.node,N.offset),P.addRange(D))}}}}for(J=[],P=w;P=P.parentNode;)P.nodeType===1&&J.push({element:P,left:P.scrollLeft,top:P.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<J.length;w++){var z=J[w];z.element.scrollLeft=z.left,z.element.scrollTop=z.top}}ds=!!$u,Xu=$u=null}finally{Be=d,X.p=s,k.T=o}}e.current=n,mt=2}}function Qm(){if(mt===2){mt=0;var e=di,n=Io,o=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||o){o=k.T,k.T=null;var s=X.p;X.p=2;var d=Be;Be|=4;try{Am(e,n.alternate,n)}finally{Be=d,X.p=s,k.T=o}}mt=3}}function Zm(){if(mt===4||mt===3){mt=0,jl();var e=di,n=Io,o=Hn,s=Pm;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?mt=5:(mt=0,Io=di=null,Wm(e,e.pendingLanes));var d=e.pendingLanes;if(d===0&&(ci=null),jo(o),n=n.stateNode,$e&&typeof $e.onCommitFiberRoot=="function")try{$e.onCommitFiberRoot(bi,n,void 0,(n.current.flags&128)===128)}catch{}if(s!==null){n=k.T,d=X.p,X.p=2,k.T=null;try{for(var p=e.onRecoverableError,T=0;T<s.length;T++){var w=s[T];p(w.value,{componentStack:w.stack})}}finally{k.T=n,X.p=d}}(Hn&3)!==0&&ja(),Tn(e),d=e.pendingLanes,(o&261930)!==0&&(d&42)!==0?e===Lu?Ml++:(Ml=0,Lu=e):Ml=0,Il(0)}}function Wm(e,n){(e.pooledCacheLanes&=n)===0&&(n=e.pooledCache,n!=null&&(e.pooledCache=null,dl(n)))}function ja(){return Xm(),Qm(),Zm(),jm()}function jm(){if(mt!==5)return!1;var e=di,n=Uu;Uu=0;var o=jo(Hn),s=k.T,d=X.p;try{X.p=32>o?32:o,k.T=null,o=ku,ku=null;var p=di,T=Hn;if(mt=0,Io=di=null,Hn=0,(Be&6)!==0)throw Error(a(331));var w=Be;if(Be|=4,km(p.current),Im(p,p.current,T,o),Be=w,Il(0,!1),$e&&typeof $e.onPostCommitFiberRoot=="function")try{$e.onPostCommitFiberRoot(bi,p)}catch{}return!0}finally{X.p=d,k.T=s,Wm(e,n)}}function eh(e,n,o){n=jt(o,n),n=mu(e.stateNode,n,2),e=oi(e,n,2),e!==null&&(Ni(e,2),Tn(e))}function Oe(e,n,o){if(e.tag===3)eh(e,e,o);else for(;n!==null;){if(n.tag===3){eh(n,e,o);break}else if(n.tag===1){var s=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(ci===null||!ci.has(s))){e=jt(o,e),o=tm(2),s=oi(n,o,2),s!==null&&(nm(o,s,n,e),Ni(s,2),Tn(s));break}}n=n.return}}function Bu(e,n,o){var s=e.pingCache;if(s===null){s=e.pingCache=new y0;var d=new Set;s.set(n,d)}else d=s.get(n),d===void 0&&(d=new Set,s.set(n,d));d.has(o)||(Mu=!0,d.add(o),e=S0.bind(null,e,n,o),n.then(e,e))}function S0(e,n,o){var s=e.pingCache;s!==null&&s.delete(n),e.pingedLanes|=e.suspendedLanes&o,e.warmLanes&=~o,Fe===e&&(Ne&o)===o&&(ot===4||ot===3&&(Ne&62914560)===Ne&&300>St()-Ka?(Be&2)===0&&Do(e,0):Iu|=o,Mo===Ne&&(Mo=0)),Tn(e)}function th(e,n){n===0&&(n=ta()),e=Ui(e,n),e!==null&&(Ni(e,n),Tn(e))}function w0(e){var n=e.memoizedState,o=0;n!==null&&(o=n.retryLane),th(e,o)}function A0(e,n){var o=0;switch(e.tag){case 31:case 13:var s=e.stateNode,d=e.memoizedState;d!==null&&(o=d.retryLane);break;case 19:s=e.stateNode;break;case 22:s=e.stateNode._retryCache;break;default:throw Error(a(314))}s!==null&&s.delete(n),th(e,o)}function _0(e,n){return rn(e,n)}var es=null,ko=null,qu=!1,ts=!1,Vu=!1,mi=0;function Tn(e){e!==ko&&e.next===null&&(ko===null?es=ko=e:ko=ko.next=e),ts=!0,qu||(qu=!0,b0())}function Il(e,n){if(!Vu&&ts){Vu=!0;do for(var o=!1,s=es;s!==null;){if(e!==0){var d=s.pendingLanes;if(d===0)var p=0;else{var T=s.suspendedLanes,w=s.pingedLanes;p=(1<<31-wt(42|e)+1)-1,p&=d&~(T&~w),p=p&201326741?p&201326741|1:p?p|2:0}p!==0&&(o=!0,lh(s,p))}else p=Ne,p=no(s,s===Fe?p:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),(p&3)===0||Ri(s,p)||(o=!0,lh(s,p));s=s.next}while(o);Vu=!1}}function C0(){nh()}function nh(){ts=qu=!1;var e=0;mi!==0&&P0()&&(e=mi);for(var n=St(),o=null,s=es;s!==null;){var d=s.next,p=ih(s,n);p===0?(s.next=null,o===null?es=d:o.next=d,d===null&&(ko=o)):(o=s,(e!==0||(p&3)!==0)&&(ts=!0)),s=d}mt!==0&&mt!==5||Il(e),mi!==0&&(mi=0)}function ih(e,n){for(var o=e.suspendedLanes,s=e.pingedLanes,d=e.expirationTimes,p=e.pendingLanes&-62914561;0<p;){var T=31-wt(p),w=1<<T,C=d[T];C===-1?((w&o)===0||(w&s)!==0)&&(d[T]=nr(w,n)):C<=n&&(e.expiredLanes|=w),p&=~w}if(n=Fe,o=Ne,o=no(e,e===n?o:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),s=e.callbackNode,o===0||e===n&&(Ve===2||Ve===9)||e.cancelPendingCommit!==null)return s!==null&&s!==null&&Ci(s),e.callbackNode=null,e.callbackPriority=0;if((o&3)===0||Ri(e,o)){if(n=o&-o,n===e.callbackPriority)return n;switch(s!==null&&Ci(s),jo(o)){case 2:case 8:o=An;break;case 32:o=Kn;break;case 268435456:o=Qo;break;default:o=Kn}return s=oh.bind(null,e),o=rn(o,s),e.callbackPriority=n,e.callbackNode=o,n}return s!==null&&s!==null&&Ci(s),e.callbackPriority=2,e.callbackNode=null,2}function oh(e,n){if(mt!==0&&mt!==5)return e.callbackNode=null,e.callbackPriority=0,null;var o=e.callbackNode;if(ja()&&e.callbackNode!==o)return null;var s=Ne;return s=no(e,e===Fe?s:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),s===0?null:(qm(e,s,n),ih(e,St()),e.callbackNode!=null&&e.callbackNode===o?oh.bind(null,e):null)}function lh(e,n){if(ja())return null;qm(e,n,!0)}function b0(){q0(function(){(Be&6)!==0?rn(eo,C0):nh()})}function Ou(){if(mi===0){var e=Eo;e===0&&(e=$n,$n<<=1,($n&261888)===0&&($n=256)),mi=e}return mi}function ah(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:ua(""+e)}function sh(e,n){var o=n.ownerDocument.createElement("input");return o.name=n.name,o.value=n.value,e.id&&o.setAttribute("form",e.id),n.parentNode.insertBefore(o,n),e=new FormData(e),o.parentNode.removeChild(o),e}function R0(e,n,o,s,d){if(n==="submit"&&o&&o.stateNode===d){var p=ah((d[At]||null).action),T=s.submitter;T&&(n=(n=T[At]||null)?ah(n.formAction):T.getAttribute("formAction"),n!==null&&(p=n,T=null));var w=new ma("action","action",null,s,d);e.push({event:w,listeners:[{instance:null,listener:function(){if(s.defaultPrevented){if(mi!==0){var C=T?sh(d,T):new FormData(d);su(o,{pending:!0,data:C,method:d.method,action:p},null,C)}}else typeof p=="function"&&(w.preventDefault(),C=T?sh(d,T):new FormData(d),su(o,{pending:!0,data:C,method:d.method,action:p},p,C))},currentTarget:d}]})}}for(var Hu=0;Hu<Ar.length;Hu++){var zu=Ar[Hu],N0=zu.toLowerCase(),M0=zu[0].toUpperCase()+zu.slice(1);cn(N0,"on"+M0)}cn(Pd,"onAnimationEnd"),cn(Bd,"onAnimationIteration"),cn(qd,"onAnimationStart"),cn("dblclick","onDoubleClick"),cn("focusin","onFocus"),cn("focusout","onBlur"),cn(Jv,"onTransitionRun"),cn(Kv,"onTransitionStart"),cn($v,"onTransitionCancel"),cn(Vd,"onTransitionEnd"),oo("onMouseEnter",["mouseout","mouseover"]),oo("onMouseLeave",["mouseout","mouseover"]),oo("onPointerEnter",["pointerout","pointerover"]),oo("onPointerLeave",["pointerout","pointerover"]),gn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),gn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),gn("onBeforeInput",["compositionend","keypress","textInput","paste"]),gn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),gn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),gn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Dl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),I0=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Dl));function rh(e,n){n=(n&4)!==0;for(var o=0;o<e.length;o++){var s=e[o],d=s.event;s=s.listeners;e:{var p=void 0;if(n)for(var T=s.length-1;0<=T;T--){var w=s[T],C=w.instance,U=w.currentTarget;if(w=w.listener,C!==p&&d.isPropagationStopped())break e;p=w,d.currentTarget=U;try{p(d)}catch(H){ga(H)}d.currentTarget=null,p=C}else for(T=0;T<s.length;T++){if(w=s[T],C=w.instance,U=w.currentTarget,w=w.listener,C!==p&&d.isPropagationStopped())break e;p=w,d.currentTarget=U;try{p(d)}catch(H){ga(H)}d.currentTarget=null,p=C}}}}function Re(e,n){var o=n[q];o===void 0&&(o=n[q]=new Set);var s=e+"__bubble";o.has(s)||(uh(n,e,2,!1),o.add(s))}function Yu(e,n,o){var s=0;n&&(s|=4),uh(o,e,s,n)}var ns="_reactListening"+Math.random().toString(36).slice(2);function Fu(e){if(!e[ns]){e[ns]=!0,io.forEach(function(o){o!=="selectionchange"&&(I0.has(o)||Yu(o,!1,e),Yu(o,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[ns]||(n[ns]=!0,Yu("selectionchange",!1,n))}}function uh(e,n,o,s){switch(Bh(n)){case 2:var d=lE;break;case 8:d=aE;break;default:d=ac}o=d.bind(null,n,o,e),d=void 0,!dr||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(d=!0),s?d!==void 0?e.addEventListener(n,o,{capture:!0,passive:d}):e.addEventListener(n,o,!0):d!==void 0?e.addEventListener(n,o,{passive:d}):e.addEventListener(n,o,!1)}function Ju(e,n,o,s,d){var p=s;if((n&1)===0&&(n&2)===0&&s!==null)e:for(;;){if(s===null)return;var T=s.tag;if(T===3||T===4){var w=s.stateNode.containerInfo;if(w===d)break;if(T===4)for(T=s.return;T!==null;){var C=T.tag;if((C===3||C===4)&&T.stateNode.containerInfo===d)return;T=T.return}for(;w!==null;){if(T=ue(w),T===null)return;if(C=T.tag,C===5||C===6||C===26||C===27){s=p=T;continue e}w=w.parentNode}}s=s.return}md(function(){var U=p,H=ur(o),J=[];e:{var L=Od.get(e);if(L!==void 0){var P=ma,le=e;switch(e){case"keypress":if(da(o)===0)break e;case"keydown":case"keyup":P=Av;break;case"focusin":le="focus",P=pr;break;case"focusout":le="blur",P=pr;break;case"beforeblur":case"afterblur":P=pr;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":P=gd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":P=fv;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":P=bv;break;case Pd:case Bd:case qd:P=pv;break;case Vd:P=Nv;break;case"scroll":case"scrollend":P=cv;break;case"wheel":P=Iv;break;case"copy":case"cut":case"paste":P=yv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":P=vd;break;case"toggle":case"beforetoggle":P=Uv}var pe=(n&4)!==0,Ye=!pe&&(e==="scroll"||e==="scrollend"),I=pe?L!==null?L+"Capture":null:L;pe=[];for(var N=U,D;N!==null;){var z=N;if(D=z.stateNode,z=z.tag,z!==5&&z!==26&&z!==27||D===null||I===null||(z=el(N,I),z!=null&&pe.push(Ul(N,z,D))),Ye)break;N=N.return}0<pe.length&&(L=new P(L,le,null,o,H),J.push({event:L,listeners:pe}))}}if((n&7)===0){e:{if(L=e==="mouseover"||e==="pointerover",P=e==="mouseout"||e==="pointerout",L&&o!==rr&&(le=o.relatedTarget||o.fromElement)&&(ue(le)||le[_n]))break e;if((P||L)&&(L=H.window===H?H:(L=H.ownerDocument)?L.defaultView||L.parentWindow:window,P?(le=o.relatedTarget||o.toElement,P=U,le=le?ue(le):null,le!==null&&(Ye=c(le),pe=le.tag,le!==Ye||pe!==5&&pe!==27&&pe!==6)&&(le=null)):(P=null,le=U),P!==le)){if(pe=gd,z="onMouseLeave",I="onMouseEnter",N="mouse",(e==="pointerout"||e==="pointerover")&&(pe=vd,z="onPointerLeave",I="onPointerEnter",N="pointer"),Ye=P==null?L:et(P),D=le==null?L:et(le),L=new pe(z,N+"leave",P,o,H),L.target=Ye,L.relatedTarget=D,z=null,ue(H)===U&&(pe=new pe(I,N+"enter",le,o,H),pe.target=D,pe.relatedTarget=Ye,z=pe),Ye=z,P&&le)t:{for(pe=D0,I=P,N=le,D=0,z=I;z;z=pe(z))D++;z=0;for(var fe=N;fe;fe=pe(fe))z++;for(;0<D-z;)I=pe(I),D--;for(;0<z-D;)N=pe(N),z--;for(;D--;){if(I===N||N!==null&&I===N.alternate){pe=I;break t}I=pe(I),N=pe(N)}pe=null}else pe=null;P!==null&&ch(J,L,P,pe,!1),le!==null&&Ye!==null&&ch(J,Ye,le,pe,!0)}}e:{if(L=U?et(U):window,P=L.nodeName&&L.nodeName.toLowerCase(),P==="select"||P==="input"&&L.type==="file")var Le=Cd;else if(Ad(L))if(bd)Le=zv;else{Le=Ov;var re=Vv}else P=L.nodeName,!P||P.toLowerCase()!=="input"||L.type!=="checkbox"&&L.type!=="radio"?U&&sr(U.elementType)&&(Le=Cd):Le=Hv;if(Le&&(Le=Le(e,U))){_d(J,Le,o,H);break e}re&&re(e,L,U),e==="focusout"&&U&&L.type==="number"&&U.memoizedProps.value!=null&&ar(L,"number",L.value)}switch(re=U?et(U):window,e){case"focusin":(Ad(re)||re.contentEditable==="true")&&(co=re,xr=U,rl=null);break;case"focusout":rl=xr=co=null;break;case"mousedown":Sr=!0;break;case"contextmenu":case"mouseup":case"dragend":Sr=!1,Ld(J,o,H);break;case"selectionchange":if(Fv)break;case"keydown":case"keyup":Ld(J,o,H)}var Se;if(yr)e:{switch(e){case"compositionstart":var Me="onCompositionStart";break e;case"compositionend":Me="onCompositionEnd";break e;case"compositionupdate":Me="onCompositionUpdate";break e}Me=void 0}else uo?Sd(e,o)&&(Me="onCompositionEnd"):e==="keydown"&&o.keyCode===229&&(Me="onCompositionStart");Me&&(Ed&&o.locale!=="ko"&&(uo||Me!=="onCompositionStart"?Me==="onCompositionEnd"&&uo&&(Se=hd()):(Zn=H,fr="value"in Zn?Zn.value:Zn.textContent,uo=!0)),re=is(U,Me),0<re.length&&(Me=new yd(Me,e,null,o,H),J.push({event:Me,listeners:re}),Se?Me.data=Se:(Se=wd(o),Se!==null&&(Me.data=Se)))),(Se=Lv?Gv(e,o):Pv(e,o))&&(Me=is(U,"onBeforeInput"),0<Me.length&&(re=new yd("onBeforeInput","beforeinput",null,o,H),J.push({event:re,listeners:Me}),re.data=Se)),R0(J,e,U,o,H)}rh(J,n)})}function Ul(e,n,o){return{instance:e,listener:n,currentTarget:o}}function is(e,n){for(var o=n+"Capture",s=[];e!==null;){var d=e,p=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||p===null||(d=el(e,o),d!=null&&s.unshift(Ul(e,d,p)),d=el(e,n),d!=null&&s.push(Ul(e,d,p))),e.tag===3)return s;e=e.return}return[]}function D0(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function ch(e,n,o,s,d){for(var p=n._reactName,T=[];o!==null&&o!==s;){var w=o,C=w.alternate,U=w.stateNode;if(w=w.tag,C!==null&&C===s)break;w!==5&&w!==26&&w!==27||U===null||(C=U,d?(U=el(o,p),U!=null&&T.unshift(Ul(o,U,C))):d||(U=el(o,p),U!=null&&T.push(Ul(o,U,C)))),o=o.return}T.length!==0&&e.push({event:n,listeners:T})}var U0=/\r\n?/g,k0=/\u0000|\uFFFD/g;function dh(e){return(typeof e=="string"?e:""+e).replace(U0,`
`).replace(k0,"")}function fh(e,n){return n=dh(n),dh(e)===n}function ze(e,n,o,s,d,p){switch(o){case"children":typeof s=="string"?n==="body"||n==="textarea"&&s===""||ao(e,s):(typeof s=="number"||typeof s=="bigint")&&n!=="body"&&ao(e,""+s);break;case"className":sa(e,"class",s);break;case"tabIndex":sa(e,"tabindex",s);break;case"dir":case"role":case"viewBox":case"width":case"height":sa(e,o,s);break;case"style":dd(e,s,p);break;case"data":if(n!=="object"){sa(e,"data",s);break}case"src":case"href":if(s===""&&(n!=="a"||o!=="href")){e.removeAttribute(o);break}if(s==null||typeof s=="function"||typeof s=="symbol"||typeof s=="boolean"){e.removeAttribute(o);break}s=ua(""+s),e.setAttribute(o,s);break;case"action":case"formAction":if(typeof s=="function"){e.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof p=="function"&&(o==="formAction"?(n!=="input"&&ze(e,n,"name",d.name,d,null),ze(e,n,"formEncType",d.formEncType,d,null),ze(e,n,"formMethod",d.formMethod,d,null),ze(e,n,"formTarget",d.formTarget,d,null)):(ze(e,n,"encType",d.encType,d,null),ze(e,n,"method",d.method,d,null),ze(e,n,"target",d.target,d,null)));if(s==null||typeof s=="symbol"||typeof s=="boolean"){e.removeAttribute(o);break}s=ua(""+s),e.setAttribute(o,s);break;case"onClick":s!=null&&(e.onclick=bn);break;case"onScroll":s!=null&&Re("scroll",e);break;case"onScrollEnd":s!=null&&Re("scrollend",e);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(a(61));if(o=s.__html,o!=null){if(d.children!=null)throw Error(a(60));e.innerHTML=o}}break;case"multiple":e.multiple=s&&typeof s!="function"&&typeof s!="symbol";break;case"muted":e.muted=s&&typeof s!="function"&&typeof s!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(s==null||typeof s=="function"||typeof s=="boolean"||typeof s=="symbol"){e.removeAttribute("xlink:href");break}o=ua(""+s),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":s!=null&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(o,""+s):e.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":s&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(o,""):e.removeAttribute(o);break;case"capture":case"download":s===!0?e.setAttribute(o,""):s!==!1&&s!=null&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(o,s):e.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":s!=null&&typeof s!="function"&&typeof s!="symbol"&&!isNaN(s)&&1<=s?e.setAttribute(o,s):e.removeAttribute(o);break;case"rowSpan":case"start":s==null||typeof s=="function"||typeof s=="symbol"||isNaN(s)?e.removeAttribute(o):e.setAttribute(o,s);break;case"popover":Re("beforetoggle",e),Re("toggle",e),aa(e,"popover",s);break;case"xlinkActuate":Cn(e,"http://www.w3.org/1999/xlink","xlink:actuate",s);break;case"xlinkArcrole":Cn(e,"http://www.w3.org/1999/xlink","xlink:arcrole",s);break;case"xlinkRole":Cn(e,"http://www.w3.org/1999/xlink","xlink:role",s);break;case"xlinkShow":Cn(e,"http://www.w3.org/1999/xlink","xlink:show",s);break;case"xlinkTitle":Cn(e,"http://www.w3.org/1999/xlink","xlink:title",s);break;case"xlinkType":Cn(e,"http://www.w3.org/1999/xlink","xlink:type",s);break;case"xmlBase":Cn(e,"http://www.w3.org/XML/1998/namespace","xml:base",s);break;case"xmlLang":Cn(e,"http://www.w3.org/XML/1998/namespace","xml:lang",s);break;case"xmlSpace":Cn(e,"http://www.w3.org/XML/1998/namespace","xml:space",s);break;case"is":aa(e,"is",s);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=rv.get(o)||o,aa(e,o,s))}}function Ku(e,n,o,s,d,p){switch(o){case"style":dd(e,s,p);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(a(61));if(o=s.__html,o!=null){if(d.children!=null)throw Error(a(60));e.innerHTML=o}}break;case"children":typeof s=="string"?ao(e,s):(typeof s=="number"||typeof s=="bigint")&&ao(e,""+s);break;case"onScroll":s!=null&&Re("scroll",e);break;case"onScrollEnd":s!=null&&Re("scrollend",e);break;case"onClick":s!=null&&(e.onclick=bn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ot.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(d=o.endsWith("Capture"),n=o.slice(2,d?o.length-7:void 0),p=e[At]||null,p=p!=null?p[o]:null,typeof p=="function"&&e.removeEventListener(n,p,d),typeof s=="function")){typeof p!="function"&&p!==null&&(o in e?e[o]=null:e.hasAttribute(o)&&e.removeAttribute(o)),e.addEventListener(n,s,d);break e}o in e?e[o]=s:s===!0?e.setAttribute(o,""):aa(e,o,s)}}}function xt(e,n,o){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Re("error",e),Re("load",e);var s=!1,d=!1,p;for(p in o)if(o.hasOwnProperty(p)){var T=o[p];if(T!=null)switch(p){case"src":s=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,n));default:ze(e,n,p,T,o,null)}}d&&ze(e,n,"srcSet",o.srcSet,o,null),s&&ze(e,n,"src",o.src,o,null);return;case"input":Re("invalid",e);var w=p=T=d=null,C=null,U=null;for(s in o)if(o.hasOwnProperty(s)){var H=o[s];if(H!=null)switch(s){case"name":d=H;break;case"type":T=H;break;case"checked":C=H;break;case"defaultChecked":U=H;break;case"value":p=H;break;case"defaultValue":w=H;break;case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(a(137,n));break;default:ze(e,n,s,H,o,null)}}sd(e,p,w,C,U,T,d,!1);return;case"select":Re("invalid",e),s=T=p=null;for(d in o)if(o.hasOwnProperty(d)&&(w=o[d],w!=null))switch(d){case"value":p=w;break;case"defaultValue":T=w;break;case"multiple":s=w;default:ze(e,n,d,w,o,null)}n=p,o=T,e.multiple=!!s,n!=null?lo(e,!!s,n,!1):o!=null&&lo(e,!!s,o,!0);return;case"textarea":Re("invalid",e),p=d=s=null;for(T in o)if(o.hasOwnProperty(T)&&(w=o[T],w!=null))switch(T){case"value":s=w;break;case"defaultValue":d=w;break;case"children":p=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(a(91));break;default:ze(e,n,T,w,o,null)}ud(e,s,d,p);return;case"option":for(C in o)if(o.hasOwnProperty(C)&&(s=o[C],s!=null))switch(C){case"selected":e.selected=s&&typeof s!="function"&&typeof s!="symbol";break;default:ze(e,n,C,s,o,null)}return;case"dialog":Re("beforetoggle",e),Re("toggle",e),Re("cancel",e),Re("close",e);break;case"iframe":case"object":Re("load",e);break;case"video":case"audio":for(s=0;s<Dl.length;s++)Re(Dl[s],e);break;case"image":Re("error",e),Re("load",e);break;case"details":Re("toggle",e);break;case"embed":case"source":case"link":Re("error",e),Re("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(U in o)if(o.hasOwnProperty(U)&&(s=o[U],s!=null))switch(U){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,n));default:ze(e,n,U,s,o,null)}return;default:if(sr(n)){for(H in o)o.hasOwnProperty(H)&&(s=o[H],s!==void 0&&Ku(e,n,H,s,o,void 0));return}}for(w in o)o.hasOwnProperty(w)&&(s=o[w],s!=null&&ze(e,n,w,s,o,null))}function L0(e,n,o,s){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,p=null,T=null,w=null,C=null,U=null,H=null;for(P in o){var J=o[P];if(o.hasOwnProperty(P)&&J!=null)switch(P){case"checked":break;case"value":break;case"defaultValue":C=J;default:s.hasOwnProperty(P)||ze(e,n,P,null,s,J)}}for(var L in s){var P=s[L];if(J=o[L],s.hasOwnProperty(L)&&(P!=null||J!=null))switch(L){case"type":p=P;break;case"name":d=P;break;case"checked":U=P;break;case"defaultChecked":H=P;break;case"value":T=P;break;case"defaultValue":w=P;break;case"children":case"dangerouslySetInnerHTML":if(P!=null)throw Error(a(137,n));break;default:P!==J&&ze(e,n,L,P,s,J)}}lr(e,T,w,C,U,H,p,d);return;case"select":P=T=w=L=null;for(p in o)if(C=o[p],o.hasOwnProperty(p)&&C!=null)switch(p){case"value":break;case"multiple":P=C;default:s.hasOwnProperty(p)||ze(e,n,p,null,s,C)}for(d in s)if(p=s[d],C=o[d],s.hasOwnProperty(d)&&(p!=null||C!=null))switch(d){case"value":L=p;break;case"defaultValue":w=p;break;case"multiple":T=p;default:p!==C&&ze(e,n,d,p,s,C)}n=w,o=T,s=P,L!=null?lo(e,!!o,L,!1):!!s!=!!o&&(n!=null?lo(e,!!o,n,!0):lo(e,!!o,o?[]:"",!1));return;case"textarea":P=L=null;for(w in o)if(d=o[w],o.hasOwnProperty(w)&&d!=null&&!s.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:ze(e,n,w,null,s,d)}for(T in s)if(d=s[T],p=o[T],s.hasOwnProperty(T)&&(d!=null||p!=null))switch(T){case"value":L=d;break;case"defaultValue":P=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(a(91));break;default:d!==p&&ze(e,n,T,d,s,p)}rd(e,L,P);return;case"option":for(var le in o)if(L=o[le],o.hasOwnProperty(le)&&L!=null&&!s.hasOwnProperty(le))switch(le){case"selected":e.selected=!1;break;default:ze(e,n,le,null,s,L)}for(C in s)if(L=s[C],P=o[C],s.hasOwnProperty(C)&&L!==P&&(L!=null||P!=null))switch(C){case"selected":e.selected=L&&typeof L!="function"&&typeof L!="symbol";break;default:ze(e,n,C,L,s,P)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var pe in o)L=o[pe],o.hasOwnProperty(pe)&&L!=null&&!s.hasOwnProperty(pe)&&ze(e,n,pe,null,s,L);for(U in s)if(L=s[U],P=o[U],s.hasOwnProperty(U)&&L!==P&&(L!=null||P!=null))switch(U){case"children":case"dangerouslySetInnerHTML":if(L!=null)throw Error(a(137,n));break;default:ze(e,n,U,L,s,P)}return;default:if(sr(n)){for(var Ye in o)L=o[Ye],o.hasOwnProperty(Ye)&&L!==void 0&&!s.hasOwnProperty(Ye)&&Ku(e,n,Ye,void 0,s,L);for(H in s)L=s[H],P=o[H],!s.hasOwnProperty(H)||L===P||L===void 0&&P===void 0||Ku(e,n,H,L,s,P);return}}for(var I in o)L=o[I],o.hasOwnProperty(I)&&L!=null&&!s.hasOwnProperty(I)&&ze(e,n,I,null,s,L);for(J in s)L=s[J],P=o[J],!s.hasOwnProperty(J)||L===P||L==null&&P==null||ze(e,n,J,L,s,P)}function mh(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function G0(){if(typeof performance.getEntriesByType=="function"){for(var e=0,n=0,o=performance.getEntriesByType("resource"),s=0;s<o.length;s++){var d=o[s],p=d.transferSize,T=d.initiatorType,w=d.duration;if(p&&w&&mh(T)){for(T=0,w=d.responseEnd,s+=1;s<o.length;s++){var C=o[s],U=C.startTime;if(U>w)break;var H=C.transferSize,J=C.initiatorType;H&&mh(J)&&(C=C.responseEnd,T+=H*(C<w?1:(w-U)/(C-U)))}if(--s,n+=8*(p+T)/(d.duration/1e3),e++,10<e)break}}if(0<e)return n/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var $u=null,Xu=null;function os(e){return e.nodeType===9?e:e.ownerDocument}function hh(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ph(e,n){if(e===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&n==="foreignObject"?0:e}function Qu(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var Zu=null;function P0(){var e=window.event;return e&&e.type==="popstate"?e===Zu?!1:(Zu=e,!0):(Zu=null,!1)}var gh=typeof setTimeout=="function"?setTimeout:void 0,B0=typeof clearTimeout=="function"?clearTimeout:void 0,yh=typeof Promise=="function"?Promise:void 0,q0=typeof queueMicrotask=="function"?queueMicrotask:typeof yh<"u"?function(e){return yh.resolve(null).then(e).catch(V0)}:gh;function V0(e){setTimeout(function(){throw e})}function hi(e){return e==="head"}function vh(e,n){var o=n,s=0;do{var d=o.nextSibling;if(e.removeChild(o),d&&d.nodeType===8)if(o=d.data,o==="/$"||o==="/&"){if(s===0){e.removeChild(d),Bo(n);return}s--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")s++;else if(o==="html")kl(e.ownerDocument.documentElement);else if(o==="head"){o=e.ownerDocument.head,kl(o);for(var p=o.firstChild;p;){var T=p.nextSibling,w=p.nodeName;p[ne]||w==="SCRIPT"||w==="STYLE"||w==="LINK"&&p.rel.toLowerCase()==="stylesheet"||o.removeChild(p),p=T}}else o==="body"&&kl(e.ownerDocument.body);o=d}while(o);Bo(n)}function Eh(e,n){var o=e;e=0;do{var s=o.nextSibling;if(o.nodeType===1?n?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(n?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),s&&s.nodeType===8)if(o=s.data,o==="/$"){if(e===0)break;e--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||e++;o=s}while(o)}function Wu(e){var n=e.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var o=n;switch(n=n.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Wu(o),ce(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}e.removeChild(o)}}function O0(e,n,o,s){for(;e.nodeType===1;){var d=o;if(e.nodeName.toLowerCase()!==n.toLowerCase()){if(!s&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(s){if(!e[ne])switch(n){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(p=e.getAttribute("rel"),p==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(p!==d.rel||e.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||e.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||e.getAttribute("title")!==(d.title==null?null:d.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(p=e.getAttribute("src"),(p!==(d.src==null?null:d.src)||e.getAttribute("type")!==(d.type==null?null:d.type)||e.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&p&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(n==="input"&&e.type==="hidden"){var p=d.name==null?null:""+d.name;if(d.type==="hidden"&&e.getAttribute("name")===p)return e}else return e;if(e=ln(e.nextSibling),e===null)break}return null}function H0(e,n,o){if(n==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!o||(e=ln(e.nextSibling),e===null))return null;return e}function Th(e,n){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=ln(e.nextSibling),e===null))return null;return e}function ju(e){return e.data==="$?"||e.data==="$~"}function ec(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function z0(e,n){var o=e.ownerDocument;if(e.data==="$~")e._reactRetry=n;else if(e.data!=="$?"||o.readyState!=="loading")n();else{var s=function(){n(),o.removeEventListener("DOMContentLoaded",s)};o.addEventListener("DOMContentLoaded",s),e._reactRetry=s}}function ln(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"||n==="F!"||n==="F")break;if(n==="/$"||n==="/&")return null}}return e}var tc=null;function xh(e){e=e.nextSibling;for(var n=0;e;){if(e.nodeType===8){var o=e.data;if(o==="/$"||o==="/&"){if(n===0)return ln(e.nextSibling);n--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||n++}e=e.nextSibling}return null}function Sh(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var o=e.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(n===0)return e;n--}else o!=="/$"&&o!=="/&"||n++}e=e.previousSibling}return null}function wh(e,n,o){switch(n=os(o),e){case"html":if(e=n.documentElement,!e)throw Error(a(452));return e;case"head":if(e=n.head,!e)throw Error(a(453));return e;case"body":if(e=n.body,!e)throw Error(a(454));return e;default:throw Error(a(451))}}function kl(e){for(var n=e.attributes;n.length;)e.removeAttributeNode(n[0]);ce(e)}var an=new Map,Ah=new Set;function ls(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var zn=X.d;X.d={f:Y0,r:F0,D:J0,C:K0,L:$0,m:X0,X:Z0,S:Q0,M:W0};function Y0(){var e=zn.f(),n=Qa();return e||n}function F0(e){var n=de(e);n!==null&&n.tag===5&&n.type==="form"?Of(n):zn.r(e)}var Lo=typeof document>"u"?null:document;function _h(e,n,o){var s=Lo;if(s&&typeof n=="string"&&n){var d=Zt(n);d='link[rel="'+e+'"][href="'+d+'"]',typeof o=="string"&&(d+='[crossorigin="'+o+'"]'),Ah.has(d)||(Ah.add(d),e={rel:e,crossOrigin:o,href:n},s.querySelector(d)===null&&(n=s.createElement("link"),xt(n,"link",e),Xe(n),s.head.appendChild(n)))}}function J0(e){zn.D(e),_h("dns-prefetch",e,null)}function K0(e,n){zn.C(e,n),_h("preconnect",e,n)}function $0(e,n,o){zn.L(e,n,o);var s=Lo;if(s&&e&&n){var d='link[rel="preload"][as="'+Zt(n)+'"]';n==="image"&&o&&o.imageSrcSet?(d+='[imagesrcset="'+Zt(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(d+='[imagesizes="'+Zt(o.imageSizes)+'"]')):d+='[href="'+Zt(e)+'"]';var p=d;switch(n){case"style":p=Go(e);break;case"script":p=Po(e)}an.has(p)||(e=x({rel:"preload",href:n==="image"&&o&&o.imageSrcSet?void 0:e,as:n},o),an.set(p,e),s.querySelector(d)!==null||n==="style"&&s.querySelector(Ll(p))||n==="script"&&s.querySelector(Gl(p))||(n=s.createElement("link"),xt(n,"link",e),Xe(n),s.head.appendChild(n)))}}function X0(e,n){zn.m(e,n);var o=Lo;if(o&&e){var s=n&&typeof n.as=="string"?n.as:"script",d='link[rel="modulepreload"][as="'+Zt(s)+'"][href="'+Zt(e)+'"]',p=d;switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":p=Po(e)}if(!an.has(p)&&(e=x({rel:"modulepreload",href:e},n),an.set(p,e),o.querySelector(d)===null)){switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Gl(p)))return}s=o.createElement("link"),xt(s,"link",e),Xe(s),o.head.appendChild(s)}}}function Q0(e,n,o){zn.S(e,n,o);var s=Lo;if(s&&e){var d=qe(s).hoistableStyles,p=Go(e);n=n||"default";var T=d.get(p);if(!T){var w={loading:0,preload:null};if(T=s.querySelector(Ll(p)))w.loading=5;else{e=x({rel:"stylesheet",href:e,"data-precedence":n},o),(o=an.get(p))&&nc(e,o);var C=T=s.createElement("link");Xe(C),xt(C,"link",e),C._p=new Promise(function(U,H){C.onload=U,C.onerror=H}),C.addEventListener("load",function(){w.loading|=1}),C.addEventListener("error",function(){w.loading|=2}),w.loading|=4,as(T,n,s)}T={type:"stylesheet",instance:T,count:1,state:w},d.set(p,T)}}}function Z0(e,n){zn.X(e,n);var o=Lo;if(o&&e){var s=qe(o).hoistableScripts,d=Po(e),p=s.get(d);p||(p=o.querySelector(Gl(d)),p||(e=x({src:e,async:!0},n),(n=an.get(d))&&ic(e,n),p=o.createElement("script"),Xe(p),xt(p,"link",e),o.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},s.set(d,p))}}function W0(e,n){zn.M(e,n);var o=Lo;if(o&&e){var s=qe(o).hoistableScripts,d=Po(e),p=s.get(d);p||(p=o.querySelector(Gl(d)),p||(e=x({src:e,async:!0,type:"module"},n),(n=an.get(d))&&ic(e,n),p=o.createElement("script"),Xe(p),xt(p,"link",e),o.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},s.set(d,p))}}function Ch(e,n,o,s){var d=(d=Ae.current)?ls(d):null;if(!d)throw Error(a(446));switch(e){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(n=Go(o.href),o=qe(d).hoistableStyles,s=o.get(n),s||(s={type:"style",instance:null,count:0,state:null},o.set(n,s)),s):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){e=Go(o.href);var p=qe(d).hoistableStyles,T=p.get(e);if(T||(d=d.ownerDocument||d,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},p.set(e,T),(p=d.querySelector(Ll(e)))&&!p._p&&(T.instance=p,T.state.loading=5),an.has(e)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},an.set(e,o),p||j0(d,e,o,T.state))),n&&s===null)throw Error(a(528,""));return T}if(n&&s!==null)throw Error(a(529,""));return null;case"script":return n=o.async,o=o.src,typeof o=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=Po(o),o=qe(d).hoistableScripts,s=o.get(n),s||(s={type:"script",instance:null,count:0,state:null},o.set(n,s)),s):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,e))}}function Go(e){return'href="'+Zt(e)+'"'}function Ll(e){return'link[rel="stylesheet"]['+e+"]"}function bh(e){return x({},e,{"data-precedence":e.precedence,precedence:null})}function j0(e,n,o,s){e.querySelector('link[rel="preload"][as="style"]['+n+"]")?s.loading=1:(n=e.createElement("link"),s.preload=n,n.addEventListener("load",function(){return s.loading|=1}),n.addEventListener("error",function(){return s.loading|=2}),xt(n,"link",o),Xe(n),e.head.appendChild(n))}function Po(e){return'[src="'+Zt(e)+'"]'}function Gl(e){return"script[async]"+e}function Rh(e,n,o){if(n.count++,n.instance===null)switch(n.type){case"style":var s=e.querySelector('style[data-href~="'+Zt(o.href)+'"]');if(s)return n.instance=s,Xe(s),s;var d=x({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return s=(e.ownerDocument||e).createElement("style"),Xe(s),xt(s,"style",d),as(s,o.precedence,e),n.instance=s;case"stylesheet":d=Go(o.href);var p=e.querySelector(Ll(d));if(p)return n.state.loading|=4,n.instance=p,Xe(p),p;s=bh(o),(d=an.get(d))&&nc(s,d),p=(e.ownerDocument||e).createElement("link"),Xe(p);var T=p;return T._p=new Promise(function(w,C){T.onload=w,T.onerror=C}),xt(p,"link",s),n.state.loading|=4,as(p,o.precedence,e),n.instance=p;case"script":return p=Po(o.src),(d=e.querySelector(Gl(p)))?(n.instance=d,Xe(d),d):(s=o,(d=an.get(p))&&(s=x({},o),ic(s,d)),e=e.ownerDocument||e,d=e.createElement("script"),Xe(d),xt(d,"link",s),e.head.appendChild(d),n.instance=d);case"void":return null;default:throw Error(a(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(s=n.instance,n.state.loading|=4,as(s,o.precedence,e));return n.instance}function as(e,n,o){for(var s=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=s.length?s[s.length-1]:null,p=d,T=0;T<s.length;T++){var w=s[T];if(w.dataset.precedence===n)p=w;else if(p!==d)break}p?p.parentNode.insertBefore(e,p.nextSibling):(n=o.nodeType===9?o.head:o,n.insertBefore(e,n.firstChild))}function nc(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.title==null&&(e.title=n.title)}function ic(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.integrity==null&&(e.integrity=n.integrity)}var ss=null;function Nh(e,n,o){if(ss===null){var s=new Map,d=ss=new Map;d.set(o,s)}else d=ss,s=d.get(o),s||(s=new Map,d.set(o,s));if(s.has(e))return s;for(s.set(e,null),o=o.getElementsByTagName(e),d=0;d<o.length;d++){var p=o[d];if(!(p[ne]||p[ft]||e==="link"&&p.getAttribute("rel")==="stylesheet")&&p.namespaceURI!=="http://www.w3.org/2000/svg"){var T=p.getAttribute(n)||"";T=e+T;var w=s.get(T);w?w.push(p):s.set(T,[p])}}return s}function Mh(e,n,o){e=e.ownerDocument||e,e.head.insertBefore(o,n==="title"?e.querySelector("head > title"):null)}function eE(e,n,o){if(o===1||n.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return e=n.disabled,typeof n.precedence=="string"&&e==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function Ih(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function tE(e,n,o,s){if(o.type==="stylesheet"&&(typeof s.media!="string"||matchMedia(s.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var d=Go(s.href),p=n.querySelector(Ll(d));if(p){n=p._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(e.count++,e=rs.bind(e),n.then(e,e)),o.state.loading|=4,o.instance=p,Xe(p);return}p=n.ownerDocument||n,s=bh(s),(d=an.get(d))&&nc(s,d),p=p.createElement("link"),Xe(p);var T=p;T._p=new Promise(function(w,C){T.onload=w,T.onerror=C}),xt(p,"link",s),o.instance=p}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(o,n),(n=o.state.preload)&&(o.state.loading&3)===0&&(e.count++,o=rs.bind(e),n.addEventListener("load",o),n.addEventListener("error",o))}}var oc=0;function nE(e,n){return e.stylesheets&&e.count===0&&cs(e,e.stylesheets),0<e.count||0<e.imgCount?function(o){var s=setTimeout(function(){if(e.stylesheets&&cs(e,e.stylesheets),e.unsuspend){var p=e.unsuspend;e.unsuspend=null,p()}},6e4+n);0<e.imgBytes&&oc===0&&(oc=62500*G0());var d=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&cs(e,e.stylesheets),e.unsuspend)){var p=e.unsuspend;e.unsuspend=null,p()}},(e.imgBytes>oc?50:800)+n);return e.unsuspend=o,function(){e.unsuspend=null,clearTimeout(s),clearTimeout(d)}}:null}function rs(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)cs(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var us=null;function cs(e,n){e.stylesheets=null,e.unsuspend!==null&&(e.count++,us=new Map,n.forEach(iE,e),us=null,rs.call(e))}function iE(e,n){if(!(n.state.loading&4)){var o=us.get(e);if(o)var s=o.get(null);else{o=new Map,us.set(e,o);for(var d=e.querySelectorAll("link[data-precedence],style[data-precedence]"),p=0;p<d.length;p++){var T=d[p];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(o.set(T.dataset.precedence,T),s=T)}s&&o.set(null,s)}d=n.instance,T=d.getAttribute("data-precedence"),p=o.get(T)||s,p===s&&o.set(null,d),o.set(T,d),this.count++,s=rs.bind(this),d.addEventListener("load",s),d.addEventListener("error",s),p?p.parentNode.insertBefore(d,p.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(d,e.firstChild)),n.state.loading|=4}}var Pl={$$typeof:V,Provider:null,Consumer:null,_currentValue:Z,_currentValue2:Z,_threadCount:0};function oE(e,n,o,s,d,p,T,w,C){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Zo(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Zo(0),this.hiddenUpdates=Zo(null),this.identifierPrefix=s,this.onUncaughtError=d,this.onCaughtError=p,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=C,this.incompleteTransitions=new Map}function Dh(e,n,o,s,d,p,T,w,C,U,H,J){return e=new oE(e,n,o,T,C,U,H,J,w),n=1,p===!0&&(n|=24),p=zt(3,null,null,n),e.current=p,p.stateNode=e,n=Pr(),n.refCount++,e.pooledCache=n,n.refCount++,p.memoizedState={element:s,isDehydrated:o,cache:n},Or(p),e}function Uh(e){return e?(e=ho,e):ho}function kh(e,n,o,s,d,p){d=Uh(d),s.context===null?s.context=d:s.pendingContext=d,s=ii(n),s.payload={element:o},p=p===void 0?null:p,p!==null&&(s.callback=p),o=oi(e,s,n),o!==null&&(Pt(o,e,n),pl(o,e,n))}function Lh(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var o=e.retryLane;e.retryLane=o!==0&&o<n?o:n}}function lc(e,n){Lh(e,n),(e=e.alternate)&&Lh(e,n)}function Gh(e){if(e.tag===13||e.tag===31){var n=Ui(e,67108864);n!==null&&Pt(n,e,67108864),lc(e,67108864)}}function Ph(e){if(e.tag===13||e.tag===31){var n=$t();n=Wo(n);var o=Ui(e,n);o!==null&&Pt(o,e,n),lc(e,n)}}var ds=!0;function lE(e,n,o,s){var d=k.T;k.T=null;var p=X.p;try{X.p=2,ac(e,n,o,s)}finally{X.p=p,k.T=d}}function aE(e,n,o,s){var d=k.T;k.T=null;var p=X.p;try{X.p=8,ac(e,n,o,s)}finally{X.p=p,k.T=d}}function ac(e,n,o,s){if(ds){var d=sc(s);if(d===null)Ju(e,n,s,fs,o),qh(e,s);else if(rE(d,e,n,o,s))s.stopPropagation();else if(qh(e,s),n&4&&-1<sE.indexOf(e)){for(;d!==null;){var p=de(d);if(p!==null)switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var T=hn(p.pendingLanes);if(T!==0){var w=p;for(w.pendingLanes|=2,w.entangledLanes|=2;T;){var C=1<<31-wt(T);w.entanglements[1]|=C,T&=~C}Tn(p),(Be&6)===0&&($a=St()+500,Il(0))}}break;case 31:case 13:w=Ui(p,2),w!==null&&Pt(w,p,2),Qa(),lc(p,2)}if(p=sc(s),p===null&&Ju(e,n,s,fs,o),p===d)break;d=p}d!==null&&s.stopPropagation()}else Ju(e,n,s,null,o)}}function sc(e){return e=ur(e),rc(e)}var fs=null;function rc(e){if(fs=null,e=ue(e),e!==null){var n=c(e);if(n===null)e=null;else{var o=n.tag;if(o===13){if(e=m(n),e!==null)return e;e=null}else if(o===31){if(e=g(n),e!==null)return e;e=null}else if(o===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null)}}return fs=e,null}function Bh(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(un()){case eo:return 2;case An:return 8;case Kn:case ea:return 32;case Qo:return 268435456;default:return 32}default:return 32}}var uc=!1,pi=null,gi=null,yi=null,Bl=new Map,ql=new Map,vi=[],sE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function qh(e,n){switch(e){case"focusin":case"focusout":pi=null;break;case"dragenter":case"dragleave":gi=null;break;case"mouseover":case"mouseout":yi=null;break;case"pointerover":case"pointerout":Bl.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":ql.delete(n.pointerId)}}function Vl(e,n,o,s,d,p){return e===null||e.nativeEvent!==p?(e={blockedOn:n,domEventName:o,eventSystemFlags:s,nativeEvent:p,targetContainers:[d]},n!==null&&(n=de(n),n!==null&&Gh(n)),e):(e.eventSystemFlags|=s,n=e.targetContainers,d!==null&&n.indexOf(d)===-1&&n.push(d),e)}function rE(e,n,o,s,d){switch(n){case"focusin":return pi=Vl(pi,e,n,o,s,d),!0;case"dragenter":return gi=Vl(gi,e,n,o,s,d),!0;case"mouseover":return yi=Vl(yi,e,n,o,s,d),!0;case"pointerover":var p=d.pointerId;return Bl.set(p,Vl(Bl.get(p)||null,e,n,o,s,d)),!0;case"gotpointercapture":return p=d.pointerId,ql.set(p,Vl(ql.get(p)||null,e,n,o,s,d)),!0}return!1}function Vh(e){var n=ue(e.target);if(n!==null){var o=c(n);if(o!==null){if(n=o.tag,n===13){if(n=m(o),n!==null){e.blockedOn=n,la(e.priority,function(){Ph(o)});return}}else if(n===31){if(n=g(o),n!==null){e.blockedOn=n,la(e.priority,function(){Ph(o)});return}}else if(n===3&&o.stateNode.current.memoizedState.isDehydrated){e.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ms(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var o=sc(e.nativeEvent);if(o===null){o=e.nativeEvent;var s=new o.constructor(o.type,o);rr=s,o.target.dispatchEvent(s),rr=null}else return n=de(o),n!==null&&Gh(n),e.blockedOn=o,!1;n.shift()}return!0}function Oh(e,n,o){ms(e)&&o.delete(n)}function uE(){uc=!1,pi!==null&&ms(pi)&&(pi=null),gi!==null&&ms(gi)&&(gi=null),yi!==null&&ms(yi)&&(yi=null),Bl.forEach(Oh),ql.forEach(Oh)}function hs(e,n){e.blockedOn===n&&(e.blockedOn=null,uc||(uc=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,uE)))}var ps=null;function Hh(e){ps!==e&&(ps=e,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){ps===e&&(ps=null);for(var n=0;n<e.length;n+=3){var o=e[n],s=e[n+1],d=e[n+2];if(typeof s!="function"){if(rc(s||o)===null)continue;break}var p=de(o);p!==null&&(e.splice(n,3),n-=3,su(p,{pending:!0,data:d,method:o.method,action:s},s,d))}}))}function Bo(e){function n(C){return hs(C,e)}pi!==null&&hs(pi,e),gi!==null&&hs(gi,e),yi!==null&&hs(yi,e),Bl.forEach(n),ql.forEach(n);for(var o=0;o<vi.length;o++){var s=vi[o];s.blockedOn===e&&(s.blockedOn=null)}for(;0<vi.length&&(o=vi[0],o.blockedOn===null);)Vh(o),o.blockedOn===null&&vi.shift();if(o=(e.ownerDocument||e).$$reactFormReplay,o!=null)for(s=0;s<o.length;s+=3){var d=o[s],p=o[s+1],T=d[At]||null;if(typeof p=="function")T||Hh(o);else if(T){var w=null;if(p&&p.hasAttribute("formAction")){if(d=p,T=p[At]||null)w=T.formAction;else if(rc(d)!==null)continue}else w=T.action;typeof w=="function"?o[s+1]=w:(o.splice(s,3),s-=3),Hh(o)}}}function zh(){function e(p){p.canIntercept&&p.info==="react-transition"&&p.intercept({handler:function(){return new Promise(function(T){return d=T})},focusReset:"manual",scroll:"manual"})}function n(){d!==null&&(d(),d=null),s||setTimeout(o,20)}function o(){if(!s&&!navigation.transition){var p=navigation.currentEntry;p&&p.url!=null&&navigation.navigate(p.url,{state:p.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var s=!1,d=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",n),navigation.addEventListener("navigateerror",n),setTimeout(o,100),function(){s=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",n),navigation.removeEventListener("navigateerror",n),d!==null&&(d(),d=null)}}}function cc(e){this._internalRoot=e}gs.prototype.render=cc.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(a(409));var o=n.current,s=$t();kh(o,s,e,n,null,null)},gs.prototype.unmount=cc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;kh(e.current,2,null,e,null,null),Qa(),n[_n]=null}};function gs(e){this._internalRoot=e}gs.prototype.unstable_scheduleHydration=function(e){if(e){var n=oa();e={blockedOn:null,target:e,priority:n};for(var o=0;o<vi.length&&n!==0&&n<vi[o].priority;o++);vi.splice(o,0,e),o===0&&Vh(e)}};var Yh=t.version;if(Yh!=="19.2.0")throw Error(a(527,Yh,"19.2.0"));X.findDOMNode=function(e){var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(a(188)):(e=Object.keys(e).join(","),Error(a(268,e)));return e=h(n),e=e!==null?v(e):null,e=e===null?null:e.stateNode,e};var cE={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:k,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ys=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ys.isDisabled&&ys.supportsFiber)try{bi=ys.inject(cE),$e=ys}catch{}}return zl.createRoot=function(e,n){if(!r(e))throw Error(a(299));var o=!1,s="",d=Zf,p=Wf,T=jf;return n!=null&&(n.unstable_strictMode===!0&&(o=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onUncaughtError!==void 0&&(d=n.onUncaughtError),n.onCaughtError!==void 0&&(p=n.onCaughtError),n.onRecoverableError!==void 0&&(T=n.onRecoverableError)),n=Dh(e,1,!1,null,null,o,s,null,d,p,T,zh),e[_n]=n.current,Fu(e),new cc(n)},zl.hydrateRoot=function(e,n,o){if(!r(e))throw Error(a(299));var s=!1,d="",p=Zf,T=Wf,w=jf,C=null;return o!=null&&(o.unstable_strictMode===!0&&(s=!0),o.identifierPrefix!==void 0&&(d=o.identifierPrefix),o.onUncaughtError!==void 0&&(p=o.onUncaughtError),o.onCaughtError!==void 0&&(T=o.onCaughtError),o.onRecoverableError!==void 0&&(w=o.onRecoverableError),o.formState!==void 0&&(C=o.formState)),n=Dh(e,1,!0,n,o??null,s,d,C,p,T,w,zh),n.context=Uh(null),o=n.current,s=$t(),s=Wo(s),d=ii(s),d.callback=null,oi(o,d,s),o=s,n.current.lanes=o,Ni(n,o),Tn(n),e[_n]=n.current,Fu(e),new gs(n)},zl.version="19.2.0",zl}var np;function SE(){if(np)return mc.exports;np=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(t){console.error(t)}}return i(),mc.exports=xE(),mc.exports}var wE=SE();const AE=$g(wE),_E="modulepreload",CE=function(i){return"/VeoStory/"+i},ip={},$i=function(t,l,a){let r=Promise.resolve();if(l&&l.length>0){let m=function(h){return Promise.all(h.map(v=>Promise.resolve(v).then(x=>({status:"fulfilled",value:x}),x=>({status:"rejected",reason:x}))))};document.getElementsByTagName("link");const g=document.querySelector("meta[property=csp-nonce]"),y=(g==null?void 0:g.nonce)||(g==null?void 0:g.getAttribute("nonce"));r=m(l.map(h=>{if(h=CE(h),h in ip)return;ip[h]=!0;const v=h.endsWith(".css"),x=v?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${x}`))return;const S=document.createElement("link");if(S.rel=v?"stylesheet":_E,v||(S.as="script"),S.crossOrigin="",S.href=h,y&&S.setAttribute("nonce",y),document.head.appendChild(S),v)return new Promise((b,A)=>{S.addEventListener("load",b),S.addEventListener("error",()=>A(new Error(`Unable to preload CSS for ${h}`)))})}))}function c(m){const g=new Event("vite:preloadError",{cancelable:!0});if(g.payload=m,window.dispatchEvent(g),!g.defaultPrevented)throw m}return r.then(m=>{for(const g of m||[])g.status==="rejected"&&c(g.reason);return t().catch(c)})};var ie=(i=>(i.START="START",i.SELECTING_API_KEY="SELECTING_API_KEY",i.GENERATING_IMAGE="GENERATING_IMAGE",i.IMAGE_PREVIEW="IMAGE_PREVIEW",i.GENERATING_VIDEO="GENERATING_VIDEO",i.GENERATING_CHOICES="GENERATING_CHOICES",i.PLAYING="PLAYING",i.CHOICES="CHOICES",i.REPLAY="REPLAY",i.ERROR="ERROR",i.EXPORTING="EXPORTING",i.IMPORTING="IMPORTING",i.EXPORTING_VIDEO="EXPORTING_VIDEO",i))(ie||{});const Qg="veo-visual-novel-api-keys";function Fc(){try{const i=localStorage.getItem(Qg);return i?JSON.parse(i):{}}catch(i){return console.error("Failed to load API keys from localStorage:",i),{}}}function ht(i){return Fc()[i]||null}function bE(i){const l={...Fc(),...i};Object.keys(l).forEach(a=>{l[a]||delete l[a]}),localStorage.setItem(Qg,JSON.stringify(l))}function RE(i){const t=ht(i);return!!(t&&t.trim().length>0)}function bc(){return RE("GEMINI_API_KEY")}const op=[{name:"Google AI (Gemini)",keyName:"GEMINI_API_KEY",description:"Required for video generation (Veo), image generation (Imagen), text generation, and story choices.",required:!0,getKeyUrl:"https://aistudio.google.com/apikey",docsUrl:"https://ai.google.dev/gemini-api/docs/api-key",placeholder:"AIza..."},{name:"Replicate",keyName:"REPLICATE_API_KEY",description:"Optional: Enables additional video models (Wan 2.5, Veo via Replicate) and FLUX image generation.",required:!1,getKeyUrl:"https://replicate.com/account/api-tokens",docsUrl:"https://replicate.com/docs/reference/http",placeholder:"r8_..."},{name:"Runway ML",keyName:"RUNWAY_API_KEY",description:"Optional: Enables Runway Gen-3 and Gen-4 video models.",required:!1,getKeyUrl:"https://app.runwayml.com/settings/api-keys",docsUrl:"https://docs.runwayml.com/reference/authentication",placeholder:"rw_..."},{name:"Stability AI",keyName:"STABILITY_API_KEY",description:"Optional: Enables Stable Diffusion image and Stable Video Diffusion models.",required:!1,getKeyUrl:"https://platform.stability.ai/account/keys",docsUrl:"https://platform.stability.ai/docs/getting-started/authentication",placeholder:"sk-..."}];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let NE,ME;function IE(){return{geminiUrl:NE,vertexUrl:ME}}function DE(i,t,l,a){var r,c;if(!(i!=null&&i.baseUrl)){const m=IE();return t?(r=m.vertexUrl)!==null&&r!==void 0?r:l:(c=m.geminiUrl)!==null&&c!==void 0?c:a}return i.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Wi{}function se(i,t){const l=/\{([^}]+)\}/g;return i.replace(l,(a,r)=>{if(Object.prototype.hasOwnProperty.call(t,r)){const c=t[r];return c!=null?String(c):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function f(i,t,l){for(let c=0;c<t.length-1;c++){const m=t[c];if(m.endsWith("[]")){const g=m.slice(0,-2);if(!(g in i))if(Array.isArray(l))i[g]=Array.from({length:l.length},()=>({}));else throw new Error(`Value must be a list given an array path ${m}`);if(Array.isArray(i[g])){const y=i[g];if(Array.isArray(l))for(let h=0;h<y.length;h++){const v=y[h];f(v,t.slice(c+1),l[h])}else for(const h of y)f(h,t.slice(c+1),l)}return}else if(m.endsWith("[0]")){const g=m.slice(0,-3);g in i||(i[g]=[{}]);const y=i[g];f(y[0],t.slice(c+1),l);return}(!i[m]||typeof i[m]!="object")&&(i[m]={}),i=i[m]}const a=t[t.length-1],r=i[a];if(r!==void 0){if(!l||typeof l=="object"&&Object.keys(l).length===0||l===r)return;if(typeof r=="object"&&typeof l=="object"&&r!==null&&l!==null)Object.assign(r,l);else throw new Error(`Cannot set value for an existing key. Key: ${a}`)}else a==="_self"&&typeof l=="object"&&l!==null&&!Array.isArray(l)?Object.assign(i,l):i[a]=l}function u(i,t,l=void 0){try{if(t.length===1&&t[0]==="_self")return i;for(let a=0;a<t.length;a++){if(typeof i!="object"||i===null)return l;const r=t[a];if(r.endsWith("[]")){const c=r.slice(0,-2);if(c in i){const m=i[c];return Array.isArray(m)?m.map(g=>u(g,t.slice(a+1),l)):l}else return l}else i=i[r]}return i}catch(a){if(a instanceof TypeError)return l;throw a}}function UE(i,t){for(const[l,a]of Object.entries(t)){const r=l.split("."),c=a.split("."),m=new Set;let g=-1;for(let y=0;y<r.length;y++)if(r[y]==="*"){g=y;break}if(g!==-1&&c.length>g)for(let y=g;y<c.length;y++){const h=c[y];h!=="*"&&!h.endsWith("[]")&&!h.endsWith("[0]")&&m.add(h)}Rc(i,r,c,0,m)}}function Rc(i,t,l,a,r){if(a>=t.length||typeof i!="object"||i===null)return;const c=t[a];if(c.endsWith("[]")){const m=c.slice(0,-2),g=i;if(m in g&&Array.isArray(g[m]))for(const y of g[m])Rc(y,t,l,a+1,r)}else if(c==="*"){if(typeof i=="object"&&i!==null&&!Array.isArray(i)){const m=i,g=Object.keys(m).filter(h=>!h.startsWith("_")&&!r.has(h)),y={};for(const h of g)y[h]=m[h];for(const[h,v]of Object.entries(y)){const x=[];for(const S of l.slice(a))S==="*"?x.push(h):x.push(S);f(m,x,v)}for(const h of g)delete m[h]}}else{const m=i;c in m&&Rc(m[c],t,l,a+1,r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Jc(i){if(typeof i!="string")throw new Error("fromImageBytes must be a string");return i}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function kE(i){const t={},l=u(i,["operationName"]);l!=null&&f(t,["operationName"],l);const a=u(i,["resourceName"]);return a!=null&&f(t,["_url","resourceName"],a),t}function LE(i){const t={},l=u(i,["name"]);l!=null&&f(t,["name"],l);const a=u(i,["metadata"]);a!=null&&f(t,["metadata"],a);const r=u(i,["done"]);r!=null&&f(t,["done"],r);const c=u(i,["error"]);c!=null&&f(t,["error"],c);const m=u(i,["response","generateVideoResponse"]);return m!=null&&f(t,["response"],PE(m)),t}function GE(i){const t={},l=u(i,["name"]);l!=null&&f(t,["name"],l);const a=u(i,["metadata"]);a!=null&&f(t,["metadata"],a);const r=u(i,["done"]);r!=null&&f(t,["done"],r);const c=u(i,["error"]);c!=null&&f(t,["error"],c);const m=u(i,["response"]);return m!=null&&f(t,["response"],BE(m)),t}function PE(i){const t={},l=u(i,["generatedSamples"]);if(l!=null){let c=l;Array.isArray(c)&&(c=c.map(m=>qE(m))),f(t,["generatedVideos"],c)}const a=u(i,["raiMediaFilteredCount"]);a!=null&&f(t,["raiMediaFilteredCount"],a);const r=u(i,["raiMediaFilteredReasons"]);return r!=null&&f(t,["raiMediaFilteredReasons"],r),t}function BE(i){const t={},l=u(i,["videos"]);if(l!=null){let c=l;Array.isArray(c)&&(c=c.map(m=>VE(m))),f(t,["generatedVideos"],c)}const a=u(i,["raiMediaFilteredCount"]);a!=null&&f(t,["raiMediaFilteredCount"],a);const r=u(i,["raiMediaFilteredReasons"]);return r!=null&&f(t,["raiMediaFilteredReasons"],r),t}function qE(i){const t={},l=u(i,["video"]);return l!=null&&f(t,["video"],zE(l)),t}function VE(i){const t={},l=u(i,["_self"]);return l!=null&&f(t,["video"],YE(l)),t}function OE(i){const t={},l=u(i,["operationName"]);return l!=null&&f(t,["_url","operationName"],l),t}function HE(i){const t={},l=u(i,["operationName"]);return l!=null&&f(t,["_url","operationName"],l),t}function zE(i){const t={},l=u(i,["uri"]);l!=null&&f(t,["uri"],l);const a=u(i,["encodedVideo"]);a!=null&&f(t,["videoBytes"],Jc(a));const r=u(i,["encoding"]);return r!=null&&f(t,["mimeType"],r),t}function YE(i){const t={},l=u(i,["gcsUri"]);l!=null&&f(t,["uri"],l);const a=u(i,["bytesBase64Encoded"]);a!=null&&f(t,["videoBytes"],Jc(a));const r=u(i,["mimeType"]);return r!=null&&f(t,["mimeType"],r),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var lp;(function(i){i.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",i.OUTCOME_OK="OUTCOME_OK",i.OUTCOME_FAILED="OUTCOME_FAILED",i.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(lp||(lp={}));var ap;(function(i){i.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",i.PYTHON="PYTHON"})(ap||(ap={}));var sp;(function(i){i.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",i.SILENT="SILENT",i.WHEN_IDLE="WHEN_IDLE",i.INTERRUPT="INTERRUPT"})(sp||(sp={}));var xn;(function(i){i.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",i.STRING="STRING",i.NUMBER="NUMBER",i.INTEGER="INTEGER",i.BOOLEAN="BOOLEAN",i.ARRAY="ARRAY",i.OBJECT="OBJECT",i.NULL="NULL"})(xn||(xn={}));var rp;(function(i){i.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",i.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",i.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",i.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",i.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",i.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",i.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",i.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",i.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",i.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",i.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(rp||(rp={}));var up;(function(i){i.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",i.SEVERITY="SEVERITY",i.PROBABILITY="PROBABILITY"})(up||(up={}));var cp;(function(i){i.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",i.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",i.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",i.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",i.BLOCK_NONE="BLOCK_NONE",i.OFF="OFF"})(cp||(cp={}));var dp;(function(i){i.MODE_UNSPECIFIED="MODE_UNSPECIFIED",i.MODE_DYNAMIC="MODE_DYNAMIC"})(dp||(dp={}));var fp;(function(i){i.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",i.NO_AUTH="NO_AUTH",i.API_KEY_AUTH="API_KEY_AUTH",i.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",i.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",i.OAUTH="OAUTH",i.OIDC_AUTH="OIDC_AUTH"})(fp||(fp={}));var mp;(function(i){i.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",i.SIMPLE_SEARCH="SIMPLE_SEARCH",i.ELASTIC_SEARCH="ELASTIC_SEARCH"})(mp||(mp={}));var hp;(function(i){i.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",i.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",i.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",i.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",i.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(hp||(hp={}));var pp;(function(i){i.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",i.STOP="STOP",i.MAX_TOKENS="MAX_TOKENS",i.SAFETY="SAFETY",i.RECITATION="RECITATION",i.LANGUAGE="LANGUAGE",i.OTHER="OTHER",i.BLOCKLIST="BLOCKLIST",i.PROHIBITED_CONTENT="PROHIBITED_CONTENT",i.SPII="SPII",i.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",i.IMAGE_SAFETY="IMAGE_SAFETY",i.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",i.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",i.NO_IMAGE="NO_IMAGE"})(pp||(pp={}));var gp;(function(i){i.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",i.NEGLIGIBLE="NEGLIGIBLE",i.LOW="LOW",i.MEDIUM="MEDIUM",i.HIGH="HIGH"})(gp||(gp={}));var yp;(function(i){i.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",i.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",i.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",i.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",i.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(yp||(yp={}));var vp;(function(i){i.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",i.SAFETY="SAFETY",i.OTHER="OTHER",i.BLOCKLIST="BLOCKLIST",i.PROHIBITED_CONTENT="PROHIBITED_CONTENT",i.IMAGE_SAFETY="IMAGE_SAFETY",i.MODEL_ARMOR="MODEL_ARMOR",i.JAILBREAK="JAILBREAK"})(vp||(vp={}));var Ep;(function(i){i.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",i.ON_DEMAND="ON_DEMAND",i.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Ep||(Ep={}));var Rs;(function(i){i.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",i.TEXT="TEXT",i.IMAGE="IMAGE",i.AUDIO="AUDIO"})(Rs||(Rs={}));var Tp;(function(i){i.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",i.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",i.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",i.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Tp||(Tp={}));var Nc;(function(i){i.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",i.JOB_STATE_QUEUED="JOB_STATE_QUEUED",i.JOB_STATE_PENDING="JOB_STATE_PENDING",i.JOB_STATE_RUNNING="JOB_STATE_RUNNING",i.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",i.JOB_STATE_FAILED="JOB_STATE_FAILED",i.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",i.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",i.JOB_STATE_PAUSED="JOB_STATE_PAUSED",i.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",i.JOB_STATE_UPDATING="JOB_STATE_UPDATING",i.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Nc||(Nc={}));var xp;(function(i){i.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",i.TUNING_MODE_FULL="TUNING_MODE_FULL",i.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(xp||(xp={}));var Sp;(function(i){i.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",i.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",i.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",i.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",i.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",i.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",i.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(Sp||(Sp={}));var wp;(function(i){i.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",i.TUNING_TASK_I2V="TUNING_TASK_I2V",i.TUNING_TASK_T2V="TUNING_TASK_T2V"})(wp||(wp={}));var Ap;(function(i){i.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",i.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",i.BALANCED="BALANCED",i.PRIORITIZE_COST="PRIORITIZE_COST"})(Ap||(Ap={}));var _p;(function(i){i.UNSPECIFIED="UNSPECIFIED",i.BLOCKING="BLOCKING",i.NON_BLOCKING="NON_BLOCKING"})(_p||(_p={}));var Cp;(function(i){i.MODE_UNSPECIFIED="MODE_UNSPECIFIED",i.MODE_DYNAMIC="MODE_DYNAMIC"})(Cp||(Cp={}));var bp;(function(i){i.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",i.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(bp||(bp={}));var Rp;(function(i){i.MODE_UNSPECIFIED="MODE_UNSPECIFIED",i.AUTO="AUTO",i.ANY="ANY",i.NONE="NONE",i.VALIDATED="VALIDATED"})(Rp||(Rp={}));var Np;(function(i){i.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",i.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",i.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",i.BLOCK_NONE="BLOCK_NONE"})(Np||(Np={}));var Mp;(function(i){i.DONT_ALLOW="DONT_ALLOW",i.ALLOW_ADULT="ALLOW_ADULT",i.ALLOW_ALL="ALLOW_ALL"})(Mp||(Mp={}));var Ip;(function(i){i.auto="auto",i.en="en",i.ja="ja",i.ko="ko",i.hi="hi",i.zh="zh",i.pt="pt",i.es="es"})(Ip||(Ip={}));var Dp;(function(i){i.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",i.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",i.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",i.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",i.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(Dp||(Dp={}));var Up;(function(i){i.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",i.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",i.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",i.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(Up||(Up={}));var kp;(function(i){i.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",i.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",i.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",i.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(kp||(kp={}));var Lp;(function(i){i.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",i.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",i.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",i.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",i.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",i.EDIT_MODE_STYLE="EDIT_MODE_STYLE",i.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",i.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(Lp||(Lp={}));var Gp;(function(i){i.FOREGROUND="FOREGROUND",i.BACKGROUND="BACKGROUND",i.PROMPT="PROMPT",i.SEMANTIC="SEMANTIC",i.INTERACTIVE="INTERACTIVE"})(Gp||(Gp={}));var Pp;(function(i){i.ASSET="ASSET",i.STYLE="STYLE"})(Pp||(Pp={}));var Bp;(function(i){i.INSERT="INSERT",i.REMOVE="REMOVE",i.REMOVE_STATIC="REMOVE_STATIC",i.OUTPAINT="OUTPAINT"})(Bp||(Bp={}));var qp;(function(i){i.OPTIMIZED="OPTIMIZED",i.LOSSLESS="LOSSLESS"})(qp||(qp={}));var Vp;(function(i){i.STATE_UNSPECIFIED="STATE_UNSPECIFIED",i.PROCESSING="PROCESSING",i.ACTIVE="ACTIVE",i.FAILED="FAILED"})(Vp||(Vp={}));var Op;(function(i){i.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",i.UPLOADED="UPLOADED",i.GENERATED="GENERATED"})(Op||(Op={}));var Hp;(function(i){i.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",i.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",i.RESPONSE_REJECTED="RESPONSE_REJECTED",i.NEED_MORE_INPUT="NEED_MORE_INPUT"})(Hp||(Hp={}));var zp;(function(i){i.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",i.TEXT="TEXT",i.IMAGE="IMAGE",i.VIDEO="VIDEO",i.AUDIO="AUDIO",i.DOCUMENT="DOCUMENT"})(zp||(zp={}));var Yp;(function(i){i.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",i.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",i.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(Yp||(Yp={}));var Fp;(function(i){i.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",i.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",i.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Fp||(Fp={}));var Jp;(function(i){i.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",i.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",i.NO_INTERRUPTION="NO_INTERRUPTION"})(Jp||(Jp={}));var Kp;(function(i){i.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",i.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",i.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Kp||(Kp={}));var $p;(function(i){i.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",i.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",i.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",i.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",i.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",i.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",i.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",i.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",i.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",i.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",i.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",i.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",i.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})($p||($p={}));var Xp;(function(i){i.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",i.QUALITY="QUALITY",i.DIVERSITY="DIVERSITY",i.VOCALIZATION="VOCALIZATION"})(Xp||(Xp={}));var qo;(function(i){i.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",i.PLAY="PLAY",i.PAUSE="PAUSE",i.STOP="STOP",i.RESET_CONTEXT="RESET_CONTEXT"})(qo||(qo={}));class Mc{constructor(t){const l={};for(const a of t.headers.entries())l[a[0]]=a[1];this.headers=l,this.responseInternal=t}json(){return this.responseInternal.json()}}class Yl{get text(){var t,l,a,r,c,m,g,y;if(((r=(a=(l=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||l===void 0?void 0:l.content)===null||a===void 0?void 0:a.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let h="",v=!1;const x=[];for(const S of(y=(g=(m=(c=this.candidates)===null||c===void 0?void 0:c[0])===null||m===void 0?void 0:m.content)===null||g===void 0?void 0:g.parts)!==null&&y!==void 0?y:[]){for(const[b,A]of Object.entries(S))b!=="text"&&b!=="thought"&&(A!==null||A!==void 0)&&x.push(b);if(typeof S.text=="string"){if(typeof S.thought=="boolean"&&S.thought)continue;v=!0,h+=S.text}}return x.length>0&&console.warn(`there are non-text parts ${x} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),v?h:void 0}get data(){var t,l,a,r,c,m,g,y;if(((r=(a=(l=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||l===void 0?void 0:l.content)===null||a===void 0?void 0:a.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let h="";const v=[];for(const x of(y=(g=(m=(c=this.candidates)===null||c===void 0?void 0:c[0])===null||m===void 0?void 0:m.content)===null||g===void 0?void 0:g.parts)!==null&&y!==void 0?y:[]){for(const[S,b]of Object.entries(x))S!=="inlineData"&&(b!==null||b!==void 0)&&v.push(S);x.inlineData&&typeof x.inlineData.data=="string"&&(h+=atob(x.inlineData.data))}return v.length>0&&console.warn(`there are non-data parts ${v} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),h.length>0?btoa(h):void 0}get functionCalls(){var t,l,a,r,c,m,g,y;if(((r=(a=(l=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||l===void 0?void 0:l.content)===null||a===void 0?void 0:a.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const h=(y=(g=(m=(c=this.candidates)===null||c===void 0?void 0:c[0])===null||m===void 0?void 0:m.content)===null||g===void 0?void 0:g.parts)===null||y===void 0?void 0:y.filter(v=>v.functionCall).map(v=>v.functionCall).filter(v=>v!==void 0);if((h==null?void 0:h.length)!==0)return h}get executableCode(){var t,l,a,r,c,m,g,y,h;if(((r=(a=(l=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||l===void 0?void 0:l.content)===null||a===void 0?void 0:a.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const v=(y=(g=(m=(c=this.candidates)===null||c===void 0?void 0:c[0])===null||m===void 0?void 0:m.content)===null||g===void 0?void 0:g.parts)===null||y===void 0?void 0:y.filter(x=>x.executableCode).map(x=>x.executableCode).filter(x=>x!==void 0);if((v==null?void 0:v.length)!==0)return(h=v==null?void 0:v[0])===null||h===void 0?void 0:h.code}get codeExecutionResult(){var t,l,a,r,c,m,g,y,h;if(((r=(a=(l=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||l===void 0?void 0:l.content)===null||a===void 0?void 0:a.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const v=(y=(g=(m=(c=this.candidates)===null||c===void 0?void 0:c[0])===null||m===void 0?void 0:m.content)===null||g===void 0?void 0:g.parts)===null||y===void 0?void 0:y.filter(x=>x.codeExecutionResult).map(x=>x.codeExecutionResult).filter(x=>x!==void 0);if((v==null?void 0:v.length)!==0)return(h=v==null?void 0:v[0])===null||h===void 0?void 0:h.output}}class Qp{}class Zp{}class FE{}class JE{}class KE{}class $E{}class Wp{}class jp{}class eg{}class XE{}class Ns{_fromAPIResponse({apiResponse:t,isVertexAI:l}){const a=new Ns;let r;const c=t;return l?r=GE(c):r=LE(c),Object.assign(a,r),a}}class tg{}class ng{}class ig{}class QE{}class ZE{}class WE{}class og{}class jE{get text(){var t,l,a;let r="",c=!1;const m=[];for(const g of(a=(l=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||l===void 0?void 0:l.parts)!==null&&a!==void 0?a:[]){for(const[y,h]of Object.entries(g))y!=="text"&&y!=="thought"&&h!==null&&m.push(y);if(typeof g.text=="string"){if(typeof g.thought=="boolean"&&g.thought)continue;c=!0,r+=g.text}}return m.length>0&&console.warn(`there are non-text parts ${m} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),c?r:void 0}get data(){var t,l,a;let r="";const c=[];for(const m of(a=(l=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||l===void 0?void 0:l.parts)!==null&&a!==void 0?a:[]){for(const[g,y]of Object.entries(m))g!=="inlineData"&&y!==null&&c.push(g);m.inlineData&&typeof m.inlineData.data=="string"&&(r+=atob(m.inlineData.data))}return c.length>0&&console.warn(`there are non-data parts ${c} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class eT{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Pe(i,t){if(!t||typeof t!="string")throw new Error("model is required and must be a string");if(i.isVertexAI()){if(t.startsWith("publishers/")||t.startsWith("projects/")||t.startsWith("models/"))return t;if(t.indexOf("/")>=0){const l=t.split("/",2);return`publishers/${l[0]}/models/${l[1]}`}else return`publishers/google/models/${t}`}else return t.startsWith("models/")||t.startsWith("tunedModels/")?t:`models/${t}`}function Zg(i,t){const l=Pe(i,t);return l?l.startsWith("publishers/")&&i.isVertexAI()?`projects/${i.getProject()}/locations/${i.getLocation()}/${l}`:l.startsWith("models/")&&i.isVertexAI()?`projects/${i.getProject()}/locations/${i.getLocation()}/publishers/google/${l}`:l:""}function Wg(i){return Array.isArray(i)?i.map(t=>Ms(t)):[Ms(i)]}function Ms(i){if(typeof i=="object"&&i!==null)return i;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof i}`)}function jg(i){const t=Ms(i);if(t.mimeType&&t.mimeType.startsWith("image/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function ey(i){const t=Ms(i);if(t.mimeType&&t.mimeType.startsWith("audio/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function lg(i){if(i==null)throw new Error("PartUnion is required");if(typeof i=="object")return i;if(typeof i=="string")return{text:i};throw new Error(`Unsupported part type: ${typeof i}`)}function ty(i){if(i==null||Array.isArray(i)&&i.length===0)throw new Error("PartListUnion is required");return Array.isArray(i)?i.map(t=>lg(t)):[lg(i)]}function Ic(i){return i!=null&&typeof i=="object"&&"parts"in i&&Array.isArray(i.parts)}function ag(i){return i!=null&&typeof i=="object"&&"functionCall"in i}function sg(i){return i!=null&&typeof i=="object"&&"functionResponse"in i}function Ct(i){if(i==null)throw new Error("ContentUnion is required");return Ic(i)?i:{role:"user",parts:ty(i)}}function Kc(i,t){if(!t)return[];if(i.isVertexAI()&&Array.isArray(t))return t.flatMap(l=>{const a=Ct(l);return a.parts&&a.parts.length>0&&a.parts[0].text!==void 0?[a.parts[0].text]:[]});if(i.isVertexAI()){const l=Ct(t);return l.parts&&l.parts.length>0&&l.parts[0].text!==void 0?[l.parts[0].text]:[]}return Array.isArray(t)?t.map(l=>Ct(l)):[Ct(t)]}function sn(i){if(i==null||Array.isArray(i)&&i.length===0)throw new Error("contents are required");if(!Array.isArray(i)){if(ag(i)||sg(i))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Ct(i)]}const t=[],l=[],a=Ic(i[0]);for(const r of i){const c=Ic(r);if(c!=a)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(c)t.push(r);else{if(ag(r)||sg(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");l.push(r)}}return a||t.push({role:"user",parts:ty(l)}),t}function tT(i,t){i.includes("null")&&(t.nullable=!0);const l=i.filter(a=>a!=="null");if(l.length===1)t.type=Object.values(xn).includes(l[0].toUpperCase())?l[0].toUpperCase():xn.TYPE_UNSPECIFIED;else{t.anyOf=[];for(const a of l)t.anyOf.push({type:Object.values(xn).includes(a.toUpperCase())?a.toUpperCase():xn.TYPE_UNSPECIFIED})}}function Vo(i){const t={},l=["items"],a=["anyOf"],r=["properties"];if(i.type&&i.anyOf)throw new Error("type and anyOf cannot be both populated.");const c=i.anyOf;c!=null&&c.length==2&&(c[0].type==="null"?(t.nullable=!0,i=c[1]):c[1].type==="null"&&(t.nullable=!0,i=c[0])),i.type instanceof Array&&tT(i.type,t);for(const[m,g]of Object.entries(i))if(g!=null)if(m=="type"){if(g==="null")throw new Error("type: null can not be the only possible type for the field.");if(g instanceof Array)continue;t.type=Object.values(xn).includes(g.toUpperCase())?g.toUpperCase():xn.TYPE_UNSPECIFIED}else if(l.includes(m))t[m]=Vo(g);else if(a.includes(m)){const y=[];for(const h of g){if(h.type=="null"){t.nullable=!0;continue}y.push(Vo(h))}t[m]=y}else if(r.includes(m)){const y={};for(const[h,v]of Object.entries(g))y[h]=Vo(v);t[m]=y}else{if(m==="additionalProperties")continue;t[m]=g}return t}function $c(i){return Vo(i)}function Xc(i){if(typeof i=="object")return i;if(typeof i=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:i}}};throw new Error(`Unsupported speechConfig type: ${typeof i}`)}function Qc(i){if("multiSpeakerVoiceConfig"in i)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return i}function Yo(i){if(i.functionDeclarations)for(const t of i.functionDeclarations)t.parameters&&(Object.keys(t.parameters).includes("$schema")?t.parametersJsonSchema||(t.parametersJsonSchema=t.parameters,delete t.parameters):t.parameters=Vo(t.parameters)),t.response&&(Object.keys(t.response).includes("$schema")?t.responseJsonSchema||(t.responseJsonSchema=t.response,delete t.response):t.response=Vo(t.response));return i}function Fo(i){if(i==null)throw new Error("tools is required");if(!Array.isArray(i))throw new Error("tools is required and must be an array of Tools");const t=[];for(const l of i)t.push(l);return t}function nT(i,t,l,a=1){const r=!t.startsWith(`${l}/`)&&t.split("/").length===a;return i.isVertexAI()?t.startsWith("projects/")?t:t.startsWith("locations/")?`projects/${i.getProject()}/${t}`:t.startsWith(`${l}/`)?`projects/${i.getProject()}/locations/${i.getLocation()}/${t}`:r?`projects/${i.getProject()}/locations/${i.getLocation()}/${l}/${t}`:t:r?`${l}/${t}`:t}function Fn(i,t){if(typeof t!="string")throw new Error("name must be a string");return nT(i,t,"cachedContents")}function ny(i){switch(i){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return i}}function Ai(i){return Jc(i)}function iT(i){return i!=null&&typeof i=="object"&&"name"in i}function oT(i){return i!=null&&typeof i=="object"&&"video"in i}function lT(i){return i!=null&&typeof i=="object"&&"uri"in i}function iy(i){var t;let l;if(iT(i)&&(l=i.name),!(lT(i)&&(l=i.uri,l===void 0))&&!(oT(i)&&(l=(t=i.video)===null||t===void 0?void 0:t.uri,l===void 0))){if(typeof i=="string"&&(l=i),l===void 0)throw new Error("Could not extract file name from the provided input.");if(l.startsWith("https://")){const r=l.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${l}`);l=r[0]}else l.startsWith("files/")&&(l=l.split("files/")[1]);return l}}function oy(i,t){let l;return i.isVertexAI()?l=t?"publishers/google/models":"models":l=t?"models":"tunedModels",l}function ly(i){for(const t of["models","tunedModels","publisherModels"])if(aT(i,t))return i[t];return[]}function aT(i,t){return i!==null&&typeof i=="object"&&t in i}function sT(i,t={}){const l=i,a={name:l.name,description:l.description,parametersJsonSchema:l.inputSchema};return l.outputSchema&&(a.responseJsonSchema=l.outputSchema),t.behavior&&(a.behavior=t.behavior),{functionDeclarations:[a]}}function rT(i,t={}){const l=[],a=new Set;for(const r of i){const c=r.name;if(a.has(c))throw new Error(`Duplicate function name ${c} found in MCP tools. Please ensure function names are unique.`);a.add(c);const m=sT(r,t);m.functionDeclarations&&l.push(...m.functionDeclarations)}return{functionDeclarations:l}}function ay(i,t){let l;if(typeof t=="string")if(i.isVertexAI())if(t.startsWith("gs://"))l={format:"jsonl",gcsUri:[t]};else if(t.startsWith("bq://"))l={format:"bigquery",bigqueryUri:t};else throw new Error(`Unsupported string source for Vertex AI: ${t}`);else if(t.startsWith("files/"))l={fileName:t};else throw new Error(`Unsupported string source for Gemini API: ${t}`);else if(Array.isArray(t)){if(i.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");l={inlinedRequests:t}}else l=t;const a=[l.gcsUri,l.bigqueryUri].filter(Boolean).length,r=[l.inlinedRequests,l.fileName].filter(Boolean).length;if(i.isVertexAI()){if(r>0||a!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(a>0||r!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return l}function uT(i){if(typeof i!="string")return i;const t=i;if(t.startsWith("gs://"))return{format:"jsonl",gcsUri:t};if(t.startsWith("bq://"))return{format:"bigquery",bigqueryUri:t};throw new Error(`Unsupported destination: ${t}`)}function sy(i){if(typeof i!="object"||i===null)return{};const t=i,l=t.inlinedResponses;if(typeof l!="object"||l===null)return i;const r=l.inlinedResponses;if(!Array.isArray(r)||r.length===0)return i;let c=!1;for(const m of r){if(typeof m!="object"||m===null)continue;const y=m.response;if(typeof y!="object"||y===null)continue;if(y.embedding!==void 0){c=!0;break}}return c&&(t.inlinedEmbedContentResponses=t.inlinedResponses,delete t.inlinedResponses),i}function Jo(i,t){const l=t;if(!i.isVertexAI()){if(/batches\/[^/]+$/.test(l))return l.split("/").pop();throw new Error(`Invalid batch job name: ${l}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(l))return l.split("/").pop();if(/^\d+$/.test(l))return l;throw new Error(`Invalid batch job name: ${l}.`)}function ry(i){const t=i;return t==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":t==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":t==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":t==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":t==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":t==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":t==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function cT(i){const t={},l=u(i,["responsesFile"]);l!=null&&f(t,["fileName"],l);const a=u(i,["inlinedResponses","inlinedResponses"]);if(a!=null){let c=a;Array.isArray(c)&&(c=c.map(m=>OT(m))),f(t,["inlinedResponses"],c)}const r=u(i,["inlinedEmbedContentResponses","inlinedResponses"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(m=>m)),f(t,["inlinedEmbedContentResponses"],c)}return t}function dT(i){const t={},l=u(i,["predictionsFormat"]);l!=null&&f(t,["format"],l);const a=u(i,["gcsDestination","outputUriPrefix"]);a!=null&&f(t,["gcsUri"],a);const r=u(i,["bigqueryDestination","outputUri"]);return r!=null&&f(t,["bigqueryUri"],r),t}function fT(i){const t={},l=u(i,["format"]);l!=null&&f(t,["predictionsFormat"],l);const a=u(i,["gcsUri"]);a!=null&&f(t,["gcsDestination","outputUriPrefix"],a);const r=u(i,["bigqueryUri"]);if(r!=null&&f(t,["bigqueryDestination","outputUri"],r),u(i,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(u(i,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(u(i,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return t}function ws(i){const t={},l=u(i,["name"]);l!=null&&f(t,["name"],l);const a=u(i,["metadata","displayName"]);a!=null&&f(t,["displayName"],a);const r=u(i,["metadata","state"]);r!=null&&f(t,["state"],ry(r));const c=u(i,["metadata","createTime"]);c!=null&&f(t,["createTime"],c);const m=u(i,["metadata","endTime"]);m!=null&&f(t,["endTime"],m);const g=u(i,["metadata","updateTime"]);g!=null&&f(t,["updateTime"],g);const y=u(i,["metadata","model"]);y!=null&&f(t,["model"],y);const h=u(i,["metadata","output"]);return h!=null&&f(t,["dest"],cT(sy(h))),t}function Dc(i){const t={},l=u(i,["name"]);l!=null&&f(t,["name"],l);const a=u(i,["displayName"]);a!=null&&f(t,["displayName"],a);const r=u(i,["state"]);r!=null&&f(t,["state"],ry(r));const c=u(i,["error"]);c!=null&&f(t,["error"],c);const m=u(i,["createTime"]);m!=null&&f(t,["createTime"],m);const g=u(i,["startTime"]);g!=null&&f(t,["startTime"],g);const y=u(i,["endTime"]);y!=null&&f(t,["endTime"],y);const h=u(i,["updateTime"]);h!=null&&f(t,["updateTime"],h);const v=u(i,["model"]);v!=null&&f(t,["model"],v);const x=u(i,["inputConfig"]);x!=null&&f(t,["src"],mT(x));const S=u(i,["outputConfig"]);return S!=null&&f(t,["dest"],dT(sy(S))),t}function mT(i){const t={},l=u(i,["instancesFormat"]);l!=null&&f(t,["format"],l);const a=u(i,["gcsSource","uris"]);a!=null&&f(t,["gcsUri"],a);const r=u(i,["bigquerySource","inputUri"]);return r!=null&&f(t,["bigqueryUri"],r),t}function hT(i,t){const l={};if(u(t,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(u(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(u(t,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const a=u(t,["fileName"]);a!=null&&f(l,["fileName"],a);const r=u(t,["inlinedRequests"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(m=>VT(i,m))),f(l,["requests","requests"],c)}return l}function pT(i){const t={},l=u(i,["format"]);l!=null&&f(t,["instancesFormat"],l);const a=u(i,["gcsUri"]);a!=null&&f(t,["gcsSource","uris"],a);const r=u(i,["bigqueryUri"]);if(r!=null&&f(t,["bigquerySource","inputUri"],r),u(i,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(u(i,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return t}function gT(i){const t={};if(u(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const l=u(i,["data"]);l!=null&&f(t,["data"],l);const a=u(i,["mimeType"]);return a!=null&&f(t,["mimeType"],a),t}function yT(i,t){const l={},a=u(t,["name"]);return a!=null&&f(l,["_url","name"],Jo(i,a)),l}function vT(i,t){const l={},a=u(t,["name"]);return a!=null&&f(l,["_url","name"],Jo(i,a)),l}function ET(i){const t={},l=u(i,["content"]);l!=null&&f(t,["content"],l);const a=u(i,["citationMetadata"]);a!=null&&f(t,["citationMetadata"],TT(a));const r=u(i,["tokenCount"]);r!=null&&f(t,["tokenCount"],r);const c=u(i,["finishReason"]);c!=null&&f(t,["finishReason"],c);const m=u(i,["urlContextMetadata"]);m!=null&&f(t,["urlContextMetadata"],m);const g=u(i,["avgLogprobs"]);g!=null&&f(t,["avgLogprobs"],g);const y=u(i,["groundingMetadata"]);y!=null&&f(t,["groundingMetadata"],y);const h=u(i,["index"]);h!=null&&f(t,["index"],h);const v=u(i,["logprobsResult"]);v!=null&&f(t,["logprobsResult"],v);const x=u(i,["safetyRatings"]);if(x!=null){let S=x;Array.isArray(S)&&(S=S.map(b=>b)),f(t,["safetyRatings"],S)}return t}function TT(i){const t={},l=u(i,["citationSources"]);if(l!=null){let a=l;Array.isArray(a)&&(a=a.map(r=>r)),f(t,["citations"],a)}return t}function uy(i){const t={},l=u(i,["parts"]);if(l!=null){let r=l;Array.isArray(r)&&(r=r.map(c=>$T(c))),f(t,["parts"],r)}const a=u(i,["role"]);return a!=null&&f(t,["role"],a),t}function xT(i,t){const l={},a=u(i,["displayName"]);if(t!==void 0&&a!=null&&f(t,["batch","displayName"],a),u(i,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return l}function ST(i,t){const l={},a=u(i,["displayName"]);t!==void 0&&a!=null&&f(t,["displayName"],a);const r=u(i,["dest"]);return t!==void 0&&r!=null&&f(t,["outputConfig"],fT(uT(r))),l}function rg(i,t){const l={},a=u(t,["model"]);a!=null&&f(l,["_url","model"],Pe(i,a));const r=u(t,["src"]);r!=null&&f(l,["batch","inputConfig"],hT(i,ay(i,r)));const c=u(t,["config"]);return c!=null&&xT(c,l),l}function wT(i,t){const l={},a=u(t,["model"]);a!=null&&f(l,["model"],Pe(i,a));const r=u(t,["src"]);r!=null&&f(l,["inputConfig"],pT(ay(i,r)));const c=u(t,["config"]);return c!=null&&ST(c,l),l}function AT(i,t){const l={},a=u(i,["displayName"]);return t!==void 0&&a!=null&&f(t,["batch","displayName"],a),l}function _T(i,t){const l={},a=u(t,["model"]);a!=null&&f(l,["_url","model"],Pe(i,a));const r=u(t,["src"]);r!=null&&f(l,["batch","inputConfig"],DT(i,r));const c=u(t,["config"]);return c!=null&&AT(c,l),l}function CT(i,t){const l={},a=u(t,["name"]);return a!=null&&f(l,["_url","name"],Jo(i,a)),l}function bT(i,t){const l={},a=u(t,["name"]);return a!=null&&f(l,["_url","name"],Jo(i,a)),l}function RT(i){const t={},l=u(i,["sdkHttpResponse"]);l!=null&&f(t,["sdkHttpResponse"],l);const a=u(i,["name"]);a!=null&&f(t,["name"],a);const r=u(i,["done"]);r!=null&&f(t,["done"],r);const c=u(i,["error"]);return c!=null&&f(t,["error"],c),t}function NT(i){const t={},l=u(i,["sdkHttpResponse"]);l!=null&&f(t,["sdkHttpResponse"],l);const a=u(i,["name"]);a!=null&&f(t,["name"],a);const r=u(i,["done"]);r!=null&&f(t,["done"],r);const c=u(i,["error"]);return c!=null&&f(t,["error"],c),t}function MT(i,t){const l={},a=u(t,["contents"]);if(a!=null){let c=Kc(i,a);Array.isArray(c)&&(c=c.map(m=>m)),f(l,["requests[]","request","content"],c)}const r=u(t,["config"]);return r!=null&&(f(l,["_self"],IT(r,l)),UE(l,{"requests[].*":"requests[].request.*"})),l}function IT(i,t){const l={},a=u(i,["taskType"]);t!==void 0&&a!=null&&f(t,["requests[]","taskType"],a);const r=u(i,["title"]);t!==void 0&&r!=null&&f(t,["requests[]","title"],r);const c=u(i,["outputDimensionality"]);if(t!==void 0&&c!=null&&f(t,["requests[]","outputDimensionality"],c),u(i,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(u(i,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return l}function DT(i,t){const l={},a=u(t,["fileName"]);a!=null&&f(l,["file_name"],a);const r=u(t,["inlinedRequests"]);return r!=null&&f(l,["requests"],MT(i,r)),l}function UT(i){const t={};if(u(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const l=u(i,["fileUri"]);l!=null&&f(t,["fileUri"],l);const a=u(i,["mimeType"]);return a!=null&&f(t,["mimeType"],a),t}function kT(i,t,l){const a={},r=u(t,["systemInstruction"]);l!==void 0&&r!=null&&f(l,["systemInstruction"],uy(Ct(r)));const c=u(t,["temperature"]);c!=null&&f(a,["temperature"],c);const m=u(t,["topP"]);m!=null&&f(a,["topP"],m);const g=u(t,["topK"]);g!=null&&f(a,["topK"],g);const y=u(t,["candidateCount"]);y!=null&&f(a,["candidateCount"],y);const h=u(t,["maxOutputTokens"]);h!=null&&f(a,["maxOutputTokens"],h);const v=u(t,["stopSequences"]);v!=null&&f(a,["stopSequences"],v);const x=u(t,["responseLogprobs"]);x!=null&&f(a,["responseLogprobs"],x);const S=u(t,["logprobs"]);S!=null&&f(a,["logprobs"],S);const b=u(t,["presencePenalty"]);b!=null&&f(a,["presencePenalty"],b);const A=u(t,["frequencyPenalty"]);A!=null&&f(a,["frequencyPenalty"],A);const _=u(t,["seed"]);_!=null&&f(a,["seed"],_);const G=u(t,["responseMimeType"]);G!=null&&f(a,["responseMimeType"],G);const M=u(t,["responseSchema"]);M!=null&&f(a,["responseSchema"],$c(M));const B=u(t,["responseJsonSchema"]);if(B!=null&&f(a,["responseJsonSchema"],B),u(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(u(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const V=u(t,["safetySettings"]);if(l!==void 0&&V!=null){let he=V;Array.isArray(he)&&(he=he.map(ve=>XT(ve))),f(l,["safetySettings"],he)}const $=u(t,["tools"]);if(l!==void 0&&$!=null){let he=Fo($);Array.isArray(he)&&(he=he.map(ve=>QT(Yo(ve)))),f(l,["tools"],he)}const Q=u(t,["toolConfig"]);if(l!==void 0&&Q!=null&&f(l,["toolConfig"],Q),u(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const j=u(t,["cachedContent"]);l!==void 0&&j!=null&&f(l,["cachedContent"],Fn(i,j));const W=u(t,["responseModalities"]);W!=null&&f(a,["responseModalities"],W);const me=u(t,["mediaResolution"]);me!=null&&f(a,["mediaResolution"],me);const te=u(t,["speechConfig"]);if(te!=null&&f(a,["speechConfig"],Xc(te)),u(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const ge=u(t,["thinkingConfig"]);ge!=null&&f(a,["thinkingConfig"],ge);const Ce=u(t,["imageConfig"]);return Ce!=null&&f(a,["imageConfig"],Ce),a}function LT(i){const t={},l=u(i,["sdkHttpResponse"]);l!=null&&f(t,["sdkHttpResponse"],l);const a=u(i,["candidates"]);if(a!=null){let y=a;Array.isArray(y)&&(y=y.map(h=>ET(h))),f(t,["candidates"],y)}const r=u(i,["modelVersion"]);r!=null&&f(t,["modelVersion"],r);const c=u(i,["promptFeedback"]);c!=null&&f(t,["promptFeedback"],c);const m=u(i,["responseId"]);m!=null&&f(t,["responseId"],m);const g=u(i,["usageMetadata"]);return g!=null&&f(t,["usageMetadata"],g),t}function GT(i,t){const l={},a=u(t,["name"]);return a!=null&&f(l,["_url","name"],Jo(i,a)),l}function PT(i,t){const l={},a=u(t,["name"]);return a!=null&&f(l,["_url","name"],Jo(i,a)),l}function BT(i){const t={};if(u(i,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const l=u(i,["enableWidget"]);return l!=null&&f(t,["enableWidget"],l),t}function qT(i){const t={},l=u(i,["timeRangeFilter"]);if(l!=null&&f(t,["timeRangeFilter"],l),u(i,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return t}function VT(i,t){const l={},a=u(t,["model"]);a!=null&&f(l,["request","model"],Pe(i,a));const r=u(t,["contents"]);if(r!=null){let g=sn(r);Array.isArray(g)&&(g=g.map(y=>uy(y))),f(l,["request","contents"],g)}const c=u(t,["metadata"]);c!=null&&f(l,["metadata"],c);const m=u(t,["config"]);return m!=null&&f(l,["request","generationConfig"],kT(i,m,u(l,["request"],{}))),l}function OT(i){const t={},l=u(i,["response"]);l!=null&&f(t,["response"],LT(l));const a=u(i,["error"]);return a!=null&&f(t,["error"],a),t}function HT(i,t){const l={},a=u(i,["pageSize"]);t!==void 0&&a!=null&&f(t,["_query","pageSize"],a);const r=u(i,["pageToken"]);if(t!==void 0&&r!=null&&f(t,["_query","pageToken"],r),u(i,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return l}function zT(i,t){const l={},a=u(i,["pageSize"]);t!==void 0&&a!=null&&f(t,["_query","pageSize"],a);const r=u(i,["pageToken"]);t!==void 0&&r!=null&&f(t,["_query","pageToken"],r);const c=u(i,["filter"]);return t!==void 0&&c!=null&&f(t,["_query","filter"],c),l}function YT(i){const t={},l=u(i,["config"]);return l!=null&&HT(l,t),t}function FT(i){const t={},l=u(i,["config"]);return l!=null&&zT(l,t),t}function JT(i){const t={},l=u(i,["sdkHttpResponse"]);l!=null&&f(t,["sdkHttpResponse"],l);const a=u(i,["nextPageToken"]);a!=null&&f(t,["nextPageToken"],a);const r=u(i,["operations"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(m=>ws(m))),f(t,["batchJobs"],c)}return t}function KT(i){const t={},l=u(i,["sdkHttpResponse"]);l!=null&&f(t,["sdkHttpResponse"],l);const a=u(i,["nextPageToken"]);a!=null&&f(t,["nextPageToken"],a);const r=u(i,["batchPredictionJobs"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(m=>Dc(m))),f(t,["batchJobs"],c)}return t}function $T(i){const t={},l=u(i,["videoMetadata"]);l!=null&&f(t,["videoMetadata"],l);const a=u(i,["thought"]);a!=null&&f(t,["thought"],a);const r=u(i,["inlineData"]);r!=null&&f(t,["inlineData"],gT(r));const c=u(i,["fileData"]);c!=null&&f(t,["fileData"],UT(c));const m=u(i,["thoughtSignature"]);m!=null&&f(t,["thoughtSignature"],m);const g=u(i,["functionCall"]);g!=null&&f(t,["functionCall"],g);const y=u(i,["codeExecutionResult"]);y!=null&&f(t,["codeExecutionResult"],y);const h=u(i,["executableCode"]);h!=null&&f(t,["executableCode"],h);const v=u(i,["functionResponse"]);v!=null&&f(t,["functionResponse"],v);const x=u(i,["text"]);return x!=null&&f(t,["text"],x),t}function XT(i){const t={};if(u(i,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const l=u(i,["category"]);l!=null&&f(t,["category"],l);const a=u(i,["threshold"]);return a!=null&&f(t,["threshold"],a),t}function QT(i){const t={},l=u(i,["functionDeclarations"]);if(l!=null){let h=l;Array.isArray(h)&&(h=h.map(v=>v)),f(t,["functionDeclarations"],h)}if(u(i,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const a=u(i,["googleSearch"]);a!=null&&f(t,["googleSearch"],qT(a));const r=u(i,["googleSearchRetrieval"]);if(r!=null&&f(t,["googleSearchRetrieval"],r),u(i,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=u(i,["googleMaps"]);c!=null&&f(t,["googleMaps"],BT(c));const m=u(i,["urlContext"]);m!=null&&f(t,["urlContext"],m);const g=u(i,["computerUse"]);g!=null&&f(t,["computerUse"],g);const y=u(i,["codeExecution"]);return y!=null&&f(t,["codeExecution"],y),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Zi;(function(i){i.PAGED_ITEM_BATCH_JOBS="batchJobs",i.PAGED_ITEM_MODELS="models",i.PAGED_ITEM_TUNING_JOBS="tuningJobs",i.PAGED_ITEM_FILES="files",i.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(Zi||(Zi={}));class Xl{constructor(t,l,a,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=l,this.init(t,a,r)}init(t,l,a){var r,c;this.nameInternal=t,this.pageInternal=l[this.nameInternal]||[],this.sdkHttpResponseInternal=l==null?void 0:l.sdkHttpResponse,this.idxInternal=0;let m={config:{}};!a||Object.keys(a).length===0?m={config:{}}:typeof a=="object"?m=Object.assign({},a):m=a,m.config&&(m.config.pageToken=l.nextPageToken),this.paramsInternal=m,this.pageInternalSize=(c=(r=m.config)===null||r===void 0?void 0:r.pageSize)!==null&&c!==void 0?c:this.pageInternal.length}initNextPage(t){this.init(this.nameInternal,t,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(t){return this.pageInternal[t]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const t=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:t,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const t=await this.requestInternal(this.params);return this.initNextPage(t),this.page}hasNextPage(){var t;return((t=this.params.config)===null||t===void 0?void 0:t.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ZT extends Wi{constructor(t){super(),this.apiClient=t,this.create=async l=>(this.apiClient.isVertexAI()&&(l.config=this.formatDestination(l.src,l.config)),this.createInternal(l)),this.createEmbeddings=async l=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(l)},this.list=async(l={})=>new Xl(Zi.PAGED_ITEM_BATCH_JOBS,a=>this.listInternal(a),await this.listInternal(l),l)}createInlinedGenerateContentRequest(t){const l=rg(this.apiClient,t),a=l._url,r=se("{model}:batchGenerateContent",a),g=l.batch.inputConfig.requests,y=g.requests,h=[];for(const v of y){const x=Object.assign({},v);if(x.systemInstruction){const S=x.systemInstruction;delete x.systemInstruction;const b=x.request;b.systemInstruction=S,x.request=b}h.push(x)}return g.requests=h,delete l.config,delete l._url,delete l._query,{path:r,body:l}}getGcsUri(t){if(typeof t=="string")return t.startsWith("gs://")?t:void 0;if(!Array.isArray(t)&&t.gcsUri&&t.gcsUri.length>0)return t.gcsUri[0]}getBigqueryUri(t){if(typeof t=="string")return t.startsWith("bq://")?t:void 0;if(!Array.isArray(t))return t.bigqueryUri}formatDestination(t,l){const a=l?Object.assign({},l):{},r=Date.now().toString();if(a.displayName||(a.displayName=`genaiBatchJob_${r}`),a.dest===void 0){const c=this.getGcsUri(t),m=this.getBigqueryUri(t);if(c)c.endsWith(".jsonl")?a.dest=`${c.slice(0,-6)}/dest`:a.dest=`${c}_dest_${r}`;else if(m)a.dest=`${m}_dest_${r}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return a}async createInternal(t){var l,a,r,c;let m,g="",y={};if(this.apiClient.isVertexAI()){const h=wT(this.apiClient,t);return g=se("batchPredictionJobs",h._url),y=h._query,delete h._url,delete h._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),m.then(v=>Dc(v))}else{const h=rg(this.apiClient,t);return g=se("{model}:batchGenerateContent",h._url),y=h._query,delete h._url,delete h._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(c=t.config)===null||c===void 0?void 0:c.abortSignal}).then(v=>v.json()),m.then(v=>ws(v))}}async createEmbeddingsInternal(t){var l,a;let r,c="",m={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const g=_T(this.apiClient,t);return c=se("{model}:asyncBatchEmbedContent",g._url),m=g._query,delete g._url,delete g._query,r=this.apiClient.request({path:c,queryParams:m,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),r.then(y=>ws(y))}}async get(t){var l,a,r,c;let m,g="",y={};if(this.apiClient.isVertexAI()){const h=PT(this.apiClient,t);return g=se("batchPredictionJobs/{name}",h._url),y=h._query,delete h._url,delete h._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),m.then(v=>Dc(v))}else{const h=GT(this.apiClient,t);return g=se("batches/{name}",h._url),y=h._query,delete h._url,delete h._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(c=t.config)===null||c===void 0?void 0:c.abortSignal}).then(v=>v.json()),m.then(v=>ws(v))}}async cancel(t){var l,a,r,c;let m="",g={};if(this.apiClient.isVertexAI()){const y=vT(this.apiClient,t);m=se("batchPredictionJobs/{name}:cancel",y._url),g=y._query,delete y._url,delete y._query,await this.apiClient.request({path:m,queryParams:g,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal})}else{const y=yT(this.apiClient,t);m=se("batches/{name}:cancel",y._url),g=y._query,delete y._url,delete y._query,await this.apiClient.request({path:m,queryParams:g,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(c=t.config)===null||c===void 0?void 0:c.abortSignal})}}async listInternal(t){var l,a,r,c;let m,g="",y={};if(this.apiClient.isVertexAI()){const h=FT(t);return g=se("batchPredictionJobs",h._url),y=h._query,delete h._url,delete h._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(x=>{const S=x;return S.sdkHttpResponse={headers:v.headers},S})),m.then(v=>{const x=KT(v),S=new og;return Object.assign(S,x),S})}else{const h=YT(t);return g=se("batches",h._url),y=h._query,delete h._url,delete h._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(c=t.config)===null||c===void 0?void 0:c.abortSignal}).then(v=>v.json().then(x=>{const S=x;return S.sdkHttpResponse={headers:v.headers},S})),m.then(v=>{const x=JT(v),S=new og;return Object.assign(S,x),S})}}async delete(t){var l,a,r,c;let m,g="",y={};if(this.apiClient.isVertexAI()){const h=bT(this.apiClient,t);return g=se("batchPredictionJobs/{name}",h._url),y=h._query,delete h._url,delete h._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(x=>{const S=x;return S.sdkHttpResponse={headers:v.headers},S})),m.then(v=>NT(v))}else{const h=CT(this.apiClient,t);return g=se("batches/{name}",h._url),y=h._query,delete h._url,delete h._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(c=t.config)===null||c===void 0?void 0:c.abortSignal}).then(v=>v.json().then(x=>{const S=x;return S.sdkHttpResponse={headers:v.headers},S})),m.then(v=>RT(v))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function WT(i){const t={};if(u(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const l=u(i,["data"]);l!=null&&f(t,["data"],l);const a=u(i,["mimeType"]);return a!=null&&f(t,["mimeType"],a),t}function ug(i){const t={},l=u(i,["parts"]);if(l!=null){let r=l;Array.isArray(r)&&(r=r.map(c=>Ex(c))),f(t,["parts"],r)}const a=u(i,["role"]);return a!=null&&f(t,["role"],a),t}function jT(i,t){const l={},a=u(i,["ttl"]);t!==void 0&&a!=null&&f(t,["ttl"],a);const r=u(i,["expireTime"]);t!==void 0&&r!=null&&f(t,["expireTime"],r);const c=u(i,["displayName"]);t!==void 0&&c!=null&&f(t,["displayName"],c);const m=u(i,["contents"]);if(t!==void 0&&m!=null){let v=sn(m);Array.isArray(v)&&(v=v.map(x=>ug(x))),f(t,["contents"],v)}const g=u(i,["systemInstruction"]);t!==void 0&&g!=null&&f(t,["systemInstruction"],ug(Ct(g)));const y=u(i,["tools"]);if(t!==void 0&&y!=null){let v=y;Array.isArray(v)&&(v=v.map(x=>Tx(x))),f(t,["tools"],v)}const h=u(i,["toolConfig"]);if(t!==void 0&&h!=null&&f(t,["toolConfig"],h),u(i,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return l}function ex(i,t){const l={},a=u(i,["ttl"]);t!==void 0&&a!=null&&f(t,["ttl"],a);const r=u(i,["expireTime"]);t!==void 0&&r!=null&&f(t,["expireTime"],r);const c=u(i,["displayName"]);t!==void 0&&c!=null&&f(t,["displayName"],c);const m=u(i,["contents"]);if(t!==void 0&&m!=null){let x=sn(m);Array.isArray(x)&&(x=x.map(S=>S)),f(t,["contents"],x)}const g=u(i,["systemInstruction"]);t!==void 0&&g!=null&&f(t,["systemInstruction"],Ct(g));const y=u(i,["tools"]);if(t!==void 0&&y!=null){let x=y;Array.isArray(x)&&(x=x.map(S=>xx(S))),f(t,["tools"],x)}const h=u(i,["toolConfig"]);t!==void 0&&h!=null&&f(t,["toolConfig"],h);const v=u(i,["kmsKeyName"]);return t!==void 0&&v!=null&&f(t,["encryption_spec","kmsKeyName"],v),l}function tx(i,t){const l={},a=u(t,["model"]);a!=null&&f(l,["model"],Zg(i,a));const r=u(t,["config"]);return r!=null&&jT(r,l),l}function nx(i,t){const l={},a=u(t,["model"]);a!=null&&f(l,["model"],Zg(i,a));const r=u(t,["config"]);return r!=null&&ex(r,l),l}function ix(i,t){const l={},a=u(t,["name"]);return a!=null&&f(l,["_url","name"],Fn(i,a)),l}function ox(i,t){const l={},a=u(t,["name"]);return a!=null&&f(l,["_url","name"],Fn(i,a)),l}function lx(i){const t={},l=u(i,["sdkHttpResponse"]);return l!=null&&f(t,["sdkHttpResponse"],l),t}function ax(i){const t={},l=u(i,["sdkHttpResponse"]);return l!=null&&f(t,["sdkHttpResponse"],l),t}function sx(i){const t={};if(u(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const l=u(i,["fileUri"]);l!=null&&f(t,["fileUri"],l);const a=u(i,["mimeType"]);return a!=null&&f(t,["mimeType"],a),t}function rx(i){const t={};if(u(i,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const l=u(i,["description"]);l!=null&&f(t,["description"],l);const a=u(i,["name"]);a!=null&&f(t,["name"],a);const r=u(i,["parameters"]);r!=null&&f(t,["parameters"],r);const c=u(i,["parametersJsonSchema"]);c!=null&&f(t,["parametersJsonSchema"],c);const m=u(i,["response"]);m!=null&&f(t,["response"],m);const g=u(i,["responseJsonSchema"]);return g!=null&&f(t,["responseJsonSchema"],g),t}function ux(i,t){const l={},a=u(t,["name"]);return a!=null&&f(l,["_url","name"],Fn(i,a)),l}function cx(i,t){const l={},a=u(t,["name"]);return a!=null&&f(l,["_url","name"],Fn(i,a)),l}function dx(i){const t={};if(u(i,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const l=u(i,["enableWidget"]);return l!=null&&f(t,["enableWidget"],l),t}function fx(i){const t={},l=u(i,["timeRangeFilter"]);if(l!=null&&f(t,["timeRangeFilter"],l),u(i,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return t}function mx(i,t){const l={},a=u(i,["pageSize"]);t!==void 0&&a!=null&&f(t,["_query","pageSize"],a);const r=u(i,["pageToken"]);return t!==void 0&&r!=null&&f(t,["_query","pageToken"],r),l}function hx(i,t){const l={},a=u(i,["pageSize"]);t!==void 0&&a!=null&&f(t,["_query","pageSize"],a);const r=u(i,["pageToken"]);return t!==void 0&&r!=null&&f(t,["_query","pageToken"],r),l}function px(i){const t={},l=u(i,["config"]);return l!=null&&mx(l,t),t}function gx(i){const t={},l=u(i,["config"]);return l!=null&&hx(l,t),t}function yx(i){const t={},l=u(i,["sdkHttpResponse"]);l!=null&&f(t,["sdkHttpResponse"],l);const a=u(i,["nextPageToken"]);a!=null&&f(t,["nextPageToken"],a);const r=u(i,["cachedContents"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(m=>m)),f(t,["cachedContents"],c)}return t}function vx(i){const t={},l=u(i,["sdkHttpResponse"]);l!=null&&f(t,["sdkHttpResponse"],l);const a=u(i,["nextPageToken"]);a!=null&&f(t,["nextPageToken"],a);const r=u(i,["cachedContents"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(m=>m)),f(t,["cachedContents"],c)}return t}function Ex(i){const t={},l=u(i,["videoMetadata"]);l!=null&&f(t,["videoMetadata"],l);const a=u(i,["thought"]);a!=null&&f(t,["thought"],a);const r=u(i,["inlineData"]);r!=null&&f(t,["inlineData"],WT(r));const c=u(i,["fileData"]);c!=null&&f(t,["fileData"],sx(c));const m=u(i,["thoughtSignature"]);m!=null&&f(t,["thoughtSignature"],m);const g=u(i,["functionCall"]);g!=null&&f(t,["functionCall"],g);const y=u(i,["codeExecutionResult"]);y!=null&&f(t,["codeExecutionResult"],y);const h=u(i,["executableCode"]);h!=null&&f(t,["executableCode"],h);const v=u(i,["functionResponse"]);v!=null&&f(t,["functionResponse"],v);const x=u(i,["text"]);return x!=null&&f(t,["text"],x),t}function Tx(i){const t={},l=u(i,["functionDeclarations"]);if(l!=null){let h=l;Array.isArray(h)&&(h=h.map(v=>v)),f(t,["functionDeclarations"],h)}if(u(i,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const a=u(i,["googleSearch"]);a!=null&&f(t,["googleSearch"],fx(a));const r=u(i,["googleSearchRetrieval"]);if(r!=null&&f(t,["googleSearchRetrieval"],r),u(i,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=u(i,["googleMaps"]);c!=null&&f(t,["googleMaps"],dx(c));const m=u(i,["urlContext"]);m!=null&&f(t,["urlContext"],m);const g=u(i,["computerUse"]);g!=null&&f(t,["computerUse"],g);const y=u(i,["codeExecution"]);return y!=null&&f(t,["codeExecution"],y),t}function xx(i){const t={},l=u(i,["functionDeclarations"]);if(l!=null){let x=l;Array.isArray(x)&&(x=x.map(S=>rx(S))),f(t,["functionDeclarations"],x)}const a=u(i,["retrieval"]);a!=null&&f(t,["retrieval"],a);const r=u(i,["googleSearch"]);r!=null&&f(t,["googleSearch"],r);const c=u(i,["googleSearchRetrieval"]);c!=null&&f(t,["googleSearchRetrieval"],c);const m=u(i,["enterpriseWebSearch"]);m!=null&&f(t,["enterpriseWebSearch"],m);const g=u(i,["googleMaps"]);g!=null&&f(t,["googleMaps"],g);const y=u(i,["urlContext"]);y!=null&&f(t,["urlContext"],y);const h=u(i,["computerUse"]);h!=null&&f(t,["computerUse"],h);const v=u(i,["codeExecution"]);return v!=null&&f(t,["codeExecution"],v),t}function Sx(i,t){const l={},a=u(i,["ttl"]);t!==void 0&&a!=null&&f(t,["ttl"],a);const r=u(i,["expireTime"]);return t!==void 0&&r!=null&&f(t,["expireTime"],r),l}function wx(i,t){const l={},a=u(i,["ttl"]);t!==void 0&&a!=null&&f(t,["ttl"],a);const r=u(i,["expireTime"]);return t!==void 0&&r!=null&&f(t,["expireTime"],r),l}function Ax(i,t){const l={},a=u(t,["name"]);a!=null&&f(l,["_url","name"],Fn(i,a));const r=u(t,["config"]);return r!=null&&Sx(r,l),l}function _x(i,t){const l={},a=u(t,["name"]);a!=null&&f(l,["_url","name"],Fn(i,a));const r=u(t,["config"]);return r!=null&&wx(r,l),l}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Cx extends Wi{constructor(t){super(),this.apiClient=t,this.list=async(l={})=>new Xl(Zi.PAGED_ITEM_CACHED_CONTENTS,a=>this.listInternal(a),await this.listInternal(l),l)}async create(t){var l,a,r,c;let m,g="",y={};if(this.apiClient.isVertexAI()){const h=nx(this.apiClient,t);return g=se("cachedContents",h._url),y=h._query,delete h._url,delete h._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),m.then(v=>v)}else{const h=tx(this.apiClient,t);return g=se("cachedContents",h._url),y=h._query,delete h._url,delete h._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(c=t.config)===null||c===void 0?void 0:c.abortSignal}).then(v=>v.json()),m.then(v=>v)}}async get(t){var l,a,r,c;let m,g="",y={};if(this.apiClient.isVertexAI()){const h=cx(this.apiClient,t);return g=se("{name}",h._url),y=h._query,delete h._url,delete h._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),m.then(v=>v)}else{const h=ux(this.apiClient,t);return g=se("{name}",h._url),y=h._query,delete h._url,delete h._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(c=t.config)===null||c===void 0?void 0:c.abortSignal}).then(v=>v.json()),m.then(v=>v)}}async delete(t){var l,a,r,c;let m,g="",y={};if(this.apiClient.isVertexAI()){const h=ox(this.apiClient,t);return g=se("{name}",h._url),y=h._query,delete h._url,delete h._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(x=>{const S=x;return S.sdkHttpResponse={headers:v.headers},S})),m.then(v=>{const x=ax(v),S=new ng;return Object.assign(S,x),S})}else{const h=ix(this.apiClient,t);return g=se("{name}",h._url),y=h._query,delete h._url,delete h._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(c=t.config)===null||c===void 0?void 0:c.abortSignal}).then(v=>v.json().then(x=>{const S=x;return S.sdkHttpResponse={headers:v.headers},S})),m.then(v=>{const x=lx(v),S=new ng;return Object.assign(S,x),S})}}async update(t){var l,a,r,c;let m,g="",y={};if(this.apiClient.isVertexAI()){const h=_x(this.apiClient,t);return g=se("{name}",h._url),y=h._query,delete h._url,delete h._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),m.then(v=>v)}else{const h=Ax(this.apiClient,t);return g=se("{name}",h._url),y=h._query,delete h._url,delete h._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(c=t.config)===null||c===void 0?void 0:c.abortSignal}).then(v=>v.json()),m.then(v=>v)}}async listInternal(t){var l,a,r,c;let m,g="",y={};if(this.apiClient.isVertexAI()){const h=gx(t);return g=se("cachedContents",h._url),y=h._query,delete h._url,delete h._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(x=>{const S=x;return S.sdkHttpResponse={headers:v.headers},S})),m.then(v=>{const x=vx(v),S=new ig;return Object.assign(S,x),S})}else{const h=px(t);return g=se("cachedContents",h._url),y=h._query,delete h._url,delete h._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(c=t.config)===null||c===void 0?void 0:c.abortSignal}).then(v=>v.json().then(x=>{const S=x;return S.sdkHttpResponse={headers:v.headers},S})),m.then(v=>{const x=yx(v),S=new ig;return Object.assign(S,x),S})}}}function cg(i){var t=typeof Symbol=="function"&&Symbol.iterator,l=t&&i[t],a=0;if(l)return l.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&a>=i.length&&(i=void 0),{value:i&&i[a++],done:!i}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function je(i){return this instanceof je?(this.v=i,this):new je(i)}function Oo(i,t,l){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var a=l.apply(i,t||[]),r,c=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),g("next"),g("throw"),g("return",m),r[Symbol.asyncIterator]=function(){return this},r;function m(b){return function(A){return Promise.resolve(A).then(b,x)}}function g(b,A){a[b]&&(r[b]=function(_){return new Promise(function(G,M){c.push([b,_,G,M])>1||y(b,_)})},A&&(r[b]=A(r[b])))}function y(b,A){try{h(a[b](A))}catch(_){S(c[0][3],_)}}function h(b){b.value instanceof je?Promise.resolve(b.value.v).then(v,x):S(c[0][2],b)}function v(b){y("next",b)}function x(b){y("throw",b)}function S(b,A){b(A),c.shift(),c.length&&y(c[0][0],c[0][1])}}function Kl(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=i[Symbol.asyncIterator],l;return t?t.call(i):(i=typeof cg=="function"?cg(i):i[Symbol.iterator](),l={},a("next"),a("throw"),a("return"),l[Symbol.asyncIterator]=function(){return this},l);function a(c){l[c]=i[c]&&function(m){return new Promise(function(g,y){m=i[c](m),r(g,y,m.done,m.value)})}}function r(c,m,g,y){Promise.resolve(y).then(function(h){c({value:h,done:g})},m)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function bx(i){var t;if(i.candidates==null||i.candidates.length===0)return!1;const l=(t=i.candidates[0])===null||t===void 0?void 0:t.content;return l===void 0?!1:cy(l)}function cy(i){if(i.parts===void 0||i.parts.length===0)return!1;for(const t of i.parts)if(t===void 0||Object.keys(t).length===0)return!1;return!0}function Rx(i){if(i.length!==0){for(const t of i)if(t.role!=="user"&&t.role!=="model")throw new Error(`Role must be user or model, but got ${t.role}.`)}}function dg(i){if(i===void 0||i.length===0)return[];const t=[],l=i.length;let a=0;for(;a<l;)if(i[a].role==="user")t.push(i[a]),a++;else{const r=[];let c=!0;for(;a<l&&i[a].role==="model";)r.push(i[a]),c&&!cy(i[a])&&(c=!1),a++;c?t.push(...r):t.pop()}return t}class Nx{constructor(t,l){this.modelsModule=t,this.apiClient=l}create(t){return new Mx(this.apiClient,this.modelsModule,t.model,t.config,structuredClone(t.history))}}class Mx{constructor(t,l,a,r={},c=[]){this.apiClient=t,this.modelsModule=l,this.model=a,this.config=r,this.history=c,this.sendPromise=Promise.resolve(),Rx(c)}async sendMessage(t){var l;await this.sendPromise;const a=Ct(t.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(a),config:(l=t.config)!==null&&l!==void 0?l:this.config});return this.sendPromise=(async()=>{var c,m,g;const y=await r,h=(m=(c=y.candidates)===null||c===void 0?void 0:c[0])===null||m===void 0?void 0:m.content,v=y.automaticFunctionCallingHistory,x=this.getHistory(!0).length;let S=[];v!=null&&(S=(g=v.slice(x))!==null&&g!==void 0?g:[]);const b=h?[h]:[];this.recordHistory(a,b,S)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(t){var l;await this.sendPromise;const a=Ct(t.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(a),config:(l=t.config)!==null&&l!==void 0?l:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const c=await r;return this.processStreamResponse(c,a)}getHistory(t=!1){const l=t?dg(this.history):this.history;return structuredClone(l)}processStreamResponse(t,l){var a,r;return Oo(this,arguments,function*(){var m,g,y,h;const v=[];try{for(var x=!0,S=Kl(t),b;b=yield je(S.next()),m=b.done,!m;x=!0){h=b.value,x=!1;const A=h;if(bx(A)){const _=(r=(a=A.candidates)===null||a===void 0?void 0:a[0])===null||r===void 0?void 0:r.content;_!==void 0&&v.push(_)}yield yield je(A)}}catch(A){g={error:A}}finally{try{!x&&!m&&(y=S.return)&&(yield je(y.call(S)))}finally{if(g)throw g.error}}this.recordHistory(l,v)})}recordHistory(t,l,a){let r=[];l.length>0&&l.every(c=>c.role!==void 0)?r=l:r.push({role:"model",parts:[]}),a&&a.length>0?this.history.push(...dg(a)):this.history.push(t),this.history.push(...r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class zs extends Error{constructor(t){super(t.message),this.name="ApiError",this.status=t.status,Object.setPrototypeOf(this,zs.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ix(i){const t={},l=u(i,["file"]);return l!=null&&f(t,["file"],l),t}function Dx(i){const t={},l=u(i,["sdkHttpResponse"]);return l!=null&&f(t,["sdkHttpResponse"],l),t}function Ux(i){const t={},l=u(i,["name"]);return l!=null&&f(t,["_url","file"],iy(l)),t}function kx(i){const t={},l=u(i,["sdkHttpResponse"]);return l!=null&&f(t,["sdkHttpResponse"],l),t}function Lx(i){const t={},l=u(i,["name"]);return l!=null&&f(t,["_url","file"],iy(l)),t}function Gx(i,t){const l={},a=u(i,["pageSize"]);t!==void 0&&a!=null&&f(t,["_query","pageSize"],a);const r=u(i,["pageToken"]);return t!==void 0&&r!=null&&f(t,["_query","pageToken"],r),l}function Px(i){const t={},l=u(i,["config"]);return l!=null&&Gx(l,t),t}function Bx(i){const t={},l=u(i,["sdkHttpResponse"]);l!=null&&f(t,["sdkHttpResponse"],l);const a=u(i,["nextPageToken"]);a!=null&&f(t,["nextPageToken"],a);const r=u(i,["files"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(m=>m)),f(t,["files"],c)}return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class qx extends Wi{constructor(t){super(),this.apiClient=t,this.list=async(l={})=>new Xl(Zi.PAGED_ITEM_FILES,a=>this.listInternal(a),await this.listInternal(l),l)}async upload(t){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(t.file,t.config).then(l=>l)}async download(t){await this.apiClient.downloadFile(t)}async listInternal(t){var l,a;let r,c="",m={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const g=Px(t);return c=se("files",g._url),m=g._query,delete g._url,delete g._query,r=this.apiClient.request({path:c,queryParams:m,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(h=>{const v=h;return v.sdkHttpResponse={headers:y.headers},v})),r.then(y=>{const h=Bx(y),v=new QE;return Object.assign(v,h),v})}}async createInternal(t){var l,a;let r,c="",m={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const g=Ix(t);return c=se("upload/v1beta/files",g._url),m=g._query,delete g._url,delete g._query,r=this.apiClient.request({path:c,queryParams:m,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),r.then(y=>{const h=Dx(y),v=new ZE;return Object.assign(v,h),v})}}async get(t){var l,a;let r,c="",m={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const g=Lx(t);return c=se("files/{file}",g._url),m=g._query,delete g._url,delete g._query,r=this.apiClient.request({path:c,queryParams:m,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),r.then(y=>y)}}async delete(t){var l,a;let r,c="",m={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const g=Ux(t);return c=se("files/{file}",g._url),m=g._query,delete g._url,delete g._query,r=this.apiClient.request({path:c,queryParams:m,body:JSON.stringify(g),httpMethod:"DELETE",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(h=>{const v=h;return v.sdkHttpResponse={headers:y.headers},v})),r.then(y=>{const h=kx(y),v=new WE;return Object.assign(v,h),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function As(i){const t={};if(u(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const l=u(i,["data"]);l!=null&&f(t,["data"],l);const a=u(i,["mimeType"]);return a!=null&&f(t,["mimeType"],a),t}function Vx(i){const t={},l=u(i,["parts"]);if(l!=null){let r=l;Array.isArray(r)&&(r=r.map(c=>tS(c))),f(t,["parts"],r)}const a=u(i,["role"]);return a!=null&&f(t,["role"],a),t}function Ox(i){const t={};if(u(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const l=u(i,["fileUri"]);l!=null&&f(t,["fileUri"],l);const a=u(i,["mimeType"]);return a!=null&&f(t,["mimeType"],a),t}function Hx(i){const t={};if(u(i,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const l=u(i,["description"]);l!=null&&f(t,["description"],l);const a=u(i,["name"]);a!=null&&f(t,["name"],a);const r=u(i,["parameters"]);r!=null&&f(t,["parameters"],r);const c=u(i,["parametersJsonSchema"]);c!=null&&f(t,["parametersJsonSchema"],c);const m=u(i,["response"]);m!=null&&f(t,["response"],m);const g=u(i,["responseJsonSchema"]);return g!=null&&f(t,["responseJsonSchema"],g),t}function zx(i){const t={},l=u(i,["modelSelectionConfig"]);l!=null&&f(t,["modelConfig"],l);const a=u(i,["audioTimestamp"]);a!=null&&f(t,["audioTimestamp"],a);const r=u(i,["candidateCount"]);r!=null&&f(t,["candidateCount"],r);const c=u(i,["enableAffectiveDialog"]);c!=null&&f(t,["enableAffectiveDialog"],c);const m=u(i,["frequencyPenalty"]);m!=null&&f(t,["frequencyPenalty"],m);const g=u(i,["logprobs"]);g!=null&&f(t,["logprobs"],g);const y=u(i,["maxOutputTokens"]);y!=null&&f(t,["maxOutputTokens"],y);const h=u(i,["mediaResolution"]);h!=null&&f(t,["mediaResolution"],h);const v=u(i,["presencePenalty"]);v!=null&&f(t,["presencePenalty"],v);const x=u(i,["responseJsonSchema"]);x!=null&&f(t,["responseJsonSchema"],x);const S=u(i,["responseLogprobs"]);S!=null&&f(t,["responseLogprobs"],S);const b=u(i,["responseMimeType"]);b!=null&&f(t,["responseMimeType"],b);const A=u(i,["responseModalities"]);A!=null&&f(t,["responseModalities"],A);const _=u(i,["responseSchema"]);_!=null&&f(t,["responseSchema"],_);const G=u(i,["routingConfig"]);G!=null&&f(t,["routingConfig"],G);const M=u(i,["seed"]);M!=null&&f(t,["seed"],M);const B=u(i,["speechConfig"]);B!=null&&f(t,["speechConfig"],dy(B));const V=u(i,["stopSequences"]);V!=null&&f(t,["stopSequences"],V);const $=u(i,["temperature"]);$!=null&&f(t,["temperature"],$);const Q=u(i,["thinkingConfig"]);Q!=null&&f(t,["thinkingConfig"],Q);const j=u(i,["topK"]);j!=null&&f(t,["topK"],j);const W=u(i,["topP"]);if(W!=null&&f(t,["topP"],W),u(i,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}function Yx(i){const t={};if(u(i,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const l=u(i,["enableWidget"]);return l!=null&&f(t,["enableWidget"],l),t}function Fx(i){const t={},l=u(i,["timeRangeFilter"]);if(l!=null&&f(t,["timeRangeFilter"],l),u(i,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return t}function Jx(i,t){const l={},a=u(i,["generationConfig"]);t!==void 0&&a!=null&&f(t,["setup","generationConfig"],a);const r=u(i,["responseModalities"]);t!==void 0&&r!=null&&f(t,["setup","generationConfig","responseModalities"],r);const c=u(i,["temperature"]);t!==void 0&&c!=null&&f(t,["setup","generationConfig","temperature"],c);const m=u(i,["topP"]);t!==void 0&&m!=null&&f(t,["setup","generationConfig","topP"],m);const g=u(i,["topK"]);t!==void 0&&g!=null&&f(t,["setup","generationConfig","topK"],g);const y=u(i,["maxOutputTokens"]);t!==void 0&&y!=null&&f(t,["setup","generationConfig","maxOutputTokens"],y);const h=u(i,["mediaResolution"]);t!==void 0&&h!=null&&f(t,["setup","generationConfig","mediaResolution"],h);const v=u(i,["seed"]);t!==void 0&&v!=null&&f(t,["setup","generationConfig","seed"],v);const x=u(i,["speechConfig"]);t!==void 0&&x!=null&&f(t,["setup","generationConfig","speechConfig"],Qc(x));const S=u(i,["thinkingConfig"]);t!==void 0&&S!=null&&f(t,["setup","generationConfig","thinkingConfig"],S);const b=u(i,["enableAffectiveDialog"]);t!==void 0&&b!=null&&f(t,["setup","generationConfig","enableAffectiveDialog"],b);const A=u(i,["systemInstruction"]);t!==void 0&&A!=null&&f(t,["setup","systemInstruction"],Vx(Ct(A)));const _=u(i,["tools"]);if(t!==void 0&&_!=null){let j=Fo(_);Array.isArray(j)&&(j=j.map(W=>iS(Yo(W)))),f(t,["setup","tools"],j)}const G=u(i,["sessionResumption"]);t!==void 0&&G!=null&&f(t,["setup","sessionResumption"],nS(G));const M=u(i,["inputAudioTranscription"]);t!==void 0&&M!=null&&f(t,["setup","inputAudioTranscription"],M);const B=u(i,["outputAudioTranscription"]);t!==void 0&&B!=null&&f(t,["setup","outputAudioTranscription"],B);const V=u(i,["realtimeInputConfig"]);t!==void 0&&V!=null&&f(t,["setup","realtimeInputConfig"],V);const $=u(i,["contextWindowCompression"]);t!==void 0&&$!=null&&f(t,["setup","contextWindowCompression"],$);const Q=u(i,["proactivity"]);return t!==void 0&&Q!=null&&f(t,["setup","proactivity"],Q),l}function Kx(i,t){const l={},a=u(i,["generationConfig"]);t!==void 0&&a!=null&&f(t,["setup","generationConfig"],zx(a));const r=u(i,["responseModalities"]);t!==void 0&&r!=null&&f(t,["setup","generationConfig","responseModalities"],r);const c=u(i,["temperature"]);t!==void 0&&c!=null&&f(t,["setup","generationConfig","temperature"],c);const m=u(i,["topP"]);t!==void 0&&m!=null&&f(t,["setup","generationConfig","topP"],m);const g=u(i,["topK"]);t!==void 0&&g!=null&&f(t,["setup","generationConfig","topK"],g);const y=u(i,["maxOutputTokens"]);t!==void 0&&y!=null&&f(t,["setup","generationConfig","maxOutputTokens"],y);const h=u(i,["mediaResolution"]);t!==void 0&&h!=null&&f(t,["setup","generationConfig","mediaResolution"],h);const v=u(i,["seed"]);t!==void 0&&v!=null&&f(t,["setup","generationConfig","seed"],v);const x=u(i,["speechConfig"]);t!==void 0&&x!=null&&f(t,["setup","generationConfig","speechConfig"],dy(Qc(x)));const S=u(i,["thinkingConfig"]);t!==void 0&&S!=null&&f(t,["setup","generationConfig","thinkingConfig"],S);const b=u(i,["enableAffectiveDialog"]);t!==void 0&&b!=null&&f(t,["setup","generationConfig","enableAffectiveDialog"],b);const A=u(i,["systemInstruction"]);t!==void 0&&A!=null&&f(t,["setup","systemInstruction"],Ct(A));const _=u(i,["tools"]);if(t!==void 0&&_!=null){let j=Fo(_);Array.isArray(j)&&(j=j.map(W=>oS(Yo(W)))),f(t,["setup","tools"],j)}const G=u(i,["sessionResumption"]);t!==void 0&&G!=null&&f(t,["setup","sessionResumption"],G);const M=u(i,["inputAudioTranscription"]);t!==void 0&&M!=null&&f(t,["setup","inputAudioTranscription"],M);const B=u(i,["outputAudioTranscription"]);t!==void 0&&B!=null&&f(t,["setup","outputAudioTranscription"],B);const V=u(i,["realtimeInputConfig"]);t!==void 0&&V!=null&&f(t,["setup","realtimeInputConfig"],V);const $=u(i,["contextWindowCompression"]);t!==void 0&&$!=null&&f(t,["setup","contextWindowCompression"],$);const Q=u(i,["proactivity"]);return t!==void 0&&Q!=null&&f(t,["setup","proactivity"],Q),l}function $x(i,t){const l={},a=u(t,["model"]);a!=null&&f(l,["setup","model"],Pe(i,a));const r=u(t,["config"]);return r!=null&&f(l,["config"],Jx(r,l)),l}function Xx(i,t){const l={},a=u(t,["model"]);a!=null&&f(l,["setup","model"],Pe(i,a));const r=u(t,["config"]);return r!=null&&f(l,["config"],Kx(r,l)),l}function Qx(i){const t={},l=u(i,["musicGenerationConfig"]);return l!=null&&f(t,["musicGenerationConfig"],l),t}function Zx(i){const t={},l=u(i,["weightedPrompts"]);if(l!=null){let a=l;Array.isArray(a)&&(a=a.map(r=>r)),f(t,["weightedPrompts"],a)}return t}function Wx(i){const t={},l=u(i,["media"]);if(l!=null){let h=Wg(l);Array.isArray(h)&&(h=h.map(v=>As(v))),f(t,["mediaChunks"],h)}const a=u(i,["audio"]);a!=null&&f(t,["audio"],As(ey(a)));const r=u(i,["audioStreamEnd"]);r!=null&&f(t,["audioStreamEnd"],r);const c=u(i,["video"]);c!=null&&f(t,["video"],As(jg(c)));const m=u(i,["text"]);m!=null&&f(t,["text"],m);const g=u(i,["activityStart"]);g!=null&&f(t,["activityStart"],g);const y=u(i,["activityEnd"]);return y!=null&&f(t,["activityEnd"],y),t}function jx(i){const t={},l=u(i,["media"]);if(l!=null){let h=Wg(l);Array.isArray(h)&&(h=h.map(v=>v)),f(t,["mediaChunks"],h)}const a=u(i,["audio"]);a!=null&&f(t,["audio"],ey(a));const r=u(i,["audioStreamEnd"]);r!=null&&f(t,["audioStreamEnd"],r);const c=u(i,["video"]);c!=null&&f(t,["video"],jg(c));const m=u(i,["text"]);m!=null&&f(t,["text"],m);const g=u(i,["activityStart"]);g!=null&&f(t,["activityStart"],g);const y=u(i,["activityEnd"]);return y!=null&&f(t,["activityEnd"],y),t}function eS(i){const t={},l=u(i,["setupComplete"]);l!=null&&f(t,["setupComplete"],l);const a=u(i,["serverContent"]);a!=null&&f(t,["serverContent"],a);const r=u(i,["toolCall"]);r!=null&&f(t,["toolCall"],r);const c=u(i,["toolCallCancellation"]);c!=null&&f(t,["toolCallCancellation"],c);const m=u(i,["usageMetadata"]);m!=null&&f(t,["usageMetadata"],lS(m));const g=u(i,["goAway"]);g!=null&&f(t,["goAway"],g);const y=u(i,["sessionResumptionUpdate"]);return y!=null&&f(t,["sessionResumptionUpdate"],y),t}function tS(i){const t={},l=u(i,["videoMetadata"]);l!=null&&f(t,["videoMetadata"],l);const a=u(i,["thought"]);a!=null&&f(t,["thought"],a);const r=u(i,["inlineData"]);r!=null&&f(t,["inlineData"],As(r));const c=u(i,["fileData"]);c!=null&&f(t,["fileData"],Ox(c));const m=u(i,["thoughtSignature"]);m!=null&&f(t,["thoughtSignature"],m);const g=u(i,["functionCall"]);g!=null&&f(t,["functionCall"],g);const y=u(i,["codeExecutionResult"]);y!=null&&f(t,["codeExecutionResult"],y);const h=u(i,["executableCode"]);h!=null&&f(t,["executableCode"],h);const v=u(i,["functionResponse"]);v!=null&&f(t,["functionResponse"],v);const x=u(i,["text"]);return x!=null&&f(t,["text"],x),t}function nS(i){const t={},l=u(i,["handle"]);if(l!=null&&f(t,["handle"],l),u(i,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function dy(i){const t={},l=u(i,["voiceConfig"]);if(l!=null&&f(t,["voiceConfig"],l),u(i,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const a=u(i,["languageCode"]);return a!=null&&f(t,["languageCode"],a),t}function iS(i){const t={},l=u(i,["functionDeclarations"]);if(l!=null){let h=l;Array.isArray(h)&&(h=h.map(v=>v)),f(t,["functionDeclarations"],h)}if(u(i,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const a=u(i,["googleSearch"]);a!=null&&f(t,["googleSearch"],Fx(a));const r=u(i,["googleSearchRetrieval"]);if(r!=null&&f(t,["googleSearchRetrieval"],r),u(i,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=u(i,["googleMaps"]);c!=null&&f(t,["googleMaps"],Yx(c));const m=u(i,["urlContext"]);m!=null&&f(t,["urlContext"],m);const g=u(i,["computerUse"]);g!=null&&f(t,["computerUse"],g);const y=u(i,["codeExecution"]);return y!=null&&f(t,["codeExecution"],y),t}function oS(i){const t={},l=u(i,["functionDeclarations"]);if(l!=null){let x=l;Array.isArray(x)&&(x=x.map(S=>Hx(S))),f(t,["functionDeclarations"],x)}const a=u(i,["retrieval"]);a!=null&&f(t,["retrieval"],a);const r=u(i,["googleSearch"]);r!=null&&f(t,["googleSearch"],r);const c=u(i,["googleSearchRetrieval"]);c!=null&&f(t,["googleSearchRetrieval"],c);const m=u(i,["enterpriseWebSearch"]);m!=null&&f(t,["enterpriseWebSearch"],m);const g=u(i,["googleMaps"]);g!=null&&f(t,["googleMaps"],g);const y=u(i,["urlContext"]);y!=null&&f(t,["urlContext"],y);const h=u(i,["computerUse"]);h!=null&&f(t,["computerUse"],h);const v=u(i,["codeExecution"]);return v!=null&&f(t,["codeExecution"],v),t}function lS(i){const t={},l=u(i,["promptTokenCount"]);l!=null&&f(t,["promptTokenCount"],l);const a=u(i,["cachedContentTokenCount"]);a!=null&&f(t,["cachedContentTokenCount"],a);const r=u(i,["candidatesTokenCount"]);r!=null&&f(t,["responseTokenCount"],r);const c=u(i,["toolUsePromptTokenCount"]);c!=null&&f(t,["toolUsePromptTokenCount"],c);const m=u(i,["thoughtsTokenCount"]);m!=null&&f(t,["thoughtsTokenCount"],m);const g=u(i,["totalTokenCount"]);g!=null&&f(t,["totalTokenCount"],g);const y=u(i,["promptTokensDetails"]);if(y!=null){let b=y;Array.isArray(b)&&(b=b.map(A=>A)),f(t,["promptTokensDetails"],b)}const h=u(i,["cacheTokensDetails"]);if(h!=null){let b=h;Array.isArray(b)&&(b=b.map(A=>A)),f(t,["cacheTokensDetails"],b)}const v=u(i,["candidatesTokensDetails"]);if(v!=null){let b=v;Array.isArray(b)&&(b=b.map(A=>A)),f(t,["responseTokensDetails"],b)}const x=u(i,["toolUsePromptTokensDetails"]);if(x!=null){let b=x;Array.isArray(b)&&(b=b.map(A=>A)),f(t,["toolUsePromptTokensDetails"],b)}const S=u(i,["trafficType"]);return S!=null&&f(t,["trafficType"],S),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function aS(i){const t={};if(u(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const l=u(i,["data"]);l!=null&&f(t,["data"],l);const a=u(i,["mimeType"]);return a!=null&&f(t,["mimeType"],a),t}function sS(i){const t={},l=u(i,["content"]);l!=null&&f(t,["content"],l);const a=u(i,["citationMetadata"]);a!=null&&f(t,["citationMetadata"],rS(a));const r=u(i,["tokenCount"]);r!=null&&f(t,["tokenCount"],r);const c=u(i,["finishReason"]);c!=null&&f(t,["finishReason"],c);const m=u(i,["urlContextMetadata"]);m!=null&&f(t,["urlContextMetadata"],m);const g=u(i,["avgLogprobs"]);g!=null&&f(t,["avgLogprobs"],g);const y=u(i,["groundingMetadata"]);y!=null&&f(t,["groundingMetadata"],y);const h=u(i,["index"]);h!=null&&f(t,["index"],h);const v=u(i,["logprobsResult"]);v!=null&&f(t,["logprobsResult"],v);const x=u(i,["safetyRatings"]);if(x!=null){let S=x;Array.isArray(S)&&(S=S.map(b=>b)),f(t,["safetyRatings"],S)}return t}function rS(i){const t={},l=u(i,["citationSources"]);if(l!=null){let a=l;Array.isArray(a)&&(a=a.map(r=>r)),f(t,["citations"],a)}return t}function uS(i,t){const l={},a=u(t,["model"]);a!=null&&f(l,["_url","model"],Pe(i,a));const r=u(t,["contents"]);if(r!=null){let c=sn(r);Array.isArray(c)&&(c=c.map(m=>m)),f(l,["contents"],c)}return l}function cS(i){const t={},l=u(i,["sdkHttpResponse"]);l!=null&&f(t,["sdkHttpResponse"],l);const a=u(i,["tokensInfo"]);if(a!=null){let r=a;Array.isArray(r)&&(r=r.map(c=>c)),f(t,["tokensInfo"],r)}return t}function dS(i){const t={},l=u(i,["values"]);l!=null&&f(t,["values"],l);const a=u(i,["statistics"]);return a!=null&&f(t,["statistics"],fS(a)),t}function fS(i){const t={},l=u(i,["truncated"]);l!=null&&f(t,["truncated"],l);const a=u(i,["token_count"]);return a!=null&&f(t,["tokenCount"],a),t}function Ys(i){const t={},l=u(i,["parts"]);if(l!=null){let r=l;Array.isArray(r)&&(r=r.map(c=>yw(c))),f(t,["parts"],r)}const a=u(i,["role"]);return a!=null&&f(t,["role"],a),t}function mS(i){const t={},l=u(i,["controlType"]);l!=null&&f(t,["controlType"],l);const a=u(i,["enableControlImageComputation"]);return a!=null&&f(t,["computeControl"],a),t}function hS(i){const t={};if(u(i,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(u(i,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(u(i,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return t}function pS(i,t){const l={},a=u(i,["systemInstruction"]);t!==void 0&&a!=null&&f(t,["systemInstruction"],Ct(a));const r=u(i,["tools"]);if(t!==void 0&&r!=null){let m=r;Array.isArray(m)&&(m=m.map(g=>gy(g))),f(t,["tools"],m)}const c=u(i,["generationConfig"]);return t!==void 0&&c!=null&&f(t,["generationConfig"],ow(c)),l}function gS(i,t){const l={},a=u(t,["model"]);a!=null&&f(l,["_url","model"],Pe(i,a));const r=u(t,["contents"]);if(r!=null){let m=sn(r);Array.isArray(m)&&(m=m.map(g=>Ys(g))),f(l,["contents"],m)}const c=u(t,["config"]);return c!=null&&hS(c),l}function yS(i,t){const l={},a=u(t,["model"]);a!=null&&f(l,["_url","model"],Pe(i,a));const r=u(t,["contents"]);if(r!=null){let m=sn(r);Array.isArray(m)&&(m=m.map(g=>g)),f(l,["contents"],m)}const c=u(t,["config"]);return c!=null&&pS(c,l),l}function vS(i){const t={},l=u(i,["sdkHttpResponse"]);l!=null&&f(t,["sdkHttpResponse"],l);const a=u(i,["totalTokens"]);a!=null&&f(t,["totalTokens"],a);const r=u(i,["cachedContentTokenCount"]);return r!=null&&f(t,["cachedContentTokenCount"],r),t}function ES(i){const t={},l=u(i,["sdkHttpResponse"]);l!=null&&f(t,["sdkHttpResponse"],l);const a=u(i,["totalTokens"]);return a!=null&&f(t,["totalTokens"],a),t}function TS(i,t){const l={},a=u(t,["model"]);return a!=null&&f(l,["_url","name"],Pe(i,a)),l}function xS(i,t){const l={},a=u(t,["model"]);return a!=null&&f(l,["_url","name"],Pe(i,a)),l}function SS(i){const t={},l=u(i,["sdkHttpResponse"]);return l!=null&&f(t,["sdkHttpResponse"],l),t}function wS(i){const t={},l=u(i,["sdkHttpResponse"]);return l!=null&&f(t,["sdkHttpResponse"],l),t}function AS(i,t){const l={},a=u(i,["outputGcsUri"]);t!==void 0&&a!=null&&f(t,["parameters","storageUri"],a);const r=u(i,["negativePrompt"]);t!==void 0&&r!=null&&f(t,["parameters","negativePrompt"],r);const c=u(i,["numberOfImages"]);t!==void 0&&c!=null&&f(t,["parameters","sampleCount"],c);const m=u(i,["aspectRatio"]);t!==void 0&&m!=null&&f(t,["parameters","aspectRatio"],m);const g=u(i,["guidanceScale"]);t!==void 0&&g!=null&&f(t,["parameters","guidanceScale"],g);const y=u(i,["seed"]);t!==void 0&&y!=null&&f(t,["parameters","seed"],y);const h=u(i,["safetyFilterLevel"]);t!==void 0&&h!=null&&f(t,["parameters","safetySetting"],h);const v=u(i,["personGeneration"]);t!==void 0&&v!=null&&f(t,["parameters","personGeneration"],v);const x=u(i,["includeSafetyAttributes"]);t!==void 0&&x!=null&&f(t,["parameters","includeSafetyAttributes"],x);const S=u(i,["includeRaiReason"]);t!==void 0&&S!=null&&f(t,["parameters","includeRaiReason"],S);const b=u(i,["language"]);t!==void 0&&b!=null&&f(t,["parameters","language"],b);const A=u(i,["outputMimeType"]);t!==void 0&&A!=null&&f(t,["parameters","outputOptions","mimeType"],A);const _=u(i,["outputCompressionQuality"]);t!==void 0&&_!=null&&f(t,["parameters","outputOptions","compressionQuality"],_);const G=u(i,["addWatermark"]);t!==void 0&&G!=null&&f(t,["parameters","addWatermark"],G);const M=u(i,["labels"]);t!==void 0&&M!=null&&f(t,["labels"],M);const B=u(i,["editMode"]);t!==void 0&&B!=null&&f(t,["parameters","editMode"],B);const V=u(i,["baseSteps"]);return t!==void 0&&V!=null&&f(t,["parameters","editConfig","baseSteps"],V),l}function _S(i,t){const l={},a=u(t,["model"]);a!=null&&f(l,["_url","model"],Pe(i,a));const r=u(t,["prompt"]);r!=null&&f(l,["instances[0]","prompt"],r);const c=u(t,["referenceImages"]);if(c!=null){let g=c;Array.isArray(g)&&(g=g.map(y=>ww(y))),f(l,["instances[0]","referenceImages"],g)}const m=u(t,["config"]);return m!=null&&AS(m,l),l}function CS(i){const t={},l=u(i,["sdkHttpResponse"]);l!=null&&f(t,["sdkHttpResponse"],l);const a=u(i,["predictions"]);if(a!=null){let r=a;Array.isArray(r)&&(r=r.map(c=>Fs(c))),f(t,["generatedImages"],r)}return t}function bS(i,t){const l={},a=u(i,["taskType"]);t!==void 0&&a!=null&&f(t,["requests[]","taskType"],a);const r=u(i,["title"]);t!==void 0&&r!=null&&f(t,["requests[]","title"],r);const c=u(i,["outputDimensionality"]);if(t!==void 0&&c!=null&&f(t,["requests[]","outputDimensionality"],c),u(i,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(u(i,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return l}function RS(i,t){const l={},a=u(i,["taskType"]);t!==void 0&&a!=null&&f(t,["instances[]","task_type"],a);const r=u(i,["title"]);t!==void 0&&r!=null&&f(t,["instances[]","title"],r);const c=u(i,["outputDimensionality"]);t!==void 0&&c!=null&&f(t,["parameters","outputDimensionality"],c);const m=u(i,["mimeType"]);t!==void 0&&m!=null&&f(t,["instances[]","mimeType"],m);const g=u(i,["autoTruncate"]);return t!==void 0&&g!=null&&f(t,["parameters","autoTruncate"],g),l}function NS(i,t){const l={},a=u(t,["model"]);a!=null&&f(l,["_url","model"],Pe(i,a));const r=u(t,["contents"]);if(r!=null){let g=Kc(i,r);Array.isArray(g)&&(g=g.map(y=>y)),f(l,["requests[]","content"],g)}const c=u(t,["config"]);c!=null&&bS(c,l);const m=u(t,["model"]);return m!==void 0&&f(l,["requests[]","model"],Pe(i,m)),l}function MS(i,t){const l={},a=u(t,["model"]);a!=null&&f(l,["_url","model"],Pe(i,a));const r=u(t,["contents"]);if(r!=null){let m=Kc(i,r);Array.isArray(m)&&(m=m.map(g=>g)),f(l,["instances[]","content"],m)}const c=u(t,["config"]);return c!=null&&RS(c,l),l}function IS(i){const t={},l=u(i,["sdkHttpResponse"]);l!=null&&f(t,["sdkHttpResponse"],l);const a=u(i,["embeddings"]);if(a!=null){let c=a;Array.isArray(c)&&(c=c.map(m=>m)),f(t,["embeddings"],c)}const r=u(i,["metadata"]);return r!=null&&f(t,["metadata"],r),t}function DS(i){const t={},l=u(i,["sdkHttpResponse"]);l!=null&&f(t,["sdkHttpResponse"],l);const a=u(i,["predictions[]","embeddings"]);if(a!=null){let c=a;Array.isArray(c)&&(c=c.map(m=>dS(m))),f(t,["embeddings"],c)}const r=u(i,["metadata"]);return r!=null&&f(t,["metadata"],r),t}function US(i){const t={},l=u(i,["endpoint"]);l!=null&&f(t,["name"],l);const a=u(i,["deployedModelId"]);return a!=null&&f(t,["deployedModelId"],a),t}function kS(i){const t={};if(u(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const l=u(i,["fileUri"]);l!=null&&f(t,["fileUri"],l);const a=u(i,["mimeType"]);return a!=null&&f(t,["mimeType"],a),t}function LS(i){const t={};if(u(i,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const l=u(i,["description"]);l!=null&&f(t,["description"],l);const a=u(i,["name"]);a!=null&&f(t,["name"],a);const r=u(i,["parameters"]);r!=null&&f(t,["parameters"],r);const c=u(i,["parametersJsonSchema"]);c!=null&&f(t,["parametersJsonSchema"],c);const m=u(i,["response"]);m!=null&&f(t,["response"],m);const g=u(i,["responseJsonSchema"]);return g!=null&&f(t,["responseJsonSchema"],g),t}function GS(i,t,l){const a={},r=u(t,["systemInstruction"]);l!==void 0&&r!=null&&f(l,["systemInstruction"],Ys(Ct(r)));const c=u(t,["temperature"]);c!=null&&f(a,["temperature"],c);const m=u(t,["topP"]);m!=null&&f(a,["topP"],m);const g=u(t,["topK"]);g!=null&&f(a,["topK"],g);const y=u(t,["candidateCount"]);y!=null&&f(a,["candidateCount"],y);const h=u(t,["maxOutputTokens"]);h!=null&&f(a,["maxOutputTokens"],h);const v=u(t,["stopSequences"]);v!=null&&f(a,["stopSequences"],v);const x=u(t,["responseLogprobs"]);x!=null&&f(a,["responseLogprobs"],x);const S=u(t,["logprobs"]);S!=null&&f(a,["logprobs"],S);const b=u(t,["presencePenalty"]);b!=null&&f(a,["presencePenalty"],b);const A=u(t,["frequencyPenalty"]);A!=null&&f(a,["frequencyPenalty"],A);const _=u(t,["seed"]);_!=null&&f(a,["seed"],_);const G=u(t,["responseMimeType"]);G!=null&&f(a,["responseMimeType"],G);const M=u(t,["responseSchema"]);M!=null&&f(a,["responseSchema"],$c(M));const B=u(t,["responseJsonSchema"]);if(B!=null&&f(a,["responseJsonSchema"],B),u(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(u(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const V=u(t,["safetySettings"]);if(l!==void 0&&V!=null){let he=V;Array.isArray(he)&&(he=he.map(ve=>Aw(ve))),f(l,["safetySettings"],he)}const $=u(t,["tools"]);if(l!==void 0&&$!=null){let he=Fo($);Array.isArray(he)&&(he=he.map(ve=>Mw(Yo(ve)))),f(l,["tools"],he)}const Q=u(t,["toolConfig"]);if(l!==void 0&&Q!=null&&f(l,["toolConfig"],Q),u(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const j=u(t,["cachedContent"]);l!==void 0&&j!=null&&f(l,["cachedContent"],Fn(i,j));const W=u(t,["responseModalities"]);W!=null&&f(a,["responseModalities"],W);const me=u(t,["mediaResolution"]);me!=null&&f(a,["mediaResolution"],me);const te=u(t,["speechConfig"]);if(te!=null&&f(a,["speechConfig"],Xc(te)),u(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const ge=u(t,["thinkingConfig"]);ge!=null&&f(a,["thinkingConfig"],ge);const Ce=u(t,["imageConfig"]);return Ce!=null&&f(a,["imageConfig"],Ce),a}function PS(i,t,l){const a={},r=u(t,["systemInstruction"]);l!==void 0&&r!=null&&f(l,["systemInstruction"],Ct(r));const c=u(t,["temperature"]);c!=null&&f(a,["temperature"],c);const m=u(t,["topP"]);m!=null&&f(a,["topP"],m);const g=u(t,["topK"]);g!=null&&f(a,["topK"],g);const y=u(t,["candidateCount"]);y!=null&&f(a,["candidateCount"],y);const h=u(t,["maxOutputTokens"]);h!=null&&f(a,["maxOutputTokens"],h);const v=u(t,["stopSequences"]);v!=null&&f(a,["stopSequences"],v);const x=u(t,["responseLogprobs"]);x!=null&&f(a,["responseLogprobs"],x);const S=u(t,["logprobs"]);S!=null&&f(a,["logprobs"],S);const b=u(t,["presencePenalty"]);b!=null&&f(a,["presencePenalty"],b);const A=u(t,["frequencyPenalty"]);A!=null&&f(a,["frequencyPenalty"],A);const _=u(t,["seed"]);_!=null&&f(a,["seed"],_);const G=u(t,["responseMimeType"]);G!=null&&f(a,["responseMimeType"],G);const M=u(t,["responseSchema"]);M!=null&&f(a,["responseSchema"],$c(M));const B=u(t,["responseJsonSchema"]);B!=null&&f(a,["responseJsonSchema"],B);const V=u(t,["routingConfig"]);V!=null&&f(a,["routingConfig"],V);const $=u(t,["modelSelectionConfig"]);$!=null&&f(a,["modelConfig"],$);const Q=u(t,["safetySettings"]);if(l!==void 0&&Q!=null){let k=Q;Array.isArray(k)&&(k=k.map(X=>X)),f(l,["safetySettings"],k)}const j=u(t,["tools"]);if(l!==void 0&&j!=null){let k=Fo(j);Array.isArray(k)&&(k=k.map(X=>gy(Yo(X)))),f(l,["tools"],k)}const W=u(t,["toolConfig"]);l!==void 0&&W!=null&&f(l,["toolConfig"],W);const me=u(t,["labels"]);l!==void 0&&me!=null&&f(l,["labels"],me);const te=u(t,["cachedContent"]);l!==void 0&&te!=null&&f(l,["cachedContent"],Fn(i,te));const ge=u(t,["responseModalities"]);ge!=null&&f(a,["responseModalities"],ge);const Ce=u(t,["mediaResolution"]);Ce!=null&&f(a,["mediaResolution"],Ce);const he=u(t,["speechConfig"]);he!=null&&f(a,["speechConfig"],py(Xc(he)));const ve=u(t,["audioTimestamp"]);ve!=null&&f(a,["audioTimestamp"],ve);const Ue=u(t,["thinkingConfig"]);Ue!=null&&f(a,["thinkingConfig"],Ue);const ke=u(t,["imageConfig"]);return ke!=null&&f(a,["imageConfig"],ke),a}function fg(i,t){const l={},a=u(t,["model"]);a!=null&&f(l,["_url","model"],Pe(i,a));const r=u(t,["contents"]);if(r!=null){let m=sn(r);Array.isArray(m)&&(m=m.map(g=>Ys(g))),f(l,["contents"],m)}const c=u(t,["config"]);return c!=null&&f(l,["generationConfig"],GS(i,c,l)),l}function mg(i,t){const l={},a=u(t,["model"]);a!=null&&f(l,["_url","model"],Pe(i,a));const r=u(t,["contents"]);if(r!=null){let m=sn(r);Array.isArray(m)&&(m=m.map(g=>g)),f(l,["contents"],m)}const c=u(t,["config"]);return c!=null&&f(l,["generationConfig"],PS(i,c,l)),l}function hg(i){const t={},l=u(i,["sdkHttpResponse"]);l!=null&&f(t,["sdkHttpResponse"],l);const a=u(i,["candidates"]);if(a!=null){let y=a;Array.isArray(y)&&(y=y.map(h=>sS(h))),f(t,["candidates"],y)}const r=u(i,["modelVersion"]);r!=null&&f(t,["modelVersion"],r);const c=u(i,["promptFeedback"]);c!=null&&f(t,["promptFeedback"],c);const m=u(i,["responseId"]);m!=null&&f(t,["responseId"],m);const g=u(i,["usageMetadata"]);return g!=null&&f(t,["usageMetadata"],g),t}function pg(i){const t={},l=u(i,["sdkHttpResponse"]);l!=null&&f(t,["sdkHttpResponse"],l);const a=u(i,["candidates"]);if(a!=null){let h=a;Array.isArray(h)&&(h=h.map(v=>v)),f(t,["candidates"],h)}const r=u(i,["createTime"]);r!=null&&f(t,["createTime"],r);const c=u(i,["modelVersion"]);c!=null&&f(t,["modelVersion"],c);const m=u(i,["promptFeedback"]);m!=null&&f(t,["promptFeedback"],m);const g=u(i,["responseId"]);g!=null&&f(t,["responseId"],g);const y=u(i,["usageMetadata"]);return y!=null&&f(t,["usageMetadata"],y),t}function BS(i,t){const l={};if(u(i,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(u(i,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const a=u(i,["numberOfImages"]);t!==void 0&&a!=null&&f(t,["parameters","sampleCount"],a);const r=u(i,["aspectRatio"]);t!==void 0&&r!=null&&f(t,["parameters","aspectRatio"],r);const c=u(i,["guidanceScale"]);if(t!==void 0&&c!=null&&f(t,["parameters","guidanceScale"],c),u(i,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const m=u(i,["safetyFilterLevel"]);t!==void 0&&m!=null&&f(t,["parameters","safetySetting"],m);const g=u(i,["personGeneration"]);t!==void 0&&g!=null&&f(t,["parameters","personGeneration"],g);const y=u(i,["includeSafetyAttributes"]);t!==void 0&&y!=null&&f(t,["parameters","includeSafetyAttributes"],y);const h=u(i,["includeRaiReason"]);t!==void 0&&h!=null&&f(t,["parameters","includeRaiReason"],h);const v=u(i,["language"]);t!==void 0&&v!=null&&f(t,["parameters","language"],v);const x=u(i,["outputMimeType"]);t!==void 0&&x!=null&&f(t,["parameters","outputOptions","mimeType"],x);const S=u(i,["outputCompressionQuality"]);if(t!==void 0&&S!=null&&f(t,["parameters","outputOptions","compressionQuality"],S),u(i,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(u(i,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const b=u(i,["imageSize"]);if(t!==void 0&&b!=null&&f(t,["parameters","sampleImageSize"],b),u(i,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return l}function qS(i,t){const l={},a=u(i,["outputGcsUri"]);t!==void 0&&a!=null&&f(t,["parameters","storageUri"],a);const r=u(i,["negativePrompt"]);t!==void 0&&r!=null&&f(t,["parameters","negativePrompt"],r);const c=u(i,["numberOfImages"]);t!==void 0&&c!=null&&f(t,["parameters","sampleCount"],c);const m=u(i,["aspectRatio"]);t!==void 0&&m!=null&&f(t,["parameters","aspectRatio"],m);const g=u(i,["guidanceScale"]);t!==void 0&&g!=null&&f(t,["parameters","guidanceScale"],g);const y=u(i,["seed"]);t!==void 0&&y!=null&&f(t,["parameters","seed"],y);const h=u(i,["safetyFilterLevel"]);t!==void 0&&h!=null&&f(t,["parameters","safetySetting"],h);const v=u(i,["personGeneration"]);t!==void 0&&v!=null&&f(t,["parameters","personGeneration"],v);const x=u(i,["includeSafetyAttributes"]);t!==void 0&&x!=null&&f(t,["parameters","includeSafetyAttributes"],x);const S=u(i,["includeRaiReason"]);t!==void 0&&S!=null&&f(t,["parameters","includeRaiReason"],S);const b=u(i,["language"]);t!==void 0&&b!=null&&f(t,["parameters","language"],b);const A=u(i,["outputMimeType"]);t!==void 0&&A!=null&&f(t,["parameters","outputOptions","mimeType"],A);const _=u(i,["outputCompressionQuality"]);t!==void 0&&_!=null&&f(t,["parameters","outputOptions","compressionQuality"],_);const G=u(i,["addWatermark"]);t!==void 0&&G!=null&&f(t,["parameters","addWatermark"],G);const M=u(i,["labels"]);t!==void 0&&M!=null&&f(t,["labels"],M);const B=u(i,["imageSize"]);t!==void 0&&B!=null&&f(t,["parameters","sampleImageSize"],B);const V=u(i,["enhancePrompt"]);return t!==void 0&&V!=null&&f(t,["parameters","enhancePrompt"],V),l}function VS(i,t){const l={},a=u(t,["model"]);a!=null&&f(l,["_url","model"],Pe(i,a));const r=u(t,["prompt"]);r!=null&&f(l,["instances[0]","prompt"],r);const c=u(t,["config"]);return c!=null&&BS(c,l),l}function OS(i,t){const l={},a=u(t,["model"]);a!=null&&f(l,["_url","model"],Pe(i,a));const r=u(t,["prompt"]);r!=null&&f(l,["instances[0]","prompt"],r);const c=u(t,["config"]);return c!=null&&qS(c,l),l}function HS(i){const t={},l=u(i,["sdkHttpResponse"]);l!=null&&f(t,["sdkHttpResponse"],l);const a=u(i,["predictions"]);if(a!=null){let c=a;Array.isArray(c)&&(c=c.map(m=>ew(m))),f(t,["generatedImages"],c)}const r=u(i,["positivePromptSafetyAttributes"]);return r!=null&&f(t,["positivePromptSafetyAttributes"],my(r)),t}function zS(i){const t={},l=u(i,["sdkHttpResponse"]);l!=null&&f(t,["sdkHttpResponse"],l);const a=u(i,["predictions"]);if(a!=null){let c=a;Array.isArray(c)&&(c=c.map(m=>Fs(m))),f(t,["generatedImages"],c)}const r=u(i,["positivePromptSafetyAttributes"]);return r!=null&&f(t,["positivePromptSafetyAttributes"],hy(r)),t}function YS(i,t){const l={},a=u(i,["numberOfVideos"]);if(t!==void 0&&a!=null&&f(t,["parameters","sampleCount"],a),u(i,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(u(i,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const r=u(i,["durationSeconds"]);if(t!==void 0&&r!=null&&f(t,["parameters","durationSeconds"],r),u(i,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const c=u(i,["aspectRatio"]);t!==void 0&&c!=null&&f(t,["parameters","aspectRatio"],c);const m=u(i,["resolution"]);t!==void 0&&m!=null&&f(t,["parameters","resolution"],m);const g=u(i,["personGeneration"]);if(t!==void 0&&g!=null&&f(t,["parameters","personGeneration"],g),u(i,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const y=u(i,["negativePrompt"]);t!==void 0&&y!=null&&f(t,["parameters","negativePrompt"],y);const h=u(i,["enhancePrompt"]);if(t!==void 0&&h!=null&&f(t,["parameters","enhancePrompt"],h),u(i,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const v=u(i,["lastFrame"]);t!==void 0&&v!=null&&f(t,["instances[0]","lastFrame"],Js(v));const x=u(i,["referenceImages"]);if(t!==void 0&&x!=null){let S=x;Array.isArray(S)&&(S=S.map(b=>zw(b))),f(t,["instances[0]","referenceImages"],S)}if(u(i,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(u(i,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return l}function FS(i,t){const l={},a=u(i,["numberOfVideos"]);t!==void 0&&a!=null&&f(t,["parameters","sampleCount"],a);const r=u(i,["outputGcsUri"]);t!==void 0&&r!=null&&f(t,["parameters","storageUri"],r);const c=u(i,["fps"]);t!==void 0&&c!=null&&f(t,["parameters","fps"],c);const m=u(i,["durationSeconds"]);t!==void 0&&m!=null&&f(t,["parameters","durationSeconds"],m);const g=u(i,["seed"]);t!==void 0&&g!=null&&f(t,["parameters","seed"],g);const y=u(i,["aspectRatio"]);t!==void 0&&y!=null&&f(t,["parameters","aspectRatio"],y);const h=u(i,["resolution"]);t!==void 0&&h!=null&&f(t,["parameters","resolution"],h);const v=u(i,["personGeneration"]);t!==void 0&&v!=null&&f(t,["parameters","personGeneration"],v);const x=u(i,["pubsubTopic"]);t!==void 0&&x!=null&&f(t,["parameters","pubsubTopic"],x);const S=u(i,["negativePrompt"]);t!==void 0&&S!=null&&f(t,["parameters","negativePrompt"],S);const b=u(i,["enhancePrompt"]);t!==void 0&&b!=null&&f(t,["parameters","enhancePrompt"],b);const A=u(i,["generateAudio"]);t!==void 0&&A!=null&&f(t,["parameters","generateAudio"],A);const _=u(i,["lastFrame"]);t!==void 0&&_!=null&&f(t,["instances[0]","lastFrame"],mn(_));const G=u(i,["referenceImages"]);if(t!==void 0&&G!=null){let V=G;Array.isArray(V)&&(V=V.map($=>Yw($))),f(t,["instances[0]","referenceImages"],V)}const M=u(i,["mask"]);t!==void 0&&M!=null&&f(t,["instances[0]","mask"],Hw(M));const B=u(i,["compressionQuality"]);return t!==void 0&&B!=null&&f(t,["parameters","compressionQuality"],B),l}function JS(i){const t={},l=u(i,["name"]);l!=null&&f(t,["name"],l);const a=u(i,["metadata"]);a!=null&&f(t,["metadata"],a);const r=u(i,["done"]);r!=null&&f(t,["done"],r);const c=u(i,["error"]);c!=null&&f(t,["error"],c);const m=u(i,["response","generateVideoResponse"]);return m!=null&&f(t,["response"],QS(m)),t}function KS(i){const t={},l=u(i,["name"]);l!=null&&f(t,["name"],l);const a=u(i,["metadata"]);a!=null&&f(t,["metadata"],a);const r=u(i,["done"]);r!=null&&f(t,["done"],r);const c=u(i,["error"]);c!=null&&f(t,["error"],c);const m=u(i,["response"]);return m!=null&&f(t,["response"],ZS(m)),t}function $S(i,t){const l={},a=u(t,["model"]);a!=null&&f(l,["_url","model"],Pe(i,a));const r=u(t,["prompt"]);r!=null&&f(l,["instances[0]","prompt"],r);const c=u(t,["image"]);c!=null&&f(l,["instances[0]","image"],Js(c));const m=u(t,["video"]);m!=null&&f(l,["instances[0]","video"],yy(m));const g=u(t,["source"]);g!=null&&WS(g,l);const y=u(t,["config"]);return y!=null&&YS(y,l),l}function XS(i,t){const l={},a=u(t,["model"]);a!=null&&f(l,["_url","model"],Pe(i,a));const r=u(t,["prompt"]);r!=null&&f(l,["instances[0]","prompt"],r);const c=u(t,["image"]);c!=null&&f(l,["instances[0]","image"],mn(c));const m=u(t,["video"]);m!=null&&f(l,["instances[0]","video"],vy(m));const g=u(t,["source"]);g!=null&&jS(g,l);const y=u(t,["config"]);return y!=null&&FS(y,l),l}function QS(i){const t={},l=u(i,["generatedSamples"]);if(l!=null){let c=l;Array.isArray(c)&&(c=c.map(m=>nw(m))),f(t,["generatedVideos"],c)}const a=u(i,["raiMediaFilteredCount"]);a!=null&&f(t,["raiMediaFilteredCount"],a);const r=u(i,["raiMediaFilteredReasons"]);return r!=null&&f(t,["raiMediaFilteredReasons"],r),t}function ZS(i){const t={},l=u(i,["videos"]);if(l!=null){let c=l;Array.isArray(c)&&(c=c.map(m=>iw(m))),f(t,["generatedVideos"],c)}const a=u(i,["raiMediaFilteredCount"]);a!=null&&f(t,["raiMediaFilteredCount"],a);const r=u(i,["raiMediaFilteredReasons"]);return r!=null&&f(t,["raiMediaFilteredReasons"],r),t}function WS(i,t){const l={},a=u(i,["prompt"]);t!==void 0&&a!=null&&f(t,["instances[0]","prompt"],a);const r=u(i,["image"]);t!==void 0&&r!=null&&f(t,["instances[0]","image"],Js(r));const c=u(i,["video"]);return t!==void 0&&c!=null&&f(t,["instances[0]","video"],yy(c)),l}function jS(i,t){const l={},a=u(i,["prompt"]);t!==void 0&&a!=null&&f(t,["instances[0]","prompt"],a);const r=u(i,["image"]);t!==void 0&&r!=null&&f(t,["instances[0]","image"],mn(r));const c=u(i,["video"]);return t!==void 0&&c!=null&&f(t,["instances[0]","video"],vy(c)),l}function ew(i){const t={},l=u(i,["_self"]);l!=null&&f(t,["image"],uw(l));const a=u(i,["raiFilteredReason"]);a!=null&&f(t,["raiFilteredReason"],a);const r=u(i,["_self"]);return r!=null&&f(t,["safetyAttributes"],my(r)),t}function Fs(i){const t={},l=u(i,["_self"]);l!=null&&f(t,["image"],fy(l));const a=u(i,["raiFilteredReason"]);a!=null&&f(t,["raiFilteredReason"],a);const r=u(i,["_self"]);r!=null&&f(t,["safetyAttributes"],hy(r));const c=u(i,["prompt"]);return c!=null&&f(t,["enhancedPrompt"],c),t}function tw(i){const t={},l=u(i,["_self"]);l!=null&&f(t,["mask"],fy(l));const a=u(i,["labels"]);if(a!=null){let r=a;Array.isArray(r)&&(r=r.map(c=>c)),f(t,["labels"],r)}return t}function nw(i){const t={},l=u(i,["video"]);return l!=null&&f(t,["video"],Vw(l)),t}function iw(i){const t={},l=u(i,["_self"]);return l!=null&&f(t,["video"],Ow(l)),t}function ow(i){const t={},l=u(i,["modelSelectionConfig"]);l!=null&&f(t,["modelConfig"],l);const a=u(i,["audioTimestamp"]);a!=null&&f(t,["audioTimestamp"],a);const r=u(i,["candidateCount"]);r!=null&&f(t,["candidateCount"],r);const c=u(i,["enableAffectiveDialog"]);c!=null&&f(t,["enableAffectiveDialog"],c);const m=u(i,["frequencyPenalty"]);m!=null&&f(t,["frequencyPenalty"],m);const g=u(i,["logprobs"]);g!=null&&f(t,["logprobs"],g);const y=u(i,["maxOutputTokens"]);y!=null&&f(t,["maxOutputTokens"],y);const h=u(i,["mediaResolution"]);h!=null&&f(t,["mediaResolution"],h);const v=u(i,["presencePenalty"]);v!=null&&f(t,["presencePenalty"],v);const x=u(i,["responseJsonSchema"]);x!=null&&f(t,["responseJsonSchema"],x);const S=u(i,["responseLogprobs"]);S!=null&&f(t,["responseLogprobs"],S);const b=u(i,["responseMimeType"]);b!=null&&f(t,["responseMimeType"],b);const A=u(i,["responseModalities"]);A!=null&&f(t,["responseModalities"],A);const _=u(i,["responseSchema"]);_!=null&&f(t,["responseSchema"],_);const G=u(i,["routingConfig"]);G!=null&&f(t,["routingConfig"],G);const M=u(i,["seed"]);M!=null&&f(t,["seed"],M);const B=u(i,["speechConfig"]);B!=null&&f(t,["speechConfig"],py(B));const V=u(i,["stopSequences"]);V!=null&&f(t,["stopSequences"],V);const $=u(i,["temperature"]);$!=null&&f(t,["temperature"],$);const Q=u(i,["thinkingConfig"]);Q!=null&&f(t,["thinkingConfig"],Q);const j=u(i,["topK"]);j!=null&&f(t,["topK"],j);const W=u(i,["topP"]);if(W!=null&&f(t,["topP"],W),u(i,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}function lw(i,t){const l={},a=u(t,["model"]);return a!=null&&f(l,["_url","name"],Pe(i,a)),l}function aw(i,t){const l={},a=u(t,["model"]);return a!=null&&f(l,["_url","name"],Pe(i,a)),l}function sw(i){const t={};if(u(i,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const l=u(i,["enableWidget"]);return l!=null&&f(t,["enableWidget"],l),t}function rw(i){const t={},l=u(i,["timeRangeFilter"]);if(l!=null&&f(t,["timeRangeFilter"],l),u(i,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return t}function uw(i){const t={},l=u(i,["bytesBase64Encoded"]);l!=null&&f(t,["imageBytes"],Ai(l));const a=u(i,["mimeType"]);return a!=null&&f(t,["mimeType"],a),t}function fy(i){const t={},l=u(i,["gcsUri"]);l!=null&&f(t,["gcsUri"],l);const a=u(i,["bytesBase64Encoded"]);a!=null&&f(t,["imageBytes"],Ai(a));const r=u(i,["mimeType"]);return r!=null&&f(t,["mimeType"],r),t}function Js(i){const t={};if(u(i,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const l=u(i,["imageBytes"]);l!=null&&f(t,["bytesBase64Encoded"],Ai(l));const a=u(i,["mimeType"]);return a!=null&&f(t,["mimeType"],a),t}function mn(i){const t={},l=u(i,["gcsUri"]);l!=null&&f(t,["gcsUri"],l);const a=u(i,["imageBytes"]);a!=null&&f(t,["bytesBase64Encoded"],Ai(a));const r=u(i,["mimeType"]);return r!=null&&f(t,["mimeType"],r),t}function cw(i,t,l){const a={},r=u(t,["pageSize"]);l!==void 0&&r!=null&&f(l,["_query","pageSize"],r);const c=u(t,["pageToken"]);l!==void 0&&c!=null&&f(l,["_query","pageToken"],c);const m=u(t,["filter"]);l!==void 0&&m!=null&&f(l,["_query","filter"],m);const g=u(t,["queryBase"]);return l!==void 0&&g!=null&&f(l,["_url","models_url"],oy(i,g)),a}function dw(i,t,l){const a={},r=u(t,["pageSize"]);l!==void 0&&r!=null&&f(l,["_query","pageSize"],r);const c=u(t,["pageToken"]);l!==void 0&&c!=null&&f(l,["_query","pageToken"],c);const m=u(t,["filter"]);l!==void 0&&m!=null&&f(l,["_query","filter"],m);const g=u(t,["queryBase"]);return l!==void 0&&g!=null&&f(l,["_url","models_url"],oy(i,g)),a}function fw(i,t){const l={},a=u(t,["config"]);return a!=null&&cw(i,a,l),l}function mw(i,t){const l={},a=u(t,["config"]);return a!=null&&dw(i,a,l),l}function hw(i){const t={},l=u(i,["sdkHttpResponse"]);l!=null&&f(t,["sdkHttpResponse"],l);const a=u(i,["nextPageToken"]);a!=null&&f(t,["nextPageToken"],a);const r=u(i,["_self"]);if(r!=null){let c=ly(r);Array.isArray(c)&&(c=c.map(m=>Uc(m))),f(t,["models"],c)}return t}function pw(i){const t={},l=u(i,["sdkHttpResponse"]);l!=null&&f(t,["sdkHttpResponse"],l);const a=u(i,["nextPageToken"]);a!=null&&f(t,["nextPageToken"],a);const r=u(i,["_self"]);if(r!=null){let c=ly(r);Array.isArray(c)&&(c=c.map(m=>kc(m))),f(t,["models"],c)}return t}function gw(i){const t={},l=u(i,["maskMode"]);l!=null&&f(t,["maskMode"],l);const a=u(i,["segmentationClasses"]);a!=null&&f(t,["maskClasses"],a);const r=u(i,["maskDilation"]);return r!=null&&f(t,["dilation"],r),t}function Uc(i){const t={},l=u(i,["name"]);l!=null&&f(t,["name"],l);const a=u(i,["displayName"]);a!=null&&f(t,["displayName"],a);const r=u(i,["description"]);r!=null&&f(t,["description"],r);const c=u(i,["version"]);c!=null&&f(t,["version"],c);const m=u(i,["_self"]);m!=null&&f(t,["tunedModelInfo"],Iw(m));const g=u(i,["inputTokenLimit"]);g!=null&&f(t,["inputTokenLimit"],g);const y=u(i,["outputTokenLimit"]);y!=null&&f(t,["outputTokenLimit"],y);const h=u(i,["supportedGenerationMethods"]);return h!=null&&f(t,["supportedActions"],h),t}function kc(i){const t={},l=u(i,["name"]);l!=null&&f(t,["name"],l);const a=u(i,["displayName"]);a!=null&&f(t,["displayName"],a);const r=u(i,["description"]);r!=null&&f(t,["description"],r);const c=u(i,["versionId"]);c!=null&&f(t,["version"],c);const m=u(i,["deployedModels"]);if(m!=null){let x=m;Array.isArray(x)&&(x=x.map(S=>US(S))),f(t,["endpoints"],x)}const g=u(i,["labels"]);g!=null&&f(t,["labels"],g);const y=u(i,["_self"]);y!=null&&f(t,["tunedModelInfo"],Dw(y));const h=u(i,["defaultCheckpointId"]);h!=null&&f(t,["defaultCheckpointId"],h);const v=u(i,["checkpoints"]);if(v!=null){let x=v;Array.isArray(x)&&(x=x.map(S=>S)),f(t,["checkpoints"],x)}return t}function yw(i){const t={},l=u(i,["videoMetadata"]);l!=null&&f(t,["videoMetadata"],l);const a=u(i,["thought"]);a!=null&&f(t,["thought"],a);const r=u(i,["inlineData"]);r!=null&&f(t,["inlineData"],aS(r));const c=u(i,["fileData"]);c!=null&&f(t,["fileData"],kS(c));const m=u(i,["thoughtSignature"]);m!=null&&f(t,["thoughtSignature"],m);const g=u(i,["functionCall"]);g!=null&&f(t,["functionCall"],g);const y=u(i,["codeExecutionResult"]);y!=null&&f(t,["codeExecutionResult"],y);const h=u(i,["executableCode"]);h!=null&&f(t,["executableCode"],h);const v=u(i,["functionResponse"]);v!=null&&f(t,["functionResponse"],v);const x=u(i,["text"]);return x!=null&&f(t,["text"],x),t}function vw(i){const t={},l=u(i,["productImage"]);return l!=null&&f(t,["image"],mn(l)),t}function Ew(i,t){const l={},a=u(i,["numberOfImages"]);t!==void 0&&a!=null&&f(t,["parameters","sampleCount"],a);const r=u(i,["baseSteps"]);t!==void 0&&r!=null&&f(t,["parameters","editConfig","baseSteps"],r);const c=u(i,["outputGcsUri"]);t!==void 0&&c!=null&&f(t,["parameters","storageUri"],c);const m=u(i,["seed"]);t!==void 0&&m!=null&&f(t,["parameters","seed"],m);const g=u(i,["safetyFilterLevel"]);t!==void 0&&g!=null&&f(t,["parameters","safetySetting"],g);const y=u(i,["personGeneration"]);t!==void 0&&y!=null&&f(t,["parameters","personGeneration"],y);const h=u(i,["addWatermark"]);t!==void 0&&h!=null&&f(t,["parameters","addWatermark"],h);const v=u(i,["outputMimeType"]);t!==void 0&&v!=null&&f(t,["parameters","outputOptions","mimeType"],v);const x=u(i,["outputCompressionQuality"]);t!==void 0&&x!=null&&f(t,["parameters","outputOptions","compressionQuality"],x);const S=u(i,["enhancePrompt"]);t!==void 0&&S!=null&&f(t,["parameters","enhancePrompt"],S);const b=u(i,["labels"]);return t!==void 0&&b!=null&&f(t,["labels"],b),l}function Tw(i,t){const l={},a=u(t,["model"]);a!=null&&f(l,["_url","model"],Pe(i,a));const r=u(t,["source"]);r!=null&&Sw(r,l);const c=u(t,["config"]);return c!=null&&Ew(c,l),l}function xw(i){const t={},l=u(i,["predictions"]);if(l!=null){let a=l;Array.isArray(a)&&(a=a.map(r=>Fs(r))),f(t,["generatedImages"],a)}return t}function Sw(i,t){const l={},a=u(i,["prompt"]);t!==void 0&&a!=null&&f(t,["instances[0]","prompt"],a);const r=u(i,["personImage"]);t!==void 0&&r!=null&&f(t,["instances[0]","personImage","image"],mn(r));const c=u(i,["productImages"]);if(t!==void 0&&c!=null){let m=c;Array.isArray(m)&&(m=m.map(g=>vw(g))),f(t,["instances[0]","productImages"],m)}return l}function ww(i){const t={},l=u(i,["referenceImage"]);l!=null&&f(t,["referenceImage"],mn(l));const a=u(i,["referenceId"]);a!=null&&f(t,["referenceId"],a);const r=u(i,["referenceType"]);r!=null&&f(t,["referenceType"],r);const c=u(i,["maskImageConfig"]);c!=null&&f(t,["maskImageConfig"],gw(c));const m=u(i,["controlImageConfig"]);m!=null&&f(t,["controlImageConfig"],mS(m));const g=u(i,["styleImageConfig"]);g!=null&&f(t,["styleImageConfig"],g);const y=u(i,["subjectImageConfig"]);return y!=null&&f(t,["subjectImageConfig"],y),t}function my(i){const t={},l=u(i,["safetyAttributes","categories"]);l!=null&&f(t,["categories"],l);const a=u(i,["safetyAttributes","scores"]);a!=null&&f(t,["scores"],a);const r=u(i,["contentType"]);return r!=null&&f(t,["contentType"],r),t}function hy(i){const t={},l=u(i,["safetyAttributes","categories"]);l!=null&&f(t,["categories"],l);const a=u(i,["safetyAttributes","scores"]);a!=null&&f(t,["scores"],a);const r=u(i,["contentType"]);return r!=null&&f(t,["contentType"],r),t}function Aw(i){const t={};if(u(i,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const l=u(i,["category"]);l!=null&&f(t,["category"],l);const a=u(i,["threshold"]);return a!=null&&f(t,["threshold"],a),t}function _w(i){const t={},l=u(i,["image"]);return l!=null&&f(t,["image"],mn(l)),t}function Cw(i,t){const l={},a=u(i,["mode"]);t!==void 0&&a!=null&&f(t,["parameters","mode"],a);const r=u(i,["maxPredictions"]);t!==void 0&&r!=null&&f(t,["parameters","maxPredictions"],r);const c=u(i,["confidenceThreshold"]);t!==void 0&&c!=null&&f(t,["parameters","confidenceThreshold"],c);const m=u(i,["maskDilation"]);t!==void 0&&m!=null&&f(t,["parameters","maskDilation"],m);const g=u(i,["binaryColorThreshold"]);t!==void 0&&g!=null&&f(t,["parameters","binaryColorThreshold"],g);const y=u(i,["labels"]);return t!==void 0&&y!=null&&f(t,["labels"],y),l}function bw(i,t){const l={},a=u(t,["model"]);a!=null&&f(l,["_url","model"],Pe(i,a));const r=u(t,["source"]);r!=null&&Nw(r,l);const c=u(t,["config"]);return c!=null&&Cw(c,l),l}function Rw(i){const t={},l=u(i,["predictions"]);if(l!=null){let a=l;Array.isArray(a)&&(a=a.map(r=>tw(r))),f(t,["generatedMasks"],a)}return t}function Nw(i,t){const l={},a=u(i,["prompt"]);t!==void 0&&a!=null&&f(t,["instances[0]","prompt"],a);const r=u(i,["image"]);t!==void 0&&r!=null&&f(t,["instances[0]","image"],mn(r));const c=u(i,["scribbleImage"]);return t!==void 0&&c!=null&&f(t,["instances[0]","scribble"],_w(c)),l}function py(i){const t={},l=u(i,["voiceConfig"]);if(l!=null&&f(t,["voiceConfig"],l),u(i,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const a=u(i,["languageCode"]);return a!=null&&f(t,["languageCode"],a),t}function Mw(i){const t={},l=u(i,["functionDeclarations"]);if(l!=null){let h=l;Array.isArray(h)&&(h=h.map(v=>v)),f(t,["functionDeclarations"],h)}if(u(i,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const a=u(i,["googleSearch"]);a!=null&&f(t,["googleSearch"],rw(a));const r=u(i,["googleSearchRetrieval"]);if(r!=null&&f(t,["googleSearchRetrieval"],r),u(i,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=u(i,["googleMaps"]);c!=null&&f(t,["googleMaps"],sw(c));const m=u(i,["urlContext"]);m!=null&&f(t,["urlContext"],m);const g=u(i,["computerUse"]);g!=null&&f(t,["computerUse"],g);const y=u(i,["codeExecution"]);return y!=null&&f(t,["codeExecution"],y),t}function gy(i){const t={},l=u(i,["functionDeclarations"]);if(l!=null){let x=l;Array.isArray(x)&&(x=x.map(S=>LS(S))),f(t,["functionDeclarations"],x)}const a=u(i,["retrieval"]);a!=null&&f(t,["retrieval"],a);const r=u(i,["googleSearch"]);r!=null&&f(t,["googleSearch"],r);const c=u(i,["googleSearchRetrieval"]);c!=null&&f(t,["googleSearchRetrieval"],c);const m=u(i,["enterpriseWebSearch"]);m!=null&&f(t,["enterpriseWebSearch"],m);const g=u(i,["googleMaps"]);g!=null&&f(t,["googleMaps"],g);const y=u(i,["urlContext"]);y!=null&&f(t,["urlContext"],y);const h=u(i,["computerUse"]);h!=null&&f(t,["computerUse"],h);const v=u(i,["codeExecution"]);return v!=null&&f(t,["codeExecution"],v),t}function Iw(i){const t={},l=u(i,["baseModel"]);l!=null&&f(t,["baseModel"],l);const a=u(i,["createTime"]);a!=null&&f(t,["createTime"],a);const r=u(i,["updateTime"]);return r!=null&&f(t,["updateTime"],r),t}function Dw(i){const t={},l=u(i,["labels","google-vertex-llm-tuning-base-model-id"]);l!=null&&f(t,["baseModel"],l);const a=u(i,["createTime"]);a!=null&&f(t,["createTime"],a);const r=u(i,["updateTime"]);return r!=null&&f(t,["updateTime"],r),t}function Uw(i,t){const l={},a=u(i,["displayName"]);t!==void 0&&a!=null&&f(t,["displayName"],a);const r=u(i,["description"]);t!==void 0&&r!=null&&f(t,["description"],r);const c=u(i,["defaultCheckpointId"]);return t!==void 0&&c!=null&&f(t,["defaultCheckpointId"],c),l}function kw(i,t){const l={},a=u(i,["displayName"]);t!==void 0&&a!=null&&f(t,["displayName"],a);const r=u(i,["description"]);t!==void 0&&r!=null&&f(t,["description"],r);const c=u(i,["defaultCheckpointId"]);return t!==void 0&&c!=null&&f(t,["defaultCheckpointId"],c),l}function Lw(i,t){const l={},a=u(t,["model"]);a!=null&&f(l,["_url","name"],Pe(i,a));const r=u(t,["config"]);return r!=null&&Uw(r,l),l}function Gw(i,t){const l={},a=u(t,["model"]);a!=null&&f(l,["_url","model"],Pe(i,a));const r=u(t,["config"]);return r!=null&&kw(r,l),l}function Pw(i,t){const l={},a=u(i,["outputGcsUri"]);t!==void 0&&a!=null&&f(t,["parameters","storageUri"],a);const r=u(i,["includeRaiReason"]);t!==void 0&&r!=null&&f(t,["parameters","includeRaiReason"],r);const c=u(i,["outputMimeType"]);t!==void 0&&c!=null&&f(t,["parameters","outputOptions","mimeType"],c);const m=u(i,["outputCompressionQuality"]);t!==void 0&&m!=null&&f(t,["parameters","outputOptions","compressionQuality"],m);const g=u(i,["enhanceInputImage"]);t!==void 0&&g!=null&&f(t,["parameters","upscaleConfig","enhanceInputImage"],g);const y=u(i,["imagePreservationFactor"]);t!==void 0&&y!=null&&f(t,["parameters","upscaleConfig","imagePreservationFactor"],y);const h=u(i,["labels"]);t!==void 0&&h!=null&&f(t,["labels"],h);const v=u(i,["numberOfImages"]);t!==void 0&&v!=null&&f(t,["parameters","sampleCount"],v);const x=u(i,["mode"]);return t!==void 0&&x!=null&&f(t,["parameters","mode"],x),l}function Bw(i,t){const l={},a=u(t,["model"]);a!=null&&f(l,["_url","model"],Pe(i,a));const r=u(t,["image"]);r!=null&&f(l,["instances[0]","image"],mn(r));const c=u(t,["upscaleFactor"]);c!=null&&f(l,["parameters","upscaleConfig","upscaleFactor"],c);const m=u(t,["config"]);return m!=null&&Pw(m,l),l}function qw(i){const t={},l=u(i,["sdkHttpResponse"]);l!=null&&f(t,["sdkHttpResponse"],l);const a=u(i,["predictions"]);if(a!=null){let r=a;Array.isArray(r)&&(r=r.map(c=>Fs(c))),f(t,["generatedImages"],r)}return t}function Vw(i){const t={},l=u(i,["uri"]);l!=null&&f(t,["uri"],l);const a=u(i,["encodedVideo"]);a!=null&&f(t,["videoBytes"],Ai(a));const r=u(i,["encoding"]);return r!=null&&f(t,["mimeType"],r),t}function Ow(i){const t={},l=u(i,["gcsUri"]);l!=null&&f(t,["uri"],l);const a=u(i,["bytesBase64Encoded"]);a!=null&&f(t,["videoBytes"],Ai(a));const r=u(i,["mimeType"]);return r!=null&&f(t,["mimeType"],r),t}function Hw(i){const t={},l=u(i,["image"]);l!=null&&f(t,["_self"],mn(l));const a=u(i,["maskMode"]);return a!=null&&f(t,["maskMode"],a),t}function zw(i){const t={},l=u(i,["image"]);l!=null&&f(t,["image"],Js(l));const a=u(i,["referenceType"]);return a!=null&&f(t,["referenceType"],a),t}function Yw(i){const t={},l=u(i,["image"]);l!=null&&f(t,["image"],mn(l));const a=u(i,["referenceType"]);return a!=null&&f(t,["referenceType"],a),t}function yy(i){const t={},l=u(i,["uri"]);l!=null&&f(t,["uri"],l);const a=u(i,["videoBytes"]);a!=null&&f(t,["encodedVideo"],Ai(a));const r=u(i,["mimeType"]);return r!=null&&f(t,["encoding"],r),t}function vy(i){const t={},l=u(i,["uri"]);l!=null&&f(t,["gcsUri"],l);const a=u(i,["videoBytes"]);a!=null&&f(t,["bytesBase64Encoded"],Ai(a));const r=u(i,["mimeType"]);return r!=null&&f(t,["mimeType"],r),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Fw="Content-Type",Jw="X-Server-Timeout",Kw="User-Agent",Lc="x-goog-api-client",$w="1.27.0",Xw=`google-genai-sdk/${$w}`,Qw="v1beta1",Zw="v1beta",gg=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class Ww{constructor(t){var l,a;this.clientOptions=Object.assign(Object.assign({},t),{project:t.project,location:t.location,apiKey:t.apiKey,vertexai:t.vertexai});const r={};this.clientOptions.vertexai?(r.apiVersion=(l=this.clientOptions.apiVersion)!==null&&l!==void 0?l:Qw,r.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(r.apiVersion=(a=this.clientOptions.apiVersion)!==null&&a!==void 0?a:Zw,r.baseUrl="https://generativelanguage.googleapis.com/"),r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,t.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,t.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var t;return(t=this.clientOptions.vertexai)!==null&&t!==void 0?t:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(t){if(!t||t.baseUrl===void 0||t.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const a=[t.baseUrl.endsWith("/")?t.baseUrl.slice(0,-1):t.baseUrl];return t.apiVersion&&t.apiVersion!==""&&a.push(t.apiVersion),a.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const t=this.getBaseUrl(),l=new URL(t);return l.protocol=l.protocol=="http:"?"ws":"wss",l.toString()}setBaseUrl(t){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=t;else throw new Error("HTTP options are not correctly set.")}constructUrl(t,l,a){const r=[this.getRequestUrlInternal(l)];return a&&r.push(this.getBaseResourcePath()),t!==""&&r.push(t),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(t){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||t.path.startsWith("projects/")||t.httpMethod==="GET"&&t.path.startsWith("publishers/google/models"))}async request(t){let l=this.clientOptions.httpOptions;t.httpOptions&&(l=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const a=this.shouldPrependVertexProjectPath(t),r=this.constructUrl(t.path,l,a);if(t.queryParams)for(const[m,g]of Object.entries(t.queryParams))r.searchParams.append(m,String(g));let c={};if(t.httpMethod==="GET"){if(t.body&&t.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else c.body=t.body;return c=await this.includeExtraHttpOptionsToRequestInit(c,l,r.toString(),t.abortSignal),this.unaryApiCall(r,c,t.httpMethod)}patchHttpOptions(t,l){const a=JSON.parse(JSON.stringify(t));for(const[r,c]of Object.entries(l))typeof c=="object"?a[r]=Object.assign(Object.assign({},a[r]),c):c!==void 0&&(a[r]=c);return a}async requestStream(t){let l=this.clientOptions.httpOptions;t.httpOptions&&(l=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const a=this.shouldPrependVertexProjectPath(t),r=this.constructUrl(t.path,l,a);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let c={};return c.body=t.body,c=await this.includeExtraHttpOptionsToRequestInit(c,l,r.toString(),t.abortSignal),this.streamApiCall(r,c,t.httpMethod)}async includeExtraHttpOptionsToRequestInit(t,l,a,r){if(l&&l.timeout||r){const c=new AbortController,m=c.signal;if(l.timeout&&(l==null?void 0:l.timeout)>0){const g=setTimeout(()=>c.abort(),l.timeout);g&&typeof g.unref=="function"&&g.unref()}r&&r.addEventListener("abort",()=>{c.abort()}),t.signal=m}return l&&l.extraBody!==null&&jw(t,l.extraBody),t.headers=await this.getHeadersInternal(l,a),t}async unaryApiCall(t,l,a){return this.apiCall(t.toString(),Object.assign(Object.assign({},l),{method:a})).then(async r=>(await yg(r),new Mc(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(t,l,a){return this.apiCall(t.toString(),Object.assign(Object.assign({},l),{method:a})).then(async r=>(await yg(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(t){var l;return Oo(this,arguments,function*(){const r=(l=t==null?void 0:t.body)===null||l===void 0?void 0:l.getReader(),c=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let m="";for(;;){const{done:g,value:y}=yield je(r.read());if(g){if(m.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const h=c.decode(y,{stream:!0});try{const x=JSON.parse(h);if("error"in x){const S=JSON.parse(JSON.stringify(x.error)),b=S.status,A=S.code,_=`got status: ${b}. ${JSON.stringify(x)}`;if(A>=400&&A<600)throw new zs({message:_,status:A})}}catch(x){if(x.name==="ApiError")throw x}m+=h;let v=m.match(gg);for(;v;){const x=v[1];try{const S=new Response(x,{headers:t==null?void 0:t.headers,status:t==null?void 0:t.status,statusText:t==null?void 0:t.statusText});yield yield je(new Mc(S)),m=m.slice(v[0].length),v=m.match(gg)}catch(S){throw new Error(`exception parsing stream chunk ${x}. ${S}`)}}}}finally{r.releaseLock()}})}async apiCall(t,l){return fetch(t,l).catch(a=>{throw new Error(`exception ${a} sending request`)})}getDefaultHeaders(){const t={},l=Xw+" "+this.clientOptions.userAgentExtra;return t[Kw]=l,t[Lc]=l,t[Fw]="application/json",t}async getHeadersInternal(t,l){const a=new Headers;if(t&&t.headers){for(const[r,c]of Object.entries(t.headers))a.append(r,c);t.timeout&&t.timeout>0&&a.append(Jw,String(Math.ceil(t.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(a,l),a}async uploadFile(t,l){var a;const r={};l!=null&&(r.mimeType=l.mimeType,r.name=l.name,r.displayName=l.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const c=this.clientOptions.uploader,m=await c.stat(t);r.sizeBytes=String(m.size);const g=(a=l==null?void 0:l.mimeType)!==null&&a!==void 0?a:m.type;if(g===void 0||g==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=g;const y=await this.fetchUploadUrl(r,l);return c.upload(t,y,this)}async downloadFile(t){await this.clientOptions.downloader.download(t,this)}async fetchUploadUrl(t,l){var a;let r={};l!=null&&l.httpOptions?r=l.httpOptions:r={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${t.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${t.mimeType}`}};const c={file:t},m=await this.request({path:se("upload/v1beta/files",c._url),body:JSON.stringify(c),httpMethod:"POST",httpOptions:r});if(!m||!(m!=null&&m.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const g=(a=m==null?void 0:m.headers)===null||a===void 0?void 0:a["x-goog-upload-url"];if(g===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return g}}async function yg(i){var t;if(i===void 0)throw new Error("response is undefined");if(!i.ok){const l=i.status;let a;!((t=i.headers.get("content-type"))===null||t===void 0)&&t.includes("application/json")?a=await i.json():a={error:{message:await i.text(),code:i.status,status:i.statusText}};const r=JSON.stringify(a);throw l>=400&&l<600?new zs({message:r,status:l}):new Error(r)}}function jw(i,t){if(!t||Object.keys(t).length===0)return;if(i.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let l={};if(typeof i.body=="string"&&i.body.length>0)try{const c=JSON.parse(i.body);if(typeof c=="object"&&c!==null&&!Array.isArray(c))l=c;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function a(c,m){const g=Object.assign({},c);for(const y in m)if(Object.prototype.hasOwnProperty.call(m,y)){const h=m[y],v=g[y];h&&typeof h=="object"&&!Array.isArray(h)&&v&&typeof v=="object"&&!Array.isArray(v)?g[y]=a(v,h):(v&&h&&typeof v!=typeof h&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${y}". Original type: ${typeof v}, New type: ${typeof h}. Overwriting.`),g[y]=h)}return g}const r=a(l,t);i.body=JSON.stringify(r)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const eA="mcp_used/unknown";let tA=!1;function Ey(i){for(const t of i)if(nA(t)||typeof t=="object"&&"inputSchema"in t)return!0;return tA}function Ty(i){var t;const l=(t=i[Lc])!==null&&t!==void 0?t:"";i[Lc]=(l+` ${eA}`).trimStart()}function nA(i){return i!==null&&typeof i=="object"&&i instanceof Zc}function iA(i,t=100){return Oo(this,arguments,function*(){let a,r=0;for(;r<t;){const c=yield je(i.listTools({cursor:a}));for(const m of c.tools)yield yield je(m),r++;if(!c.nextCursor)break;a=c.nextCursor}})}class Zc{constructor(t=[],l){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=t,this.config=l}static create(t,l){return new Zc(t,l)}async initialize(){var t,l,a,r;if(this.mcpTools.length>0)return;const c={},m=[];for(const v of this.mcpClients)try{for(var g=!0,y=(l=void 0,Kl(iA(v))),h;h=await y.next(),t=h.done,!t;g=!0){r=h.value,g=!1;const x=r;m.push(x);const S=x.name;if(c[S])throw new Error(`Duplicate function name ${S} found in MCP tools. Please ensure function names are unique.`);c[S]=v}}catch(x){l={error:x}}finally{try{!g&&!t&&(a=y.return)&&await a.call(y)}finally{if(l)throw l.error}}this.mcpTools=m,this.functionNameToMcpClient=c}async tool(){return await this.initialize(),rT(this.mcpTools,this.config)}async callTool(t){await this.initialize();const l=[];for(const a of t)if(a.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[a.name];let c;this.config.timeout&&(c={timeout:this.config.timeout});const m=await r.callTool({name:a.name,arguments:a.args},void 0,c);l.push({functionResponse:{name:a.name,response:m.isError?{error:m}:m}})}return l}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function oA(i,t,l){const a=new eT;let r;l.data instanceof Blob?r=JSON.parse(await l.data.text()):r=JSON.parse(l.data),Object.assign(a,r),t(a)}class lA{constructor(t,l,a){this.apiClient=t,this.auth=l,this.webSocketFactory=a}async connect(t){var l,a;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),c=this.apiClient.getApiVersion(),m=rA(this.apiClient.getDefaultHeaders()),g=this.apiClient.getApiKey(),y=`${r}/ws/google.ai.generativelanguage.${c}.GenerativeService.BidiGenerateMusic?key=${g}`;let h=()=>{};const v=new Promise(V=>{h=V}),x=t.callbacks,S=function(){h({})},b=this.apiClient,A={onopen:S,onmessage:V=>{oA(b,x.onmessage,V)},onerror:(l=x==null?void 0:x.onerror)!==null&&l!==void 0?l:function(V){},onclose:(a=x==null?void 0:x.onclose)!==null&&a!==void 0?a:function(V){}},_=this.webSocketFactory.create(y,sA(m),A);_.connect(),await v;const B={setup:{model:Pe(this.apiClient,t.model)}};return _.send(JSON.stringify(B)),new aA(_,this.apiClient)}}class aA{constructor(t,l){this.conn=t,this.apiClient=l}async setWeightedPrompts(t){if(!t.weightedPrompts||Object.keys(t.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const l=Zx(t);this.conn.send(JSON.stringify({clientContent:l}))}async setMusicGenerationConfig(t){t.musicGenerationConfig||(t.musicGenerationConfig={});const l=Qx(t);this.conn.send(JSON.stringify(l))}sendPlaybackControl(t){const l={playbackControl:t};this.conn.send(JSON.stringify(l))}play(){this.sendPlaybackControl(qo.PLAY)}pause(){this.sendPlaybackControl(qo.PAUSE)}stop(){this.sendPlaybackControl(qo.STOP)}resetContext(){this.sendPlaybackControl(qo.RESET_CONTEXT)}close(){this.conn.close()}}function sA(i){const t={};return i.forEach((l,a)=>{t[a]=l}),t}function rA(i){const t=new Headers;for(const[l,a]of Object.entries(i))t.append(l,a);return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const uA="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function cA(i,t,l){const a=new jE;let r;l.data instanceof Blob?r=await l.data.text():l.data instanceof ArrayBuffer?r=new TextDecoder().decode(l.data):r=l.data;const c=JSON.parse(r);if(i.isVertexAI()){const m=eS(c);Object.assign(a,m)}else Object.assign(a,c);t(a)}class dA{constructor(t,l,a){this.apiClient=t,this.auth=l,this.webSocketFactory=a,this.music=new lA(this.apiClient,this.auth,this.webSocketFactory)}async connect(t){var l,a,r,c,m,g;if(t.config&&t.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const y=this.apiClient.getWebsocketBaseUrl(),h=this.apiClient.getApiVersion();let v;const x=this.apiClient.getHeaders();t.config&&t.config.tools&&Ey(t.config.tools)&&Ty(x);const S=pA(x);if(this.apiClient.isVertexAI())v=`${y}/ws/google.cloud.aiplatform.${h}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(S,v);else{const te=this.apiClient.getApiKey();let ge="BidiGenerateContent",Ce="key";te!=null&&te.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),h!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),ge="BidiGenerateContentConstrained",Ce="access_token"),v=`${y}/ws/google.ai.generativelanguage.${h}.GenerativeService.${ge}?${Ce}=${te}`}let b=()=>{};const A=new Promise(te=>{b=te}),_=t.callbacks,G=function(){var te;(te=_==null?void 0:_.onopen)===null||te===void 0||te.call(_),b({})},M=this.apiClient,B={onopen:G,onmessage:te=>{cA(M,_.onmessage,te)},onerror:(l=_==null?void 0:_.onerror)!==null&&l!==void 0?l:function(te){},onclose:(a=_==null?void 0:_.onclose)!==null&&a!==void 0?a:function(te){}},V=this.webSocketFactory.create(v,hA(S),B);V.connect(),await A;let $=Pe(this.apiClient,t.model);if(this.apiClient.isVertexAI()&&$.startsWith("publishers/")){const te=this.apiClient.getProject(),ge=this.apiClient.getLocation();$=`projects/${te}/locations/${ge}/`+$}let Q={};this.apiClient.isVertexAI()&&((r=t.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(t.config===void 0?t.config={responseModalities:[Rs.AUDIO]}:t.config.responseModalities=[Rs.AUDIO]),!((c=t.config)===null||c===void 0)&&c.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const j=(g=(m=t.config)===null||m===void 0?void 0:m.tools)!==null&&g!==void 0?g:[],W=[];for(const te of j)if(this.isCallableTool(te)){const ge=te;W.push(await ge.tool())}else W.push(te);W.length>0&&(t.config.tools=W);const me={model:$,config:t.config,callbacks:t.callbacks};return this.apiClient.isVertexAI()?Q=Xx(this.apiClient,me):Q=$x(this.apiClient,me),delete Q.config,V.send(JSON.stringify(Q)),new mA(V,this.apiClient)}isCallableTool(t){return"callTool"in t&&typeof t.callTool=="function"}}const fA={turnComplete:!0};class mA{constructor(t,l){this.conn=t,this.apiClient=l}tLiveClientContent(t,l){if(l.turns!==null&&l.turns!==void 0){let a=[];try{a=sn(l.turns),t.isVertexAI()||(a=a.map(r=>Ys(r)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof l.turns}'`)}return{clientContent:{turns:a,turnComplete:l.turnComplete}}}return{clientContent:{turnComplete:l.turnComplete}}}tLiveClienttToolResponse(t,l){let a=[];if(l.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(l.functionResponses)?a=l.functionResponses:a=[l.functionResponses],a.length===0)throw new Error("functionResponses is required.");for(const c of a){if(typeof c!="object"||c===null||!("name"in c)||!("response"in c))throw new Error(`Could not parse function response, type '${typeof c}'.`);if(!t.isVertexAI()&&!("id"in c))throw new Error(uA)}return{toolResponse:{functionResponses:a}}}sendClientContent(t){t=Object.assign(Object.assign({},fA),t);const l=this.tLiveClientContent(this.apiClient,t);this.conn.send(JSON.stringify(l))}sendRealtimeInput(t){let l={};this.apiClient.isVertexAI()?l={realtimeInput:jx(t)}:l={realtimeInput:Wx(t)},this.conn.send(JSON.stringify(l))}sendToolResponse(t){if(t.functionResponses==null)throw new Error("Tool response parameters are required.");const l=this.tLiveClienttToolResponse(this.apiClient,t);this.conn.send(JSON.stringify(l))}close(){this.conn.close()}}function hA(i){const t={};return i.forEach((l,a)=>{t[a]=l}),t}function pA(i){const t=new Headers;for(const[l,a]of Object.entries(i))t.append(l,a);return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const vg=10;function Eg(i){var t,l,a;if(!((t=i==null?void 0:i.automaticFunctionCalling)===null||t===void 0)&&t.disable)return!0;let r=!1;for(const m of(l=i==null?void 0:i.tools)!==null&&l!==void 0?l:[])if(Ho(m)){r=!0;break}if(!r)return!0;const c=(a=i==null?void 0:i.automaticFunctionCalling)===null||a===void 0?void 0:a.maximumRemoteCalls;return c&&(c<0||!Number.isInteger(c))||c==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",c),!0):!1}function Ho(i){return"callTool"in i&&typeof i.callTool=="function"}function gA(i){var t,l,a;return(a=(l=(t=i.config)===null||t===void 0?void 0:t.tools)===null||l===void 0?void 0:l.some(r=>Ho(r)))!==null&&a!==void 0?a:!1}function yA(i){var t,l,a;return(a=(l=(t=i.config)===null||t===void 0?void 0:t.tools)===null||l===void 0?void 0:l.some(r=>!Ho(r)))!==null&&a!==void 0?a:!1}function Tg(i){var t;return!(!((t=i==null?void 0:i.automaticFunctionCalling)===null||t===void 0)&&t.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class vA extends Wi{constructor(t){super(),this.apiClient=t,this.generateContent=async l=>{var a,r,c,m,g;const y=await this.processParamsMaybeAddMcpUsage(l);if(this.maybeMoveToResponseJsonSchem(l),!gA(l)||Eg(l.config))return await this.generateContentInternal(y);if(yA(l))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let h,v;const x=sn(y.contents),S=(c=(r=(a=y.config)===null||a===void 0?void 0:a.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&c!==void 0?c:vg;let b=0;for(;b<S&&(h=await this.generateContentInternal(y),!(!h.functionCalls||h.functionCalls.length===0));){const A=h.candidates[0].content,_=[];for(const G of(g=(m=l.config)===null||m===void 0?void 0:m.tools)!==null&&g!==void 0?g:[])if(Ho(G)){const B=await G.callTool(h.functionCalls);_.push(...B)}b++,v={role:"user",parts:_},y.contents=sn(y.contents),y.contents.push(A),y.contents.push(v),Tg(y.config)&&(x.push(A),x.push(v))}return Tg(y.config)&&(h.automaticFunctionCallingHistory=x),h},this.generateContentStream=async l=>{if(this.maybeMoveToResponseJsonSchem(l),Eg(l.config)){const a=await this.processParamsMaybeAddMcpUsage(l);return await this.generateContentStreamInternal(a)}else return await this.processAfcStream(l)},this.generateImages=async l=>await this.generateImagesInternal(l).then(a=>{var r;let c;const m=[];if(a!=null&&a.generatedImages)for(const y of a.generatedImages)y&&(y!=null&&y.safetyAttributes)&&((r=y==null?void 0:y.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?c=y==null?void 0:y.safetyAttributes:m.push(y);let g;return c?g={generatedImages:m,positivePromptSafetyAttributes:c,sdkHttpResponse:a.sdkHttpResponse}:g={generatedImages:m,sdkHttpResponse:a.sdkHttpResponse},g}),this.list=async l=>{var a;const m={config:Object.assign(Object.assign({},{queryBase:!0}),l==null?void 0:l.config)};if(this.apiClient.isVertexAI()&&!m.config.queryBase){if(!((a=m.config)===null||a===void 0)&&a.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");m.config.filter="labels.tune-type:*"}return new Xl(Zi.PAGED_ITEM_MODELS,g=>this.listInternal(g),await this.listInternal(m),m)},this.editImage=async l=>{const a={model:l.model,prompt:l.prompt,referenceImages:[],config:l.config};return l.referenceImages&&l.referenceImages&&(a.referenceImages=l.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(a)},this.upscaleImage=async l=>{let a={numberOfImages:1,mode:"upscale"};l.config&&(a=Object.assign(Object.assign({},a),l.config));const r={model:l.model,image:l.image,upscaleFactor:l.upscaleFactor,config:a};return await this.upscaleImageInternal(r)},this.generateVideos=async l=>{var a,r,c,m,g,y;if((l.prompt||l.image||l.video)&&l.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((a=l.video)===null||a===void 0)&&a.uri&&(!((r=l.video)===null||r===void 0)&&r.videoBytes)?l.video={uri:l.video.uri,mimeType:l.video.mimeType}:!((m=(c=l.source)===null||c===void 0?void 0:c.video)===null||m===void 0)&&m.uri&&(!((y=(g=l.source)===null||g===void 0?void 0:g.video)===null||y===void 0)&&y.videoBytes)&&(l.source.video={uri:l.source.video.uri,mimeType:l.source.video.mimeType})),await this.generateVideosInternal(l)}}maybeMoveToResponseJsonSchem(t){t.config&&t.config.responseSchema&&(t.config.responseJsonSchema||Object.keys(t.config.responseSchema).includes("$schema")&&(t.config.responseJsonSchema=t.config.responseSchema,delete t.config.responseSchema))}async processParamsMaybeAddMcpUsage(t){var l,a,r;const c=(l=t.config)===null||l===void 0?void 0:l.tools;if(!c)return t;const m=await Promise.all(c.map(async y=>Ho(y)?await y.tool():y)),g={model:t.model,contents:t.contents,config:Object.assign(Object.assign({},t.config),{tools:m})};if(g.config.tools=m,t.config&&t.config.tools&&Ey(t.config.tools)){const y=(r=(a=t.config.httpOptions)===null||a===void 0?void 0:a.headers)!==null&&r!==void 0?r:{};let h=Object.assign({},y);Object.keys(h).length===0&&(h=this.apiClient.getDefaultHeaders()),Ty(h),g.config.httpOptions=Object.assign(Object.assign({},t.config.httpOptions),{headers:h})}return g}async initAfcToolsMap(t){var l,a,r;const c=new Map;for(const m of(a=(l=t.config)===null||l===void 0?void 0:l.tools)!==null&&a!==void 0?a:[])if(Ho(m)){const g=m,y=await g.tool();for(const h of(r=y.functionDeclarations)!==null&&r!==void 0?r:[]){if(!h.name)throw new Error("Function declaration name is required.");if(c.has(h.name))throw new Error(`Duplicate tool declaration name: ${h.name}`);c.set(h.name,g)}}return c}async processAfcStream(t){var l,a,r;const c=(r=(a=(l=t.config)===null||l===void 0?void 0:l.automaticFunctionCalling)===null||a===void 0?void 0:a.maximumRemoteCalls)!==null&&r!==void 0?r:vg;let m=!1,g=0;const y=await this.initAfcToolsMap(t);return(function(h,v,x){var S,b;return Oo(this,arguments,function*(){for(var A,_,G,M;g<c;){m&&(g++,m=!1);const Q=yield je(h.processParamsMaybeAddMcpUsage(x)),j=yield je(h.generateContentStreamInternal(Q)),W=[],me=[];try{for(var B=!0,V=(_=void 0,Kl(j)),$;$=yield je(V.next()),A=$.done,!A;B=!0){M=$.value,B=!1;const te=M;if(yield yield je(te),te.candidates&&(!((S=te.candidates[0])===null||S===void 0)&&S.content)){me.push(te.candidates[0].content);for(const ge of(b=te.candidates[0].content.parts)!==null&&b!==void 0?b:[])if(g<c&&ge.functionCall){if(!ge.functionCall.name)throw new Error("Function call name was not returned by the model.");if(v.has(ge.functionCall.name)){const Ce=yield je(v.get(ge.functionCall.name).callTool([ge.functionCall]));W.push(...Ce)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${v.keys()}, mising tool: ${ge.functionCall.name}`)}}}}catch(te){_={error:te}}finally{try{!B&&!A&&(G=V.return)&&(yield je(G.call(V)))}finally{if(_)throw _.error}}if(W.length>0){m=!0;const te=new Yl;te.candidates=[{content:{role:"user",parts:W}}],yield yield je(te);const ge=[];ge.push(...me),ge.push({role:"user",parts:W});const Ce=sn(x.contents).concat(ge);x.contents=Ce}else break}})})(this,y,t)}async generateContentInternal(t){var l,a,r,c;let m,g="",y={};if(this.apiClient.isVertexAI()){const h=mg(this.apiClient,t);return g=se("{model}:generateContent",h._url),y=h._query,delete h._url,delete h._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(x=>{const S=x;return S.sdkHttpResponse={headers:v.headers},S})),m.then(v=>{const x=pg(v),S=new Yl;return Object.assign(S,x),S})}else{const h=fg(this.apiClient,t);return g=se("{model}:generateContent",h._url),y=h._query,delete h._url,delete h._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(c=t.config)===null||c===void 0?void 0:c.abortSignal}).then(v=>v.json().then(x=>{const S=x;return S.sdkHttpResponse={headers:v.headers},S})),m.then(v=>{const x=hg(v),S=new Yl;return Object.assign(S,x),S})}}async generateContentStreamInternal(t){var l,a,r,c;let m,g="",y={};if(this.apiClient.isVertexAI()){const h=mg(this.apiClient,t);return g=se("{model}:streamGenerateContent?alt=sse",h._url),y=h._query,delete h._url,delete h._query,m=this.apiClient.requestStream({path:g,queryParams:y,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}),m.then(function(x){return Oo(this,arguments,function*(){var S,b,A,_;try{for(var G=!0,M=Kl(x),B;B=yield je(M.next()),S=B.done,!S;G=!0){_=B.value,G=!1;const V=_,$=pg(yield je(V.json()));$.sdkHttpResponse={headers:V.headers};const Q=new Yl;Object.assign(Q,$),yield yield je(Q)}}catch(V){b={error:V}}finally{try{!G&&!S&&(A=M.return)&&(yield je(A.call(M)))}finally{if(b)throw b.error}}})})}else{const h=fg(this.apiClient,t);return g=se("{model}:streamGenerateContent?alt=sse",h._url),y=h._query,delete h._url,delete h._query,m=this.apiClient.requestStream({path:g,queryParams:y,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(c=t.config)===null||c===void 0?void 0:c.abortSignal}),m.then(function(x){return Oo(this,arguments,function*(){var S,b,A,_;try{for(var G=!0,M=Kl(x),B;B=yield je(M.next()),S=B.done,!S;G=!0){_=B.value,G=!1;const V=_,$=hg(yield je(V.json()));$.sdkHttpResponse={headers:V.headers};const Q=new Yl;Object.assign(Q,$),yield yield je(Q)}}catch(V){b={error:V}}finally{try{!G&&!S&&(A=M.return)&&(yield je(A.call(M)))}finally{if(b)throw b.error}}})})}}async embedContent(t){var l,a,r,c;let m,g="",y={};if(this.apiClient.isVertexAI()){const h=MS(this.apiClient,t);return g=se("{model}:predict",h._url),y=h._query,delete h._url,delete h._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(x=>{const S=x;return S.sdkHttpResponse={headers:v.headers},S})),m.then(v=>{const x=DS(v),S=new Qp;return Object.assign(S,x),S})}else{const h=NS(this.apiClient,t);return g=se("{model}:batchEmbedContents",h._url),y=h._query,delete h._url,delete h._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(c=t.config)===null||c===void 0?void 0:c.abortSignal}).then(v=>v.json().then(x=>{const S=x;return S.sdkHttpResponse={headers:v.headers},S})),m.then(v=>{const x=IS(v),S=new Qp;return Object.assign(S,x),S})}}async generateImagesInternal(t){var l,a,r,c;let m,g="",y={};if(this.apiClient.isVertexAI()){const h=OS(this.apiClient,t);return g=se("{model}:predict",h._url),y=h._query,delete h._url,delete h._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(x=>{const S=x;return S.sdkHttpResponse={headers:v.headers},S})),m.then(v=>{const x=zS(v),S=new Zp;return Object.assign(S,x),S})}else{const h=VS(this.apiClient,t);return g=se("{model}:predict",h._url),y=h._query,delete h._url,delete h._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(c=t.config)===null||c===void 0?void 0:c.abortSignal}).then(v=>v.json().then(x=>{const S=x;return S.sdkHttpResponse={headers:v.headers},S})),m.then(v=>{const x=HS(v),S=new Zp;return Object.assign(S,x),S})}}async editImageInternal(t){var l,a;let r,c="",m={};if(this.apiClient.isVertexAI()){const g=_S(this.apiClient,t);return c=se("{model}:predict",g._url),m=g._query,delete g._url,delete g._query,r=this.apiClient.request({path:c,queryParams:m,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(h=>{const v=h;return v.sdkHttpResponse={headers:y.headers},v})),r.then(y=>{const h=CS(y),v=new FE;return Object.assign(v,h),v})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(t){var l,a;let r,c="",m={};if(this.apiClient.isVertexAI()){const g=Bw(this.apiClient,t);return c=se("{model}:predict",g._url),m=g._query,delete g._url,delete g._query,r=this.apiClient.request({path:c,queryParams:m,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(h=>{const v=h;return v.sdkHttpResponse={headers:y.headers},v})),r.then(y=>{const h=qw(y),v=new JE;return Object.assign(v,h),v})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(t){var l,a;let r,c="",m={};if(this.apiClient.isVertexAI()){const g=Tw(this.apiClient,t);return c=se("{model}:predict",g._url),m=g._query,delete g._url,delete g._query,r=this.apiClient.request({path:c,queryParams:m,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),r.then(y=>{const h=xw(y),v=new KE;return Object.assign(v,h),v})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(t){var l,a;let r,c="",m={};if(this.apiClient.isVertexAI()){const g=bw(this.apiClient,t);return c=se("{model}:predict",g._url),m=g._query,delete g._url,delete g._query,r=this.apiClient.request({path:c,queryParams:m,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),r.then(y=>{const h=Rw(y),v=new $E;return Object.assign(v,h),v})}else throw new Error("This method is only supported by the Vertex AI.")}async get(t){var l,a,r,c;let m,g="",y={};if(this.apiClient.isVertexAI()){const h=aw(this.apiClient,t);return g=se("{name}",h._url),y=h._query,delete h._url,delete h._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),m.then(v=>kc(v))}else{const h=lw(this.apiClient,t);return g=se("{name}",h._url),y=h._query,delete h._url,delete h._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(c=t.config)===null||c===void 0?void 0:c.abortSignal}).then(v=>v.json()),m.then(v=>Uc(v))}}async listInternal(t){var l,a,r,c;let m,g="",y={};if(this.apiClient.isVertexAI()){const h=mw(this.apiClient,t);return g=se("{models_url}",h._url),y=h._query,delete h._url,delete h._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(x=>{const S=x;return S.sdkHttpResponse={headers:v.headers},S})),m.then(v=>{const x=pw(v),S=new Wp;return Object.assign(S,x),S})}else{const h=fw(this.apiClient,t);return g=se("{models_url}",h._url),y=h._query,delete h._url,delete h._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(c=t.config)===null||c===void 0?void 0:c.abortSignal}).then(v=>v.json().then(x=>{const S=x;return S.sdkHttpResponse={headers:v.headers},S})),m.then(v=>{const x=hw(v),S=new Wp;return Object.assign(S,x),S})}}async update(t){var l,a,r,c;let m,g="",y={};if(this.apiClient.isVertexAI()){const h=Gw(this.apiClient,t);return g=se("{model}",h._url),y=h._query,delete h._url,delete h._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),m.then(v=>kc(v))}else{const h=Lw(this.apiClient,t);return g=se("{name}",h._url),y=h._query,delete h._url,delete h._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(c=t.config)===null||c===void 0?void 0:c.abortSignal}).then(v=>v.json()),m.then(v=>Uc(v))}}async delete(t){var l,a,r,c;let m,g="",y={};if(this.apiClient.isVertexAI()){const h=xS(this.apiClient,t);return g=se("{name}",h._url),y=h._query,delete h._url,delete h._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(x=>{const S=x;return S.sdkHttpResponse={headers:v.headers},S})),m.then(v=>{const x=wS(v),S=new jp;return Object.assign(S,x),S})}else{const h=TS(this.apiClient,t);return g=se("{name}",h._url),y=h._query,delete h._url,delete h._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(c=t.config)===null||c===void 0?void 0:c.abortSignal}).then(v=>v.json().then(x=>{const S=x;return S.sdkHttpResponse={headers:v.headers},S})),m.then(v=>{const x=SS(v),S=new jp;return Object.assign(S,x),S})}}async countTokens(t){var l,a,r,c;let m,g="",y={};if(this.apiClient.isVertexAI()){const h=yS(this.apiClient,t);return g=se("{model}:countTokens",h._url),y=h._query,delete h._url,delete h._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(x=>{const S=x;return S.sdkHttpResponse={headers:v.headers},S})),m.then(v=>{const x=ES(v),S=new eg;return Object.assign(S,x),S})}else{const h=gS(this.apiClient,t);return g=se("{model}:countTokens",h._url),y=h._query,delete h._url,delete h._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(c=t.config)===null||c===void 0?void 0:c.abortSignal}).then(v=>v.json().then(x=>{const S=x;return S.sdkHttpResponse={headers:v.headers},S})),m.then(v=>{const x=vS(v),S=new eg;return Object.assign(S,x),S})}}async computeTokens(t){var l,a;let r,c="",m={};if(this.apiClient.isVertexAI()){const g=uS(this.apiClient,t);return c=se("{model}:computeTokens",g._url),m=g._query,delete g._url,delete g._query,r=this.apiClient.request({path:c,queryParams:m,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(h=>{const v=h;return v.sdkHttpResponse={headers:y.headers},v})),r.then(y=>{const h=cS(y),v=new XE;return Object.assign(v,h),v})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(t){var l,a,r,c;let m,g="",y={};if(this.apiClient.isVertexAI()){const h=XS(this.apiClient,t);return g=se("{model}:predictLongRunning",h._url),y=h._query,delete h._url,delete h._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),m.then(v=>{const x=KS(v),S=new Ns;return Object.assign(S,x),S})}else{const h=$S(this.apiClient,t);return g=se("{model}:predictLongRunning",h._url),y=h._query,delete h._url,delete h._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(c=t.config)===null||c===void 0?void 0:c.abortSignal}).then(v=>v.json()),m.then(v=>{const x=JS(v),S=new Ns;return Object.assign(S,x),S})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class EA extends Wi{constructor(t){super(),this.apiClient=t}async getVideosOperation(t){const l=t.operation,a=t.config;if(l.name===void 0||l.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=l.name.split("/operations/")[0];let c;a&&"httpOptions"in a&&(c=a.httpOptions);const m=await this.fetchPredictVideosOperationInternal({operationName:l.name,resourceName:r,config:{httpOptions:c}});return l._fromAPIResponse({apiResponse:m,isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:l.name,config:a});return l._fromAPIResponse({apiResponse:r,isVertexAI:!1})}}async get(t){const l=t.operation,a=t.config;if(l.name===void 0||l.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=l.name.split("/operations/")[0];let c;a&&"httpOptions"in a&&(c=a.httpOptions);const m=await this.fetchPredictVideosOperationInternal({operationName:l.name,resourceName:r,config:{httpOptions:c}});return l._fromAPIResponse({apiResponse:m,isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:l.name,config:a});return l._fromAPIResponse({apiResponse:r,isVertexAI:!1})}}async getVideosOperationInternal(t){var l,a,r,c;let m,g="",y={};if(this.apiClient.isVertexAI()){const h=HE(t);return g=se("{operationName}",h._url),y=h._query,delete h._url,delete h._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),m}else{const h=OE(t);return g=se("{operationName}",h._url),y=h._query,delete h._url,delete h._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(c=t.config)===null||c===void 0?void 0:c.abortSignal}).then(v=>v.json()),m}}async fetchPredictVideosOperationInternal(t){var l,a;let r,c="",m={};if(this.apiClient.isVertexAI()){const g=kE(t);return c=se("{resourceName}:fetchPredictOperation",g._url),m=g._query,delete g._url,delete g._query,r=this.apiClient.request({path:c,queryParams:m,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function TA(i){const t={};if(u(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const l=u(i,["data"]);l!=null&&f(t,["data"],l);const a=u(i,["mimeType"]);return a!=null&&f(t,["mimeType"],a),t}function xA(i){const t={},l=u(i,["parts"]);if(l!=null){let r=l;Array.isArray(r)&&(r=r.map(c=>NA(c))),f(t,["parts"],r)}const a=u(i,["role"]);return a!=null&&f(t,["role"],a),t}function SA(i,t,l){const a={},r=u(t,["expireTime"]);l!==void 0&&r!=null&&f(l,["expireTime"],r);const c=u(t,["newSessionExpireTime"]);l!==void 0&&c!=null&&f(l,["newSessionExpireTime"],c);const m=u(t,["uses"]);l!==void 0&&m!=null&&f(l,["uses"],m);const g=u(t,["liveConnectConstraints"]);l!==void 0&&g!=null&&f(l,["bidiGenerateContentSetup"],RA(i,g));const y=u(t,["lockAdditionalFields"]);return l!==void 0&&y!=null&&f(l,["fieldMask"],y),a}function wA(i,t){const l={},a=u(t,["config"]);return a!=null&&f(l,["config"],SA(i,a,l)),l}function AA(i){const t={};if(u(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const l=u(i,["fileUri"]);l!=null&&f(t,["fileUri"],l);const a=u(i,["mimeType"]);return a!=null&&f(t,["mimeType"],a),t}function _A(i){const t={};if(u(i,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const l=u(i,["enableWidget"]);return l!=null&&f(t,["enableWidget"],l),t}function CA(i){const t={},l=u(i,["timeRangeFilter"]);if(l!=null&&f(t,["timeRangeFilter"],l),u(i,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return t}function bA(i,t){const l={},a=u(i,["generationConfig"]);t!==void 0&&a!=null&&f(t,["setup","generationConfig"],a);const r=u(i,["responseModalities"]);t!==void 0&&r!=null&&f(t,["setup","generationConfig","responseModalities"],r);const c=u(i,["temperature"]);t!==void 0&&c!=null&&f(t,["setup","generationConfig","temperature"],c);const m=u(i,["topP"]);t!==void 0&&m!=null&&f(t,["setup","generationConfig","topP"],m);const g=u(i,["topK"]);t!==void 0&&g!=null&&f(t,["setup","generationConfig","topK"],g);const y=u(i,["maxOutputTokens"]);t!==void 0&&y!=null&&f(t,["setup","generationConfig","maxOutputTokens"],y);const h=u(i,["mediaResolution"]);t!==void 0&&h!=null&&f(t,["setup","generationConfig","mediaResolution"],h);const v=u(i,["seed"]);t!==void 0&&v!=null&&f(t,["setup","generationConfig","seed"],v);const x=u(i,["speechConfig"]);t!==void 0&&x!=null&&f(t,["setup","generationConfig","speechConfig"],Qc(x));const S=u(i,["thinkingConfig"]);t!==void 0&&S!=null&&f(t,["setup","generationConfig","thinkingConfig"],S);const b=u(i,["enableAffectiveDialog"]);t!==void 0&&b!=null&&f(t,["setup","generationConfig","enableAffectiveDialog"],b);const A=u(i,["systemInstruction"]);t!==void 0&&A!=null&&f(t,["setup","systemInstruction"],xA(Ct(A)));const _=u(i,["tools"]);if(t!==void 0&&_!=null){let j=Fo(_);Array.isArray(j)&&(j=j.map(W=>IA(Yo(W)))),f(t,["setup","tools"],j)}const G=u(i,["sessionResumption"]);t!==void 0&&G!=null&&f(t,["setup","sessionResumption"],MA(G));const M=u(i,["inputAudioTranscription"]);t!==void 0&&M!=null&&f(t,["setup","inputAudioTranscription"],M);const B=u(i,["outputAudioTranscription"]);t!==void 0&&B!=null&&f(t,["setup","outputAudioTranscription"],B);const V=u(i,["realtimeInputConfig"]);t!==void 0&&V!=null&&f(t,["setup","realtimeInputConfig"],V);const $=u(i,["contextWindowCompression"]);t!==void 0&&$!=null&&f(t,["setup","contextWindowCompression"],$);const Q=u(i,["proactivity"]);return t!==void 0&&Q!=null&&f(t,["setup","proactivity"],Q),l}function RA(i,t){const l={},a=u(t,["model"]);a!=null&&f(l,["setup","model"],Pe(i,a));const r=u(t,["config"]);return r!=null&&f(l,["config"],bA(r,l)),l}function NA(i){const t={},l=u(i,["videoMetadata"]);l!=null&&f(t,["videoMetadata"],l);const a=u(i,["thought"]);a!=null&&f(t,["thought"],a);const r=u(i,["inlineData"]);r!=null&&f(t,["inlineData"],TA(r));const c=u(i,["fileData"]);c!=null&&f(t,["fileData"],AA(c));const m=u(i,["thoughtSignature"]);m!=null&&f(t,["thoughtSignature"],m);const g=u(i,["functionCall"]);g!=null&&f(t,["functionCall"],g);const y=u(i,["codeExecutionResult"]);y!=null&&f(t,["codeExecutionResult"],y);const h=u(i,["executableCode"]);h!=null&&f(t,["executableCode"],h);const v=u(i,["functionResponse"]);v!=null&&f(t,["functionResponse"],v);const x=u(i,["text"]);return x!=null&&f(t,["text"],x),t}function MA(i){const t={},l=u(i,["handle"]);if(l!=null&&f(t,["handle"],l),u(i,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function IA(i){const t={},l=u(i,["functionDeclarations"]);if(l!=null){let h=l;Array.isArray(h)&&(h=h.map(v=>v)),f(t,["functionDeclarations"],h)}if(u(i,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const a=u(i,["googleSearch"]);a!=null&&f(t,["googleSearch"],CA(a));const r=u(i,["googleSearchRetrieval"]);if(r!=null&&f(t,["googleSearchRetrieval"],r),u(i,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=u(i,["googleMaps"]);c!=null&&f(t,["googleMaps"],_A(c));const m=u(i,["urlContext"]);m!=null&&f(t,["urlContext"],m);const g=u(i,["computerUse"]);g!=null&&f(t,["computerUse"],g);const y=u(i,["codeExecution"]);return y!=null&&f(t,["codeExecution"],y),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function DA(i){const t=[];for(const l in i)if(Object.prototype.hasOwnProperty.call(i,l)){const a=i[l];if(typeof a=="object"&&a!=null&&Object.keys(a).length>0){const r=Object.keys(a).map(c=>`${l}.${c}`);t.push(...r)}else t.push(l)}return t.join(",")}function UA(i,t){let l=null;const a=i.bidiGenerateContentSetup;if(typeof a=="object"&&a!==null&&"setup"in a){const c=a.setup;typeof c=="object"&&c!==null?(i.bidiGenerateContentSetup=c,l=c):delete i.bidiGenerateContentSetup}else a!==void 0&&delete i.bidiGenerateContentSetup;const r=i.fieldMask;if(l){const c=DA(l);if(Array.isArray(t==null?void 0:t.lockAdditionalFields)&&(t==null?void 0:t.lockAdditionalFields.length)===0)c?i.fieldMask=c:delete i.fieldMask;else if(t!=null&&t.lockAdditionalFields&&t.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const m=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let g=[];r.length>0&&(g=r.map(h=>m.includes(h)?`generationConfig.${h}`:h));const y=[];c&&y.push(c),g.length>0&&y.push(...g),y.length>0?i.fieldMask=y.join(","):delete i.fieldMask}else delete i.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?i.fieldMask=r.join(","):delete i.fieldMask;return i}class kA extends Wi{constructor(t){super(),this.apiClient=t}async create(t){var l,a;let r,c="",m={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const g=wA(this.apiClient,t);c=se("auth_tokens",g._url),m=g._query,delete g.config,delete g._url,delete g._query;const y=UA(g,t.config);return r=this.apiClient.request({path:c,queryParams:m,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(h=>h.json()),r.then(h=>h)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function LA(i,t){const l={},a=u(i,["name"]);return a!=null&&f(l,["_url","name"],a),l}function GA(i,t){const l={},a=u(i,["name"]);return a!=null&&f(l,["_url","name"],a),l}function PA(i,t,l){const a={};if(u(i,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=u(i,["tunedModelDisplayName"]);if(t!==void 0&&r!=null&&f(t,["displayName"],r),u(i,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const c=u(i,["epochCount"]);t!==void 0&&c!=null&&f(t,["tuningTask","hyperparameters","epochCount"],c);const m=u(i,["learningRateMultiplier"]);if(m!=null&&f(a,["tuningTask","hyperparameters","learningRateMultiplier"],m),u(i,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(u(i,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(u(i,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const g=u(i,["batchSize"]);t!==void 0&&g!=null&&f(t,["tuningTask","hyperparameters","batchSize"],g);const y=u(i,["learningRate"]);if(t!==void 0&&y!=null&&f(t,["tuningTask","hyperparameters","learningRate"],y),u(i,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");return a}function BA(i,t,l){const a={},r=u(i,["validationDataset"]);t!==void 0&&r!=null&&f(t,["supervisedTuningSpec"],jA(r));const c=u(i,["tunedModelDisplayName"]);t!==void 0&&c!=null&&f(t,["tunedModelDisplayName"],c);const m=u(i,["description"]);t!==void 0&&m!=null&&f(t,["description"],m);const g=u(i,["epochCount"]);t!==void 0&&g!=null&&f(t,["supervisedTuningSpec","hyperParameters","epochCount"],g);const y=u(i,["learningRateMultiplier"]);t!==void 0&&y!=null&&f(t,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],y);const h=u(i,["exportLastCheckpointOnly"]);t!==void 0&&h!=null&&f(t,["supervisedTuningSpec","exportLastCheckpointOnly"],h);const v=u(i,["adapterSize"]);if(t!==void 0&&v!=null&&f(t,["supervisedTuningSpec","hyperParameters","adapterSize"],v),u(i,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(u(i,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const x=u(i,["labels"]);return t!==void 0&&x!=null&&f(t,["labels"],x),a}function qA(i,t){const l={},a=u(i,["baseModel"]);a!=null&&f(l,["baseModel"],a);const r=u(i,["preTunedModel"]);r!=null&&f(l,["preTunedModel"],r);const c=u(i,["trainingDataset"]);c!=null&&f(l,["tuningTask","trainingData"],QA(c));const m=u(i,["config"]);return m!=null&&PA(m,l),l}function VA(i,t){const l={},a=u(i,["baseModel"]);a!=null&&f(l,["baseModel"],a);const r=u(i,["preTunedModel"]);r!=null&&f(l,["preTunedModel"],r);const c=u(i,["trainingDataset"]);c!=null&&ZA(c,l);const m=u(i,["config"]);return m!=null&&BA(m,l),l}function OA(i,t){const l={},a=u(i,["name"]);return a!=null&&f(l,["_url","name"],a),l}function HA(i,t){const l={},a=u(i,["name"]);return a!=null&&f(l,["_url","name"],a),l}function zA(i,t,l){const a={},r=u(i,["pageSize"]);t!==void 0&&r!=null&&f(t,["_query","pageSize"],r);const c=u(i,["pageToken"]);t!==void 0&&c!=null&&f(t,["_query","pageToken"],c);const m=u(i,["filter"]);return t!==void 0&&m!=null&&f(t,["_query","filter"],m),a}function YA(i,t,l){const a={},r=u(i,["pageSize"]);t!==void 0&&r!=null&&f(t,["_query","pageSize"],r);const c=u(i,["pageToken"]);t!==void 0&&c!=null&&f(t,["_query","pageToken"],c);const m=u(i,["filter"]);return t!==void 0&&m!=null&&f(t,["_query","filter"],m),a}function FA(i,t){const l={},a=u(i,["config"]);return a!=null&&zA(a,l),l}function JA(i,t){const l={},a=u(i,["config"]);return a!=null&&YA(a,l),l}function KA(i,t){const l={},a=u(i,["sdkHttpResponse"]);a!=null&&f(l,["sdkHttpResponse"],a);const r=u(i,["nextPageToken"]);r!=null&&f(l,["nextPageToken"],r);const c=u(i,["tunedModels"]);if(c!=null){let m=c;Array.isArray(m)&&(m=m.map(g=>xy(g))),f(l,["tuningJobs"],m)}return l}function $A(i,t){const l={},a=u(i,["sdkHttpResponse"]);a!=null&&f(l,["sdkHttpResponse"],a);const r=u(i,["nextPageToken"]);r!=null&&f(l,["nextPageToken"],r);const c=u(i,["tuningJobs"]);if(c!=null){let m=c;Array.isArray(m)&&(m=m.map(g=>Gc(g))),f(l,["tuningJobs"],m)}return l}function XA(i,t){const l={},a=u(i,["name"]);a!=null&&f(l,["model"],a);const r=u(i,["name"]);return r!=null&&f(l,["endpoint"],r),l}function QA(i,t){const l={};if(u(i,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(u(i,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const a=u(i,["examples"]);if(a!=null){let r=a;Array.isArray(r)&&(r=r.map(c=>c)),f(l,["examples","examples"],r)}return l}function ZA(i,t,l){const a={},r=u(i,["gcsUri"]);t!==void 0&&r!=null&&f(t,["supervisedTuningSpec","trainingDatasetUri"],r);const c=u(i,["vertexDatasetResource"]);if(t!==void 0&&c!=null&&f(t,["supervisedTuningSpec","trainingDatasetUri"],c),u(i,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return a}function xy(i,t){const l={},a=u(i,["sdkHttpResponse"]);a!=null&&f(l,["sdkHttpResponse"],a);const r=u(i,["name"]);r!=null&&f(l,["name"],r);const c=u(i,["state"]);c!=null&&f(l,["state"],ny(c));const m=u(i,["createTime"]);m!=null&&f(l,["createTime"],m);const g=u(i,["tuningTask","startTime"]);g!=null&&f(l,["startTime"],g);const y=u(i,["tuningTask","completeTime"]);y!=null&&f(l,["endTime"],y);const h=u(i,["updateTime"]);h!=null&&f(l,["updateTime"],h);const v=u(i,["description"]);v!=null&&f(l,["description"],v);const x=u(i,["baseModel"]);x!=null&&f(l,["baseModel"],x);const S=u(i,["_self"]);return S!=null&&f(l,["tunedModel"],XA(S)),l}function Gc(i,t){const l={},a=u(i,["sdkHttpResponse"]);a!=null&&f(l,["sdkHttpResponse"],a);const r=u(i,["name"]);r!=null&&f(l,["name"],r);const c=u(i,["state"]);c!=null&&f(l,["state"],ny(c));const m=u(i,["createTime"]);m!=null&&f(l,["createTime"],m);const g=u(i,["startTime"]);g!=null&&f(l,["startTime"],g);const y=u(i,["endTime"]);y!=null&&f(l,["endTime"],y);const h=u(i,["updateTime"]);h!=null&&f(l,["updateTime"],h);const v=u(i,["error"]);v!=null&&f(l,["error"],v);const x=u(i,["description"]);x!=null&&f(l,["description"],x);const S=u(i,["baseModel"]);S!=null&&f(l,["baseModel"],S);const b=u(i,["tunedModel"]);b!=null&&f(l,["tunedModel"],b);const A=u(i,["preTunedModel"]);A!=null&&f(l,["preTunedModel"],A);const _=u(i,["supervisedTuningSpec"]);_!=null&&f(l,["supervisedTuningSpec"],_);const G=u(i,["tuningDataStats"]);G!=null&&f(l,["tuningDataStats"],G);const M=u(i,["encryptionSpec"]);M!=null&&f(l,["encryptionSpec"],M);const B=u(i,["partnerModelTuningSpec"]);B!=null&&f(l,["partnerModelTuningSpec"],B);const V=u(i,["customBaseModel"]);V!=null&&f(l,["customBaseModel"],V);const $=u(i,["experiment"]);$!=null&&f(l,["experiment"],$);const Q=u(i,["labels"]);Q!=null&&f(l,["labels"],Q);const j=u(i,["outputUri"]);j!=null&&f(l,["outputUri"],j);const W=u(i,["pipelineJob"]);W!=null&&f(l,["pipelineJob"],W);const me=u(i,["serviceAccount"]);me!=null&&f(l,["serviceAccount"],me);const te=u(i,["tunedModelDisplayName"]);te!=null&&f(l,["tunedModelDisplayName"],te);const ge=u(i,["veoTuningSpec"]);return ge!=null&&f(l,["veoTuningSpec"],ge),l}function WA(i,t){const l={},a=u(i,["sdkHttpResponse"]);a!=null&&f(l,["sdkHttpResponse"],a);const r=u(i,["name"]);r!=null&&f(l,["name"],r);const c=u(i,["metadata"]);c!=null&&f(l,["metadata"],c);const m=u(i,["done"]);m!=null&&f(l,["done"],m);const g=u(i,["error"]);return g!=null&&f(l,["error"],g),l}function jA(i,t){const l={},a=u(i,["gcsUri"]);a!=null&&f(l,["validationDatasetUri"],a);const r=u(i,["vertexDatasetResource"]);return r!=null&&f(l,["validationDatasetUri"],r),l}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class e_ extends Wi{constructor(t){super(),this.apiClient=t,this.get=async l=>await this.getInternal(l),this.list=async(l={})=>new Xl(Zi.PAGED_ITEM_TUNING_JOBS,a=>this.listInternal(a),await this.listInternal(l),l),this.tune=async l=>{var a;if(this.apiClient.isVertexAI())if(l.baseModel.startsWith("projects/")){const r={tunedModelName:l.baseModel};!((a=l.config)===null||a===void 0)&&a.preTunedModelCheckpointId&&(r.checkpointId=l.config.preTunedModelCheckpointId);const c=Object.assign(Object.assign({},l),{preTunedModel:r});return c.baseModel=void 0,await this.tuneInternal(c)}else{const r=Object.assign({},l);return await this.tuneInternal(r)}else{const r=Object.assign({},l),c=await this.tuneMldevInternal(r);let m="";return c.metadata!==void 0&&c.metadata.tunedModel!==void 0?m=c.metadata.tunedModel:c.name!==void 0&&c.name.includes("/operations/")&&(m=c.name.split("/operations/")[0]),{name:m,state:Nc.JOB_STATE_QUEUED}}}}async getInternal(t){var l,a,r,c;let m,g="",y={};if(this.apiClient.isVertexAI()){const h=HA(t);return g=se("{name}",h._url),y=h._query,delete h._url,delete h._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(x=>{const S=x;return S.sdkHttpResponse={headers:v.headers},S})),m.then(v=>Gc(v))}else{const h=OA(t);return g=se("{name}",h._url),y=h._query,delete h._url,delete h._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(c=t.config)===null||c===void 0?void 0:c.abortSignal}).then(v=>v.json().then(x=>{const S=x;return S.sdkHttpResponse={headers:v.headers},S})),m.then(v=>xy(v))}}async listInternal(t){var l,a,r,c;let m,g="",y={};if(this.apiClient.isVertexAI()){const h=JA(t);return g=se("tuningJobs",h._url),y=h._query,delete h._url,delete h._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(x=>{const S=x;return S.sdkHttpResponse={headers:v.headers},S})),m.then(v=>{const x=$A(v),S=new tg;return Object.assign(S,x),S})}else{const h=FA(t);return g=se("tunedModels",h._url),y=h._query,delete h._url,delete h._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(c=t.config)===null||c===void 0?void 0:c.abortSignal}).then(v=>v.json().then(x=>{const S=x;return S.sdkHttpResponse={headers:v.headers},S})),m.then(v=>{const x=KA(v),S=new tg;return Object.assign(S,x),S})}}async cancel(t){var l,a,r,c;let m="",g={};if(this.apiClient.isVertexAI()){const y=GA(t);m=se("{name}:cancel",y._url),g=y._query,delete y._url,delete y._query,await this.apiClient.request({path:m,queryParams:g,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal})}else{const y=LA(t);m=se("{name}:cancel",y._url),g=y._query,delete y._url,delete y._query,await this.apiClient.request({path:m,queryParams:g,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(c=t.config)===null||c===void 0?void 0:c.abortSignal})}}async tuneInternal(t){var l,a;let r,c="",m={};if(this.apiClient.isVertexAI()){const g=VA(t);return c=se("tuningJobs",g._url),m=g._query,delete g._url,delete g._query,r=this.apiClient.request({path:c,queryParams:m,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(h=>{const v=h;return v.sdkHttpResponse={headers:y.headers},v})),r.then(y=>Gc(y))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(t){var l,a;let r,c="",m={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const g=qA(t);return c=se("tunedModels",g._url),m=g._query,delete g._url,delete g._query,r=this.apiClient.request({path:c,queryParams:m,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(h=>{const v=h;return v.sdkHttpResponse={headers:y.headers},v})),r.then(y=>WA(y))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class t_{async download(t,l){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const n_=1024*1024*8,i_=3,o_=1e3,l_=2,yc="x-goog-upload-status";async function a_(i,t,l){var a,r,c;let m=0,g=0,y=new Mc(new Response),h="upload";for(m=i.size;g<m;){const x=Math.min(n_,m-g),S=i.slice(g,g+x);g+x>=m&&(h+=", finalize");let b=0,A=o_;for(;b<i_&&(y=await l.request({path:"",body:S,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:t,headers:{"X-Goog-Upload-Command":h,"X-Goog-Upload-Offset":String(g),"Content-Length":String(x)}}}),!(!((a=y==null?void 0:y.headers)===null||a===void 0)&&a[yc]));)b++,await r_(A),A=A*l_;if(g+=x,((r=y==null?void 0:y.headers)===null||r===void 0?void 0:r[yc])!=="active")break;if(m<=g)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const v=await(y==null?void 0:y.json());if(((c=y==null?void 0:y.headers)===null||c===void 0?void 0:c[yc])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return v.file}async function s_(i){return{size:i.size,type:i.type}}function r_(i){return new Promise(t=>setTimeout(t,i))}class u_{async upload(t,l,a){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await a_(t,l,a)}async stat(t){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await s_(t)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class c_{create(t,l,a){return new d_(t,l,a)}}class d_{constructor(t,l,a){this.url=t,this.headers=l,this.callbacks=a}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(t){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(t)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const xg="x-goog-api-key";class f_{constructor(t){this.apiKey=t}async addAuthHeaders(t,l){if(t.get(xg)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");t.append(xg,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const m_="gl-node/";class Sy{constructor(t){var l;if(t.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(t.project||t.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(l=t.vertexai)!==null&&l!==void 0?l:!1,this.apiKey=t.apiKey;const a=DE(t.httpOptions,t.vertexai,void 0,void 0);a&&(t.httpOptions?t.httpOptions.baseUrl=a:t.httpOptions={baseUrl:a}),this.apiVersion=t.apiVersion;const r=new f_(this.apiKey);this.apiClient=new Ww({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:t.httpOptions,userAgentExtra:m_+"web",uploader:new u_,downloader:new t_}),this.models=new vA(this.apiClient),this.live=new dA(this.apiClient,r,new c_),this.batches=new ZT(this.apiClient),this.chats=new Nx(this.models,this.apiClient),this.caches=new Cx(this.apiClient),this.files=new qx(this.apiClient),this.operations=new EA(this.apiClient),this.authTokens=new kA(this.apiClient),this.tunings=new e_(this.apiClient)}}const h_="$",Fl="gemini",p_={gemini:"Google Gemini"},Ql="gemini-2.5-flash",g_=["gemini-2.5-flash","gemini-2.0-flash","gemini-2.0-flash-lite","gemini-flash-latest","gemini-2.5-pro"],Sg={"gemini-2.5-flash":{id:"gemini-2.5-flash",provider:Fl,name:"Gemini 2.5 Flash",description:"Balanced creativity and cost. Great all-rounder for story prompts.",icon:"",latency:"~3s",costLevel:1,strengths:["Creative writing","Fast iteration","Low cost"],recommendedUse:"Default pick for story exploration and frequent generations."},"gemini-2.0-flash":{id:"gemini-2.0-flash",provider:Fl,name:"Gemini 2.0 Flash",description:"Stable responses with slightly lower creativity than 2.5.",icon:"",latency:"~3s",costLevel:1,strengths:["Reliable formatting","Lower hallucination risk","Budget friendly"],recommendedUse:"Use when you want predictable structure for prompts."},"gemini-2.0-flash-lite":{id:"gemini-2.0-flash-lite",provider:Fl,name:"Gemini 2.0 Flash Lite",description:"Fastest and cheapest option with shorter outputs.",icon:"",latency:"~2s",costLevel:1,strengths:["Ultra fast","Lowest cost","Good for drafts"],recommendedUse:"Best when you need rapid iteration or minimal detail."},"gemini-flash-latest":{id:"gemini-flash-latest",provider:Fl,name:"Gemini Flash Latest",description:"Always points to Googles newest flash release.",icon:"",latency:"~3s",costLevel:1,strengths:["Latest capabilities","Balanced performance","Future proof"],recommendedUse:"Pick if you want auto-upgrades to the newest flash build."},"gemini-2.5-pro":{id:"gemini-2.5-pro",provider:Fl,name:"Gemini 2.5 Pro",description:"Highest quality reasoning with deeper narrative coherence.",icon:"",latency:"~5s",costLevel:3,strengths:["Long-form coherence","Complex reasoning","Rich detail"],recommendedUse:"Use for premium sessions where quality matters most."}};function y_(i){const t=Math.max(1,Math.round(i));return h_.repeat(t)}function v_(i){return i<=1?"~$0.02-0.04":i===2?"~$0.05-0.08":i>=3?"~$0.10+":"~$0.04"}const Ks=()=>{const i=ht("GEMINI_API_KEY");if(!i)throw new Error("Gemini API key not found. Please configure your API keys.");return new Sy({apiKey:i})},E_=async(i,t="veo-3.1-fast-generate-preview")=>await Ks().models.generateVideos({model:t,prompt:i,config:{numberOfVideos:1,resolution:"720p",aspectRatio:"16:9"}}),T_=async(i,t,l="veo-3.1-fast-generate-preview")=>{const a=Ks(),r=t.substring(t.indexOf(",")+1);return await a.models.generateVideos({model:l,prompt:i,image:{imageBytes:r,mimeType:"image/jpeg"},config:{numberOfVideos:1,resolution:"720p",aspectRatio:"16:9"}})},x_=async i=>{const t=Ks();let l=i;for(;!l.done;)await new Promise(a=>setTimeout(a,1e4)),l=await t.operations.getVideosOperation({operation:l});if(l.error)throw new Error(l.error.message);return l},S_={adventure:["Every choice must push the party deeper into unexplored terrain, curiosities, or discoveries.","Reference landmarks, relics, clues, or vistas that reward exploration.","Provide one bold expedition, one careful scouting/surveying action, and one creative environmental interaction."],combat:["Each choice must involve an explicit opponent, threat, or battlefield obstacle.","Use combat verbs (strike, parry, unleash, counter, flank, shield, detonate) and mention weapons, powers, or tactics.","Choice 1 = aggressive power move, Choice 2 = defensive or tactical repositioning, Choice 3 = special technique, combo, or environmental exploitation."],mystery:["All choices must revolve around uncovering truth via clues, evidence, interrogation, or deduction.","Reference suspects, contradictions, artifacts, riddles, or forensic techniques.","Ensure at least one choice analyses clues, one questions someone, and one inspects a suspicious location/object."],stealth:["Keep every choice quiet, unseen, and preciseemphasize shadows, disguises, and misdirection.","Mention hiding spots, silent takedowns, disabling alarms, or slipping past sentries.","Provide one evasive route, one surgical silent action, and one clever distraction or sabotage."],social:["All choices must be conversational maneuvers: persuasion, intimidation, charm, negotiation, or emotional appeals.","Explicitly mention tone, body language, or rhetorical strategy.","Include options that sway allies, defuse hostility, or forge alliances."],survival:["Center every choice on enduring the environment: supplies, shelter, health, or weather.","Reference specific resources (water, rations, tools, fire, medicine) and natural hazards.","Provide one choice securing resources, one reinforcing safety, and one high-risk gamble for long-term survival."],horror:["Keep the tone tense and fearfulmention lurking horrors, whispers, corrupted environments, or sanity slipping.","Choices should involve desperate escape, risky confrontation of the terror, or coping with dread.","Use anxious verbs (bolt, barricade, banish, pray, steady breathing) and highlight consequences of failure."],romance:["All choices must revolve around emotional connection, vulnerability, or relationship momentum.","Describe gestures, confessions, support, or shared memories; mention feelings explicitly.","Offer one bold romantic move, one tender reassuring act, and one cautious but heartfelt step."]},w_=i=>{if(!i)return"";const t=S_[i.id]??["Ensure each choice clearly embodies the described narrative type and would satisfy fans of that genre."];return`
CRITICAL ${i.name.toUpperCase()} ALIGNMENT:
- The entire response must feel like ${i.description}.
${t.map(l=>`- ${l}`).join(`
`)}
`},Pc=async(i,t,l)=>{const a=Ks(),r=(l==null?void 0:l.temperature)??.8,c=(l==null?void 0:l.antiPatterns)??[],m=(l==null?void 0:l.progressionHints)??[],g=(l==null?void 0:l.recentChoiceTypes)??[],y=(l==null?void 0:l.storyPhase)??"ongoing",h=l==null?void 0:l.narrativeType;let v="";c.length>0&&(v=`
 DO NOT REPEAT OR USE SIMILAR WORDING TO THESE (already generated/used):
${c.map(M=>`- ${M}`).join(`
`)}

CRITICAL: You MUST generate choices that are COMPLETELY DIFFERENT from the above list.
Do NOT use similar verbs, actions, or sentence structures as shown above.
Be creative and think of entirely new approaches that haven't been suggested yet.
`);let x="";if(g.length>0){const M=new Set(g);M.size<=2&&(x=`
Recent choices have been mostly: ${Array.from(M).join(", ")}. 
IMPORTANT: Provide MORE VARIETY - include different action types!
`)}let S="";m.length>0&&(S=`
Story Progression Guidance (Story Phase: ${y}):
${m.map(M=>`- ${M}`).join(`
`)}
`);let b="";if(h){const M=h.enhancementHints.choiceGeneration;b=`
 NARRATIVE TYPE: ${h.name.toUpperCase()} - ${h.description}
Guidance for this narrative type:
${M.map(B=>`- ${B}`).join(`
`)}
`}const A=w_(h),G=[{text:`
    You are a game designer creating exciting action choices for a video game adventure. Based on the current story, suggest three dynamic and ACTION-ORIENTED choices.

    Story Context: "${i}"

    If a reference frame is provided, align the choices with the details in that scene (characters, environment, objects, mood).
    ${b}${A}${v}${x}${S}
    CRITICAL REQUIREMENTS for each choice:
    
    1. DIVERSITY - Each choice MUST represent a DIFFERENT approach:
       - Choice 1: BOLD/DIRECT (combat, confrontation, decisive action)
       - Choice 2: CAUTIOUS/TACTICAL (stealth, planning, careful approach)
       - Choice 3: CREATIVE/EXPLORATORY (investigation, discovery, unconventional solution)
    
    2. ACTION VERBS - Use powerful, specific verbs:
        sprint, investigate, climb, leap, discover, confront, strike, dodge, summon, examine
        go, look, try, think, consider, wonder
    
    3. STORY ADVANCEMENT - Each choice MUST move the story forward:
        Introduce new locations, challenges, or discoveries
        Change the situation significantly
        Circular actions (go back, wait, stay, return to start)
        Vague or passive actions
    
    4. SPECIFICITY - Be concrete and vivid:
        "Sprint toward the glowing portal before it closes"
        "Go somewhere"
    
    5. CONSEQUENCES - Each choice should imply different outcomes:
       - Different risks, rewards, and story paths
       - Make players genuinely curious what happens next
    
    6. LENGTH & STRUCTURE VARIETY - VARY the length and structure:
       - One choice should be SHORT (4-6 words): "Charge through the dark gate"
       - One choice should be MEDIUM (7-9 words): "Carefully investigate the glowing runes for hidden clues"
       - One choice should be DETAILED (10-12 words): "Sneak through the shadows to spy on the enemy camp below"
       - Use different sentence structures (imperative, compound, descriptive)
    
    Good examples (note the DIFFERENT lengths):
    - "Charge through the gate" (BOLD, 4 words - SHORT)
    - "Sneak through shadows to spy on the enemy camp" (CAUTIOUS, 9 words - MEDIUM)
    - "Investigate the mysterious glowing runes carved into the ancient wall" (CREATIVE, 11 words - DETAILED)
    
    Bad examples:
    - "Look around the area" (too vague, no story advancement)
    - "Go back to safety" (circular, retreating)
    - "Think about what to do next" (passive, no action)
    - "Try something" (not specific)
    - All three choices being 6-7 words each (lack of length variety)
    
    Return ONLY a JSON array of 3 distinctly different, action-packed choices.
  `}];if(t){const M=t.indexOf(","),B=M>=0?t.slice(M+1):t;G.push({inlineData:{data:B,mimeType:"image/jpeg"}})}try{const M=(l==null?void 0:l.llmModel)??Ql,B=await a.models.generateContent({model:M,contents:[{role:"user",parts:G}],config:{responseMimeType:"application/json",responseSchema:{type:xn.ARRAY,items:{type:xn.STRING,description:"A dynamic, action-oriented choice for the character."}},temperature:r}});let V;if(B.text&&typeof B.text=="string")V=B.text;else if(B.candidates&&Array.isArray(B.candidates)&&B.candidates.length>0){const Q=B.candidates[0];if(Q.content&&Q.content.parts&&Q.content.parts.length>0){const j=Q.content.parts[0].text;if(j&&typeof j=="string")V=j;else throw new Error("No text in candidate parts")}else throw new Error("No content in candidate")}else throw new Error("Unexpected response format");const $=JSON.parse(V);if(Array.isArray($)&&$.every(Q=>typeof Q=="string"))return $.slice(0,3);throw new Error("Invalid format for choices.")}catch(M){return console.error("Failed to generate choices, providing fallback options.",M),["Sprint forward to explore the unknown path","Carefully investigate the mysterious surroundings","Leap into action and face the challenge ahead"]}},Bc="https://api.dev.runwayml.com/v1",A_=5e3,wg=120;async function __(i,t,l="runway-gen-3-alpha"){const a=ht("RUNWAY_API_KEY");if(!a)throw new Error("RUNWAY_API_KEY is not set. Please configure your API keys.");const r=l==="runway-gen-4-turbo"?"gen4_aleph":"gen3a_turbo",c="gen4/video",m={task:{taskType:r,options:{text_prompt:i,seed:Math.floor(Math.random()*1e6),seconds:5,width:1280,height:720}}};t&&console.warn("Runway image-to-video requires image URL upload. Currently using text-to-video only."),console.log(" Runway API Request:",{endpoint:`${Bc}/${c}`,taskType:r,body:m});const g=await fetch(`${Bc}/${c}`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:`Bearer ${a}`,"X-Runway-Version":"2024-11-06"},body:JSON.stringify(m)});if(console.log(" Runway Response Status:",g.status),!g.ok){const h=await g.text();let v={};try{v=JSON.parse(h)}catch{v={message:h}}throw console.error(" Runway API Error:",v),new Error(`Runway API error (${g.status}): ${v.message||v.error||g.statusText}
Details: ${JSON.stringify(v,null,2)}`)}const y=await g.json();return console.log(" Runway Task Created:",y.id),y}async function C_(i){const t=ht("RUNWAY_API_KEY");if(!t)throw new Error("RUNWAY_API_KEY is not set. Please configure your API keys.");let l=0,a=i;for(console.log(" Polling Runway task:",a.id);l<wg;){if(a.status==="SUCCEEDED")return console.log(" Runway task succeeded!"),a;if(a.status==="FAILED"){const m=a.failure||a.failureCode||"Unknown error";throw console.error(" Runway task failed:",m),new Error(`Runway video generation failed: ${m}`)}await new Promise(m=>setTimeout(m,A_));const r=`${Bc}/tasks/${a.id}`;console.log(` Polling (attempt ${l+1}/${wg}):`,r);const c=await fetch(r,{method:"GET",headers:{Authorization:`Bearer ${t}`,"X-Runway-Version":"2024-11-06",Accept:"application/json"}});if(!c.ok)throw console.error(" Poll failed:",c.status,c.statusText),new Error(`Failed to poll Runway task: ${c.status} ${c.statusText}`);a=await c.json(),a.progress!==void 0&&console.log(` Progress: ${Math.round(a.progress*100)}%`),l++}throw new Error("Runway video generation timed out after 10 minutes")}async function b_(i){const t=await fetch(i);if(!t.ok)throw new Error(`Failed to fetch Runway video: ${t.statusText}`);return await t.blob()}const wy="https://api.stability.ai/v2alpha/generation/image-to-video",R_=1e4,N_=60;function M_(i){return i.includes(",")?i.split(",")[1]:i}async function I_(i,t=127){const l=M_(i),a=new FormData;a.append("image",l),a.append("cfg_scale","1.8"),a.append("motion_bucket_id",t.toString()),a.append("seed",Math.floor(Math.random()*1e6).toString());const r=ht("STABILITY_API_KEY");if(!r)throw new Error("STABILITY_API_KEY is not set. Please configure your API keys.");const c=await fetch(wy,{method:"POST",headers:{accept:"application/json",authorization:`Bearer ${r}`},body:a});if(!c.ok){const g=await c.json().catch(()=>({}));throw new Error(`Stability AI error: ${c.status} - ${g.message||g.name||c.statusText}`)}return{generationId:(await c.json()).id}}async function D_(i){const t=ht("STABILITY_API_KEY");if(!t)throw new Error("STABILITY_API_KEY is not set. Please configure your API keys.");let l=0;for(;l<N_;){await new Promise(c=>setTimeout(c,R_));const a=await fetch(`${wy}/result/${i}`,{method:"GET",headers:{accept:"video/*",authorization:`Bearer ${t}`}});if(a.status===202){l++;continue}if(a.ok)return await a.blob();if(a.status===404)throw new Error("Stability AI generation not found");const r=await a.json().catch(()=>({}));throw new Error(`Stability AI error: ${a.status} - ${r.message||a.statusText}`)}throw new Error("Stability AI video generation timed out after 10 minutes")}async function U_(i,t=127){const{generationId:l}=await I_(i,t);return await D_(l)}const k_="https://corsproxy.io/?",Is="https://api.replicate.com/v1",vc=2e3,vs=180;function $l(i){return`${k_}${encodeURIComponent(i)}`}const L_="c846a69991daf4c0e5d016514849d14ee5b2e6846ce6b9d6f21369e564cfe51e",G_="wan-video/wan-2.5-i2v",P_="wan-video/wan-2.5-i2v-fast",B_="google/veo-3.1",q_="google/veo-3.1-fast",V_="google/veo-3",O_="google/veo-3-fast";function Ag(i){if(typeof i=="number")return i;const t=i.match(/^(\d+)/);return t?parseInt(t[1],10):5}function H_(i){switch(i){case"replicate-wan-2.5-i2v":return{model:G_,buildInput:(t,l)=>({image:t,prompt:l.prompt||"",duration:Ag(l.duration||"5s"),resolution:"720p",...l.seed!==void 0&&{seed:l.seed}}),defaultOptions:{duration:"5s",resolution:"720p"}};case"replicate-wan-2.5-i2v-fast":return{model:P_,buildInput:(t,l)=>({image:t,prompt:l.prompt||"",duration:Ag(l.duration||"5s"),resolution:"720p",...l.seed!==void 0&&{seed:l.seed}}),defaultOptions:{duration:"5s",resolution:"720p"}};case"replicate-veo-3.1":return{model:B_,buildInput:(t,l)=>({prompt:l.prompt||"",image:t,...l.seed!==void 0&&{seed:l.seed}}),defaultOptions:{}};case"replicate-veo-3.1-fast":return{model:q_,buildInput:(t,l)=>({prompt:l.prompt||"",image:t,...l.seed!==void 0&&{seed:l.seed}}),defaultOptions:{}};case"replicate-veo-3":return{model:V_,buildInput:(t,l)=>({prompt:l.prompt||"",image:t,...l.seed!==void 0&&{seed:l.seed}}),defaultOptions:{}};case"replicate-veo-3-fast":return{model:O_,buildInput:(t,l)=>({prompt:l.prompt||"",image:t,...l.seed!==void 0&&{seed:l.seed}}),defaultOptions:{}};default:throw new Error(`Unknown Replicate model: ${i}`)}}async function Ay(i,t="replicate-svd",l={}){const a=ht("REPLICATE_API_KEY");if(!a)throw new Error("REPLICATE_API_KEY is not set. Please configure your API keys.");const r=H_(t),c={...r.defaultOptions,...l};let m,g;if(r.model)m=`${Is}/models/${r.model}/predictions`,g={input:r.buildInput(i,c)};else if(r.version)m=`${Is}/predictions`,g={version:r.version,input:r.buildInput(i,c)};else throw new Error(`Model configuration for ${t} must specify either 'model' or 'version'`);console.log(" Replicate API Request:",{endpoint:m,model:t,modelPath:r.model||`version: ${r.version}`,options:c});const y=$l(m),h=await fetch(y,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Token ${a}`},body:JSON.stringify(g)});if(console.log(" Replicate Response Status:",h.status),!h.ok){const x=await h.text();let S={};try{S=JSON.parse(x)}catch{S={message:x}}throw console.error(" Replicate API Error:",S),new Error(`Replicate API error (${h.status}): ${S.detail||S.message||h.statusText}`)}const v=await h.json();return console.log(" Replicate Prediction Created:",v.id),v}async function Wc(i){var c;const t=ht("REPLICATE_API_KEY");if(!t)throw console.error(" [DEBUG] REPLICATE_API_KEY not configured for polling"),new Error("REPLICATE_API_KEY is not set. Please configure your API keys.");let l=0;const a=Date.now();for(console.log(" [DEBUG] Starting polling for Replicate prediction:",i),console.log(" [DEBUG] Max attempts:",vs,"Poll interval:",vc+"ms");l<vs;){l>0&&(console.log(` [DEBUG] Waiting ${vc}ms before next poll attempt...`),await new Promise(v=>setTimeout(v,vc)));const m=Math.round((Date.now()-a)/1e3);console.log(` [DEBUG] Poll attempt ${l+1}/${vs} (elapsed: ${m}s)`);const g=$l(`${Is}/predictions/${i}`),y=await fetch(g,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Token ${t}`}});if(console.log(` [DEBUG] Poll response status: ${y.status}`),!y.ok){const v=await y.text();throw console.error(" [DEBUG] Poll request failed:",y.status,v),new Error(`Failed to poll Replicate prediction: ${y.status} ${y.statusText}`)}const h=await y.json();if(console.log(` [DEBUG] Prediction status: ${h.status}`),h.status!=="starting"&&h.status!=="processing"&&console.log(" [DEBUG] Prediction details:",{status:h.status,error:h.error,hasOutput:!!h.output,metrics:h.metrics}),h.status==="succeeded"){const v=Math.round((Date.now()-a)/1e3);return console.log(" [DEBUG] Replicate prediction succeeded!"),console.log(` [DEBUG] Total time: ${v}s`),(c=h.metrics)!=null&&c.predict_time&&console.log(` [DEBUG] Prediction time: ${h.metrics.predict_time.toFixed(2)}s`),h}if(h.status==="failed"||h.status==="canceled"){const v=h.error||"Unknown error";throw console.error(" [DEBUG] Replicate prediction failed:",v),console.error(" [DEBUG] Final prediction state:",h),new Error(`Replicate generation failed: ${v}`)}l++}const r=Math.round((Date.now()-a)/1e3);throw console.error(` [DEBUG] Replicate polling timed out after ${vs} attempts (${r}s)`),new Error(`Replicate generation timed out after ${r}s`)}async function jc(i,t="replicate-svd",l={}){const a=await Ay(i,t,l),r=await Wc(a.id);let c;if(typeof r.output=="string"?c=r.output:Array.isArray(r.output)&&r.output.length>0&&(c=r.output[0]),!c)throw new Error("Replicate prediction succeeded but returned no video URL");return console.log(" Video URL:",c),c}async function ed(i){const t=$l(i),l=await fetch(t);if(!l.ok)throw new Error(`Failed to fetch Replicate video: ${l.statusText}`);return await l.blob()}async function qc(i){const t=ht("REPLICATE_API_KEY");if(!t)throw console.error(" REPLICATE_API_KEY not configured"),new Error("REPLICATE_API_KEY is not set. Please configure your API keys.");console.log(" [DEBUG] Starting FLUX image generation..."),console.log(" [DEBUG] Prompt:",i.substring(0,100)+(i.length>100?"...":""));const l={version:L_,input:{prompt:i,go_fast:!0,num_outputs:1,aspect_ratio:"16:9",output_format:"png",output_quality:80}};console.log(" [DEBUG] Sending request to Replicate API...");const a=$l(`${Is}/predictions`),r=await fetch(a,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Token ${t}`},body:JSON.stringify(l)});if(console.log(" [DEBUG] Replicate API response status:",r.status),!r.ok){const S=await r.text();throw console.error(" [DEBUG] FLUX API error:",r.status,S),new Error(`FLUX image generation failed: ${r.status} ${S}`)}const c=await r.json();console.log(" [DEBUG] FLUX prediction created with ID:",c.id),console.log(" [DEBUG] Initial prediction status:",c.status);const m=await Wc(c.id);let g;if(typeof m.output=="string"?g=m.output:Array.isArray(m.output)&&m.output.length>0&&(g=m.output[0]),!g)throw console.error(" [DEBUG] FLUX generation succeeded but no image URL returned"),new Error("FLUX image generation succeeded but returned no image URL");console.log(" [DEBUG] FLUX image generated, URL:",g),console.log(" [DEBUG] Fetching FLUX image from URL...");const y=$l(g),h=await fetch(y);if(console.log(" [DEBUG] Image fetch response status:",h.status),!h.ok)throw console.error(" [DEBUG] Failed to fetch FLUX image:",h.statusText),new Error(`Failed to fetch FLUX image: ${h.statusText}`);const v=await h.blob();console.log(" [DEBUG] Image blob size:",v.size,"bytes"),console.log(" [DEBUG] Converting blob to base64 data URL...");const x=new FileReader;return new Promise((S,b)=>{x.onloadend=()=>{console.log(" [DEBUG] FLUX image generation completed successfully"),S(x.result)},x.onerror=A=>{console.error(" [DEBUG] FileReader error during base64 conversion:",A),b(A)},x.readAsDataURL(v)})}async function _y(i,t="replicate-svd",l={},a="flux-schnell"){console.log(` Starting text-to-video with Replicate (${a} + ${t})...`),console.log(` Generating initial image from text prompt with ${a}...`);let r;if(a==="gemini-imagen-3")try{const{generateGeminiImage:c}=await $i(async()=>{const{generateGeminiImage:m}=await import("./geminiImageService-CSqICi_Y.js");return{generateGeminiImage:m}},[]);r=await c(i,{aspectRatio:"16:9",style:"photographic",quality:"high"}),console.log(" Image generated with Gemini Imagen 3 (Nano Banana)")}catch(c){console.warn(" Gemini failed, falling back to FLUX...",c),r=await qc(i),console.log(" Image generated with FLUX Schnell (fallback)")}else try{r=await qc(i),console.log(" Image generated with FLUX Schnell")}catch(c){console.warn(" FLUX failed, trying Gemini...",c);try{const{generateGeminiImage:m,isGeminiAvailable:g}=await $i(async()=>{const{generateGeminiImage:y,isGeminiAvailable:h}=await import("./geminiImageService-CSqICi_Y.js");return{generateGeminiImage:y,isGeminiAvailable:h}},[]);if(g())r=await m(i,{aspectRatio:"16:9",style:"photographic",quality:"high"}),console.log(" Image generated with Gemini (fallback)");else throw new Error("Gemini not available")}catch(m){console.warn(" Gemini also failed, trying Stability AI...",m);try{const{generateStableImage:g}=await $i(async()=>{const{generateStableImage:y}=await import("./stableImageService-DOUDIGBV.js");return{generateStableImage:y}},[]);r=await g(i,{aspectRatio:"16:9",model:"core",negativePrompt:"blurry, low quality, distorted, ugly"}),console.log(" Image generated with Stability AI")}catch(g){console.warn(" Stability AI also failed, using placeholder...",g);const{generatePlaceholderImage:y}=await $i(async()=>{const{generatePlaceholderImage:h}=await import("./placeholderImageService-BqKMK1h6.js");return{generatePlaceholderImage:h}},[]);r=await y(i,{aspectRatio:"16:9",width:640,height:360}),console.log(" Placeholder image created as fallback")}}}return console.log(` Image ready, now animating with ${t}...`),await jc(r,t,l)}async function z_(i,t="flux-schnell"){if(t==="gemini-imagen-3"){const{generateGeminiImage:l}=await $i(async()=>{const{generateGeminiImage:a}=await import("./geminiImageService-CSqICi_Y.js");return{generateGeminiImage:a}},[]);return await l(i,{aspectRatio:"16:9",style:"photographic",quality:"high"})}else return await qc(i)}async function Cy(i,t="replicate-svd",l={}){const a=await jc(i,t,l);return await ed(a)}async function by(i,t="replicate-svd",l={},a="flux-schnell"){const r=await _y(i,t,l,a);return await ed(r)}const Y_=Object.freeze(Object.defineProperty({__proto__:null,createReplicatePrediction:Ay,fetchReplicateVideoBlob:ed,generateAndFetchReplicateVideo:Cy,generateAndFetchReplicateVideoFromText:by,generateImageForPreview:z_,generateReplicateVideo:jc,generateReplicateVideoFromText:_y,pollReplicatePrediction:Wc},Symbol.toStringTag,{value:"Module"}));function td(i){if(i.startsWith("veo-"))return"veo";if(i.startsWith("runway-"))return"runway";if(i.startsWith("stable-video"))return"stable-diffusion";if(i.startsWith("replicate-"))return"replicate";throw new Error(`Unknown model provider for: ${i}`)}async function F_(i){console.log(" [DEBUG] Starting video generation..."),console.log(" [DEBUG] Request:",{model:i.model,promptLength:i.prompt.length,hasImageData:!!i.imageData,imageModel:i.imageModel});const t=td(i.model);switch(console.log(" [DEBUG] Selected provider:",t),t){case"veo":return console.log(" [DEBUG] Routing to Veo service"),await J_(i);case"runway":return console.log(" [DEBUG] Routing to Runway service"),await K_(i);case"stable-diffusion":return console.log(" [DEBUG] Routing to Stable Diffusion service"),await $_(i);case"replicate":return console.log(" [DEBUG] Routing to Replicate service"),await X_(i);default:throw console.error(" [DEBUG] Unsupported provider:",t),new Error(`Unsupported provider: ${t}`)}}async function J_(i){var v,x,S,b;const{prompt:t,model:l,imageData:a}=i;console.log(" [DEBUG] Veo: Starting video generation"),console.log(" [DEBUG] Veo: Has image data:",!!a),console.log(" [DEBUG] Veo: Calling veoService.generateVideo...");const r=a?await T_(t,a,l):await E_(t,l);console.log(" [DEBUG] Veo: Initial operation created, name:",r.name),console.log(" [DEBUG] Veo: Starting polling for completion...");const c=await x_(r);console.log(" [DEBUG] Veo: Polling completed");const m=(b=(S=(x=(v=c.response)==null?void 0:v.generatedVideos)==null?void 0:x[0])==null?void 0:S.video)==null?void 0:b.uri;if(console.log(" [DEBUG] Veo: Video URI extracted:",!!m),!m)throw console.error(" [DEBUG] Veo: No video URI in final operation"),console.error(" [DEBUG] Veo: Final operation response:",c.response),new Error("Veo video generation failed to return a valid URI.");const g=ht("GEMINI_API_KEY");if(!g)throw console.error(" [DEBUG] Veo: GEMINI_API_KEY not configured"),new Error("GEMINI_API_KEY is not set. Please configure your API keys.");console.log(" [DEBUG] Veo: Fetching video blob from URI...");const y=await fetch(`${m}&key=${g}`);if(console.log(" [DEBUG] Veo: Video fetch response status:",y.status),!y.ok)throw console.error(" [DEBUG] Veo: Failed to fetch video:",y.statusText),new Error(`Failed to fetch Veo video: ${y.statusText}`);const h=await y.blob();return console.log(" [DEBUG] Veo: Video blob size:",h.size,"bytes"),console.log(" [DEBUG] Veo: Video generation completed"),{videoBlob:h,metadata:{model:l,duration:8,resolution:"720p"}}}async function K_(i){const{prompt:t,model:l,imageData:a}=i;console.log(" Generating Runway video...",{model:l,hasImage:!!a});const r=await __(t,a,l),c=await C_(r);let m;if(c.output&&c.output.length>0?m=c.output[0]:c.artifacts&&c.artifacts.length>0&&(m=c.artifacts[0].url||c.artifacts[0]),!m)throw console.error(" No video URL in completed task:",c),new Error("Runway video generation failed to return a video URL.");return console.log(" Fetching Runway video from:",m),{videoBlob:await b_(m),metadata:{model:l,duration:5,resolution:"720p"}}}async function $_(i){const{prompt:t,imageData:l}=i;console.log(" [DEBUG] Stable: Starting video generation"),console.log(" [DEBUG] Stable: Has image data:",!!l);let a=l;if(!a){console.log(" [DEBUG] Stable: No image provided - generating image from text prompt...");const{generateStableImage:c}=await $i(async()=>{const{generateStableImage:m}=await import("./stableImageService-DOUDIGBV.js");return{generateStableImage:m}},[]);console.log(" [DEBUG] Stable: Calling generateStableImage..."),a=await c(t,{aspectRatio:"16:9",model:"core",negativePrompt:"blurry, low quality, distorted, ugly"}),console.log(" [DEBUG] Stable: Image generated, now creating video...")}console.log(" [DEBUG] Stable: Calling stableVideoService.generateAndWaitStableVideo...");const r=await U_(a);return console.log(" [DEBUG] Stable: Video blob size:",r.size,"bytes"),console.log(" [DEBUG] Stable: Video generation completed"),{videoBlob:r,metadata:{model:i.model,duration:2,resolution:"576p"}}}async function X_(i){const{prompt:t,imageData:l,model:a,imageModel:r="flux-schnell"}=i;console.log(` [DEBUG] Replicate: Starting video generation with ${a}`),console.log(" [DEBUG] Replicate: Has image data:",!!l),console.log(" [DEBUG] Replicate: Image model:",r);let c;l?(console.log(` [DEBUG] Replicate: Using provided image for ${a}...`),console.log(" [DEBUG] Replicate: Calling generateAndFetchReplicateVideo..."),c=await Cy(l,a)):(console.log(` [DEBUG] Replicate: Using text-to-video workflow (${r} + ${a})...`),console.log(" [DEBUG] Replicate: Calling generateAndFetchReplicateVideoFromText..."),c=await by(t,a,{},r)),console.log(" [DEBUG] Replicate: Video blob size:",c.size,"bytes");const m=Q_();return console.log(" [DEBUG] Replicate: Model metadata:",m),console.log(" [DEBUG] Replicate: Video generation completed"),{videoBlob:c,metadata:{model:a,duration:m.duration,resolution:m.resolution}}}function Q_(i){return{duration:5,resolution:"720p"}}function Z_(i){switch(td(i)){case"veo":return!!ht("GEMINI_API_KEY");case"runway":return!!ht("RUNWAY_API_KEY");case"stable-diffusion":return!!ht("STABILITY_API_KEY");case"replicate":return!!ht("REPLICATE_API_KEY");default:return!1}}function W_(i,t){const l=td(i),a=t.message.toLowerCase();return a.includes("rate limit")||a.includes("429")?`${l} rate limit exceeded. Please wait a few minutes before trying again.`:a.includes("quota")||a.includes("insufficient")||a.includes("billing")?`${l} quota exceeded or billing issue. Please check your account at the provider's website.`:a.includes("unauthorized")||a.includes("401")||a.includes("api key")?`${l} API key is invalid or not set. Please configure your API key.`:`${l} error: ${t.message}`}const j_="VeoVisualNovelDB",Mt="videoSegments",wi="generationTasks",eC=3;let Es;const Sn=()=>new Promise((i,t)=>{if(Es)return i(Es);const l=indexedDB.open(j_,eC);l.onerror=()=>{console.error("Database error:",l.error),t("Error opening database.")},l.onsuccess=()=>{Es=l.result,i(Es)},l.onupgradeneeded=a=>{const r=a.target.result,c=a.target.transaction,m=a.oldVersion;if(r.objectStoreNames.contains(Mt)||r.createObjectStore(Mt,{keyPath:"id"}),r.objectStoreNames.contains(wi)||r.createObjectStore(wi,{keyPath:"id"}),m<3&&c){const g=c.objectStore(Mt),y=g.getAll();y.onsuccess=()=>{y.result.forEach(v=>{if(!v.generations&&v.videoBlob){const x=`gen-${Date.now()}-${Math.random().toString(36).substr(2,9)}`;v.generations=[{generationId:x,videoBlob:v.videoBlob,lastFrameDataUrl:v.lastFrameDataUrl,createdAt:Date.now(),model:void 0}],v.activeGenerationId=x,g.put(v)}})}}}}),Ji=i=>new Promise(async(t,l)=>{const m=(await Sn()).transaction(Mt,"readwrite").objectStore(Mt).put(i);m.onsuccess=()=>t(),m.onerror=()=>{console.error("Failed to save segment:",m.error),l(m.error)}}),Ki=()=>new Promise(async(i,t)=>{const c=(await Sn()).transaction(Mt,"readonly").objectStore(Mt).getAll();c.onsuccess=()=>{const m=c.result.sort((g,y)=>g.id-y.id);i(m)},c.onerror=()=>{console.error("Failed to load segments:",c.error),t(c.error)}}),Ec=()=>new Promise(async(i,t)=>{const c=(await Sn()).transaction(Mt,"readwrite").objectStore(Mt).clear();c.onsuccess=()=>i(),c.onerror=()=>{console.error("Failed to clear history:",c.error),t(c.error)}}),tC=i=>new Promise(async(t,l)=>{const m=(await Sn()).transaction(wi,"readwrite").objectStore(wi).put(i);m.onsuccess=()=>t(),m.onerror=()=>{console.error("Failed to save generation task:",m.error),l(m.error)}}),nC=i=>new Promise(async(t,l)=>{const m=(await Sn()).transaction(wi,"readwrite").objectStore(wi).delete(i);m.onsuccess=()=>t(),m.onerror=()=>{console.error("Failed to delete generation task:",m.error),l(m.error)}}),iC=()=>new Promise(async(i,t)=>{const c=(await Sn()).transaction(wi,"readonly").objectStore(wi).getAll();c.onsuccess=()=>{i(c.result.sort((m,g)=>m.createdAt-g.createdAt))},c.onerror=()=>{console.error("Failed to load generation tasks:",c.error),t(c.error)}}),oC=async(i,t,l,a)=>{const m=(await Sn()).transaction(Mt,"readwrite").objectStore(Mt);return new Promise((g,y)=>{const h=m.get(i);h.onsuccess=()=>{const v=h.result;if(!v){y(new Error(`Segment ${i} not found`));return}const x=`gen-${Date.now()}-${Math.random().toString(36).substr(2,9)}`;v.generations||(v.generations=[]),v.generations.push({generationId:x,videoBlob:t,lastFrameDataUrl:l,createdAt:Date.now(),model:a}),v.activeGenerationId=x,v.videoBlob=t,v.lastFrameDataUrl=l;const S=m.put(v);S.onsuccess=()=>g(x),S.onerror=()=>y(S.error)},h.onerror=()=>y(h.error)})},lC=async(i,t)=>{const r=(await Sn()).transaction(Mt,"readwrite").objectStore(Mt);return new Promise((c,m)=>{const g=r.get(i);g.onsuccess=()=>{var x;const y=g.result;if(!y){m(new Error(`Segment ${i} not found`));return}const h=(x=y.generations)==null?void 0:x.find(S=>S.generationId===t);if(!h){m(new Error(`Generation ${t} not found in segment ${i}`));return}y.activeGenerationId=t,y.videoBlob=h.videoBlob,y.lastFrameDataUrl=h.lastFrameDataUrl;const v=r.put(y);v.onsuccess=()=>c(),v.onerror=()=>m(v.error)},g.onerror=()=>m(g.error)})},aC=async(i,t)=>{const r=(await Sn()).transaction(Mt,"readwrite").objectStore(Mt);return new Promise((c,m)=>{const g=r.get(i);g.onsuccess=()=>{const y=g.result;if(!y){m(new Error(`Segment ${i} not found`));return}if(y.activeGenerationId===t){m(new Error("Cannot delete the active generation. Switch to another generation first."));return}y.generations&&(y.generations=y.generations.filter(v=>v.generationId!==t));const h=r.put(y);h.onsuccess=()=>c(),h.onerror=()=>m(h.error)},g.onerror=()=>m(g.error)})},sC=["queued","running"],rC=["failed","cancelled"],uC=null,cC="continuation",dC=()=>typeof crypto<"u"&&typeof crypto.randomUUID=="function"?crypto.randomUUID():`task-${Date.now().toString(36)}-${Math.random().toString(16).slice(2)}`,Ds=()=>Date.now(),fC=i=>i??cC,mC=i=>typeof i=="string"&&i.length>0?i:uC,hC=i=>sC.includes(i),pC=i=>rC.includes(i),gC=i=>({...i,status:"running",startedAt:i.startedAt??Ds()}),_g=(i,t,l)=>({...i,status:t,completedAt:Ds(),error:l}),Cg=(i,t)=>t.current.has(i),bg=(i,t)=>{t.current.has(i)&&t.current.delete(i)},yC=i=>{const{onTaskSuccess:t,onTaskError:l}=i,[a,r]=O.useState([]),c=O.useRef(null),m=O.useRef(new Set),g=O.useCallback(async _=>{await tC(_)},[]),y=O.useCallback(async _=>{await nC(_)},[]);O.useEffect(()=>{let _=!0;return(async()=>{try{const M=await iC();_&&M.length>0&&r(M)}catch(M){console.error("Failed to load generation tasks during bootstrap:",M)}})(),()=>{_=!1}},[]);const h=O.useCallback(async _=>{const G={id:dC(),segmentId:_.segmentId,prompt:_.prompt,model:_.model,imageData:mC(_.imageData),imageModel:_.imageModel,intent:fC(_.intent),status:"queued",createdAt:Ds()};return r(M=>[...M,G]),await g(G),G},[g]),v=O.useCallback(async _=>{const G=a.find(M=>M.id===_);if(!G)return!1;if(G.status==="running"){m.current.add(_);const M=_g(G,"cancelled");return r(B=>B.map(V=>V.id===_?M:V)),await g(M),!0}return G.status==="queued"?(r(M=>M.filter(B=>B.id!==_)),await y(_),!0):G.status==="failed"||G.status==="cancelled"?(r(M=>M.filter(B=>B.id!==_)),await y(_),!0):!1},[g,y,a]),x=O.useCallback(async _=>{const G=a.find(B=>B.id===_);if(!G||!pC(G.status))return!1;const M={...G,status:"queued",error:void 0,startedAt:void 0,completedAt:void 0,createdAt:Ds()};return r(B=>B.map(V=>V.id===_?M:V)),await g(M),!0},[g,a]),S=O.useCallback(async _=>{console.log(" [DEBUG] Queue: Starting task processing"),console.log(" [DEBUG] Queue: Task details:",{id:_.id,segmentId:_.segmentId,model:_.model,intent:_.intent,promptLength:_.prompt.length,hasImageData:!!_.imageData,imageModel:_.imageModel});try{console.log(" [DEBUG] Queue: Calling generateVideoUnified...");const G=Date.now(),M=await F_({prompt:_.prompt,model:_.model,imageData:_.imageData??void 0,imageModel:_.imageModel}),B=Math.round((Date.now()-G)/1e3);if(console.log(" [DEBUG] Queue: Video generation completed in",B,"seconds"),console.log(" [DEBUG] Queue: Response blob size:",M.videoBlob.size,"bytes"),Cg(_.id,m)){console.log(" [DEBUG] Queue: Task was cancelled, ignoring result"),bg(_.id,m),r(V=>V.filter($=>$.id!==_.id)),await y(_.id);return}console.log(" [DEBUG] Queue: Calling onTaskSuccess callback..."),await t(_,M),r(V=>V.filter($=>$.id!==_.id)),await y(_.id),console.log(" [DEBUG] Queue: Task completed successfully")}catch(G){if(console.log(" [DEBUG] Queue: Task failed with error:",G),Cg(_.id,m)){console.log(" [DEBUG] Queue: Task was cancelled, ignoring error"),bg(_.id,m),r(V=>V.filter($=>$.id!==_.id)),await y(_.id);return}const M=G instanceof Error?G:new Error(String(G));console.error(" [DEBUG] Queue: Normalized error:",M.message);const B=_g(_,"failed",M.message);r(V=>V.map($=>$.id===_.id?B:$)),await g(B),l&&(console.log(" [DEBUG] Queue: Calling onTaskError callback..."),await l(B,M)),console.log(" [DEBUG] Queue: Task marked as failed")}finally{console.log(" [DEBUG] Queue: Task processing finished, clearing active task"),c.current=null}},[l,t,g,y]);O.useEffect(()=>{var B;if(console.log(" [DEBUG] Queue: Effect triggered, checking for tasks to process"),console.log(" [DEBUG] Queue: Current tasks:",a.map(V=>({id:V.id,status:V.status}))),console.log(" [DEBUG] Queue: Active task:",((B=c.current)==null?void 0:B.id)||"none"),c.current){console.log(" [DEBUG] Queue: Active task already exists, skipping");return}const _=a.find(V=>V.status==="running");if(_){console.log(" [DEBUG] Queue: Found running task, setting as active:",_.id),c.current=_,S(_);return}const G=a.find(V=>V.status==="queued");if(!G){console.log(" [DEBUG] Queue: No queued tasks found");return}console.log(" [DEBUG] Queue: Found queued task, promoting to running:",G.id);const M=gC(G);c.current=M,r(V=>V.map($=>$.id===M.id?M:$)),g(M),S(M)},[g,S,a]);const b=O.useMemo(()=>a.find(_=>hC(_.status))??null,[a]),A=O.useMemo(()=>a.filter(_=>_.status==="queued"||_.status==="running").length,[a]);return{tasks:a,enqueueTask:h,cancelTask:v,retryTask:x,activeTask:b,pendingCount:A}},vC=()=>{console.log(" [DEBUG] PromptEnhancement: Getting Gemini API key...");const i=ht("GEMINI_API_KEY");if(!i)throw console.error(" [DEBUG] PromptEnhancement: Gemini API key not found"),new Error("Gemini API key not found. Please configure your API keys.");return console.log(" [DEBUG] PromptEnhancement: API key found, creating GoogleGenAI client..."),new Sy({apiKey:i})};function EC(i){if(!i)return"Create an exciting, dynamic adventure scene";const t=i.enhancementHints.initial;return`NARRATIVE FOCUS (${i.name.toUpperCase()}): ${t.slice(0,3).join(". ")}.`}async function Rg(i,t){var l,a,r;console.log(" [DEBUG] PromptEnhancement: Starting prompt enhancement"),console.log(" [DEBUG] PromptEnhancement: User prompt:",i.substring(0,100)+(i.length>100?"...":"")),console.log(" [DEBUG] PromptEnhancement: Context:",{isInitial:t==null?void 0:t.isInitial,hasNarrativeType:!!(t!=null&&t.narrativeType),narrativeTypeName:(l=t==null?void 0:t.narrativeType)==null?void 0:l.name});try{console.log(" [DEBUG] PromptEnhancement: Getting AI client...");const c=vC();console.log(" [DEBUG] PromptEnhancement: AI client created successfully");const m=EC(t==null?void 0:t.narrativeType);console.log(" [DEBUG] PromptEnhancement: Narrative guidance:",m);const g=t!=null&&t.isInitial?`You are a game scenario writer. Transform the user's input into an exciting, game-like video scene description.

${m}

REQUIREMENTS:
- Create a vivid main character with personality and appearance
- Make the character MOVE and DO interesting things (don't just stand there!)
- Add dynamic action aligned with the narrative type
- Include game aesthetics: vibrant colors, dramatic lighting, cinematic camera work
- Make it feel like a playable game or interactive adventure
- Add sensory details: sounds, atmosphere, movement
- Keep it under 200 characters but pack it with energy and detail
- Use present tense for immediacy
- Make it visual and cinematic
- Emphasize elements that fit the ${((a=t==null?void 0:t.narrativeType)==null?void 0:a.name)||"adventure"} narrative

Example transformations:
"A wizard in a forest"  "A determined young wizard with glowing staff sprints through an ancient mystical forest, dodging floating orbs of light as magical creatures scatter, dramatic sunset rays piercing through canopy, dynamic third-person camera tracking the action"

"A space explorer"  "A bold space explorer in sleek armor leaps across floating asteroids toward a mysterious glowing portal, rockets firing from boots, colorful nebula swirling in background, epic orchestral energy"

Now enhance this prompt: "${i}"`:`You are a game scenario writer. The story continues. Transform this choice into an exciting game-like video scene.

Previous context: ${(t==null?void 0:t.previousContext)||"Adventure in progress"}

${m}

REQUIREMENTS:
- Continue the adventure with the established character
- Show DYNAMIC MOVEMENT and exciting action
- Create a "wow" moment or interesting twist
- Maintain game aesthetics: vibrant, cinematic, energetic
- Make the character explore, discover, react, or overcome challenges
- Add environmental details and atmosphere
- Keep under 200 characters but make every word count
- Use present tense for immediacy
- Align with the ${((r=t==null?void 0:t.narrativeType)==null?void 0:r.name)||"adventure"} narrative type

Now enhance this next scene: "${i}"`;console.log(" [DEBUG] PromptEnhancement: System prompt length:",g.length),console.log(" [DEBUG] PromptEnhancement: Calling Gemini API...");const y=(t==null?void 0:t.llmModel)??Ql,h=await c.models.generateContent({model:y,contents:g,config:{temperature:.8,maxOutputTokens:150}});console.log(" [DEBUG] PromptEnhancement: API response received"),console.log(" [DEBUG] PromptEnhancement: Response structure:",JSON.stringify(h,null,2));let v;if(h.text&&typeof h.text=="string")console.log(" [DEBUG] PromptEnhancement: Found response.text"),v=h.text.trim();else if(h.candidates&&Array.isArray(h.candidates)&&h.candidates.length>0){console.log(" [DEBUG] PromptEnhancement: Using response.candidates");const x=h.candidates[0];if(x.content&&x.content.parts&&x.content.parts.length>0){const S=x.content.parts[0].text;if(S&&typeof S=="string")v=S.trim(),console.log(" [DEBUG] PromptEnhancement: Extracted text from candidate");else return console.warn(" [DEBUG] PromptEnhancement: No text in candidate parts"),i}else return console.warn(" [DEBUG] PromptEnhancement: No content in candidate"),i}else return console.warn(" [DEBUG] PromptEnhancement: Unexpected response format:",h),i;return!v||v.length<20?(console.warn(" [DEBUG] PromptEnhancement: Enhancement produced short output, using original:",v),i):(console.log(" [DEBUG] PromptEnhancement: Prompt enhanced successfully"),console.log(" [DEBUG] PromptEnhancement: Original:",i),console.log(" [DEBUG] PromptEnhancement: Enhanced:",v),v)}catch(c){return console.error(" [DEBUG] PromptEnhancement: Failed to enhance prompt:",c),console.error(" [DEBUG] PromptEnhancement: Error details:",c instanceof Error?c.message:String(c)),console.error(" [DEBUG] PromptEnhancement: Stack trace:",c instanceof Error?c.stack:"N/A"),i}}const TC=i=>new Promise((t,l)=>{const a=document.createElement("canvas");a.width=i.videoWidth,a.height=i.videoHeight;const r=a.getContext("2d");if(!r)return l(new Error("Failed to get canvas context."));i.currentTime=i.duration-.1;const c=()=>{r.drawImage(i,0,0,a.width,a.height);const m=a.toDataURL("image/jpeg",.9);i.removeEventListener("seeked",c),i.currentTime=0,t(m)};i.addEventListener("seeked",c,{once:!0})}),Ng=i=>new Promise((t,l)=>{const a=new FileReader;a.onloadend=()=>t(a.result),a.onerror=l,a.readAsDataURL(i)}),Mg=i=>{const t=i.split(";base64,"),l=t[0].split(":")[1],a=window.atob(t[1]),r=a.length,c=new Uint8Array(r);for(let m=0;m<r;++m)c[m]=a.charCodeAt(m);return new Blob([c],{type:l})};var Je;(function(i){i.LOAD="LOAD",i.EXEC="EXEC",i.WRITE_FILE="WRITE_FILE",i.READ_FILE="READ_FILE",i.DELETE_FILE="DELETE_FILE",i.RENAME="RENAME",i.CREATE_DIR="CREATE_DIR",i.LIST_DIR="LIST_DIR",i.DELETE_DIR="DELETE_DIR",i.ERROR="ERROR",i.DOWNLOAD="DOWNLOAD",i.PROGRESS="PROGRESS",i.LOG="LOG",i.MOUNT="MOUNT",i.UNMOUNT="UNMOUNT"})(Je||(Je={}));const xC=(()=>{let i=0;return()=>i++})(),SC=new Error("ffmpeg is not loaded, call `await ffmpeg.load()` first"),wC=new Error("called FFmpeg.terminate()");var Xt,Si,Yn,Xi,Qi,Hs,qt;class AC{constructor(){Ti(this,Xt,null);Ti(this,Si,{});Ti(this,Yn,{});Ti(this,Xi,[]);Ti(this,Qi,[]);Bt(this,"loaded",!1);Ti(this,Hs,()=>{_e(this,Xt)&&(_e(this,Xt).onmessage=({data:{id:t,type:l,data:a}})=>{switch(l){case Je.LOAD:this.loaded=!0,_e(this,Si)[t](a);break;case Je.MOUNT:case Je.UNMOUNT:case Je.EXEC:case Je.WRITE_FILE:case Je.READ_FILE:case Je.DELETE_FILE:case Je.RENAME:case Je.CREATE_DIR:case Je.LIST_DIR:case Je.DELETE_DIR:_e(this,Si)[t](a);break;case Je.LOG:_e(this,Xi).forEach(r=>r(a));break;case Je.PROGRESS:_e(this,Qi).forEach(r=>r(a));break;case Je.ERROR:_e(this,Yn)[t](a);break}delete _e(this,Si)[t],delete _e(this,Yn)[t]})});Ti(this,qt,({type:t,data:l},a=[],r)=>_e(this,Xt)?new Promise((c,m)=>{const g=xC();_e(this,Xt)&&_e(this,Xt).postMessage({id:g,type:t,data:l},a),_e(this,Si)[g]=c,_e(this,Yn)[g]=m,r==null||r.addEventListener("abort",()=>{m(new DOMException(`Message # ${g} was aborted`,"AbortError"))},{once:!0})}):Promise.reject(SC));Bt(this,"load",({classWorkerURL:t,...l}={},{signal:a}={})=>(_e(this,Xt)||(Ol(this,Xt,t?new Worker(new URL(t,import.meta.url),{type:"module"}):new Worker(new URL("/VeoStory/assets/worker-0l8QF2aX.js",import.meta.url),{type:"module"})),_e(this,Hs).call(this)),_e(this,qt).call(this,{type:Je.LOAD,data:l},void 0,a)));Bt(this,"exec",(t,l=-1,{signal:a}={})=>_e(this,qt).call(this,{type:Je.EXEC,data:{args:t,timeout:l}},void 0,a));Bt(this,"terminate",()=>{const t=Object.keys(_e(this,Yn));for(const l of t)_e(this,Yn)[l](wC),delete _e(this,Yn)[l],delete _e(this,Si)[l];_e(this,Xt)&&(_e(this,Xt).terminate(),Ol(this,Xt,null),this.loaded=!1)});Bt(this,"writeFile",(t,l,{signal:a}={})=>{const r=[];return l instanceof Uint8Array&&r.push(l.buffer),_e(this,qt).call(this,{type:Je.WRITE_FILE,data:{path:t,data:l}},r,a)});Bt(this,"mount",(t,l,a)=>{const r=[];return _e(this,qt).call(this,{type:Je.MOUNT,data:{fsType:t,options:l,mountPoint:a}},r)});Bt(this,"unmount",t=>{const l=[];return _e(this,qt).call(this,{type:Je.UNMOUNT,data:{mountPoint:t}},l)});Bt(this,"readFile",(t,l="binary",{signal:a}={})=>_e(this,qt).call(this,{type:Je.READ_FILE,data:{path:t,encoding:l}},void 0,a));Bt(this,"deleteFile",(t,{signal:l}={})=>_e(this,qt).call(this,{type:Je.DELETE_FILE,data:{path:t}},void 0,l));Bt(this,"rename",(t,l,{signal:a}={})=>_e(this,qt).call(this,{type:Je.RENAME,data:{oldPath:t,newPath:l}},void 0,a));Bt(this,"createDir",(t,{signal:l}={})=>_e(this,qt).call(this,{type:Je.CREATE_DIR,data:{path:t}},void 0,l));Bt(this,"listDir",(t,{signal:l}={})=>_e(this,qt).call(this,{type:Je.LIST_DIR,data:{path:t}},void 0,l));Bt(this,"deleteDir",(t,{signal:l}={})=>_e(this,qt).call(this,{type:Je.DELETE_DIR,data:{path:t}},void 0,l))}on(t,l){t==="log"?_e(this,Xi).push(l):t==="progress"&&_e(this,Qi).push(l)}off(t,l){t==="log"?Ol(this,Xi,_e(this,Xi).filter(a=>a!==l)):t==="progress"&&Ol(this,Qi,_e(this,Qi).filter(a=>a!==l))}}Xt=new WeakMap,Si=new WeakMap,Yn=new WeakMap,Xi=new WeakMap,Qi=new WeakMap,Hs=new WeakMap,qt=new WeakMap;const _C="/VeoStory/assets/ffmpeg-core-CI9Irx9p.js",CC="/VeoStory/assets/ffmpeg-core-CgUfceKH.wasm";let _s=null;const bC=()=>new Promise(async(i,t)=>{try{const l=new AC;l.on("log",({message:a})=>{console.log("[FFMPEG]",a)}),await l.load({coreURL:_C,wasmURL:CC}),i(l)}catch(l){console.error("Error during FFmpeg initialization:",l),_s=null,t(l)}}),Ry=()=>(_s||(_s=bC()),_s),Ny=i=>{switch(i){case"original":return null;case"720p":return"scale=1280:720";case"1080p":return"scale=1920:1080";case"1440p":return"scale=2560:1440";case"4k":return"scale=3840:2160";default:return null}},RC=async(i,t="original")=>{const l=await Ry(),a=[];for(let h=0;h<i.length;h++){const v=`input${h}.mp4`;a.push(v);const x=new Uint8Array(await i[h].arrayBuffer());await l.writeFile(v,x)}const r=a.map(h=>`file '${h}'`).join(`
`)+`
`;await l.writeFile("concat.txt",new TextEncoder().encode(r));let c=null;const m=Ny(t);if(m===null)try{if(await l.exec(["-y","-f","concat","-safe","0","-i","concat.txt","-c","copy","output.mp4"]),c=await l.readFile("output.mp4"),!c||c.length===0)throw new Error("Empty output after stream copy concat")}catch(h){console.warn("[FFMPEG] Concat with -c copy failed, falling back to re-encode:",h);const v=a.flatMap(A=>["-i",A]),S=`${a.map((A,_)=>`[${_}:v:0]`).join("")}concat=n=${a.length}:v=1:a=0[v]`,b=["-y",...v,"-filter_complex",S,"-map","[v]","-c:v","mpeg4","-r","30","-pix_fmt","yuv420p","output.mp4"];if(await l.exec(b),c=await l.readFile("output.mp4"),!c||c.length===0)throw new Error("Empty output after re-encode concat")}else{const h=a.flatMap(A=>["-i",A]),v=a.map((A,_)=>`[${_}:v:0]${m}[v${_}]`).join(";"),x=a.map((A,_)=>`[v${_}]`).join(""),S=`${v};${x}concat=n=${a.length}:v=1:a=0[v]`,b=["-y",...h,"-filter_complex",S,"-map","[v]","-c:v","mpeg4","-r","30","-pix_fmt","yuv420p","output.mp4"];if(await l.exec(b),c=await l.readFile("output.mp4"),!c||c.length===0)throw new Error("Empty output after re-encode with scaling")}for(const h of a)try{await l.deleteFile(h)}catch{}try{await l.deleteFile("concat.txt")}catch{}try{await l.deleteFile("output.mp4")}catch{}const g=new ArrayBuffer(c.byteLength);return new Uint8Array(g).set(c),new Blob([g],{type:"video/mp4"})},My=3,NC=1,Ig=My+NC,MC=.15,IC="0x38bdf8",DC="white",UC="0x1e293b@0.85";let Dg=!1;const kC=async i=>{if(!Dg)try{const a=await(await fetch("https://fonts.gstatic.com/s/roboto/v30/KFOmCnqEu92Fr1Me5WZLCzYlKw.ttf")).arrayBuffer();await i.writeFile("font.ttf",new Uint8Array(a)),Dg=!0,console.log("[FFMPEG] Font loaded successfully")}catch(t){throw console.error("[FFMPEG] Failed to load font:",t),new Error("Failed to load font for video overlays")}},LC=async(i,t="original")=>{const l=await Ry();await kC(l);const a=Ny(t),r=[];for(let h=0;h<i.length;h++){const v=i[h],x=`segment_${h}_input.mp4`,S=`segment_${h}_processed.mp4`,b=new Uint8Array(await v.videoBlob.arrayBuffer());if(await l.writeFile(x,b),v.choices&&v.choices.length>0&&v.selectedChoice)try{await GC(l,x,S,v.choices,v.selectedChoice,a);try{await l.readFile(S),r.push(S)}catch{console.warn(`Failed to read processed file for segment ${h}, using original`),r.push(x)}}catch(A){console.warn(`Failed to process segment ${h} with overlays:`,A),r.push(x)}else if(a)try{const A=["-y","-i",x,"-vf",a,"-c:v","mpeg4","-r","30","-pix_fmt","yuv420p",S];await l.exec(A),await l.readFile(S),r.push(S)}catch(A){console.warn(`Failed to scale segment ${h} without overlays:`,A),r.push(x)}else r.push(x)}const c=r.map(h=>`file '${h}'`).join(`
`)+`
`;await l.writeFile("concat.txt",new TextEncoder().encode(c));let m=null;try{if(await l.exec(["-y","-f","concat","-safe","0","-i","concat.txt","-c","copy","output.mp4"]),m=await l.readFile("output.mp4"),!m||m.length===0)throw new Error("Empty output after stream copy concat")}catch(h){console.warn("[FFMPEG] Concat with -c copy failed, falling back to re-encode:",h);const v=r.flatMap(A=>["-i",A]),S=`${r.map((A,_)=>`[${_}:v:0]`).join("")}concat=n=${r.length}:v=1:a=0[v]`,b=["-y",...v,"-filter_complex",S,"-map","[v]","-c:v","mpeg4","-r","30","-pix_fmt","yuv420p","output.mp4"];if(await l.exec(b),m=await l.readFile("output.mp4"),!m||m.length===0)throw new Error("Empty output after re-encode concat")}for(let h=0;h<i.length;h++){const v=`segment_${h}_input.mp4`,x=`segment_${h}_processed.mp4`;try{await l.deleteFile(v)}catch{}try{await l.deleteFile(x)}catch{}}try{await l.deleteFile("concat.txt")}catch{}try{await l.deleteFile("output.mp4")}catch{}const g=new ArrayBuffer(m.byteLength);return new Uint8Array(g).set(m),new Blob([g],{type:"video/mp4"})};async function GC(i,t,l,a,r,c=null){const m=Q=>Q.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(/:/g,"\\:").replace(/\n/g," ").replace(/\r/g,""),g=(Q,j=80)=>Q.length<=j?Q:Q.substring(0,j-3)+"...",y=a.indexOf(r);let h=`[0:v]tpad=stop_mode=clone:stop_duration=${Ig}[extended]`,v="extended";const x=Math.min(a.length,3),S=1280,b=720,A=.28,_=.12,G=.02,M=Math.floor(S*A),B=Math.floor(b*_),V=Math.floor(S*G);for(let Q=0;Q<a.length&&Q<3;Q++){const j=a[Q],W=g(j),me=m(W),te=Q===y,ge=x*M+(x+1)*V,he=Math.floor((S-ge)/2)+V+Q*(M+V),ve=Math.floor(b*.75),Ue=Q*MC,ke=Ig,k=`choice${Q}`;h+=`;[${v}]drawbox=x=${he}:y=${ve}:w=${M}:h=${B}:color=${UC}:t=fill:enable='between(t,${Ue},${ke})'[${k}_box]`;const X=he+Math.floor(M/2),Z=ve+Math.floor(B/2),ye=Math.floor(b*.025);if(h+=`;[${k}_box]drawtext=fontfile=font.ttf:text='${me}':fontsize=${ye}:fontcolor=${DC}:x=${X}-text_w/2:y=${Z}-text_h/2:enable='between(t,${Ue},${ke})'[${k}]`,te){const we=`${k}_highlight`;h+=`;[${k}]drawbox=x=${he}:y=${ve}:w=${M}:h=${B}:color=${IC}:t=4:enable='between(t,${My},${ke})'[${we}]`,v=we}else v=k}if(c){const Q="scaled";h+=`;[${v}]${c}[${Q}]`,v=Q}const $=["-y","-i",t,"-filter_complex",h,"-map",`[${v}]`,"-c:v","mpeg4","-r","30","-pix_fmt","yuv420p",l];await i.exec($)}const PC=(i,t=!0)=>{const l=O.useCallback(a=>{if(!t)return;const r=a.target;if(!(r.tagName==="INPUT"||r.tagName==="TEXTAREA"))for(const c of i){const m=a.key.toLowerCase()===c.key.toLowerCase(),g=!c.ctrl||a.ctrlKey||a.metaKey,y=!c.shift||a.shiftKey,h=!c.alt||a.altKey;if(m&&g&&y&&h){a.preventDefault(),c.action();break}}},[i,t]);O.useEffect(()=>{if(t)return window.addEventListener("keydown",l),()=>window.removeEventListener("keydown",l)},[l,t])},Ug=[{id:"none",name:"None",description:"No style applied",suffix:"",icon:""},{id:"realistic",name:"Realistic",description:"Photorealistic, lifelike rendering",suffix:", photorealistic style, high detail, cinematic lighting, professional cinematography, 8k quality",icon:""},{id:"cartoon",name:"Cartoon",description:"Animated cartoon style",suffix:", cartoon animation style, vibrant colors, smooth animation, Disney/Pixar quality",icon:""},{id:"anime",name:"Anime",description:"Japanese anime style",suffix:", anime style, detailed animation, Studio Ghibli aesthetic, expressive characters",icon:""},{id:"video-game",name:"Video Game",description:"Modern video game graphics",suffix:", modern video game graphics, 3D rendered, game engine quality, dynamic lighting",icon:""},{id:"retro-game",name:"Retro Game",description:"Pixel art and retro gaming style",suffix:", retro pixel art style, 16-bit graphics, nostalgic gaming aesthetic, limited color palette",icon:""},{id:"cyberpunk",name:"Cyberpunk",description:"Neon-lit futuristic cyberpunk",suffix:", cyberpunk style, neon lights, dark atmosphere, futuristic cityscape, blade runner aesthetic",icon:""},{id:"fantasy",name:"Fantasy",description:"Epic fantasy art style",suffix:", fantasy art style, magical atmosphere, epic scale, detailed environments, concept art quality",icon:""},{id:"film-noir",name:"Film Noir",description:"Classic black and white noir",suffix:", film noir style, black and white, dramatic shadows, 1940s aesthetic, moody lighting",icon:""},{id:"watercolor",name:"Watercolor",description:"Soft watercolor painting",suffix:", watercolor painting style, soft edges, artistic, hand-painted aesthetic, gentle colors",icon:""}],zo=[{id:"adventure",name:"Adventure",description:"Exploration, discovery, and journey-focused storytelling",icon:"",enhancementHints:{initial:["Emphasize exploration and discovery","Create a sense of wonder and excitement","Focus on journey and new experiences","Include mysterious locations to explore","Add elements of the unknown and discovery"],continuation:["Continue the journey with new discoveries","Reveal hidden secrets and unexplored areas","Create moments of awe and wonder","Progress the adventure forward","Introduce new mysteries to uncover"],choiceGeneration:["Include exploration and discovery options","Offer paths to new locations or secrets","Emphasize curiosity and investigation","Create choices that expand the world","Balance risk and reward in exploration"]}},{id:"combat",name:"Combat",description:"Action-oriented with enemies, battles, and tactical decisions",icon:"",enhancementHints:{initial:["Establish clear threats and enemies","Create action-oriented scenarios","Include combat-ready characters","Set up tactical situations","Emphasize strength and combat prowess"],continuation:["Escalate combat intensity","Introduce new enemies or challenges","Create tactical combat scenarios","Show consequences of battle","Include victory or defeat moments"],choiceGeneration:["Offer aggressive and defensive options","Include tactical combat choices","Provide different fighting approaches","Balance direct and strategic combat","Create meaningful combat decisions"]}},{id:"mystery",name:"Mystery",description:"Investigation, puzzle-solving, and uncovering truth",icon:"",enhancementHints:{initial:["Introduce mysterious elements or questions","Create intrigue and curiosity","Set up puzzles or enigmas to solve","Include clues and evidence","Establish a mystery to unravel"],continuation:["Reveal new clues and evidence","Deepen the mystery with complications",'Create "aha" moments of discovery',"Progress investigation forward","Add layers to the puzzle"],choiceGeneration:["Include investigative options","Offer analytical and deductive choices","Provide clue-gathering opportunities","Create puzzle-solving decisions","Balance observation and action"]}},{id:"stealth",name:"Stealth",description:"Sneaking, tactical avoidance, and careful planning",icon:"",enhancementHints:{initial:["Create scenarios requiring caution","Establish threats to avoid","Set up stealth opportunities","Emphasize careful observation","Include hiding places and shadows"],continuation:["Increase tension and risk of detection","Create close calls and narrow escapes","Reward careful planning","Show consequences of being detected","Progress stealthily through challenges"],choiceGeneration:["Offer sneaky and cautious options","Include avoidance and evasion choices","Provide tactical planning opportunities","Create risk/reward stealth decisions","Balance hiding and moving forward"]}},{id:"social",name:"Social",description:"Dialogue, diplomacy, persuasion, and relationships",icon:"",enhancementHints:{initial:["Introduce interesting characters","Create social situations and interactions","Establish relationships and dynamics","Set up dialogue opportunities","Emphasize communication and charisma"],continuation:["Deepen character relationships","Create meaningful conversations","Show consequences of social choices","Develop alliances or conflicts","Progress through dialogue and persuasion"],choiceGeneration:["Include dialogue and persuasion options","Offer different social approaches","Provide diplomatic solutions","Create relationship-building choices","Balance honesty and manipulation"]}},{id:"survival",name:"Survival",description:"Resource management, environmental challenges, and endurance",icon:"",enhancementHints:{initial:["Establish harsh or challenging environment","Introduce resource scarcity","Create survival challenges","Emphasize adaptation and resilience","Set up environmental threats"],continuation:["Escalate survival difficulties","Create resource management dilemmas","Show effects of harsh conditions","Introduce new environmental threats","Test endurance and adaptability"],choiceGeneration:["Include resource management options","Offer survival-focused choices","Provide risk vs. safety decisions","Create adaptation opportunities","Balance immediate needs with long-term survival"]}},{id:"horror",name:"Horror",description:"Fear, tension, suspense, and terrifying situations",icon:"",enhancementHints:{initial:["Create unsettling atmosphere","Introduce elements of dread","Establish sense of danger","Use dark and ominous visuals","Build tension and fear"],continuation:["Escalate fear and tension","Create jump scares or reveals","Deepen sense of dread","Show horrifying consequences","Build toward terror"],choiceGeneration:["Include escape and evasion options","Offer desperate survival choices","Provide fight or flight decisions","Create high-tension moments","Balance fear with hope"]}},{id:"romance",name:"Romance",description:"Emotional connections, relationships, and intimate moments",icon:"",enhancementHints:{initial:["Introduce potential romantic interests","Create emotionally charged situations","Establish chemistry and connection","Set romantic atmosphere","Emphasize feelings and emotions"],continuation:["Deepen romantic connections","Create intimate moments","Show relationship development","Build emotional tension","Progress romantic storylines"],choiceGeneration:["Include emotionally expressive options","Offer romantic gesture choices","Provide relationship-building decisions","Create meaningful emotional moments","Balance vulnerability and confidence"]}}];function Us(i){return zo.find(t=>t.id===i)}function Iy(){return zo[0]}const Dy=150,kg=30,BC=50,qC=20,VC=["tea","tea shop","barista","caf","coffee shop"],Tc=[],Uy=[],ky=[],ks=[{value:{descriptor:"Determined apprentice",role:"mage"},weight:1},{value:{descriptor:"Rogue battle-mage",role:"spellblade"},weight:1},{value:{descriptor:"Reformed necromancer",role:"soul weaver"},weight:1},{value:{descriptor:"Exiled elven",role:"shadowdancer"},weight:1},{value:{descriptor:"Cursed royal",role:"heir seeking redemption"},weight:1},{value:{descriptor:"Wandering bard",role:"keeper of forgotten songs"},weight:1},{value:{descriptor:"Young druid",role:"guardian of ancient groves"},weight:1},{value:{descriptor:"Disgraced knight",role:"oath breaker"},weight:1},{value:{descriptor:"Quick-thinking mechanic",role:"starship engineer"},weight:1},{value:{descriptor:"Charismatic captain",role:"skyship pilot"},weight:1},{value:{descriptor:"Rogue AI specialist",role:"digital ghost"},weight:1},{value:{descriptor:"Augmented mercenary",role:"cyber ronin"},weight:1},{value:{descriptor:"First-contact",role:"xenolinguist"},weight:1},{value:{descriptor:"Rebel navigator",role:"void runner"},weight:1},{value:{descriptor:"Stranded colonist",role:"terraform specialist"},weight:1},{value:{descriptor:"Synthetic being",role:"seeking humanity"},weight:1},{value:{descriptor:"Seasoned ranger",role:"scout"},weight:1},{value:{descriptor:"Wary treasure hunter",role:"archaeologist"},weight:1},{value:{descriptor:"Daring cartographer",role:"explorer of uncharted lands"},weight:1},{value:{descriptor:"Retired adventurer",role:"reluctant hero"},weight:1},{value:{descriptor:"Young scholar",role:"myth chaser"},weight:1},{value:{descriptor:"Cursed sailor",role:"seeking safe harbor"},weight:1},{value:{descriptor:"Sharp-eyed detective",role:"truth seeker"},weight:1},{value:{descriptor:"Undercover agent",role:"infiltrator"},weight:1},{value:{descriptor:"Psychic investigator",role:"mind reader"},weight:1},{value:{descriptor:"Disbarred lawyer",role:"vigilante for justice"},weight:1},{value:{descriptor:"Haunted journalist",role:"conspiracy tracker"},weight:1},{value:{descriptor:"Lone survivor",role:"wasteland courier"},weight:1},{value:{descriptor:"Resourceful scavenger",role:"ruins expert"},weight:1},{value:{descriptor:"Plague doctor",role:"last healer"},weight:1},{value:{descriptor:"Convoy guardian",role:"road warrior"},weight:1},{value:{descriptor:"Soft-spoken monk",role:"spirit medium"},weight:1},{value:{descriptor:"Blind oracle",role:"seer of futures"},weight:1},{value:{descriptor:"Demon hunter",role:"exorcist"},weight:1},{value:{descriptor:"Celestial scholar",role:"star reader"},weight:1},{value:{descriptor:"Dream walker",role:"nightmare hunter"},weight:1},{value:{descriptor:"Fearless stowaway",role:"smuggler"},weight:1},{value:{descriptor:"Master thief",role:"vault breaker"},weight:1},{value:{descriptor:"Double agent",role:"playing both sides"},weight:1},{value:{descriptor:"Silent assassin",role:"blade in the dark"},weight:1},{value:{descriptor:"Curious tinkerer",role:"inventor"},weight:1},{value:{descriptor:"Observant librarian",role:"lore keeper"},weight:1},{value:{descriptor:"Mad alchemist",role:"potion brewer"},weight:1},{value:{descriptor:"Rune carver",role:"enchantment specialist"},weight:1},{value:{descriptor:"Clockwork engineer",role:"automaton builder"},weight:1},{value:{descriptor:"Young diplomat",role:"envoy"},weight:1},{value:{descriptor:"Reluctant leader",role:"chosen one"},weight:1},{value:{descriptor:"Charismatic rebel",role:"revolution starter"},weight:1},{value:{descriptor:"Wise mentor",role:"training the next generation"},weight:1},{value:{descriptor:"Courageous cadet",role:"dragon rider"},weight:1},{value:{descriptor:"Time-displaced",role:"temporal refugee"},weight:1},{value:{descriptor:"Shape-shifting",role:"identity thief"},weight:1},{value:{descriptor:"Immortal wanderer",role:"witness to ages"},weight:1},{value:{descriptor:"Sentient plant",role:"forest ambassador"},weight:1},{value:{descriptor:"Ghost-bound",role:"spirit detective"},weight:1},{value:{descriptor:"Living weapon",role:"seeking peace"},weight:1}],Ls=[{value:"secure a coded warning before time runs out",weight:1},{value:"defuse an ancient bomb counting down to zero",weight:1},{value:"intercept a stolen shipment before it leaves orbit",weight:1},{value:"close a dimensional rift spreading through reality",weight:1},{value:"escape the city before the purge begins at midnight",weight:1},{value:"find their missing mentor before the mission fails",weight:1},{value:"rescue hostages from a crumbling fortress",weight:1},{value:"protect a child prophet from assassins",weight:1},{value:"extract a double agent before their cover is blown",weight:1},{value:"guide refugees to a safe camp",weight:1},{value:"shield survivors from incoming raiders",weight:1},{value:"decode a fading prophecy",weight:1},{value:"expose sabotage inside the crew",weight:1},{value:"uncover the truth behind a string of disappearances",weight:1},{value:"trace a conspiracy to its hidden source",weight:1},{value:"decipher the map tattooed on a corpse",weight:1},{value:"find evidence to overturn a death sentence",weight:1},{value:"recover lost memories from a broken AI core",weight:1},{value:"escort a fragile relic to the treaty table",weight:1},{value:"negotiate peace between warring factions",weight:1},{value:"convince the council to halt an execution",weight:1},{value:"win the trust of a hostile alien species",weight:1},{value:"broker a deal in the criminal underworld",weight:1},{value:"prepare for a duel that ends a long feud",weight:1},{value:"defeat the champion in ritual combat",weight:1},{value:"lead an assault on an impenetrable stronghold",weight:1},{value:"hunt down a beast terrorizing the countryside",weight:1},{value:"challenge the corrupt ruler to single combat",weight:1},{value:"destroy the weapon before it can be fired",weight:1},{value:"prove their innocence after a failed heist",weight:1},{value:"steal the crown jewels from a guarded vault",weight:1},{value:"infiltrate enemy lines to gather intelligence",weight:1},{value:"swap a cursed artifact with a forgery",weight:1},{value:"break into the archives to erase their record",weight:1},{value:"sabotage the factory producing war machines",weight:1},{value:"escape a prison designed to hold immortals",weight:1},{value:"survive the deadly trials of ascension",weight:1},{value:"cross a war zone to reach the evacuation point",weight:1},{value:"outlast the hunters tracking them through the woods",weight:1},{value:"reach the summit before the blizzard hits",weight:1},{value:"gather allies for an expedition at dawn",weight:1},{value:"collect three keys scattered across the realm",weight:1},{value:"retrieve a cure from the forbidden zone",weight:1},{value:"deliver a message that could end the war",weight:1},{value:"claim the legendary weapon from its resting place",weight:1},{value:"recover stolen technology from black market dealers",weight:1},{value:"stop a plague sweeping nearby settlements",weight:1},{value:"banish the demon possessing the high priest",weight:1},{value:"prevent a ritual that would awaken an ancient evil",weight:1},{value:"seal away their own dark powers forever",weight:1},{value:"commune with spirits to learn a forgotten truth",weight:1},{value:"break a curse afflicting their bloodline",weight:1},{value:"spark a revolution with a single broadcast",weight:1},{value:"unite the scattered resistance cells",weight:1},{value:"overthrow the AI overlord controlling the city",weight:1},{value:"free enslaved miners from corporate control",weight:1},{value:"confront the person who betrayed them years ago",weight:1},{value:"reclaim their stolen identity",weight:1},{value:"fulfill a dying promise to an old friend",weight:1},{value:"master their unpredictable powers",weight:1},{value:"find redemption for past sins",weight:1}],Gs=[{value:"floating city docks",weight:1},{value:"neon bazaar at midnight",weight:1},{value:"abandoned subway tunnels beneath the capitol",weight:1},{value:"rooftop gardens of a vertical megacity",weight:1},{value:"rain-soaked alleyways of the lower district",weight:1},{value:"crumbling clocktower overlooking the plaza",weight:1},{value:"bustling market square at dawn",weight:1},{value:"underground fighting arena",weight:1},{value:"penthouse suite of a corporate tower",weight:1},{value:"holographic arcade in the entertainment district",weight:1},{value:"forest village among giant trees",weight:1},{value:"clifftop over a crystal sea",weight:1},{value:"frozen tundra with aurora overhead",weight:1},{value:"volcanic caldera surrounded by ash fields",weight:1},{value:"bioluminescent cave system",weight:1},{value:"misty bamboo grove at moonrise",weight:1},{value:"canyon carved by ancient rivers",weight:1},{value:"meadow where reality thins",weight:1},{value:"coral reef city beneath the waves",weight:1},{value:"petrified forest of stone trees",weight:1},{value:"frontier starship command deck",weight:1},{value:"research station observation dome",weight:1},{value:"orbital ring station",weight:1},{value:"derelict space hulk drifting in the void",weight:1},{value:"terraforming facility on a dying planet",weight:1},{value:"asteroid mining colony",weight:1},{value:"generation ship's hydroponic gardens",weight:1},{value:"quantum research lab between dimensions",weight:1},{value:"alien marketplace on a neutral moon",weight:1},{value:"cryosleep bay of a colony vessel",weight:1},{value:"sunken temple at low tide",weight:1},{value:"ancient academy courtyard",weight:1},{value:"desert outpost carved in red stone",weight:1},{value:"crumbling colosseum overgrown with vines",weight:1},{value:"forgotten crypt beneath the cathedral",weight:1},{value:"monastery perched on mountain peaks",weight:1},{value:"ruins of a civilization lost to time",weight:1},{value:"throne room of an empty castle",weight:1},{value:"lighthouse on a storm-battered coast",weight:1},{value:"bridge spanning a bottomless chasm",weight:1},{value:"nexus where ley lines converge",weight:1},{value:"mirror maze reflecting alternate realities",weight:1},{value:"dreamscape library of infinite shelves",weight:1},{value:"witch's cottage at the edge of nowhere",weight:1},{value:"spirit realm gateway in a moonlit clearing",weight:1},{value:"tower that exists in multiple timelines",weight:1},{value:"cathedral built from crystallized prayers",weight:1},{value:"garden where the dead walk freely",weight:1},{value:"factory floor of a weapons foundry",weight:1},{value:"engine room of a dying airship",weight:1},{value:"clockwork city powered by steam",weight:1},{value:"abandoned mining rig in deep space",weight:1},{value:"server farm housing imprisoned AIs",weight:1},{value:"railroad junction at the border",weight:1},{value:"wasteland bunker sealed for decades",weight:1},{value:"overgrown highway stretching to horizon",weight:1},{value:"refugee camp in a bombed-out stadium",weight:1},{value:"toxic swamp where a city once stood",weight:1},{value:"quarantine zone checkpoint",weight:1},{value:"archive stacks fading into dark",weight:1},{value:"secret base carved into glacier ice",weight:1},{value:"smuggler's den in the sewers",weight:1},{value:"underground river leading to unknown depths",weight:1},{value:"vault containing forbidden knowledge",weight:1},{value:"pocket dimension of endless doors",weight:1},{value:"living ship's neural chamber",weight:1},{value:"battlefield frozen in a time loop",weight:1},{value:"carnival that appears only at midnight",weight:1},{value:"prison built from crystallized screams",weight:1},{value:"auction house for stolen souls",weight:1},{value:"train that travels between worlds",weight:1},{value:"war room planning the final assault",weight:1},{value:"no man's land between trenches",weight:1},{value:"fortress under siege",weight:1},{value:"neutral zone bar where enemies meet",weight:1}],Ps=[{value:"alarms signal a breach",weight:1},{value:"authorities close in fast",weight:1},{value:"gunfire erupts from the shadows",weight:1},{value:"the building begins to collapse",weight:1},{value:"hostile forces surround their position",weight:1},{value:"a countdown timer reaches critical",weight:1},{value:"assassins emerge from the crowd",weight:1},{value:"the trap springs shut",weight:1},{value:"poison takes effect too soon",weight:1},{value:"their cover is blown",weight:1},{value:"an old rival brings uneasy news",weight:1},{value:"a trusted ally shows a hidden agenda",weight:1},{value:"the settlement waits for their call",weight:1},{value:"someone recognizes them from the past",weight:1},{value:"a child asks for their help",weight:1},{value:"their mentor appears unexpectedly",weight:1},{value:"the council demands an answer",weight:1},{value:"an enemy offers a temporary alliance",weight:1},{value:"whispers spread through the gathering",weight:1},{value:"a loved one sends a coded distress signal",weight:1},{value:"a storm is about to ground travel",weight:1},{value:"the ground shakes with tremors",weight:1},{value:"fog rolls in, obscuring everything",weight:1},{value:"a solar flare disrupts all systems",weight:1},{value:"the tide is turning dangerously fast",weight:1},{value:"lightning strikes the power core",weight:1},{value:"toxic gas begins seeping in",weight:1},{value:"the ice beneath them cracks",weight:1},{value:"a strange signal cuts through the horizon",weight:1},{value:"a hidden door slides open",weight:1},{value:"the crowd panics at a sharp omen",weight:1},{value:"reality begins to distort around them",weight:1},{value:"ghosts materialize with a warning",weight:1},{value:"ancient runes start glowing",weight:1},{value:"voices echo from nowhere",weight:1},{value:"the stars align in an impossible pattern",weight:1},{value:"a prophetic vision seizes them",weight:1},{value:"the barrier between worlds weakens",weight:1},{value:"a crucial clue surfaces",weight:1},{value:"encrypted files decrypt suddenly",weight:1},{value:"they find a body that shouldn't exist",weight:1},{value:"the map reveals a hidden passage",weight:1},{value:"surveillance footage shows the impossible",weight:1},{value:"a dying stranger passes them a key",weight:1},{value:"the artifact activates on its own",weight:1},{value:"memories flood back unexpectedly",weight:1},{value:"the final transport is leaving now",weight:1},{value:"the deadline has been moved up",weight:1},{value:"oxygen levels drop critically low",weight:1},{value:"the antidote must be administered immediately",weight:1},{value:"reinforcements are minutes away",weight:1},{value:"the portal is closing prematurely",weight:1},{value:"the ceremony begins early",weight:1},{value:"all systems fail simultaneously",weight:1},{value:"the AI achieves sentience",weight:1},{value:"communications go dark",weight:1},{value:"security protocols lock them in",weight:1},{value:"the hack is detected",weight:1},{value:"backup power won't last long",weight:1},{value:"the virus spreads faster than expected",weight:1},{value:"negotiations break down violently",weight:1},{value:"a challenge is issued publicly",weight:1},{value:"their weapons jam at the worst moment",weight:1},{value:"a riot breaks out",weight:1},{value:"war is declared without warning",weight:1},{value:"the execution is scheduled for dawn",weight:1},{value:"they must choose between two impossible options",weight:1},{value:"the enemy offers a deal they can't refuse",weight:1},{value:"saving one means abandoning the other",weight:1},{value:"the truth would destroy everything",weight:1},{value:"following orders means betraying their code",weight:1},{value:"reinforcements arrive from an unlikely source",weight:1},{value:"the victim was actually the mastermind",weight:1},{value:"their powers manifest uncontrollably",weight:1},{value:"an old wound reopens at the worst time",weight:1},{value:"the supposedly dead returns",weight:1},{value:"their past catches up instantly",weight:1}],Bs=[{value:"steady and hopeful",weight:1},{value:"bright and urgent",weight:1},{value:"optimistic despite the odds",weight:1},{value:"determined and unwavering",weight:1},{value:"inspiring and heroic",weight:1},{value:"warm with quiet confidence",weight:1},{value:"sharp and tense",weight:1},{value:"dry with a hint of danger",weight:1},{value:"paranoid and watchful",weight:1},{value:"breathless with anticipation",weight:1},{value:"edge-of-your-seat urgent",weight:1},{value:"coiled and ready to strike",weight:1},{value:"grim and unforgiving",weight:1},{value:"haunted by shadows",weight:1},{value:"desperate and cornered",weight:1},{value:"bleak but defiant",weight:1},{value:"merciless and cold",weight:1},{value:"mysterious and alluring",weight:1},{value:"dreamlike and surreal",weight:1},{value:"cryptic with hidden meaning",weight:1},{value:"ethereal and otherworldly",weight:1},{value:"earnest and focused",weight:1},{value:"calm and reverent",weight:1},{value:"melancholic yet beautiful",weight:1},{value:"bittersweet and reflective",weight:1},{value:"passionate and fierce",weight:1},{value:"vulnerable but brave",weight:1},{value:"adrenaline-pumping and kinetic",weight:1},{value:"explosive and relentless",weight:1},{value:"fast-paced and breathless",weight:1},{value:"chaotic yet controlled",weight:1},{value:"sarcastic with sharp wit",weight:1},{value:"playfully dangerous",weight:1},{value:"darkly humorous",weight:1},{value:"clever and calculating",weight:1},{value:"epic and mythological",weight:1},{value:"sweeping and cinematic",weight:1},{value:"legendary and timeless",weight:1},{value:"intimate and introspective",weight:1},{value:"quiet but powerful",weight:1},{value:"contemplative and wise",weight:1}],qs=[{value:{label:"Golden Age Fantasy",description:"bold magic and classic heroics"},weight:1},{value:{label:"Arcane Academy",description:"students, spells, and rival circles"},weight:1},{value:{label:"Dark Fairy Tale",description:"twisted wonder and moral ambiguity"},weight:1},{value:{label:"Epic High Fantasy",description:"grand quests and ancient prophecies"},weight:1},{value:{label:"Urban Fantasy Noir",description:"magic hidden in modern shadows"},weight:1},{value:{label:"Gothic Fantasy",description:"cursed castles and tragic romance"},weight:1},{value:{label:"Sword & Sorcery",description:"brutal combat and primal magic"},weight:1},{value:{label:"Sci-Fantasy Frontier",description:"new worlds and inventive tech"},weight:1},{value:{label:"Neon Noir",description:"rainy streets and high-tech intrigue"},weight:1},{value:{label:"Space Opera",description:"galactic empires and epic space battles"},weight:1},{value:{label:"Cyberpunk Revolution",description:"corporate dystopia and digital rebellion"},weight:1},{value:{label:"Hard Sci-Fi Survival",description:"realistic physics and life-or-death science"},weight:1},{value:{label:"Solarpunk Utopia",description:"sustainable futures and ecological harmony"},weight:1},{value:{label:"Bio-Tech Horror",description:"genetic experiments gone wrong"},weight:1},{value:{label:"Retro-Futurism",description:"1950s vision of tomorrow"},weight:1},{value:{label:"Dieselpunk Expedition",description:"gritty engines and daring missions"},weight:1},{value:{label:"Victorian Steampunk",description:"brass gears and steam-powered adventure"},weight:1},{value:{label:"Clockwork Kingdom",description:"mechanical marvels and precision engineering"},weight:1},{value:{label:"Mystic Eastern Epic",description:"temples, spirits, and disciplined blades"},weight:1},{value:{label:"Norse Mythology",description:"runes, frost giants, and warrior's glory"},weight:1},{value:{label:"Afrofuturism",description:"African diaspora meets cosmic wonder"},weight:1},{value:{label:"Wild West Legends",description:"dust, gunfights, and frontier justice"},weight:1},{value:{label:"Samurai Code",description:"honor, discipline, and the way of the blade"},weight:1},{value:{label:"Arabian Nights",description:"djinn, desert palaces, and ancient wisdom"},weight:1},{value:{label:"Post-Apocalyptic Hopepunk",description:"resourceful rebuilders with heart"},weight:1},{value:{label:"Nuclear Wasteland",description:"radiation, ruins, and survival at any cost"},weight:1},{value:{label:"Zombie Outbreak",description:"undead hordes and desperate survivors"},weight:1},{value:{label:"Climate Collapse",description:"extreme weather and ecological warfare"},weight:1},{value:{label:"Cosmic Horror",description:"unknowable entities and existential dread"},weight:1},{value:{label:"Survival Horror",description:"limited resources and mounting terror"},weight:1},{value:{label:"Psychological Thriller",description:"mind games and unreliable reality"},weight:1},{value:{label:"Supernatural Investigation",description:"paranormal mysteries and occult truths"},weight:1},{value:{label:"Pulp Adventure",description:"daring heroes and larger-than-life action"},weight:1},{value:{label:"Archaeological Mystery",description:"ancient secrets and tomb raiding"},weight:1},{value:{label:"Pirate Saga",description:"high seas, treasure, and naval combat"},weight:1},{value:{label:"Jungle Expedition",description:"lost cities and deadly wildlife"},weight:1},{value:{label:"Military Sci-Fi",description:"tactical warfare and soldier camaraderie"},weight:1},{value:{label:"Mech Combat",description:"giant robots and aerial dogfights"},weight:1},{value:{label:"Spy Thriller",description:"espionage, double-crosses, and cold war tension"},weight:1},{value:{label:"Shamanic Journey",description:"spirit worlds and ancestral wisdom"},weight:1},{value:{label:"Divine Intervention",description:"gods, angels, and mortal champions"},weight:1},{value:{label:"Time Paradox",description:"temporal loops and causality chaos"},weight:1},{value:{label:"Dimensional Rift",description:"parallel worlds and reality bleeding"},weight:1},{value:{label:"Revolutionary Drama",description:"uprising against tyranny and social justice"},weight:1},{value:{label:"Court Intrigue",description:"political machinations and noble deception"},weight:1},{value:{label:"Crime Syndicate",description:"organized crime and criminal empires"},weight:1},{value:{label:"Surreal Dreamscape",description:"logic-defying wonder and symbolic imagery"},weight:1},{value:{label:"Living Dungeon",description:"sentient architecture and evolving challenges"},weight:1},{value:{label:"Kaiju Rampage",description:"giant monsters and city-scale destruction"},weight:1},{value:{label:"Virtual Reality",description:"digital worlds and blurred boundaries"},weight:1},{value:{label:"Heist Thriller",description:"elaborate plans and perfect timing"},weight:1}],OC=i=>i.trim().toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,""),$s=(i,t)=>{const l=OC(t);return l?`${i}-${l}`:`${i}-option`},Ly=i=>({id:$s("character",`${i.descriptor}-${i.role}`),label:`${i.descriptor} (${i.role})`,descriptor:i.descriptor,role:i.role}),Zl=(i,t)=>({id:$s(i,t),label:t,value:t}),HC=i=>({id:$s("style",i.label),label:i.label,description:i.description}),Ko=i=>({...i}),Gy=ks.map(i=>Ly(i.value)),Lg=Ls.map(i=>Zl("objective",i.value)),Gg=Gs.map(i=>Zl("location",i.value)),Pg=Ps.map(i=>Zl("trigger",i.value)),Bg=Bs.map(i=>Zl("tone",i.value)),Py=qs.map(i=>HC(i.value)),By=i=>`${i.descriptor}|${i.role}`,qy=new Map;Gy.forEach(i=>{qy.set(By({descriptor:i.descriptor,role:i.role}),i)});const Xs=(i,t,l)=>i.find(r=>r.value===t)??Zl(l,t),zC=(i,t)=>Py.find(a=>a.label===i)??{id:$s("style",i),label:i,description:t},Vy={key:"character",label:"Hero",options:Gy,pickRandom:()=>{const i=gt(ks),t=qy.get(By(i));return Ko(t??Ly(i))}},Oy={key:"objective",label:"Objective",options:Lg,pickRandom:()=>{const i=gt(Ls);return Ko(Xs(Lg,i,"objective"))}},Hy={key:"location",label:"Location",options:Gg,pickRandom:()=>{const i=gt(Gs);return Ko(Xs(Gg,i,"location"))}},zy={key:"trigger",label:"Trigger",options:Pg,pickRandom:()=>{const i=gt(Ps);return Ko(Xs(Pg,i,"trigger"))}},Yy={key:"tone",label:"Tone",options:Bg,pickRandom:()=>{const i=gt(Bs);return Ko(Xs(Bg,i,"tone"))}},Fy={key:"style",label:"Style",options:Py,pickRandom:()=>{const i=gt(qs);return Ko(zC(i.label,i.description))}},YC=[Vy,Oy,Hy,zy,Yy,Fy],xi={character:Vy,objective:Oy,location:Hy,trigger:zy,tone:Yy,style:Fy},Jy=YC,FC=i=>xi[i],JC=i=>xi[i].pickRandom(),Cs=()=>({character:xi.character.pickRandom(),objective:xi.objective.pickRandom(),location:xi.location.pickRandom(),trigger:xi.trigger.pickRandom(),tone:xi.tone.pickRandom(),style:xi.style.pickRandom()}),Ky=i=>{const t={characterDescriptor:i.character.descriptor,characterRole:i.character.role,objective:i.objective.value,location:i.location.value,trigger:i.trigger.value,tone:i.tone.value,styleLabel:i.style.label,styleDescription:i.style.description,intent:"initial"},l=Vc(t);return{...t,id:l}},gt=i=>{const t=i.reduce((r,c)=>r+c.weight,0),l=Math.random()*t;let a=0;for(const r of i)if(a+=r.weight,l<=a)return r.value;return i[i.length-1].value},Vc=i=>[i.characterDescriptor,i.characterRole,i.objective,i.location,i.trigger].join("|"),Vs=(i,t,l)=>{i.push(t),i.length>l&&i.shift()},$y=()=>{for(let y=0;y<qC;y+=1){const h=gt(ks),v=gt(Ls),x=gt(Gs),S=gt(Ps),b=gt(Bs),A=gt(qs),_={characterDescriptor:h.descriptor,characterRole:h.role,objective:v,location:x,trigger:S,tone:b,styleLabel:A.label,styleDescription:A.description,intent:"initial"},G=Vc(_);if(!Tc.includes(G))return Vs(Tc,G,kg),{..._,id:G}}const i=gt(ks),t=gt(Ls),l=gt(Gs),a=gt(Ps),r=gt(Bs),c=gt(qs),m={characterDescriptor:i.descriptor,characterRole:i.role,objective:t,location:l,trigger:a,tone:r,styleLabel:c.label,styleDescription:c.description,intent:"initial"},g=Vc(m);return Vs(Tc,g,kg),{...m,id:g}},xc=i=>i.charAt(0).toUpperCase()+i.slice(1),KC=i=>i[Math.floor(Math.random()*i.length)],Qs=i=>{const t=`${xc(i.characterDescriptor)} ${i.characterRole}`;let r=KC([()=>{const c=`${t} must ${i.objective}.`,m=`At ${i.location}, ${i.trigger}.`;return`${c} ${m}`},()=>`At ${i.location}, ${t} must ${i.objective} as ${i.trigger}.`,()=>`When ${i.trigger}, ${t} must ${i.objective} at ${i.location}.`,()=>`${t} faces a critical mission at ${i.location}: ${i.objective}. ${xc(i.trigger)}.`,()=>`${xc(i.trigger)} at ${i.location}. ${t} must ${i.objective}.`,()=>`${t} arrives at ${i.location} to ${i.objective}, but ${i.trigger}.`,()=>`${t} has one goal: ${i.objective}. At ${i.location}, ${i.trigger}.`,()=>`Time is running out. ${t} must ${i.objective} at ${i.location} before ${i.trigger}.`])();if(r.length>Dy){const c=`${t} must ${i.objective}.`,m=`At ${i.location}, ${i.trigger}.`;r=`${c} ${m}`}return r},$C=i=>{const t=i&&i.length>0?i.slice(-20).filter((a,r,c)=>c.indexOf(a)===r):[],l=t.length>0?`DO NOT repeat these recently used words: ${t.join(", ")}. Use completely different vocabulary. `:"";return[`Create a short adventure prompt (max ${Dy} characters). Be creative and unpredictable.`,"Include: an interesting protagonist doing something urgent, a vivid location, and immediate tension or stakes.","Keep it simple, direct, and exciting. No unnecessary words.",l,"Use fresh, unexpected descriptions. Mix any genres you want. Surprise me with something I haven't seen before.","Avoid: tea shops, cafes, coffee, passive scenes."].join(" ")},XC=i=>{if(!i)return!0;const t=i.toLowerCase();return!!(VC.some(l=>t.includes(l))||Uy.some(l=>l.toLowerCase()===t))},Oc=i=>{if(!i)return;Vs(Uy,i,BC),i.toLowerCase().split(/[\s,.:;!?]+/).filter(a=>a.length>3).slice(0,6).filter(a=>!["the","this","that","with","from","must","needs","has","will","can","their","they","them"].includes(a)).forEach(a=>{Vs(ky,a,40)})},QC=()=>[...ky],qg=()=>{const i=$y(),t=Qs(i);return Oc(t),t};var ZC={};const WC="v1beta",jC=`https://generativelanguage.googleapis.com/${WC}`,eb=["gemini-2.0-flash","gemini-2.0-flash-lite","gemini-2.5-flash","gemini-flash-latest","gemini-2.5-pro"],Xy=Ql,Qy=i=>{var l;const t=(l=ZC.GEMINI_TEXT_MODEL)==null?void 0:l.trim();return[i,t,...eb].filter(a=>!!a).filter((a,r,c)=>c.indexOf(a)===r)},tb=1e4,nb=404,Zy=180;class nd extends Error{constructor(t,l){super(l),this.name="GeminiModelNotFoundError",this.modelId=t}}async function ib(i){const t=ht("GEMINI_API_KEY"),l=Qy(i??Xy),a=[];let r=null;if(!t)throw new Error("GEMINI_API_KEY is not set in environment variables");const c=QC(),m=Math.floor(Math.random()*1e6);let g=$C(c);g+=` [Variety seed: ${m}]`;const y=()=>{const v=$y(),x=Qs(v);return Oc(x),x},h={contents:[{parts:[{text:g}]}],generationConfig:{temperature:1.5,topK:80,topP:.99,maxOutputTokens:Zy}};console.log(" Generating random prompt with Gemini...");for(const v of l)try{const x=await Wy(t,v,h);return console.log(` Generated random prompt with Gemini model ${v}:`,x),XC(x)?(console.warn("Gemini prompt rejected due to repetition or banned terms. Using fallback blueprint."),y()):(Oc(x),x)}catch(x){if(x instanceof nd){a.push(x);continue}r=x instanceof Error?x:new Error(String(x));break}if(a.length>0){const v=a.map(x=>x.modelId).join(", ");console.warn(`Gemini API could not find any of the requested models: ${v}. Falling back to curated adventure prompt.`)}return r&&console.warn("Gemini prompt generation failed, using fallback blueprint.",r),y()}async function ob(i,t){const l=ht("GEMINI_API_KEY"),a=Qy(t??Xy),r=[];let c=null;if(!l)throw new Error("GEMINI_API_KEY is not set in environment variables");const g={contents:[{parts:[{text:`You are a creative writing assistant helping to expand and enhance visual storytelling prompts. 
The user has written: "${i}"

Your task is to expand this prompt into a more detailed, vivid, and cinematically rich description suitable for AI video generation. 

Guidelines:
- Keep the core concept and intent of the original prompt
- Add more sensory details, atmosphere, mood, and visual elements
- Include camera angles, lighting, movement, or cinematic details where appropriate
- Make it more specific and descriptive while maintaining coherence
- Keep it CONCISE - aim for 2-3 sentences, similar in length to the original but with richer detail
- Write in a flowing narrative style, not as a list
- Do NOT add quotes around your response

Respond with ONLY the expanded prompt, nothing else.`}]}],generationConfig:{temperature:.8,topK:40,topP:.9,maxOutputTokens:Zy}};console.log(" Expanding prompt with Gemini...");for(const y of a)try{const h=await Wy(l,y,g);return console.log(` Expanded prompt with Gemini model ${y}:`,h),h}catch(h){if(h instanceof nd){r.push(h);continue}c=h instanceof Error?h:new Error(String(h));break}if(r.length>0){const y=r.map(h=>h.modelId).join(", ");throw new Error(`Gemini API could not find any of the requested models: ${y}`)}throw c||new Error("Failed to expand prompt with Gemini")}function Hc(){return!!ht("GEMINI_API_KEY")}async function Wy(i,t,l){var c,m;const a=new AbortController,r=setTimeout(()=>a.abort(),tb);try{const g=await fetch(`${jC}/models/${t}:generateContent?key=${i}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l),signal:a.signal});clearTimeout(r);const y=g.ok?null:await g.json().catch(()=>({}));if(g.status===nb)throw new nd(t,`Gemini API error: ${g.status} - ${((c=y==null?void 0:y.error)==null?void 0:c.message)||g.statusText}`);if(!g.ok)throw new Error(`Gemini API error: ${g.status} - ${((m=y==null?void 0:y.error)==null?void 0:m.message)||g.statusText}`);const h=await g.json();if(!h.candidates||h.candidates.length===0)throw new Error("Gemini failed to generate a random prompt.");const v=h.candidates[0];let b=(v.content&&v.content.parts&&v.content.parts.length>0?v.content.parts[0].text??"":"").trim();if(v.finishReason&&v.finishReason!=="STOP")if(b.length>0)console.warn(` Gemini generation finished with ${v.finishReason}, using partial text output.`);else throw new Error(`Gemini generation stopped due to: ${v.finishReason}. Try adjusting the prompt or token limits.`);if(!b)throw new Error("Gemini response has no text content.");let A=b;return A.startsWith('"')&&A.endsWith('"')&&(A=A.slice(1,-1)),A.startsWith("'")&&A.endsWith("'")&&(A=A.slice(1,-1)),A}catch(g){throw clearTimeout(r),g instanceof Error&&g.name==="AbortError"?new Error("Gemini API request timed out"):g}}const Ts=i=>{const t={};return Jy.forEach(l=>{t[l.key]={...i[l.key]}}),t},lb=({initialSelections:i,onApply:t,onCancel:l})=>{const[a,r]=O.useState(()=>i?Ts(i):Cs());O.useEffect(()=>{i&&r(Ts(i))},[i]);const c=O.useMemo(()=>Ky(a),[a]),m=O.useMemo(()=>Qs(c),[c]),g=(b,A)=>{const G=FC(b).options.find(M=>M.id===A);G&&r(M=>({...M,[b]:{...G}}))},y=b=>{r(A=>({...A,[b]:JC(b)}))},h=()=>{r(Cs())},v=()=>{if(i){r(Ts(i));return}r(Cs())},x=()=>{t(Ts(a))},S=b=>{const A=a[b.key];return b.key==="character"?E.jsxs("p",{className:"mt-2 text-xs text-slate-400",children:[A.descriptor," - role: ",A.role]}):b.key==="style"?E.jsxs(E.Fragment,{children:[E.jsx("p",{className:"mt-2 text-xs text-slate-300 font-semibold",children:A.label}),E.jsx("p",{className:"mt-1 text-xs text-slate-400",children:A.description})]}):E.jsx("p",{className:"mt-2 text-xs text-slate-400",children:A.value})};return E.jsxs("div",{className:"flex flex-col gap-6",children:[E.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[E.jsxs("div",{children:[E.jsx("h3",{className:"text-xl font-bold text-slate-200",children:"Manual Prompt Builder"}),E.jsx("p",{className:"text-sm text-slate-400",children:"Mix and match story elements or randomize individual categories for fine control."})]}),E.jsxs("div",{className:"flex flex-wrap gap-3",children:[E.jsx("button",{type:"button",onClick:v,className:"px-4 py-2 text-sm font-semibold rounded-lg border border-slate-600 text-slate-300 hover:text-white hover:border-slate-400 transition-colors",children:"Reset"}),E.jsx("button",{type:"button",onClick:h,className:"px-4 py-2 text-sm font-semibold rounded-lg bg-indigo-500 text-white hover:bg-indigo-400 transition-colors",children:" Randomize All"})]})]}),E.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:Jy.map(b=>E.jsxs("div",{className:"rounded-xl border border-slate-700 bg-slate-900/70 p-4 shadow-lg flex flex-col",children:[E.jsxs("div",{className:"flex items-center justify-between gap-3 mb-3",children:[E.jsx("h4",{className:"text-lg font-semibold text-slate-200",children:b.label}),E.jsx("button",{type:"button",onClick:()=>y(b.key),className:"text-xs font-semibold bg-slate-800 hover:bg-slate-700 text-slate-200 px-3 py-1 rounded-full transition-colors",children:"Random"})]}),E.jsx("label",{className:"text-xs uppercase tracking-wide text-slate-500 mb-1",children:"Choose Option"}),E.jsx("select",{value:a[b.key].id,onChange:A=>g(b.key,A.target.value),className:"bg-slate-800 border border-slate-700 text-slate-200 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-sky-500",children:b.options.map(A=>{const _=b.key==="character"?A.label:b.key==="style"?`${A.label} - ${A.description}`:A.label;return E.jsx("option",{value:A.id,children:_},A.id)})}),S(b)]},b.key))}),E.jsxs("div",{className:"rounded-xl border border-slate-700 bg-slate-900/70 p-4 shadow-lg",children:[E.jsxs("div",{className:"flex items-center justify-between mb-2",children:[E.jsx("h4",{className:"text-lg font-semibold text-slate-200",children:"Prompt Preview"}),E.jsxs("span",{className:"text-xs text-slate-400",children:[m.length," characters"]})]}),E.jsx("p",{className:"text-sm text-slate-200 leading-relaxed",children:m}),E.jsxs("p",{className:"mt-2 text-xs text-slate-500",children:["Style: ",a.style.label," - ",a.style.description]})]}),E.jsxs("div",{className:"flex justify-end gap-3",children:[E.jsx("button",{type:"button",onClick:l,className:"px-4 py-2 text-sm font-semibold rounded-lg border border-slate-600 text-slate-300 hover:text-white hover:border-slate-400 transition-colors",children:"Cancel"}),E.jsx("button",{type:"button",onClick:x,className:"px-6 py-2 text-sm font-bold rounded-lg bg-sky-600 text-white hover:bg-sky-500 transition-colors",children:"Apply Prompt"})]})]})},ab=({selectedType:i,onTypeChange:t,disabled:l=!1})=>E.jsxs("div",{className:"mb-4 fade-in-up",children:[E.jsx("label",{className:"block text-slate-300 text-sm font-semibold mb-3",children:"Choose Narrative Type:"}),E.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-2",children:zo.map(a=>E.jsxs("button",{type:"button",onClick:()=>t(a),disabled:l,className:`px-3 py-2 rounded-lg text-sm font-medium transition-all duration-200 ${(i==null?void 0:i.id)===a.id?"bg-indigo-500 text-white ring-2 ring-indigo-400 shadow-lg scale-105":"bg-slate-800 text-slate-300 border border-slate-700 hover:bg-slate-700 hover:border-indigo-500"} disabled:opacity-50 disabled:cursor-not-allowed`,title:a.description,children:[E.jsx("span",{className:"mr-1",children:a.icon}),a.name]},a.id))}),i&&E.jsx("p",{className:"mt-2 text-xs text-slate-400 italic",children:i.description})]}),Vg=120,sb=400,rb=500,ub=({onSubmit:i,disabled:t,llmModel:l})=>{const[a,r]=O.useState(""),[c,m]=O.useState(Ug[0]),[g,y]=O.useState(Iy()),[h,v]=O.useState(!1),[x,S]=O.useState(!1),[b,A]=O.useState(!1),[_,G]=O.useState(null),[M,B]=O.useState(!1),[V,$]=O.useState(()=>Cs()),Q=O.useRef(null),j=Z=>{Z.preventDefault(),a.trim()&&i(a.trim(),c,g)},W=["A lone astronaut discovering a glowing alien forest...","A cyberpunk detective walking through rain-soaked neon streets...","A magical creature hatching from a crystal egg...","A knight approaching a colossal, vine-covered castle...","A pirate ship sailing through clouds toward a floating island...","A young wizard opening an ancient spellbook in a dusty library...","A time traveler stepping out of a portal in Victorian London...","A robot gardener tending to flowers in a post-apocalyptic garden...","A deep-sea diver encountering a glowing underwater city...","A samurai standing at the edge of a cherry blossom cliff at sunset...","A steampunk airship crew spotting a mysterious storm ahead...","A lone traveler discovering a hidden temple in the jungle...","A street artist painting a mural that comes to life...","A space merchant landing on a bustling alien marketplace...","A dragon hatchling taking its first flight over mountain peaks..."],[me,te]=O.useState(W[0]);Xg.useEffect(()=>{const Z=setInterval(()=>{te(W[Math.floor(Math.random()*W.length)])},5e3);return()=>clearInterval(Z)},[]);const ge=async()=>{S(!0);try{if(Hc()){const Z=await ib(l);r(Z)}else{const Z=qg();r(Z)}}catch(Z){console.warn("Failed to get Gemini random prompt, using fallback:",Z);const ye=qg();r(ye)}finally{S(!1)}},Ce=()=>{B(!0)},he=Z=>{$(Z);const ye=Ky(Z),we=Qs(ye);r(we),B(!1),v(!1)},ve=async()=>{if(a.trim()){A(!0);try{G(a);const Z=await ob(a,l);r(Z)}catch(Z){console.error("Failed to expand prompt:",Z),alert("Failed to expand prompt. Please check your Gemini API key and try again."),G(null)}finally{A(!1)}}},Ue=()=>{_!==null&&(r(_),G(null))};O.useEffect(()=>{if(Q.current){Q.current.style.height="auto";const Z=Math.min(Math.max(Q.current.scrollHeight,Vg),sb);Q.current.style.height=`${Z}px`}},[a]);const ke=Z=>{r(Z.target.value)},k=a.length>rb,X=Hc();return E.jsxs(E.Fragment,{children:[E.jsxs("div",{className:"w-full max-w-3xl mx-auto p-4 md:p-8",children:[E.jsx("h1",{className:"text-4xl md:text-5xl font-extrabold text-center mb-2 text-transparent bg-clip-text bg-gradient-to-r from-sky-400 to-indigo-500",children:"Veo Visual Novel"}),E.jsx("p",{className:"text-center text-slate-400 mb-8 text-lg",children:"Start your adventure. Describe the main character and the opening scene."}),E.jsx(ab,{selectedType:g,onTypeChange:y,disabled:t}),E.jsxs("div",{className:"mb-4 fade-in-up",children:[E.jsx("label",{className:"block text-slate-300 text-sm font-semibold mb-3",children:"Choose a Style:"}),E.jsx("div",{className:"flex flex-wrap gap-2",children:Ug.map(Z=>E.jsxs("button",{type:"button",onClick:()=>m(Z),disabled:t,className:`px-4 py-2 rounded-full text-sm font-medium transition-all duration-200 ${(c==null?void 0:c.id)===Z.id?"bg-sky-500 text-white ring-2 ring-sky-400 shadow-lg scale-105":"bg-slate-800 text-slate-300 border border-slate-700 hover:bg-slate-700 hover:border-sky-500"} disabled:opacity-50 disabled:cursor-not-allowed`,children:[E.jsx("span",{className:"mr-1",children:Z.icon}),Z.name]},Z.id))}),c&&c.id!=="none"&&E.jsx("p",{className:"mt-2 text-xs text-slate-400 italic",children:c.description})]}),E.jsxs("form",{onSubmit:j,className:"flex flex-col gap-4",children:[E.jsxs("div",{className:"relative",children:[E.jsx("textarea",{ref:Q,value:a,onChange:ke,placeholder:me,className:"w-full bg-slate-800 border border-slate-700 text-slate-200 rounded-lg px-4 py-3 text-lg focus:outline-none focus:ring-2 focus:ring-sky-500 transition-shadow resize-none overflow-y-auto",disabled:t,style:{minHeight:`${Vg}px`}}),E.jsxs("div",{className:"flex justify-between items-center mt-2",children:[E.jsxs("div",{className:"text-xs text-slate-400",children:[a.length," characters",k&&E.jsx("span",{className:"ml-2 text-amber-400",children:"(Longer prompts may be truncated by some models)"})]}),E.jsx("button",{type:"button",onClick:()=>v(!0),className:"text-xs text-sky-400 hover:text-sky-300 transition-colors",disabled:t,children:"Expand "})]})]}),E.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[E.jsx("button",{type:"button",onClick:Ce,className:"bg-slate-700 text-slate-200 font-bold py-3 px-6 rounded-lg hover:bg-slate-600 transition-all duration-300 disabled:bg-slate-600 disabled:cursor-not-allowed text-lg shadow-md",disabled:t,children:" Manual Builder"}),E.jsx("button",{type:"button",onClick:ge,className:"bg-indigo-500 text-white font-bold py-3 px-6 rounded-lg hover:bg-indigo-400 transition-all duration-300 disabled:bg-slate-600 disabled:cursor-not-allowed text-lg shadow-md relative overflow-hidden",disabled:t||x,children:x?E.jsxs(E.Fragment,{children:[E.jsx("span",{className:"opacity-50",children:"Randomize"}),E.jsx("span",{className:"absolute inset-0 flex items-center justify-center",children:E.jsxs("svg",{className:"animate-spin h-5 w-5",viewBox:"0 0 24 24",children:[E.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),E.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})})]}):E.jsxs(E.Fragment,{children:[" Randomize",X&&E.jsx("span",{className:"ml-1 text-xs opacity-75",children:"(AI)"})]})}),E.jsx("button",{type:"submit",className:"flex-grow bg-sky-600 text-white font-bold py-3 px-8 rounded-lg hover:bg-sky-500 transition-colors duration-300 disabled:bg-slate-600 disabled:cursor-not-allowed text-lg shadow-md",disabled:t||!a.trim(),children:" Begin"})]})]})]}),h&&E.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4 fade-in",children:E.jsxs("div",{className:"bg-slate-900 rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] flex flex-col border border-slate-700 scale-in",children:[E.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-slate-700",children:[E.jsx("h2",{className:"text-2xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-sky-400 to-indigo-500",children:"Edit Prompt"}),E.jsx("button",{onClick:()=>v(!1),className:"text-slate-400 hover:text-slate-200 transition-colors",children:E.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),E.jsxs("div",{className:"flex-grow p-6 overflow-y-auto",children:[E.jsx("textarea",{value:a,onChange:ke,placeholder:me,className:"w-full h-full min-h-[400px] bg-slate-800 border border-slate-700 text-slate-200 rounded-lg px-4 py-3 text-xl focus:outline-none focus:ring-2 focus:ring-sky-500 resize-none",autoFocus:!0}),E.jsxs("div",{className:"mt-3 text-sm text-slate-400",children:[a.length," characters",k&&E.jsx("span",{className:"ml-2 text-amber-400",children:" Longer prompts may be truncated by some models"})]})]}),E.jsxs("div",{className:"p-6 border-t border-slate-700 flex flex-col sm:flex-row gap-3",children:[X&&E.jsx("button",{onClick:ve,disabled:!a.trim()||b,className:"bg-indigo-500 text-white font-bold py-3 px-6 rounded-lg hover:bg-indigo-400 transition-all duration-300 disabled:bg-slate-600 disabled:cursor-not-allowed disabled:opacity-50 relative overflow-hidden",children:b?E.jsxs(E.Fragment,{children:[E.jsx("span",{className:"opacity-50",children:" Expand with AI"}),E.jsx("span",{className:"absolute inset-0 flex items-center justify-center",children:E.jsxs("svg",{className:"animate-spin h-5 w-5",viewBox:"0 0 24 24",children:[E.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),E.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})})]}):" Expand with AI"}),_!==null&&E.jsx("button",{onClick:Ue,className:"bg-amber-600 text-white font-bold py-3 px-6 rounded-lg hover:bg-amber-500 transition-colors",children:" Revert"}),E.jsx("button",{onClick:()=>v(!1),className:"flex-grow bg-slate-700 text-slate-200 font-bold py-3 px-6 rounded-lg hover:bg-slate-600 transition-colors",children:"Done"})]})]})}),M&&E.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4 fade-in",children:E.jsxs("div",{className:"bg-slate-900 rounded-2xl shadow-2xl max-w-5xl w-full max-h-[95vh] flex flex-col border border-slate-700 scale-in",children:[E.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-slate-700",children:[E.jsx("h2",{className:"text-2xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-sky-400 to-indigo-500",children:"Build Prompt Manually"}),E.jsx("button",{onClick:()=>B(!1),className:"text-slate-400 hover:text-slate-200 transition-colors",children:E.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),E.jsx("div",{className:"flex-grow p-6 overflow-y-auto",children:E.jsx(lb,{initialSelections:V,onApply:he,onCancel:()=>B(!1)})})]})})]})},cb=({videoSegment:i,onVideoEnd:t,onProgress:l,isCurrent:a,onClick:r,segmentIndex:c=0,isGlobalMuted:m=!1})=>{const g=O.useRef(null),[y,h]=O.useState(!1),[v,x]=O.useState(!1);return O.useEffect(()=>{const S=g.current;if(S)if(a){const b=()=>t(S),A=()=>{l&&l(S.currentTime,S.duration)};return S.addEventListener("ended",b),S.addEventListener("timeupdate",A),S.loop=!1,S.play().catch(_=>{console.warn("Video autoplay was prevented:",_)}),()=>{S.removeEventListener("ended",b),S.removeEventListener("timeupdate",A)}}else S.loop=!0,S.play().catch(()=>{})},[i.videoUrl,t,l,a]),O.useEffect(()=>{const S=setTimeout(()=>h(!0),100);return()=>clearTimeout(S)},[]),O.useEffect(()=>{const S=g.current;S&&(S.muted=!a||m)},[m,a]),E.jsx("div",{className:`aspect-video w-full rounded-xl overflow-hidden shadow-2xl smooth-transition-slow ${a?"":"cursor-pointer"} ${y?"opacity-100 translate-y-0":"opacity-0 translate-y-8"}`,onClick:a?void 0:r,onMouseEnter:()=>!a&&x(!0),onMouseLeave:()=>x(!1),children:E.jsxs("div",{className:"relative w-full h-full",children:[E.jsx("video",{ref:g,src:i.videoUrl,controls:a,muted:!a||m,playsInline:!0,className:"w-full h-full object-cover smooth-transition"},i.videoUrl),!a&&v&&E.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center smooth-transition fade-in",children:E.jsxs("div",{className:"text-center p-4 scale-in",children:[E.jsxs("div",{className:"text-white text-lg font-semibold mb-2",children:["Segment ",c+1]}),E.jsx("div",{className:"text-slate-300 text-sm mb-4 max-w-md",children:i.prompt}),E.jsx("div",{className:"text-sky-400 text-sm font-medium",children:"Click to replay"})]})})]})})},db=500,fb="Describe your custom action...",mb="Describe your next move",hb="Write a custom prompt",pb="Regenerate choices",gb="Generating new choices...",yb=({choices:i,onChoiceSelect:t,disabled:l,selectedChoice:a,variant:r="default",onRegenerate:c,canRegenerate:m=!1,isRegenerating:g=!1,errorMessage:y=null,onCustomPromptToggle:h,isCustomPromptOpen:v=!1,customPromptValue:x="",onCustomPromptChange:S,onCustomPromptSubmit:b,isCustomPromptSubmitting:A=!1})=>{const[_,G]=O.useState([]),M=O.useRef(null);if(O.useEffect(()=>{if(v&&M.current){const ve=M.current,Ue=window.setTimeout(()=>{ve.focus(),ve.setSelectionRange(ve.value.length,ve.value.length)},0);return()=>window.clearTimeout(Ue)}},[v]),O.useEffect(()=>{i.length>0&&!a?(G([]),i.forEach((ve,Ue)=>{setTimeout(()=>{G(ke=>{const k=[...ke];return k[Ue]=!0,k})},Ue*150)})):a&&G(i.map(()=>!0))},[i,a]),i.length===0)return null;const B=g?gb:pb,V=({label:ve,onClick:Ue,icon:ke,disabled:k=!1,isActive:X=!1,ariaExpanded:Z})=>{const[ye,we]=O.useState(!1),R=O.useRef(null),Y=()=>{R.current!==null&&(window.clearTimeout(R.current),R.current=null)},ee=()=>{k||(Y(),R.current=window.setTimeout(()=>we(!0),db))},oe=()=>{Y(),we(!1)};return O.useEffect(()=>()=>Y(),[]),E.jsxs("div",{className:"relative",children:[E.jsx("button",{type:"button",className:`inline-flex h-10 w-10 items-center justify-center rounded-lg border transition-all focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400 focus-visible:ring-offset-1 focus-visible:ring-offset-slate-950 ${k?"border-slate-700/40 bg-slate-900/40 text-slate-500 cursor-not-allowed":X?"border-sky-400/60 bg-slate-900/70 text-sky-200 shadow-md shadow-slate-900/40":"border-slate-600/40 bg-slate-900/50 text-slate-100 shadow-md shadow-slate-900/30 hover:bg-slate-900/65 hover:border-sky-300/60"}`,onClick:k?void 0:Ue,onMouseEnter:ee,onMouseLeave:oe,onFocus:()=>!k&&we(!0),onBlur:()=>we(!1),"aria-label":ve,"aria-expanded":Z,disabled:k,children:ke}),ye&&!k&&E.jsx("div",{className:"absolute bottom-full left-1/2 z-20 mb-2 -translate-x-1/2 whitespace-nowrap rounded-md border border-slate-700/60 bg-slate-950/95 px-3 py-1 text-xs font-medium text-slate-100 shadow-lg shadow-slate-950/40",children:ve})]})},$=r==="overlay"?"w-full mx-auto flex flex-col items-center sm:items-stretch gap-3 smooth-transition":"w-full max-w-4xl mx-auto p-4 flex flex-col items-center gap-4 smooth-transition",Q=r==="overlay"?"sr-only":"text-2xl font-bold text-slate-200 mb-2 animate-pulse-subtle fade-in",j=r==="overlay"?"grid grid-cols-1 md:grid-cols-3 gap-3 w-full sm:gap-4":"grid grid-cols-1 md:grid-cols-3 gap-4 w-full",W="w-full text-left border rounded-lg p-4 text-slate-300 smooth-transition relative",me=r==="overlay"?"bg-slate-900/60 border-slate-500/50 shadow-lg shadow-slate-900/30":"bg-slate-800 border-slate-700",te=g||A,ge=!m||g||A,Ce=!m||te,he=r==="overlay"&&v&&S&&b;return E.jsxs("div",{className:$,children:[E.jsx("h3",{className:`${Q} ${r==="overlay"?"":"mb-2"}`,children:a?"Your Choice Was:":"What happens next?"}),E.jsx("div",{className:j,children:i.map((ve,Ue)=>{const ke=ve===a,k=_[Ue],X=l||!!a||te,ye=!a&&!l&&!te?r==="overlay"?"hover:border-sky-300/80 hover:bg-slate-900/75 hover:shadow-xl hover:shadow-sky-500/40 hover:scale-105":"hover:bg-slate-700 hover:border-sky-500 hover:scale-105 hover:shadow-xl hover:shadow-sky-500/10":"";return E.jsxs("button",{onClick:()=>t(ve),disabled:X,className:`${W} ${me}
                ${ke?"border-sky-400 ring-2 ring-sky-400/50 shadow-lg shadow-sky-500/20 scale-in":""}
                ${ye}
                ${X?"opacity-70 cursor-not-allowed":""}
                ${k?"opacity-100 translate-y-0":"opacity-0 translate-y-4"}
              `,style:{transitionDelay:`${Ue*50}ms`},children:[!a&&!l&&E.jsx("span",{className:"absolute top-2 right-2 w-6 h-6 bg-slate-700 border border-slate-600 rounded flex items-center justify-center text-xs font-mono text-slate-400 fade-in",children:Ue+1}),E.jsx("p",{className:"font-semibold pr-8",children:ve})]},Ue)})}),r==="overlay"&&(c||h)&&E.jsxs("div",{className:"w-full flex flex-col sm:flex-row items-start sm:items-center gap-2",children:[y&&E.jsx("span",{className:"text-sm text-rose-200 font-medium sm:mr-auto",children:y}),E.jsxs("div",{className:"flex w-full sm:w-auto items-center gap-2",children:[h&&E.jsx(V,{label:hb,onClick:Ce?void 0:h,icon:E.jsxs("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",strokeWidth:1.8,viewBox:"0 0 24 24",children:[E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 5h9a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V7a2 2 0 012-2z"}),E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 9h5M9 13h3"}),E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 4l4 4-6.5 6.5L9 15l.5-3.5L16 4z"})]}),disabled:Ce,isActive:v,ariaExpanded:v}),c&&E.jsx(V,{label:B,onClick:ge?void 0:c,icon:E.jsxs("svg",{className:`h-5 w-5 ${g?"animate-spin":""}`,fill:"none",stroke:"currentColor",strokeWidth:1.8,viewBox:"0 0 24 24",children:[E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 4v6h6M20 20v-6h-6"}),E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20 8a8 8 0 00-13.856-4.9M4 16a8 8 0 0013.856 4.9"})]}),disabled:ge})]})]}),he&&E.jsxs("form",{className:"w-full rounded-xl border border-slate-600/40 bg-slate-900/60 p-4 shadow-lg shadow-slate-900/30 backdrop-blur",onSubmit:ve=>{ve.preventDefault(),!A&&b&&b()},children:[E.jsx("label",{className:"mb-2 block text-sm font-semibold text-slate-200",children:mb}),E.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-end",children:[E.jsx("textarea",{ref:M,value:x,onChange:ve=>S==null?void 0:S(ve.target.value),placeholder:fb,className:"min-h-[3.5rem] flex-1 resize-none rounded-lg border border-slate-600/60 bg-slate-950/40 px-3 py-2 text-sm text-slate-100 outline-none transition-all focus:border-sky-400 focus:ring-1 focus:ring-sky-400/50 disabled:cursor-not-allowed disabled:opacity-70",disabled:A}),E.jsxs("button",{type:"submit",className:`inline-flex items-center justify-center gap-2 rounded-lg border border-sky-500/60 bg-slate-900/60 px-4 py-2 text-sm font-semibold text-sky-100 shadow-md shadow-slate-900/30 transition-all ${A?"cursor-wait opacity-70":"hover:-translate-y-0.5 hover:border-sky-300 hover:bg-slate-900/80"}`,disabled:A,children:[E.jsxs("svg",{className:`h-5 w-5 ${A?"animate-pulse":""}`,fill:"none",stroke:"currentColor",strokeWidth:1.8,viewBox:"0 0 24 24",children:[E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 12h14"}),E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 6l6 6-6 6"})]}),E.jsx("span",{children:"Send"})]})]})]})]})},vb=({generations:i,activeGenerationId:t,onSelectGeneration:l,onDeleteGeneration:a,onRegenerateVideo:r,isRegenerating:c=!1,segmentIndex:m})=>{const[g,y]=O.useState(!1),[h,v]=O.useState(null);if(!i||i.length===0)return null;i.find(A=>A.generationId===t);const x=i.findIndex(A=>A.generationId===t),S=A=>{const _=new Date(A),M=new Date().getTime()-_.getTime(),B=Math.floor(M/6e4),V=Math.floor(M/36e5),$=Math.floor(M/864e5);return B<1?"Just now":B<60?`${B}m ago`:V<24?`${V}h ago`:$<7?`${$}d ago`:_.toLocaleDateString()},b=A=>{h===A?(a(A),v(null)):(v(A),setTimeout(()=>{v(null)},3e3))};return E.jsxs("div",{className:"absolute top-2 right-2 z-10",children:[!g&&E.jsxs("div",{className:"flex items-center gap-2",children:[i.length>1&&E.jsxs("button",{onClick:()=>y(!0),className:"flex items-center gap-2 px-3 py-1.5 text-sm font-medium bg-slate-800/90 hover:bg-slate-700/90 text-slate-200 rounded-lg border border-slate-600/50 shadow-lg backdrop-blur transition-colors",title:`${i.length} versions available`,children:[E.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16V4m0 0L3 8m4-4l4 4m6 0v12m0 0l4-4m-4 4l-4-4"})}),E.jsxs("span",{className:"text-xs",children:[x+1,"/",i.length]})]}),E.jsxs("button",{onClick:r,disabled:c,className:"flex items-center gap-2 px-3 py-1.5 text-sm font-medium bg-indigo-600/90 hover:bg-indigo-500/90 disabled:bg-slate-700/50 text-white rounded-lg shadow-lg backdrop-blur transition-colors disabled:cursor-not-allowed",title:"Regenerate this video",children:[E.jsx("svg",{className:`w-4 h-4 ${c?"animate-spin":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),c?"Generating...":"Regenerate"]})]}),g&&E.jsxs("div",{className:"w-80 bg-slate-900/95 backdrop-blur rounded-lg border border-slate-700/50 shadow-2xl",children:[E.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-slate-700/50",children:[E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsx("svg",{className:"w-5 h-5 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16V4m0 0L3 8m4-4l4 4m6 0v12m0 0l4-4m-4 4l-4-4"})}),E.jsxs("h3",{className:"text-sm font-semibold text-slate-200",children:["Video Versions (",i.length,")"]})]}),E.jsx("button",{onClick:()=>y(!1),className:"text-slate-400 hover:text-slate-200 transition-colors",children:E.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),E.jsx("div",{className:"p-3 border-b border-slate-700/50",children:E.jsxs("button",{onClick:r,disabled:c,className:"w-full flex items-center justify-center gap-2 px-4 py-2 text-sm font-medium bg-indigo-600 hover:bg-indigo-500 disabled:bg-slate-700/50 text-white rounded-lg transition-colors disabled:cursor-not-allowed",children:[E.jsx("svg",{className:`w-5 h-5 ${c?"animate-spin":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),c?"Generating New Version...":"Generate New Version"]})}),E.jsx("div",{className:"max-h-96 overflow-y-auto",children:i.slice().reverse().map((A,_)=>{const G=i.length-1-_,M=A.generationId===t,B=h===A.generationId;return E.jsx("div",{className:`relative border-b border-slate-700/30 last:border-b-0 ${M?"bg-indigo-900/20":"hover:bg-slate-800/30"}`,children:E.jsx("div",{className:"p-3",children:E.jsxs("div",{className:"flex items-start gap-3",children:[E.jsxs("div",{className:"relative flex-shrink-0",children:[E.jsx("video",{src:A.videoUrl,className:"w-20 h-14 object-cover rounded border border-slate-700/50",muted:!0,playsInline:!0}),M&&E.jsx("div",{className:"absolute -top-1 -right-1 w-5 h-5 bg-indigo-500 rounded-full flex items-center justify-center",children:E.jsx("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:E.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})]}),E.jsxs("div",{className:"flex-1 min-w-0",children:[E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsxs("span",{className:"text-xs font-medium text-slate-300",children:["Version ",G+1]}),M&&E.jsx("span",{className:"px-1.5 py-0.5 text-xs font-medium bg-indigo-500/20 text-indigo-300 rounded border border-indigo-500/30",children:"Active"})]}),E.jsx("p",{className:"text-xs text-slate-400 mt-0.5",children:S(A.createdAt)}),A.model&&E.jsx("p",{className:"text-xs text-slate-500 mt-0.5 truncate",children:A.model})]}),E.jsx("div",{className:"flex flex-col gap-1",children:!M&&E.jsxs(E.Fragment,{children:[E.jsx("button",{onClick:()=>l(A.generationId),className:"px-2 py-1 text-xs font-medium bg-slate-700 hover:bg-slate-600 text-slate-200 rounded transition-colors",title:"Use this version",children:"Use"}),E.jsx("button",{onClick:()=>b(A.generationId),className:`px-2 py-1 text-xs font-medium rounded transition-colors ${B?"bg-red-600 hover:bg-red-500 text-white":"bg-slate-700/50 hover:bg-red-600/20 text-slate-400 hover:text-red-400"}`,title:B?"Click again to confirm":"Delete this version",children:B?"Confirm?":"Delete"})]})})]})})},A.generationId)})}),E.jsx("div",{className:"p-3 border-t border-slate-700/50 bg-slate-950/50",children:E.jsxs("p",{className:"text-xs text-slate-400 text-center",children:["Segment #",m+1,"  ",i.length," version",i.length!==1?"s":""]})})]})]})},Eb=({segment:i,index:t,isCurrent:l,isLast:a,gameState:r,onSegmentSelect:c,onVideoEnd:m,onVideoProgress:g,onChoiceSelect:y,onRegenerateChoices:h,canRegenerateChoices:v,isRegeneratingChoices:x,regenerationError:S=null,isChoiceLoading:b=!1,choiceLoadingTitle:A="",isCustomPromptOpen:_=!1,onCustomPromptToggle:G,customPromptValue:M="",onCustomPromptChange:B,onCustomPromptSubmit:V,isCustomPromptSubmitting:$=!1,isGlobalMuted:Q=!1,onRegenerateVideo:j,onSelectGeneration:W,onDeleteGeneration:me,isRegeneratingVideo:te=!1})=>{var Ue;const ge=t===0?"You began with:":"Then you chose:",Ce=l&&(i.choices||b),he=i.narrativeType?Us(i.narrativeType):null,ve=((Ue=i.generations)==null?void 0:Ue.map(ke=>({...ke,videoUrl:URL.createObjectURL(ke.videoBlob)})))||[];return E.jsxs("div",{className:`relative w-full transition-all duration-500 ${l?"max-w-5xl":"max-w-3xl opacity-70 hover:opacity-100"}`,children:[E.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[E.jsxs("p",{className:"text-center text-slate-400 italic",children:[ge,' "',i.prompt,'"']}),he&&E.jsx("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 text-xs font-medium bg-indigo-900/30 border border-indigo-700/50 rounded text-indigo-300",title:he.description,children:he.icon})]}),E.jsxs("div",{className:"relative",children:[E.jsx(cb,{videoSegment:i,onVideoEnd:m,onProgress:g,isCurrent:l,segmentIndex:t,onClick:c,isGlobalMuted:Q}),j&&W&&me&&i.activeGenerationId&&E.jsx(vb,{generations:ve,activeGenerationId:i.activeGenerationId,onSelectGeneration:W,onDeleteGeneration:me,onRegenerateVideo:j,isRegenerating:te,segmentIndex:t})]}),Ce&&E.jsx("div",{className:"pointer-events-none absolute inset-x-0 bottom-16 flex justify-center px-4",children:E.jsx("div",{className:"pointer-events-auto w-full max-w-4xl",children:b?E.jsxs("div",{className:"mx-auto flex w-full max-w-md flex-col items-center gap-3 rounded-2xl bg-slate-950/40 px-6 py-5 shadow-xl shadow-slate-950/40 border border-slate-700/40 backdrop-blur",children:[E.jsx("div",{className:"h-10 w-10 rounded-full border-4 border-sky-400/70 border-t-transparent animate-spin"}),E.jsx("div",{className:"text-center text-sm font-medium text-slate-200",children:A||"Imagining what comes next..."})]}):i.choices&&E.jsx(yb,{choices:i.choices,onChoiceSelect:y,disabled:!a||r!==ie.CHOICES,selectedChoice:i.selectedChoice,variant:"overlay",onRegenerate:h,canRegenerate:v,isRegenerating:x,errorMessage:S,onCustomPromptToggle:G,isCustomPromptOpen:_,customPromptValue:M,onCustomPromptChange:B,onCustomPromptSubmit:V,isCustomPromptSubmitting:$})})})]})},Nt={"veo-3.1-fast-generate-preview":{id:"veo-3.1-fast-generate-preview",provider:"veo",name:"Veo 3.1 Fast",description:"Quick generation (~1 min) - ideal for prototyping and iterations",icon:"",speed:"~1 minute",quality:"Good",costLevel:1,features:["Text-to-video","Image-to-video","720p resolution","~8s duration"],requiresApiKey:"API_KEY",estimatedSeconds:60},"veo-3.1-generate-preview":{id:"veo-3.1-generate-preview",provider:"veo",name:"Veo 3.1 Standard",description:"Highest quality (~2-3 min) - best for final production",icon:"",speed:"~2-3 minutes",quality:"Excellent",costLevel:2,features:["Text-to-video","Image-to-video","720p resolution","~8s duration"],requiresApiKey:"API_KEY",estimatedSeconds:150},"runway-gen-3-alpha":{id:"runway-gen-3-alpha",provider:"runway",name:"Runway Gen-3 Alpha",description:"Professional cinematic quality (~45s generation)",icon:"",speed:"~45 seconds",quality:"Professional",costLevel:3,features:["Text-to-video","Image-to-video","720p resolution","5-10s duration","Cinematic controls"],limitations:["Higher cost per generation","Ready for testing - API format updated"],requiresApiKey:"RUNWAY_API_KEY",estimatedSeconds:45},"runway-gen-4-turbo":{id:"runway-gen-4-turbo",provider:"runway",name:"Runway Gen-3 Alpha Turbo",description:"Ultra-fast professional quality (~30s generation)",icon:"",speed:"~30 seconds",quality:"Professional",costLevel:4,features:["Text-to-video","Image-to-video","720p resolution","5-10s duration","Faster generation","Advanced controls"],limitations:["Premium pricing","Ready for testing - API format updated"],requiresApiKey:"RUNWAY_API_KEY",estimatedSeconds:30},"stable-video-diffusion-img2vid":{id:"stable-video-diffusion-img2vid",provider:"stable-diffusion",name:"Stable Video Diffusion",description:"Cost-effective video generation (~55s total: 15s image + 40s video)",icon:"",speed:"~55 seconds",quality:"Good",costLevel:1,features:["Text-to-video (via SD3)","Image-to-video","576p resolution","Smooth motion","Open-source"],limitations:["Only 2-second videos","Lower resolution","Two-step process for text-to-video"],requiresApiKey:"STABILITY_API_KEY",estimatedSeconds:55},"replicate-wan-2.5-i2v":{id:"replicate-wan-2.5-i2v",provider:"replicate",name:"Wan 2.5 I2V",description:"Alibaba Wan 2.5 with background audio generation (~60-90s)",icon:"",speed:"~60-90 seconds",quality:"Excellent",costLevel:2,features:["Image-to-video","720p resolution","Background audio","5-8 second videos","High quality"],requiresApiKey:"REPLICATE_API_KEY",estimatedSeconds:75},"replicate-wan-2.5-i2v-fast":{id:"replicate-wan-2.5-i2v-fast",provider:"replicate",name:"Wan 2.5 I2V Fast",description:"Wan 2.5 optimized for speed with audio (~40-60s)",icon:"",speed:"~40-60 seconds",quality:"Very Good",costLevel:1,features:["Image-to-video","720p resolution","Background audio","5-8 second videos","Fast generation"],requiresApiKey:"REPLICATE_API_KEY",estimatedSeconds:50},"replicate-veo-3.1":{id:"replicate-veo-3.1",provider:"replicate",name:"Veo 3.1 (Replicate)",description:"Google Veo 3.1 via Replicate with context-aware audio (~120-180s)",icon:"",speed:"~2-3 minutes",quality:"Excellent",costLevel:3,features:["Text-to-video","Image-to-video","720p resolution","Context-aware audio","Reference image support","Last frame support"],requiresApiKey:"REPLICATE_API_KEY",estimatedSeconds:150},"replicate-veo-3.1-fast":{id:"replicate-veo-3.1-fast",provider:"replicate",name:"Veo 3.1 Fast (Replicate)",description:"Google Veo 3.1 Fast via Replicate with audio (~60-90s)",icon:"",speed:"~1-1.5 minutes",quality:"Very Good",costLevel:2,features:["Text-to-video","Image-to-video","720p resolution","Context-aware audio","Last frame support"],requiresApiKey:"REPLICATE_API_KEY",estimatedSeconds:75},"replicate-veo-3":{id:"replicate-veo-3",provider:"replicate",name:"Veo 3 (Replicate)",description:"Google Veo 3 via Replicate with audio generation (~120-180s)",icon:"",speed:"~2-3 minutes",quality:"Excellent",costLevel:3,features:["Text-to-video","Image-to-video","720p resolution","Audio generation","Cinematic quality"],requiresApiKey:"REPLICATE_API_KEY",estimatedSeconds:150},"replicate-veo-3-fast":{id:"replicate-veo-3-fast",provider:"replicate",name:"Veo 3 Fast (Replicate)",description:"Google Veo 3 Fast via Replicate with audio (~60-90s)",icon:"",speed:"~1-1.5 minutes",quality:"Very Good",costLevel:2,features:["Text-to-video","Image-to-video","720p resolution","Audio generation","Fast generation"],requiresApiKey:"REPLICATE_API_KEY",estimatedSeconds:75}};function Tb(){return{veo:[Nt["veo-3.1-fast-generate-preview"],Nt["veo-3.1-generate-preview"]],runway:[Nt["runway-gen-3-alpha"],Nt["runway-gen-4-turbo"]],"stable-diffusion":[Nt["stable-video-diffusion-img2vid"]],replicate:[Nt["replicate-wan-2.5-i2v"],Nt["replicate-wan-2.5-i2v-fast"],Nt["replicate-veo-3.1"],Nt["replicate-veo-3.1-fast"],Nt["replicate-veo-3"],Nt["replicate-veo-3-fast"]]}}function xb(i){return"$".repeat(i)}function Sb(i){switch(i){case 1:return"~$0.04-0.06";case 2:return"~$0.08-0.15";case 3:return"~$0.20-0.30";case 4:return"~$0.40-0.50";default:return"~$0.10"}}const xs={veo:"Google Veo",runway:"Runway ML","stable-diffusion":"Stability AI",replicate:"Replicate"},Jl=["Summoning pixels from the digital ether...","Directing the next scene with circuits and code...","The character is contemplating their next move...","Rendering a new chapter of your adventure...","Weaving light and sound into a moving story...","This can take a minute or two, great stories take time!"],wb=8e3,Ab=9e4,Sc=({title:i,variant:t="simple",model:l})=>{const[a,r]=O.useState(0),[c,m]=O.useState(Jl[0]),[g,y]=O.useState(0),[h,v]=O.useState(0),x=["Initializing","Generating","Processing","Finalizing"];O.useEffect(()=>{if(t==="simple"){const M=setInterval(()=>{r(B=>(B+1)%Jl.length)},5e3);return()=>{clearInterval(M)}}else{const M=setInterval(()=>{m(Jl[Math.floor(Math.random()*Jl.length)])},4e3),B=setInterval(()=>{y($=>$+1)},1e3),V=setInterval(()=>{v($=>($+1)%x.length)},wb);return()=>{clearInterval(M),clearInterval(B),clearInterval(V)}}},[t]);const b=(()=>{if(l){const M=Nt[l];if(M!=null&&M.estimatedSeconds)return Math.min(g/M.estimatedSeconds*100,95)}return Math.min(g/(Ab/1e3)*100,95)})(),A=M=>{const B=Math.floor(M/60),V=M%60;return`${B}:${V.toString().padStart(2,"0")}`},G=(()=>{if(!l)return null;const M=Nt[l];if(!(M!=null&&M.estimatedSeconds))return null;const B=M.estimatedSeconds,V=Math.max(0,B-g);return A(V)})();return t==="video"?E.jsxs("div",{className:"fixed inset-0 bg-gray-900 bg-opacity-90 backdrop-blur-md flex flex-col items-center justify-center z-50 text-center p-4",children:[E.jsxs("div",{className:"absolute inset-0 overflow-hidden opacity-20",children:[E.jsx("div",{className:"absolute w-64 h-64 bg-sky-500 rounded-full blur-3xl animate-pulse",style:{top:"20%",left:"10%"}}),E.jsx("div",{className:"absolute w-96 h-96 bg-indigo-500 rounded-full blur-3xl animate-pulse",style:{top:"60%",right:"10%",animationDelay:"1s"}})]}),E.jsxs("div",{className:"relative z-10 max-w-lg w-full",children:[E.jsxs("div",{className:"relative w-20 h-20 mx-auto mb-8",children:[E.jsx("div",{className:"absolute inset-0 border-4 border-sky-400/30 rounded-full"}),E.jsx("div",{className:"absolute inset-0 border-4 border-sky-400 border-t-transparent rounded-full animate-spin"}),E.jsx("div",{className:"absolute inset-2 border-4 border-indigo-400/30 rounded-full"}),E.jsx("div",{className:"absolute inset-2 border-4 border-indigo-400 border-b-transparent rounded-full animate-spin",style:{animationDirection:"reverse",animationDuration:"1.5s"}})]}),E.jsx("h2",{className:"text-3xl font-bold text-slate-100 mb-4",children:i}),E.jsx("div",{className:"flex justify-center gap-2 mb-6",children:x.map((M,B)=>E.jsxs("div",{className:"flex items-center",children:[E.jsx("div",{className:`px-3 py-1 rounded-full text-sm font-medium transition-all duration-500 ${B===h?"bg-sky-500 text-white scale-110":B<h?"bg-sky-700 text-slate-300":"bg-slate-700 text-slate-400"}`,children:M}),B<x.length-1&&E.jsx("svg",{className:"w-4 h-4 mx-1 text-slate-600",fill:"currentColor",viewBox:"0 0 20 20",children:E.jsx("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})})]},M))}),E.jsx("div",{className:"w-full bg-slate-700 rounded-full h-2 mb-4 overflow-hidden",children:E.jsx("div",{className:"h-full bg-gradient-to-r from-sky-500 to-indigo-500 transition-all duration-1000 ease-out rounded-full",style:{width:`${b}%`}})}),E.jsxs("div",{className:"flex justify-center items-center gap-6 text-slate-400 text-sm mb-4 font-mono",children:[E.jsxs("div",{children:[E.jsx("span",{className:"text-slate-500",children:"Elapsed:"})," ",A(g)]}),G!==null&&E.jsxs("div",{children:[E.jsx("span",{className:"text-slate-500",children:"ETA:"})," ",G]})]}),E.jsx("p",{className:"text-lg text-slate-300 max-w-md mx-auto",children:c})]})]}):E.jsx("div",{className:"fixed inset-0 bg-slate-950/90 backdrop-blur-md flex items-center justify-center z-50 px-6",children:E.jsxs("div",{className:"max-w-md w-full bg-slate-900/80 border border-slate-700 rounded-2xl shadow-2xl px-8 py-10 text-center space-y-6",children:[E.jsx("div",{className:"mx-auto w-16 h-16 rounded-full border-4 border-sky-400/60 border-t-transparent animate-spin"}),E.jsxs("div",{className:"space-y-2",children:[E.jsx("h2",{className:"text-2xl font-bold text-slate-100",children:i}),E.jsx("p",{className:"text-slate-400 text-base leading-relaxed",children:Jl[a]})]}),E.jsx("p",{className:"text-xs uppercase tracking-[0.35em] text-slate-500",children:"Preparing your scene"})]})})},_b=({segments:i,currentSegmentId:t,onSegmentClick:l,isOpen:a,onToggle:r})=>E.jsxs(E.Fragment,{children:[E.jsx("button",{onClick:r,className:"fixed left-4 top-24 z-40 bg-slate-800 hover:bg-slate-700 text-slate-200 p-3 rounded-lg shadow-lg transition-all duration-300 border border-slate-600 hover:border-sky-500",title:"Toggle Story Timeline (S)",children:E.jsx("svg",{className:`w-5 h-5 transition-transform duration-300 ${a?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}),E.jsx("div",{className:`fixed left-0 top-0 h-full bg-slate-900/95 backdrop-blur-md border-r border-slate-700 z-30 smooth-transition overflow-hidden ${a?"w-80":"w-0"}`,children:E.jsxs("div",{className:"p-4 pt-24 h-full overflow-y-auto smooth-transition",children:[E.jsx("h2",{className:"text-xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-sky-400 to-indigo-500 mb-4",children:"Story Timeline"}),i.length===0?E.jsx("p",{className:"text-slate-400 text-sm",children:"No story segments yet..."}):E.jsx("div",{className:"space-y-3",children:i.map((c,m)=>{const g=c.id===t,y=c.choices&&c.choices.length>0;return E.jsxs("div",{className:"relative",children:[m<i.length-1&&E.jsx("div",{className:"absolute left-4 top-16 w-0.5 h-8 bg-slate-600"}),E.jsx("button",{onClick:()=>l(c.id),className:`w-full text-left rounded-lg p-3 smooth-transition-fast ${g?"bg-sky-600/30 border-2 border-sky-400 shadow-lg scale-in":"bg-slate-800 border border-slate-700 hover:bg-slate-700 hover:border-slate-600"}`,children:E.jsxs("div",{className:"flex items-start gap-3",children:[E.jsx("div",{className:`flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold ${g?"bg-sky-500 text-white":"bg-slate-700 text-slate-300"}`,children:m+1}),E.jsxs("div",{className:"flex-grow min-w-0",children:[E.jsx("p",{className:`text-xs mb-1 ${g?"text-sky-300":"text-slate-500"}`,children:m===0?"Opening":"Choice Made"}),E.jsx("p",{className:`text-sm line-clamp-2 ${g?"text-slate-100":"text-slate-300"}`,children:c.prompt}),y&&E.jsxs("div",{className:"mt-2 flex items-center gap-1 text-xs text-slate-400",children:[E.jsx("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:E.jsx("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})}),c.selectedChoice?"Continued":`${c.choices.length} choices`]})]})]})})]},c.id)})})]})}),a&&E.jsx("div",{className:"fixed inset-0 bg-black/50 z-20 md:hidden",onClick:r})]}),Cb=({message:i,onConfirm:t,onCancel:l,type:a="warning"})=>{const[r,c]=O.useState(!1);O.useEffect(()=>{setTimeout(()=>c(!0),10)},[]);const m=()=>{c(!1),setTimeout(t,300)},g=()=>{c(!1),setTimeout(l,300)},y={warning:"bg-amber-600/95",info:"bg-blue-600/95",error:"bg-red-600/95"}[a],h={warning:"border-amber-400",info:"border-blue-400",error:"border-red-400"}[a];return E.jsx("div",{className:`fixed top-20 left-1/2 transform -translate-x-1/2 z-50 transition-all duration-300 ${r?"translate-y-0 opacity-100":"-translate-y-full opacity-0"}`,children:E.jsxs("div",{className:`${y} ${h} border-2 backdrop-blur-sm rounded-lg shadow-2xl p-4 flex items-center gap-4 min-w-[400px] max-w-[600px]`,children:[E.jsx("div",{className:"flex-grow text-white font-medium",children:i}),E.jsxs("div",{className:"flex gap-2",children:[E.jsx("button",{onClick:g,className:"px-4 py-2 bg-white/20 hover:bg-white/30 text-white rounded-lg font-semibold transition-colors",children:"Cancel"}),E.jsx("button",{onClick:m,className:"px-4 py-2 bg-white text-gray-900 hover:bg-gray-100 rounded-lg font-semibold transition-colors",children:"Confirm"})]})]})})},bb=({isOpen:i,onClose:t})=>{const[l,a]=O.useState(!1);if(O.useEffect(()=>{i?setTimeout(()=>a(!0),10):a(!1)},[i]),!i)return null;const r=[{key:"Space",description:"Play/Pause current video"},{key:" / ",description:"Navigate between segments"},{key:"1, 2, 3",description:"Select choice options"},{key:"S",description:"Toggle story timeline"},{key:"Esc",description:"Close dialogs"},{key:"?",description:"Show keyboard shortcuts"}];return E.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:t,children:E.jsxs("div",{className:`bg-slate-800 border border-slate-600 rounded-xl shadow-2xl p-6 max-w-md w-full transition-all duration-300 ${l?"scale-100 opacity-100":"scale-95 opacity-0"}`,onClick:c=>c.stopPropagation(),children:[E.jsx("h2",{className:"text-2xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-sky-400 to-indigo-500 mb-4",children:"Keyboard Shortcuts"}),E.jsx("div",{className:"space-y-3 mb-6",children:r.map((c,m)=>E.jsxs("div",{className:"flex items-center justify-between",children:[E.jsx("span",{className:"text-slate-300",children:c.description}),E.jsx("kbd",{className:"px-3 py-1 bg-slate-700 border border-slate-600 rounded text-slate-200 font-mono text-sm",children:c.key})]},m))}),E.jsx("button",{onClick:t,className:"w-full bg-sky-600 hover:bg-sky-500 text-white font-semibold py-2 px-4 rounded-lg transition-colors",children:"Close"})]})})},Rb=({onDismiss:i})=>{const[t,l]=O.useState(!1);O.useEffect(()=>{setTimeout(()=>l(!0),500)},[]);const a=()=>{l(!1),setTimeout(i,300)};return E.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:E.jsxs("div",{className:`bg-gradient-to-br from-slate-800 to-slate-900 border-2 border-sky-500 rounded-xl shadow-2xl p-6 max-w-lg w-full transition-all duration-300 ${t?"scale-100 opacity-100":"scale-95 opacity-0"}`,children:[E.jsxs("div",{className:"text-center mb-6",children:[E.jsx("h2",{className:"text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-sky-400 to-indigo-500 mb-2",children:"Welcome to Veo Visual Novel!"}),E.jsx("p",{className:"text-slate-300",children:"Create your own interactive story with AI-generated videos"})]}),E.jsxs("div",{className:"space-y-4 mb-6 text-left",children:[E.jsxs("div",{className:"flex items-start gap-3",children:[E.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-sky-500/20 rounded-full flex items-center justify-center text-sky-400",children:"1"}),E.jsxs("div",{children:[E.jsx("h3",{className:"text-white font-semibold mb-1",children:"Choose Model & Describe Scene"}),E.jsx("p",{className:"text-slate-400 text-sm",children:"Select Fast () or Standard () model, then describe your opening scene"})]})]}),E.jsxs("div",{className:"flex items-start gap-3",children:[E.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-sky-500/20 rounded-full flex items-center justify-center text-sky-400",children:"2"}),E.jsxs("div",{children:[E.jsx("h3",{className:"text-white font-semibold mb-1",children:"Watch & Choose"}),E.jsx("p",{className:"text-slate-400 text-sm",children:"Watch the AI-generated video, then pick what happens next"})]})]}),E.jsxs("div",{className:"flex items-start gap-3",children:[E.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-sky-500/20 rounded-full flex items-center justify-center text-sky-400",children:"3"}),E.jsxs("div",{children:[E.jsx("h3",{className:"text-white font-semibold mb-1",children:"Build Your Story"}),E.jsx("p",{className:"text-slate-400 text-sm",children:"Continue making choices to create a unique adventure"})]})]})]}),E.jsxs("div",{className:"bg-slate-700/50 rounded-lg p-4 mb-6",children:[E.jsx("h4",{className:"text-sky-400 font-semibold mb-2 text-sm",children:"Quick Tips:"}),E.jsxs("ul",{className:"text-slate-300 text-sm space-y-1",children:[E.jsxs("li",{children:[" Press ",E.jsx("kbd",{className:"px-2 py-0.5 bg-slate-600 rounded text-xs",children:"S"})," to toggle story timeline"]}),E.jsxs("li",{children:[" Use ",E.jsx("kbd",{className:"px-2 py-0.5 bg-slate-600 rounded text-xs",children:"1-3"})," to quickly select choices"]}),E.jsxs("li",{children:[" Press ",E.jsx("kbd",{className:"px-2 py-0.5 bg-slate-600 rounded text-xs",children:"?"})," to see all keyboard shortcuts"]})]})]}),E.jsx("button",{onClick:a,className:"w-full bg-gradient-to-r from-sky-600 to-indigo-600 hover:from-sky-500 hover:to-indigo-500 text-white font-semibold py-3 px-6 rounded-lg transition-all duration-300 shadow-lg",children:"Let's Begin!"})]})})},Nb=({isVisible:i,onClick:t})=>i?E.jsxs("button",{onClick:t,className:"fixed bottom-8 right-8 z-30 bg-sky-600 hover:bg-sky-500 text-white font-semibold py-3 px-6 rounded-full shadow-2xl transition-all duration-300 hover:scale-110 flex items-center gap-2 animate-bounce-subtle",children:[E.jsx("span",{children:"Jump to Latest"}),E.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 14l-7 7m0 0l-7-7m7 7V3"})})]}):null,jy=({selectedModel:i,onModelChange:t,disabled:l=!1})=>{const[a,r]=O.useState(new Set(["veo"])),c=Tb(),m=g=>{const y=new Set(a);y.has(g)?y.delete(g):y.add(g),r(y)};return E.jsxs("div",{className:"w-full",children:[E.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-3",children:"Video Generation Model"}),E.jsxs("div",{className:"space-y-3",children:[E.jsx(Ss,{provider:"veo",displayName:xs.veo,models:c.veo,selectedModel:i,onModelChange:t,isExpanded:a.has("veo"),onToggle:()=>m("veo"),disabled:l}),E.jsx(Ss,{provider:"runway",displayName:xs.runway,models:c.runway,selectedModel:i,onModelChange:t,isExpanded:a.has("runway"),onToggle:()=>m("runway"),disabled:l}),E.jsx(Ss,{provider:"stable-diffusion",displayName:xs["stable-diffusion"],models:c["stable-diffusion"],selectedModel:i,onModelChange:t,isExpanded:a.has("stable-diffusion"),onToggle:()=>m("stable-diffusion"),disabled:l}),E.jsx(Ss,{provider:"replicate",displayName:xs.replicate,models:c.replicate,selectedModel:i,onModelChange:t,isExpanded:a.has("replicate"),onToggle:()=>m("replicate"),disabled:l})]}),E.jsx("div",{className:"mt-4 p-3 bg-slate-800/50 rounded-lg border border-slate-700",children:E.jsxs("p",{className:"text-xs text-slate-400",children:[E.jsx("span",{className:"text-sky-400 font-medium",children:" Tip:"})," Veo supports both text-to-video and image-to-video. Replicate SVD provides cost-effective image-to-video continuation. Choose based on your needs!"]})})]})},Ss=({provider:i,displayName:t,models:l,selectedModel:a,onModelChange:r,isExpanded:c,onToggle:m,disabled:g})=>{const y=l.some(h=>h.id===a);return E.jsxs("div",{className:"border border-slate-700 rounded-lg overflow-hidden bg-slate-800/30",children:[E.jsx("button",{onClick:m,className:"w-full px-4 py-3 flex items-center justify-between hover:bg-slate-700/50 transition-colors",children:E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsx("svg",{className:`w-4 h-4 text-slate-400 transition-transform ${c?"rotate-90":""}`,fill:"currentColor",viewBox:"0 0 20 20",children:E.jsx("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})}),E.jsx("span",{className:`font-semibold ${y?"text-sky-400":"text-slate-300"}`,children:t}),y&&E.jsx("span",{className:"text-xs px-2 py-0.5 bg-sky-500/20 text-sky-400 rounded-full",children:"Active"})]})}),c&&E.jsx("div",{className:"border-t border-slate-700 p-2 space-y-2",children:l.map(h=>E.jsx(Mb,{model:h,isSelected:a===h.id,onSelect:()=>!g&&r(h.id),disabled:g},h.id))})]})},Mb=({model:i,isSelected:t,onSelect:l,disabled:a})=>{const r=Z_(i.id);return E.jsxs("button",{onClick:l,disabled:a||!r,className:`w-full text-left p-3 rounded-lg border-2 transition-all duration-200 ${t?"border-sky-400 bg-sky-500/10 ring-2 ring-sky-400/30":"border-slate-700 bg-slate-800/50 hover:border-slate-600 hover:bg-slate-700/50"} ${r?a?"opacity-50 cursor-not-allowed":"cursor-pointer":"opacity-50 cursor-not-allowed"}`,children:[E.jsxs("div",{className:"flex items-start justify-between mb-2",children:[E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsx("span",{className:"text-xl",children:i.icon}),E.jsxs("div",{children:[E.jsx("h3",{className:`font-semibold ${t?"text-sky-300":"text-slate-200"}`,children:i.name}),E.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[E.jsx("span",{className:"text-xs text-slate-400",children:i.speed}),E.jsxs("span",{className:"text-xs text-amber-400",children:[xb(i.costLevel)," ",Sb(i.costLevel)]})]})]})]}),t&&E.jsx("svg",{className:"w-5 h-5 text-sky-400 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:E.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),!r&&E.jsx("span",{className:"text-xs px-2 py-0.5 bg-red-500/20 text-red-400 rounded-full flex-shrink-0",children:"No API Key"})]}),E.jsx("p",{className:"text-xs text-slate-400 mb-2",children:i.description}),E.jsx("div",{className:"flex flex-wrap gap-1",children:i.features.slice(0,3).map((c,m)=>E.jsx("span",{className:"text-xs px-2 py-0.5 bg-slate-700/50 text-slate-400 rounded",children:c},m))}),i.limitations&&i.limitations.length>0&&E.jsxs("div",{className:"mt-2 text-xs text-amber-400/80",children:[" ",i.limitations[0]]})]})},zc={"flux-schnell":{id:"flux-schnell",provider:"replicate",name:"Flux Schnell",description:"Fast image generation on Replicate - great for quick iterations",icon:"",speed:"~5-10 seconds",quality:"Good",costLevel:1,requiresApiKey:"REPLICATE_API_KEY"},"gemini-imagen-3":{id:"gemini-imagen-3",provider:"gemini",name:"Google Imagen",description:"Google's Imagen image generation (auto-detects available models: Imagen 3, Imagen 4, etc.)",icon:"",speed:"~5-10 seconds",quality:"Excellent",costLevel:2,requiresApiKey:"GEMINI_API_KEY"}};function Ib(){return{replicate:[zc["flux-schnell"]],gemini:[zc["gemini-imagen-3"]]}}function Db(i){return"$".repeat(i)}function Ub(i){switch(i){case 1:return"Free/Very Low";case 2:return"~$0.04 per image";case 3:return"~$0.10 per image";default:return"Variable"}}const Og={replicate:"Replicate",gemini:"Google Gemini"},ev=({selectedModel:i,onModelChange:t,disabled:l=!1})=>{const[a,r]=O.useState(new Set(["gemini"])),c=Ib(),m=y=>{const h=new Set(a);h.has(y)?h.delete(y):h.add(y),r(h)},g=y=>{const h=zc[y];return h.requiresApiKey?!!ht(h.requiresApiKey):!0};return E.jsxs("div",{className:"w-full",children:[E.jsxs("label",{className:"block text-sm font-medium text-slate-300 mb-3",children:["Image Generation Model",E.jsx("span",{className:"ml-2 text-xs text-slate-500",children:"(for text-to-video)"})]}),E.jsxs("div",{className:"space-y-3",children:[E.jsx(Hg,{provider:"replicate",displayName:Og.replicate,models:c.replicate,selectedModel:i,onModelChange:t,isExpanded:a.has("replicate"),onToggle:()=>m("replicate"),disabled:l,isModelAvailable:g}),E.jsx(Hg,{provider:"gemini",displayName:Og.gemini,models:c.gemini,selectedModel:i,onModelChange:t,isExpanded:a.has("gemini"),onToggle:()=>m("gemini"),disabled:l,isModelAvailable:g})]}),E.jsx("div",{className:"mt-4 p-3 bg-slate-800/50 rounded-lg border border-slate-700",children:E.jsxs("p",{className:"text-xs text-slate-400",children:[E.jsx("span",{className:"text-sky-400 font-medium",children:" Tip:"})," This model generates the reference image when using text-to-video. For image-to-video, this setting is ignored."]})})]})},Hg=({provider:i,displayName:t,models:l,selectedModel:a,onModelChange:r,isExpanded:c,onToggle:m,disabled:g,isModelAvailable:y})=>{const h=l.some(v=>v.id===a);return E.jsxs("div",{className:"border border-slate-700 rounded-lg overflow-hidden bg-slate-800/30",children:[E.jsx("button",{onClick:m,className:"w-full px-4 py-3 flex items-center justify-between hover:bg-slate-700/50 transition-colors",children:E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsx("svg",{className:`w-4 h-4 text-slate-400 transition-transform ${c?"rotate-90":""}`,fill:"currentColor",viewBox:"0 0 20 20",children:E.jsx("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})}),E.jsx("span",{className:`font-semibold ${h?"text-sky-400":"text-slate-300"}`,children:t}),h&&E.jsx("span",{className:"text-xs px-2 py-0.5 bg-sky-500/20 text-sky-400 rounded-full",children:"Active"})]})}),c&&E.jsx("div",{className:"border-t border-slate-700 p-2 space-y-2",children:l.map(v=>E.jsx(kb,{model:v,isSelected:a===v.id,onSelect:()=>!g&&r(v.id),disabled:g,isAvailable:y(v.id)},v.id))})]})},kb=({model:i,isSelected:t,onSelect:l,disabled:a,isAvailable:r})=>E.jsxs("button",{onClick:l,disabled:a||!r,className:`w-full text-left p-3 rounded-lg border-2 transition-all duration-200 ${t?"border-sky-400 bg-sky-500/10 ring-2 ring-sky-400/30":"border-slate-700 bg-slate-800/50 hover:border-slate-600 hover:bg-slate-700/50"} ${r?a?"opacity-50 cursor-not-allowed":"cursor-pointer":"opacity-50 cursor-not-allowed"}`,children:[E.jsxs("div",{className:"flex items-start justify-between mb-2",children:[E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsx("span",{className:"text-xl",children:i.icon}),E.jsxs("div",{children:[E.jsx("h3",{className:`font-semibold ${t?"text-sky-300":"text-slate-200"}`,children:i.name}),E.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[E.jsx("span",{className:"text-xs text-slate-400",children:i.speed}),E.jsxs("span",{className:"text-xs text-amber-400",children:[Db(i.costLevel)," ",Ub(i.costLevel)]})]})]})]}),t&&E.jsx("svg",{className:"w-5 h-5 text-sky-400 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:E.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),!r&&E.jsx("span",{className:"text-xs px-2 py-0.5 bg-red-500/20 text-red-400 rounded-full flex-shrink-0",children:"No API Key"})]}),E.jsx("p",{className:"text-xs text-slate-400 mb-2",children:i.description}),E.jsx("div",{className:"flex items-center gap-2",children:E.jsxs("span",{className:"text-xs px-2 py-0.5 bg-slate-700/50 text-slate-400 rounded",children:[i.quality," Quality"]})})]}),Lb=Ql,tv=({selectedModel:i,onModelChange:t,disabled:l=!1})=>{const a=Hc(),r=l||!a;return E.jsxs("div",{className:"w-full",children:[E.jsxs("label",{className:"block text-sm font-medium text-slate-300 mb-3",children:["Language Model",E.jsx("span",{className:"ml-2 text-xs text-slate-500",children:"(controls Gemini prompt writer)"})]}),E.jsx("div",{className:"grid gap-3 sm:grid-cols-2",children:g_.map(c=>{const m=Sg[c]??Sg[Lb],g=i===c;return E.jsxs("button",{type:"button",onClick:()=>t(c),disabled:r,className:`flex flex-col items-start gap-2 p-4 rounded-xl border transition-all text-left ${g?"border-sky-400 bg-sky-500/10 ring-2 ring-sky-400/40":"border-slate-700 bg-slate-800/60 hover:border-slate-500 hover:bg-slate-800/80"} ${r?"opacity-60 cursor-not-allowed":"cursor-pointer"}`,children:[E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsx("span",{className:"text-xl",children:m.icon}),E.jsxs("div",{children:[E.jsx("p",{className:`text-sm font-semibold ${g?"text-white":"text-slate-200"}`,children:m.name}),E.jsxs("p",{className:"text-xs text-slate-400",children:[p_[m.provider],"  ",m.latency," "," ",y_(m.costLevel)," ",v_(m.costLevel)]})]})]}),E.jsx("p",{className:"text-xs text-slate-400",children:m.description}),E.jsx("div",{className:"flex flex-wrap gap-1",children:m.strengths.map(y=>E.jsx("span",{className:"text-[10px] uppercase tracking-wide px-2 py-0.5 rounded-full bg-slate-700/70 text-slate-300",children:y},y))}),E.jsx("p",{className:"text-[11px] text-slate-300",children:m.recommendedUse}),g&&E.jsx("span",{className:"text-xs font-semibold text-sky-300 uppercase tracking-wide",children:"Active model"})]},c)})}),!a&&E.jsx("p",{className:"mt-3 text-xs text-amber-400",children:"Gemini API key required to use AI prompt helpers. Add it in the settings panel."})]})},Gb=({imageUrl:i,prompt:t,isRetrying:l,onAccept:a,onRetry:r,onDiscard:c})=>E.jsxs("div",{className:"w-full max-w-4xl mx-auto p-4 md:p-8 fade-in",children:[E.jsxs("div",{className:"text-center mb-6",children:[E.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-sky-400 to-indigo-500 mb-2",children:"Preview Your Scene"}),E.jsx("p",{className:"text-slate-400 text-lg",children:"Review the generated image before creating your video"})]}),E.jsx("div",{className:"bg-slate-800/50 border-2 border-slate-700 rounded-2xl overflow-hidden shadow-2xl mb-6",children:E.jsxs("div",{className:"relative aspect-video bg-slate-900",children:[E.jsx("img",{src:i,alt:"Generated scene preview",className:"w-full h-full object-contain"}),E.jsxs("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 via-black/40 to-transparent p-6",children:[E.jsx("p",{className:"text-sm text-slate-300 mb-1 font-semibold",children:"Your Prompt:"}),E.jsxs("p",{className:"text-slate-100 text-base",children:['"',t,'"']})]})]})}),E.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center items-stretch",children:[E.jsx("button",{onClick:c,disabled:l,className:"flex-1 sm:flex-initial bg-slate-700 text-slate-200 font-bold py-4 px-8 rounded-lg hover:bg-slate-600 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed shadow-md border border-slate-600 hover:border-slate-500",children:" Go Back"}),E.jsx("button",{onClick:r,disabled:l,className:"flex-1 sm:flex-initial bg-amber-600 text-white font-bold py-4 px-8 rounded-lg hover:bg-amber-500 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed shadow-md relative overflow-hidden",children:l?E.jsxs(E.Fragment,{children:[E.jsx("span",{className:"opacity-50",children:" Retry Image"}),E.jsx("span",{className:"absolute inset-0 flex items-center justify-center",children:E.jsxs("svg",{className:"animate-spin h-6 w-6",viewBox:"0 0 24 24",children:[E.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),E.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})})]}):" Retry Image"}),E.jsx("button",{onClick:a,disabled:l,className:"flex-1 sm:flex-initial bg-gradient-to-r from-sky-600 to-indigo-600 text-white font-bold py-4 px-12 rounded-lg hover:from-sky-500 hover:to-indigo-500 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed shadow-lg transform hover:scale-105",children:" Accept & Continue"})]}),E.jsx("div",{className:"mt-6 p-4 bg-slate-800/30 rounded-lg border border-slate-700/50",children:E.jsxs("p",{className:"text-xs text-slate-400 text-center",children:[E.jsx("span",{className:"text-sky-400 font-medium",children:" Tip:"})," This image will be used as the starting frame for your video. Make sure it matches your vision before continuing!"]})})]}),zg=150,Pb=({selectedModel:i,onModelChange:t,selectedLlmModel:l,onLlmModelChange:a,selectedImageModel:r,onImageModelChange:c,pendingGenerationCount:m,disabled:g=!1})=>{const[y,h]=O.useState(!1),v=O.useRef(null),x=Nt[i];O.useEffect(()=>{const G=M=>{v.current&&(v.current.contains(M.target)||h(!1))};return y&&document.addEventListener("mousedown",G),()=>{document.removeEventListener("mousedown",G)}},[y]);const S=()=>{g||h(G=>!G)},b=G=>{t(G),window.setTimeout(()=>h(!1),zg)},A=G=>{c(G),window.setTimeout(()=>h(!1),zg)},_=m>0?E.jsxs("span",{className:"ml-2 px-2 py-0.5 text-xs rounded-full bg-sky-500/20 text-sky-300",children:[m," generating"]}):null;return E.jsxs("div",{ref:v,className:"relative",children:[E.jsxs("button",{type:"button",onClick:S,disabled:g,className:"flex items-center gap-2 px-3 py-2 rounded-lg border border-slate-600 bg-slate-800/70 text-slate-200 hover:text-white hover:border-sky-500 hover:bg-slate-700/70 transition-colors disabled:opacity-60 disabled:cursor-not-allowed",title:"Change the model for future generations",children:[E.jsx("span",{className:"text-lg",children:x.icon}),E.jsx("span",{className:"text-sm font-medium",children:x.name}),_,E.jsx("svg",{className:`w-4 h-4 transition-transform ${y?"rotate-180":""}`,viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:E.jsx("path",{fillRule:"evenodd",d:"M5.23 7.21a.75.75 0 011.06.02L10 10.939l3.71-3.71a.75.75 0 111.06 1.06l-4.24 4.25a.75.75 0 01-1.06 0l-4.24-4.25a.75.75 0 01.02-1.06z",clipRule:"evenodd"})})]}),y&&E.jsx("div",{className:"absolute right-0 mt-3 w-[min(420px,80vw)] z-30",children:E.jsxs("div",{className:"bg-slate-900/95 border border-slate-700 rounded-xl shadow-2xl backdrop-blur-sm p-4 max-h-[70vh] overflow-y-auto",children:[E.jsxs("div",{className:"flex items-center justify-between mb-3",children:[E.jsx("div",{className:"text-sm text-slate-300",children:"Choose models. Changes apply to upcoming scenes."}),E.jsx("button",{type:"button",onClick:()=>h(!1),className:"p-1 rounded-full text-slate-400 hover:text-white hover:bg-slate-700 transition-colors","aria-label":"Close model selector",children:E.jsx("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),E.jsxs("div",{className:"space-y-6",children:[E.jsx(jy,{selectedModel:i,onModelChange:b,disabled:g}),E.jsx("div",{className:"border-t border-slate-700 pt-6",children:E.jsx(tv,{selectedModel:l,onModelChange:a,disabled:g})}),E.jsx("div",{className:"border-t border-slate-700 pt-6",children:E.jsx(ev,{selectedModel:r,onModelChange:A,disabled:g})})]})]})})]})},Bb=520,wc=i=>`${Nt[i.model].name}  ${i.intent==="initial"?"Opening scene":"Next chapter"}`,qb=({tasks:i,activeTask:t,onCancelTask:l,onRetryTask:a,onReturnToStory:r})=>{const c=i.filter(h=>h.status==="queued"),m=i.filter(h=>h.status==="failed");if(!(t||c.length>0||m.length>0))return null;const y=c.length>0?`${c.length} queued`:t?"Running":m.length>0?"Attention required":"";return E.jsx("div",{className:"fixed bottom-5 inset-x-0 flex justify-center pointer-events-none z-30",children:E.jsx("div",{className:"pointer-events-auto bg-slate-900/95 border border-slate-700/80 shadow-2xl rounded-2xl px-5 py-4 w-full",style:{maxWidth:Bb},children:E.jsxs("div",{className:"flex flex-col gap-3",children:[E.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[E.jsxs("div",{children:[E.jsxs("div",{className:"text-sm font-semibold text-slate-100 flex items-center gap-2",children:[E.jsx("span",{children:"Scene generation in progress"}),y&&E.jsx("span",{className:"text-xs font-medium text-sky-300 px-2 py-0.5 rounded-full bg-sky-500/15",children:y})]}),t&&E.jsx("p",{className:"text-xs text-slate-400 mt-1",children:wc(t)}),!t&&c.length>0&&E.jsxs("p",{className:"text-xs text-slate-400 mt-1",children:["Waiting to start: ",wc(c[0])]})]}),E.jsxs("div",{className:"flex flex-wrap justify-end gap-2",children:[t&&E.jsx("button",{type:"button",onClick:()=>void l(t.id),className:"px-3 py-1.5 text-xs font-medium rounded-lg border border-slate-600 text-slate-200 hover:border-red-400 hover:text-red-300 transition-colors",children:"Cancel"}),c.length>0&&!t&&E.jsx("button",{type:"button",onClick:()=>void l(c[0].id),className:"px-3 py-1.5 text-xs font-medium rounded-lg border border-slate-600 text-slate-200 hover:border-red-400 hover:text-red-300 transition-colors",children:"Remove Next"}),E.jsx("button",{type:"button",onClick:r,className:"px-3 py-1.5 text-xs font-semibold rounded-lg bg-sky-600 text-white hover:bg-sky-500 transition-colors",children:"Return to story"})]})]}),m.length>0&&E.jsxs("div",{className:"space-y-2",children:[E.jsx("div",{className:"text-xs text-amber-300 font-medium",children:"Needs attention"}),E.jsx("ul",{className:"space-y-1",children:m.map(h=>E.jsxs("li",{className:"flex items-center justify-between gap-2 text-xs text-slate-300 bg-slate-800/70 border border-slate-700 rounded-lg px-3 py-2",children:[E.jsx("span",{className:"truncate",children:wc(h)}),E.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[E.jsx("button",{type:"button",onClick:()=>void a(h.id),className:"px-2 py-1 rounded-md bg-sky-500/20 text-sky-200 hover:bg-sky-500/30 transition-colors",children:"Retry"}),E.jsx("button",{type:"button",onClick:()=>void l(h.id),className:"px-2 py-1 rounded-md bg-slate-700 text-slate-300 hover:bg-slate-600 transition-colors",children:"Dismiss"})]})]},h.id))})]})]})})})},Vb=({onExportWithOverlays:i,onExportSimple:t,onCancel:l})=>{const[a,r]=O.useState("original"),c=[{value:"original",label:"Original",description:"Keep source resolution (1280x720)"},{value:"720p",label:"720p",description:"1280x720 (HD)"},{value:"1080p",label:"1080p",description:"1920x1080 (Full HD)"},{value:"1440p",label:"1440p",description:"2560x1440 (2K)"},{value:"4k",label:"4K",description:"3840x2160 (Ultra HD)"}];return E.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm",children:E.jsxs("div",{className:"bg-slate-800 border border-slate-600 rounded-xl shadow-2xl p-6 max-w-2xl mx-4 smooth-transition scale-in",children:[E.jsx("h2",{className:"text-2xl font-bold text-slate-100 mb-4",children:"Choose Export Options"}),E.jsx("p",{className:"text-slate-300 mb-6",children:"Configure your video export settings"}),E.jsxs("div",{className:"mb-6",children:[E.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-3",children:"Output Resolution"}),E.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-2",children:c.map(m=>E.jsxs("button",{onClick:()=>r(m.value),className:`p-3 rounded-lg border-2 transition-all duration-200 ${a===m.value?"border-sky-500 bg-sky-500/20 text-white":"border-slate-600 bg-slate-700/50 text-slate-300 hover:border-slate-500"}`,children:[E.jsx("div",{className:"font-semibold",children:m.label}),E.jsx("div",{className:"text-xs mt-1 opacity-75",children:m.description})]},m.value))})]}),E.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[E.jsx("button",{onClick:()=>i(a),className:"group relative bg-gradient-to-br from-purple-600 to-indigo-600 hover:from-purple-500 hover:to-indigo-500 text-white rounded-lg p-6 transition-all duration-300 transform hover:scale-105 hover:shadow-xl hover:shadow-purple-500/30",children:E.jsxs("div",{className:"flex flex-col items-center text-center",children:[E.jsx("svg",{className:"w-12 h-12 mb-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 4v16M17 4v16M3 8h4m10 0h4M3 12h18M3 16h4m10 0h4M4 20h16a1 1 0 001-1V5a1 1 0 00-1-1H4a1 1 0 00-1 1v14a1 1 0 001 1z"})}),E.jsx("h3",{className:"text-lg font-bold mb-2",children:"With Choice Overlays"}),E.jsx("p",{className:"text-sm text-purple-100",children:"Show choices on screen and highlight your selections with animations"}),E.jsx("div",{className:"mt-3 px-3 py-1 bg-white/20 rounded-full text-xs font-medium",children:"Recommended"})]})}),E.jsx("button",{onClick:()=>t(a),className:"group relative bg-slate-700 hover:bg-slate-600 text-white rounded-lg p-6 transition-all duration-300 transform hover:scale-105 hover:shadow-xl border border-slate-600",children:E.jsxs("div",{className:"flex flex-col items-center text-center",children:[E.jsxs("svg",{className:"w-12 h-12 mb-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]}),E.jsx("h3",{className:"text-lg font-bold mb-2",children:"Simple Export"}),E.jsx("p",{className:"text-sm text-slate-300",children:"Just the videos without any overlays or choice displays"}),E.jsx("div",{className:"mt-3 px-3 py-1 bg-slate-600 rounded-full text-xs font-medium",children:"Faster"})]})})]}),E.jsx("div",{className:"flex justify-end",children:E.jsx("button",{onClick:l,className:"px-6 py-2 text-slate-300 hover:text-white transition-colors",children:"Cancel"})})]})})},Ob=({isOpen:i,onClose:t,onSave:l,canClose:a=!0})=>{const[r,c]=O.useState({}),[m,g]=O.useState({}),[y,h]=O.useState(null);O.useEffect(()=>{if(i){const A=Fc();c({GEMINI_API_KEY:A.GEMINI_API_KEY||"",REPLICATE_API_KEY:A.REPLICATE_API_KEY||"",RUNWAY_API_KEY:A.RUNWAY_API_KEY||"",STABILITY_API_KEY:A.STABILITY_API_KEY||""})}},[i]);const v=(A,_)=>{c(G=>({...G,[A]:_})),h(null)},x=A=>{g(_=>({..._,[A]:!_[A]}))},S=()=>{const _=op.filter(M=>M.required).filter(M=>{var B;return!((B=r[M.keyName])!=null&&B.trim())});if(_.length>0){h(`Please provide the required API key: ${_.map(M=>M.name).join(", ")}`);return}const G={};Object.entries(r).forEach(([M,B])=>{B&&B.trim()&&(G[M]=B.trim())}),bE(G),l(),t()},b=()=>{if(!a&&!bc()){h("You must provide at least the required API keys to use the app.");return}t()};return i?E.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm",children:E.jsxs("div",{className:"bg-gray-800 border border-slate-700 rounded-lg shadow-2xl w-full max-w-3xl max-h-[90vh] overflow-y-auto m-4",children:[E.jsxs("div",{className:"sticky top-0 bg-gray-800 border-b border-slate-700 p-6",children:[E.jsx("h2",{className:"text-2xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-sky-400 to-indigo-500",children:"API Keys Configuration"}),E.jsx("p",{className:"text-slate-400 mt-2",children:"Your API keys are stored locally in your browser and never sent to any server except the respective API providers."})]}),E.jsxs("div",{className:"p-6 space-y-6",children:[op.map(A=>E.jsxs("div",{className:"space-y-3",children:[E.jsx("div",{className:"flex items-start justify-between",children:E.jsxs("div",{className:"flex-1",children:[E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsx("h3",{className:"text-lg font-semibold text-slate-200",children:A.name}),A.required&&E.jsx("span",{className:"px-2 py-0.5 text-xs font-medium bg-red-500/20 text-red-400 border border-red-500/40 rounded",children:"Required"}),!A.required&&E.jsx("span",{className:"px-2 py-0.5 text-xs font-medium bg-slate-700 text-slate-400 border border-slate-600 rounded",children:"Optional"})]}),E.jsx("p",{className:"text-sm text-slate-400 mt-1",children:A.description}),E.jsxs("div",{className:"flex gap-3 mt-2",children:[E.jsx("a",{href:A.getKeyUrl,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-sky-400 hover:text-sky-300 underline",children:"Get API Key "}),E.jsx("a",{href:A.docsUrl,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-slate-400 hover:text-slate-300 underline",children:"Documentation "})]})]})}),E.jsxs("div",{className:"relative",children:[E.jsx("input",{type:m[A.keyName]?"text":"password",value:r[A.keyName]||"",onChange:_=>v(A.keyName,_.target.value),placeholder:A.placeholder,className:"w-full px-4 py-3 bg-slate-900 border border-slate-700 rounded-lg text-slate-200 placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-sky-500 focus:border-transparent pr-24"}),E.jsx("button",{type:"button",onClick:()=>x(A.keyName),className:"absolute right-2 top-1/2 -translate-y-1/2 px-3 py-1.5 text-xs text-slate-400 hover:text-slate-200 transition-colors",children:m[A.keyName]?"Hide":"Show"})]})]},A.keyName)),y&&E.jsx("div",{className:"p-4 bg-red-900/30 border border-red-700 rounded-lg text-red-400 text-sm",children:y}),E.jsxs("div",{className:"bg-slate-900/50 border border-slate-700 rounded-lg p-4 space-y-2",children:[E.jsx("h4",{className:"text-sm font-semibold text-slate-300",children:" Tips:"}),E.jsxs("ul",{className:"text-xs text-slate-400 space-y-1 list-disc list-inside",children:[E.jsx("li",{children:"At minimum, you need a Google AI (Gemini) API key to use the app"}),E.jsx("li",{children:"Optional keys unlock additional video and image generation models"}),E.jsx("li",{children:"API keys are stored only in your browser's localStorage"}),E.jsx("li",{children:"You can update your keys anytime from the settings menu"}),E.jsx("li",{children:"Be mindful of API costs - each provider has different pricing"})]})]})]}),E.jsxs("div",{className:"sticky bottom-0 bg-gray-800 border-t border-slate-700 p-6 flex justify-end gap-3",children:[a&&E.jsx("button",{onClick:b,className:"px-6 py-2.5 bg-slate-700 hover:bg-slate-600 text-slate-200 font-medium rounded-lg transition-colors",children:"Cancel"}),E.jsx("button",{onClick:S,className:"px-6 py-2.5 bg-gradient-to-r from-sky-600 to-indigo-600 hover:from-sky-500 hover:to-indigo-500 text-white font-semibold rounded-lg transition-all shadow-lg",children:"Save API Keys"})]})]})}):null};function Hb(i,t,l){const a=i.trim();if(!a)return"";if(!t||!t.suffix)return a;const r=a.toLowerCase(),c=t.suffix.toLowerCase();return r.includes(c)?a:`${a}${t.suffix}`}const zb=["sprint","charge","leap","climb","strike","confront","battle","investigate","examine","discover","explore","search","uncover","sneak","dodge","evade","hide","ambush","pursue","summon","cast","transform","conjure","enchant","break","shatter","destroy","build","create","rescue","defend","protect","attack","challenge"],Yb=["go","look","see","try","think","consider","wonder","feel","seem","appear","be","stay"],Fb=[/wait and see/i,/look around/i,/go back/i,/return to/i,/stay here/i,/do nothing/i,/stand still/i,/remain in place/i],Jb=[/go back to the start/i,/return to where/i,/retreat to/i,/go home/i],Kb=[/something/i,/somewhere/i,/whatever/i,/maybe/i,/perhaps/i],$b=50,Xb=i=>{let t=50;const l=[],a=i.toLowerCase(),r=a.split(/\s+/);zb.some(_=>a.includes(_))?(t+=20,l.push("Contains strong action verb")):(t-=10,l.push("Missing strong action verb")),Yb.some(_=>new RegExp(`\\b${_}\\b`,"i").test(a))&&(t-=15,l.push("Contains weak action verb")),Fb.some(_=>_.test(a))&&(t-=30,l.push("Passive or non-advancing action")),Jb.some(_=>_.test(a))&&(t-=25,l.push("Circular action (going backwards)")),Kb.some(_=>_.test(a))&&(t-=20,l.push("Too vague or non-specific")),r.length>=4&&r.length<=10?(t+=10,l.push("Good length")):r.length<3?(t-=10,l.push("Too short/vague")):r.length>12&&(t-=5,l.push("Too long")),/\b(portal|tower|gate|enemy|shadow|door|path|mountain|forest|cave|guardian|weapon|spell|treasure|secret|mystery)\b/i.test(a)&&(t+=15,l.push("Specific and concrete")),/\b(before|quickly|now|immediate|urgent|fast|rush)\b/i.test(a)&&(t+=10,l.push("Creates urgency"));const S=/\b(sneak|stealth|shadow|quiet|careful|hide)\b/i.test(a),b=/\b(fight|attack|charge|battle|strike|confront)\b/i.test(a),A=/\b(explore|investigate|discover|examine|search)\b/i.test(a);return(S||b||A)&&(t+=10,l.push("Clear action archetype")),{choice:i,score:Math.max(0,Math.min(100,t)),reasons:l}},Qb=i=>{const t=i.map(Xb);return{valid:t.every(a=>a.score>=$b),scores:t}},Zb=i=>{if(i.length<2)return!0;const t=i.map(g=>g.split(/\s+/)[0].toLowerCase());if(new Set(t).size<i.length)return console.warn("Choices have similar starting patterns"),!1;const a=i.map(g=>g.split(/\s+/).length),r=Math.min(...a),m=Math.max(...a)-r;if(m===0)return console.warn("All choices have identical length"),!1;if(m<=1&&i.length>2){const g=a.reduce((h,v)=>h+v,0)/a.length;if(a.every(h=>Math.abs(h-g)<=.67))return console.warn("All choices have similar length/structure"),!1}return!0},Yg=5,Wb=.8,jb=.075,e1=1.15,Os=i=>i.trim().toLowerCase(),Fg=(i,t)=>i.some(l=>!t.has(Os(l))),t1=(i,t)=>i.every(l=>!t.has(Os(l))),n1=i=>{const t=Wb+i*jb;return Math.min(t,e1)},i1=(i,t)=>{const l=[];return i.length>0&&l.push(...i.map(a=>`"${a}" (or similar wording)`)),t>=2&&(l.push("Any variation of previously suggested actions"),l.push("Similar sentence structures to what was already offered")),t>=3&&l.push("CRITICAL: Be radically different - use completely different verbs, locations, and approaches"),l},o1=async({storyContext:i,lastFrameDataUrl:t,previousChoices:l,progressionHints:a=[],recentChoiceTypes:r=[],storyPhase:c="ongoing",narrativeType:m,llmModel:g})=>{const y=new Set(l.map(Os));let h=null;const v=[];for(let x=0;x<Yg;x+=1){const S=n1(x),b=[...l,...v.flat()],A=i1(b,x);console.log(`Choice generation attempt ${x+1}/${Yg} (temperature: ${S.toFixed(2)})`),v.length>0&&console.log(`Avoiding ${v.flat().length} previously generated choices from this session`);const _=await Pc(i,t,{temperature:S,antiPatterns:A,progressionHints:a,recentChoiceTypes:r,storyPhase:c,narrativeType:m,llmModel:g}),G=Qb(_);if(!G.valid){console.log(` Quality check failed - ${G.scores.filter($=>$.score<50).length} low-quality choices`),v.push(_);continue}if(!Zb(_)){console.log(" Choices lack diversity - retrying"),v.push(_);continue}const B=_.map(Os);if(y.size===0)return console.log(" First choice generation - accepted (quality passed)"),_;if(t1(_,y))return console.log(" All choices are new - accepted"),_;!h&&Fg(_,y)&&(h=_,console.log(" Some new choices found - keeping as fallback"));const V=B.length===l.length&&B.every($=>y.has($));!V&&Fg(_,y)?(h||(h=_,console.log(" Partial match found - keeping as fallback")),v.push(_)):V&&(console.log(" Exact duplicate detected - retrying with higher temperature"),v.push(_))}if(h)return console.log(" Using fallback choices (had some new options)"),h;throw console.error(" Failed to generate distinct choices after all attempts"),new Error("Unable to generate distinct choices after multiple attempts.")},l1=2,a1=5,s1=8,bs=i=>{const t=i.toLowerCase();return/(attack|fight|confront|battle|strike|combat|defeat|challenge)/i.test(t)?"combat":/(sneak|hide|careful|quiet|stealth|shadow|avoid|dodge)/i.test(t)?"stealth":/(explore|investigate|discover|search|examine|look|find|survey)/i.test(t)?"exploration":/(run|sprint|climb|jump|leap|move|travel|go|enter|exit)/i.test(t)?"movement":/(talk|speak|communicate|help|ask|tell|call|meet)/i.test(t)?"interaction":/(cast|magic|spell|power|ability|summon|transform)/i.test(t)?"magic":/(plan|prepare|wait|observe|think|analyze|strategy)/i.test(t)?"strategic":"other"},r1=i=>{const t=i.map(a=>a.prompt+" "+(a.selectedChoice||"")).join(" ").toLowerCase(),l=[];return/(magic|wizard|spell|enchant|mystical)/i.test(t)&&l.push("magic"),/(fight|battle|combat|warrior|sword|weapon)/i.test(t)&&l.push("combat"),/(explore|discover|adventure|journey|quest)/i.test(t)&&l.push("exploration"),/(mystery|secret|hidden|unknown|puzzle)/i.test(t)&&l.push("mystery"),/(danger|threat|enemy|villain|dark)/i.test(t)&&l.push("danger"),/(nature|forest|mountain|ocean|wild)/i.test(t)&&l.push("nature"),/(technology|machine|robot|cyber|future)/i.test(t)&&l.push("technology"),/(friend|ally|companion|help|together)/i.test(t)&&l.push("friendship"),l.length>0?l:["adventure"]},u1=i=>i<=l1?"beginning":i<=a1?"rising":i<=s1?"climax":"resolution",c1=(i,t,l,a)=>{const r=[];switch(i){case"beginning":r.push("Introduce new elements or discoveries"),r.push("Establish the setting and initial challenge"),r.push("Build curiosity and momentum");break;case"rising":r.push("Escalate challenges and stakes"),r.push("Introduce complications or obstacles"),r.push("Deepen the adventure");break;case"climax":r.push("Face major challenges or revelations"),r.push("Make bold, consequential decisions"),r.push("Push toward resolution of conflicts");break;case"resolution":r.push("Resolve ongoing conflicts"),r.push("Explore consequences of previous actions"),r.push("Bring narrative threads together");break}if(a){const m=a.enhancementHints.choiceGeneration;r.push(...m.slice(0,2))}const c=new Set(l);if(c.size===1){const m=l[0];r.push(`Avoid only ${m} actions - try different approaches`)}return t.includes("mystery")&&!c.has("exploration")&&r.push("Include investigative or discovery options"),t.includes("combat")&&!c.has("strategic")&&r.push("Offer tactical or planning alternatives to direct combat"),r},d1=i=>i?i.enhancementHints.choiceGeneration:[],Ac=(i,t)=>{const l=i.length,a=i.map(x=>x.prompt).join(" Then, "),r=i.slice(-3).filter(x=>x.selectedChoice).map(x=>x.selectedChoice),c=i.slice(-4).flatMap(x=>x.choices||[]).map(bs);let m;if(t)m=Us(t);else if(i.length>0){const x=i[i.length-1];x.narrativeType&&(m=Us(x.narrativeType))}const g=r1(i),y=u1(l),h=c1(y,g,c,m),v=d1(m);return{fullNarrative:a,recentActions:r,storyArcPhase:y,segmentCount:l,themes:g,recentChoiceTypes:c,progressionHints:h,narrativeType:m,narrativeTypeHints:v}},_c={frameDataUrl:null,segmentId:null},f1=(i,t)=>{if(!i.length)return _c;const l=i.find(r=>r.id===t);if(!l)return _c;let a=null;for(const r of i){const c=r.id<l.id,m=!a||r.id>a.id;c&&m&&(a=r)}return a?{frameDataUrl:a.lastFrameDataUrl??null,segmentId:a.id}:_c},m1=(i,t)=>{typeof window<"u"&&window.gtag&&window.gtag("config","GA_MEASUREMENT_ID",{page_title:i,page_path:t})},Zs=(i,t)=>{typeof window<"u"&&window.gtag&&window.gtag("event",i,t)},h1=(i,t)=>{const a={START:"Start Screen",IMAGE_PREVIEW:"Image Preview",GENERATING_IMAGE:"Generating Image",GENERATING_VIDEO:"Generating Video",PLAYING:"Watching Video",REPLAY:"Replaying Video",CHOICES:"Making Choices",GENERATING_CHOICES:"Generating Choices",EXPORTING:"Exporting Story",EXPORTING_VIDEO:"Exporting Video",IMPORTING:"Importing Story",ERROR:"Error Screen"}[i]||i;m1(a,`/${i.toLowerCase()}`),t&&Zs("game_state_change",{game_state:i,...t})},Cc=(i,t)=>{Zs("story_interaction",{event_type:i,...t})},Jg=(i,t,l,a)=>{Zs("video_generation",{model:i,intent:t,success:l,duration:a})},p1=(i,t,l)=>{Zs("choice_selected",{choice_index:i,total_choices:t,segment_id:l})},g1=300,y1=600,v1="Discovering Alternate Paths...",E1="Could not find fresh choices. Please try again.",T1="Unable to regenerate choices because the reference frame is unavailable.",x1="Please enter a prompt before continuing.",Kg="veo-llm-model-preference";function S1(){const[i,t]=O.useState(ie.START),[l,a]=O.useState([]),[r,c]=O.useState(null),[m,g]=O.useState([]),[y,h]=O.useState(null),[v,x]=O.useState(""),[S,b]=O.useState(null),[A,_]=O.useState(!1),[G,M]=O.useState(null),[B,V]=O.useState(!1),[$,Q]=O.useState(""),[j,W]=O.useState(null),[me,te]=O.useState(""),[ge,Ce]=O.useState(null),[he,ve]=O.useState(!1),Ue=O.useCallback(()=>{i===ie.CHOICES&&(M(null),V(q=>!q))},[i]),ke=O.useCallback(q=>{Q(q),G&&M(null)},[G]),[k,X]=O.useState(!1),[Z,ye]=O.useState(null),[we,R]=O.useState(!1),[Y,ee]=O.useState(!1),[oe,Ee]=O.useState(!1),[Ae,Ie]=O.useState(!1),[yt,Qe]=O.useState(!1),[dt,_i]=O.useState(()=>localStorage.getItem("veo-model-preference")||"veo-3.1-fast-generate-preview"),[It,$o]=O.useState(()=>localStorage.getItem("veo-image-model-preference")||"flux-schnell"),[nt,ji]=O.useState(()=>localStorage.getItem(Kg)||Ql),[Ke,Wl]=O.useState(()=>{const q=localStorage.getItem("veo-narrative-type-preference");if(q){const F=Us(q);if(F)return F}return Iy()}),[Jn,Xo]=O.useState(()=>localStorage.getItem("veo-global-mute")==="true"),rn=O.useRef(null),Ci=O.useRef(null),wn=O.useRef(Date.now()),jl=O.useCallback(()=>(wn.current+=1,wn.current),[]);O.useEffect(()=>{localStorage.setItem("veo-model-preference",dt)},[dt]),O.useEffect(()=>{localStorage.setItem("veo-image-model-preference",It)},[It]),O.useEffect(()=>{localStorage.setItem(Kg,nt)},[nt]),O.useEffect(()=>{localStorage.setItem("veo-narrative-type-preference",Ke.id)},[Ke]),O.useEffect(()=>{localStorage.setItem("veo-global-mute",Jn.toString())},[Jn]);const St=O.useCallback(()=>{Xo(q=>!q)},[]),un=O.useCallback(async()=>{await Sn();const q=await Ki();if(q.length>0){const F=q.map(ae=>{var ce;const ne=(ce=ae.generations)==null?void 0:ce.map(ue=>({...ue}));return{...ae,videoUrl:URL.createObjectURL(ae.videoBlob),generations:ne}});a(F);const K=F[F.length-1];c(K.id),wn.current=K.id,K.choices&&!K.selectedChoice?(t(ie.CHOICES),g(K.choices)):t(ie.REPLAY)}else t(ie.START),wn.current=Date.now()},[]),eo=O.useCallback(async()=>{if(!bc()){Qe(!0),t(ie.START);return}await un()},[un]);O.useEffect(()=>(eo(),localStorage.getItem("veo-visual-novel-welcome-seen")||ee(!0),()=>{l.forEach(F=>URL.revokeObjectURL(F.videoUrl))}),[]),O.useEffect(()=>{const q=()=>{if(!rn.current)return;const{scrollTop:K,scrollHeight:ae,clientHeight:ne}=rn.current,ce=ae-K-ne<500;Ee(!ce&&l.length>1)},F=rn.current;if(F)return F.addEventListener("scroll",q),()=>F.removeEventListener("scroll",q)},[l.length]),O.useEffect(()=>{h1(i,{segment_count:l.length,current_segment:r,has_choices:m.length>0})},[i,l.length,r,m.length]);const An=O.useCallback(()=>{rn.current&&(rn.current.scrollTop=rn.current.scrollHeight)},[]),Kn=O.useCallback(q=>{const F=l.find(K=>K.id===q);if(F){const ae=l.indexOf(F)===l.length-1;c(q),t(ae&&!F.selectedChoice&&F.choices?ie.CHOICES:ie.REPLAY)}},[l]),ea=O.useCallback(q=>{const F=l.findIndex(ae=>ae.id===r);if(F===-1)return;const K=q==="up"?F-1:F+1;K>=0&&K<l.length&&Kn(l[K].id)},[l,r,Kn]),Qo=O.useCallback(()=>{if(i===ie.START)return;const F=(zo.findIndex(K=>K.id===Ke.id)+1)%zo.length;Wl(zo[F])},[Ke,i]);PC([{key:"s",description:"Toggle story timeline",action:()=>X(q=>!q)},{key:"m",description:"Toggle global mute",action:St},{key:"n",description:"Cycle narrative type",action:Qo},{key:"?",description:"Show keyboard shortcuts",action:()=>R(!0)},{key:"Escape",description:"Close dialogs",action:()=>{R(!1),ye(null)}},{key:"ArrowUp",description:"Previous segment",action:()=>ea("up")},{key:"ArrowDown",description:"Next segment",action:()=>ea("down")},{key:"1",description:"Select first choice",action:()=>{i===ie.CHOICES&&m.length>=1&&Qn(m[0])}},{key:"2",description:"Select second choice",action:()=>{i===ie.CHOICES&&m.length>=2&&Qn(m[1])}},{key:"3",description:"Select third choice",action:()=>{i===ie.CHOICES&&m.length>=3&&Qn(m[2])}}],!Z&&!we&&!Y);const bt=(q,F)=>{console.error(F,q);let K="An unknown error occurred.";q instanceof Error?K=q.message:typeof q=="string"&&(K=q),K.includes("exceeded your current quota")||K.includes("RESOURCE_EXHAUSTED")?(h(E.jsxs(E.Fragment,{children:["You've exceeded your API quota. To continue generating videos, please enable billing on your Google Cloud project.",E.jsxs("div",{className:"mt-4 flex flex-col items-center gap-2 text-sm",children:[E.jsx("a",{href:"https://ai.google.dev/gemini-api/docs/billing",target:"_blank",rel:"noopener noreferrer",className:"text-sky-400 hover:text-sky-300 underline",children:"How to Enable Billing"}),E.jsx("a",{href:"https://ai.google.dev/gemini-api/docs/rate-limits",target:"_blank",rel:"noopener noreferrer",className:"text-sky-400 hover:text-sky-300 underline",children:"Learn about Rate Limits"}),E.jsx("a",{href:"https://ai.dev/usage?tab=rate-limit",target:"_blank",rel:"noopener noreferrer",className:"text-sky-400 hover:text-sky-300 underline",children:"Monitor Your Usage"})]})]})),t(ie.ERROR)):K.includes("Requested entity was not found")||K.includes("API key not found")?(h("API Key is invalid or missing. Please check your .env.local file."),t(ie.ERROR)):K.includes("FFmpeg")||K.includes("window.FFmpeg")?(h(E.jsxs(E.Fragment,{children:["Video export failed due to FFmpeg loading issues. This may be due to:",E.jsxs("ul",{className:"mt-2 list-disc list-inside text-sm space-y-1",children:[E.jsx("li",{children:"Network connectivity problems"}),E.jsx("li",{children:"Browser security restrictions"}),E.jsx("li",{children:"Ad blockers blocking the FFmpeg script"})]}),E.jsx("div",{className:"mt-4 text-sm",children:"Try refreshing the page or disabling ad blockers, then try again."})]})),t(ie.ERROR)):(h(`Error: ${K}`),t(ie.ERROR))},Ws=O.useCallback(async(q,F)=>{const{videoBlob:K}=F;if(Jg(q.model,q.intent,!0),l.findIndex(ce=>ce.id===q.segmentId)!==-1)await oC(q.segmentId,K,null,q.model),await un(),x(""),t(ie.PLAYING);else{const ce=`gen-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,ue={id:q.segmentId,prompt:q.prompt,videoBlob:K,lastFrameDataUrl:null,narrativeType:q.narrativeType,generations:[{generationId:ce,videoBlob:K,lastFrameDataUrl:null,createdAt:Date.now(),model:q.model}],activeGenerationId:ce};await Ji(ue);const de=URL.createObjectURL(K),et={id:ue.id,prompt:ue.prompt,videoUrl:de,lastFrameDataUrl:ue.lastFrameDataUrl,choices:ue.choices,selectedChoice:ue.selectedChoice,narrativeType:ue.narrativeType,generations:[{generationId:ce,videoBlob:K,lastFrameDataUrl:null,createdAt:Date.now(),model:q.model}],activeGenerationId:ce};a(qe=>[...qe,et]),c(ue.id),x(""),t(ie.PLAYING),setTimeout(An,g1),setTimeout(An,y1)}},[An,l,un]),bi=O.useCallback(async(q,F)=>{console.error("Video generation task failed:",q,F),Jg(q.model,q.intent,!1);const K=W_(q.model,F);if(h(K),t(ie.ERROR),q.intent==="continuation"){const ae=await Ki(),ne=ae.find(ce=>ce.selectedChoice&&!ae.some(ue=>ue.id>ce.id));if(ne){const ce={...ne,selectedChoice:void 0};await Ji(ce),a(ue=>ue.map(de=>de.id===ne.id?{...de,selectedChoice:void 0}:de))}}},[]),{tasks:$e,enqueueTask:Vt,cancelTask:wt,retryTask:js,activeTask:er,pendingCount:tr}=yC({onTaskSuccess:Ws,onTaskError:bi}),$n=O.useCallback(async q=>{const F=$e.find(ae=>ae.id===q),K=await wt(q);if(K&&(F==null?void 0:F.intent)==="continuation"){const ae=await Ki(),ne=ae.find(ce=>ce.selectedChoice&&!ae.some(ue=>ue.id>ce.id));if(ne){const ce={...ne,selectedChoice:void 0};await Ji(ce),a(ue=>ue.map(de=>de.id===ne.id?{...de,selectedChoice:void 0}:de)),ne.choices&&(g(ne.choices),c(ne.id),t(ie.CHOICES),h(null))}}return K},[wt,$e]);O.useEffect(()=>{if($e.length===0)return;const q=Math.max(...$e.map(F=>F.segmentId));q>wn.current&&(wn.current=q)},[$e]);const Xn=O.useCallback(async(q,F,K,ae)=>{console.log(" [DEBUG] App: queueVideoGeneration called"),console.log(" [DEBUG] App: Intent:",F),console.log(" [DEBUG] App: Has last frame:",!!K),console.log(" [DEBUG] App: Narrative type:",ae);try{const ne=jl();console.log(" [DEBUG] App: Generated segment ID:",ne);const ce={segmentId:ne,prompt:q,model:dt,imageData:K??null,imageModel:It,intent:F,narrativeType:ae};console.log(" [DEBUG] App: Task input:",{segmentId:ne,promptLength:q.length,model:dt,hasImageData:!!K,imageModel:It,intent:F,narrativeType:ae}),console.log(" [DEBUG] App: Calling enqueueTask..."),await Vt(ce),console.log(" [DEBUG] App: Task enqueued successfully")}catch(ne){console.error(" [DEBUG] App: Failed to enqueue task:",ne),bt(ne,"while queueing video generation")}},[Vt,jl,dt,It]),to=O.useCallback(()=>{if(l.length===0)return;const q=l[l.length-1];c(q.id),q.choices&&!q.selectedChoice?t(ie.CHOICES):t(ie.REPLAY),An()},[l,An]),hn=async(q,F,K)=>{console.log(" [DEBUG] App: Starting initial image generation"),console.log(" [DEBUG] App: Original prompt:",q.substring(0,100)+(q.length>100?"...":"")),console.log(" [DEBUG] App: Style preset:",(F==null?void 0:F.name)||"none"),console.log(" [DEBUG] App: Narrative type:",K.id),console.log(" [DEBUG] App: Selected image model:",It),console.log(" [DEBUG] App: Selected LLM model:",nt);try{console.log(" [DEBUG] App: Setting game state to GENERATING_IMAGE"),t(ie.GENERATING_IMAGE),x("Enhancing Your Prompt..."),console.log(" [DEBUG] App: Clearing previous game state"),await Ec(),l.forEach(de=>URL.revokeObjectURL(de.videoUrl)),a([]),g([]),c(null),h(null),b(null),_(!1),wn.current=Date.now(),$e.length>0&&(console.log(" [DEBUG] App: Cancelling existing generation tasks:",$e.length),await Promise.all($e.map(de=>$n(de.id)))),console.log(" [DEBUG] App: Building styled prompt...");const ae=Hb(q,F);console.log(" [DEBUG] App: Styled prompt length:",ae.length),console.log(" [DEBUG] App: Enhancing prompt...");const ne=await Rg(ae,{isInitial:!0,narrativeType:K,llmModel:nt});console.log(" [DEBUG] App: Enhanced prompt length:",ne.length),x("Generating Your Scene Image..."),console.log(" [DEBUG] App: Importing replicateService.generateImageForPreview...");const{generateImageForPreview:ce}=await $i(async()=>{const{generateImageForPreview:de}=await Promise.resolve().then(()=>Y_);return{generateImageForPreview:de}},void 0);console.log(" [DEBUG] App: Calling generateImageForPreview...");const ue=await ce(ne,It);console.log(" [DEBUG] App: Image generation completed, data URL length:",ue.length),console.log(" [DEBUG] App: Setting preview image and state"),W(ue),te(ne),Ce(F),t(ie.IMAGE_PREVIEW),console.log(" [DEBUG] App: Initial image generation completed successfully")}catch(ae){console.error(" [DEBUG] App: Initial image generation failed:",ae),bt(ae,"during image generation")}},no=async(q,F,K)=>{Wl(K),Cc("start",{narrative_type:K.id,has_style_preset:!!F,model:dt,image_model:It,llm_model:nt}),await hn(q,F,K)},Ri=O.useCallback(async()=>{if(console.log(" [DEBUG] App: handleAcceptImage called"),console.log(" [DEBUG] App: Preview image available:",!!j),console.log(" [DEBUG] App: Initial prompt available:",!!me),!j||!me){console.warn(" [DEBUG] App: Missing preview image or initial prompt, returning early");return}try{console.log(" [DEBUG] App: Setting game state to GENERATING_VIDEO"),t(ie.GENERATING_VIDEO),x("Crafting Your First Scene..."),console.log(" [DEBUG] App: Calling queueVideoGeneration..."),await Xn(me,"initial",j,Ke.id),console.log(" [DEBUG] App: Video generation queued successfully")}catch(q){console.error(" [DEBUG] App: Video generation queue failed:",q),bt(q,"during video generation")}},[j,me,Xn,Ke]),nr=O.useCallback(async()=>{if(!(!me||!ge)){ve(!0);try{j&&URL.revokeObjectURL(j),await hn(me,ge,Ke)}catch(q){bt(q,"during image retry")}finally{ve(!1)}}},[me,ge,j,Ke]),ta=O.useCallback(()=>{j&&URL.revokeObjectURL(j),W(null),te(""),Ce(null),t(ie.START)},[j]),Zo=O.useCallback(async(q,F)=>{const K=l[l.length-1];if(!K||K.id!==r||K.choices||A||S)return;const ae=.8,ne=q/F;if(ne>=ae&&!isNaN(ne)){console.log(" Background prefetching choices at",Math.round(ne*100)+"%"),_(!0);try{const ce=Ac(l,Ke.id),ue=l.slice(-3).flatMap(et=>et.choices||[]).map(bs),de=await Pc(ce.fullNarrative,void 0,{progressionHints:ce.progressionHints,recentChoiceTypes:ue,storyPhase:ce.storyArcPhase,narrativeType:Ke,llmModel:nt});b({segmentId:K.id,choices:de}),console.log(" Choices preloaded successfully!")}catch(ce){console.error(" Failed to prefetch choices:",ce)}finally{_(!1)}}},[l,r,A,S,Ke,nt]),Ni=O.useCallback(async q=>{const F=l[l.length-1];if(!(!F||F.id!==r)&&!(F.choices&&F.choices.length>0))try{const K=await TC(q);let ae;if(S&&S.segmentId===F.id)console.log(" Using preloaded choices - instant display!"),ae=S.choices;else{console.log(" Choices not ready, generating now..."),t(ie.GENERATING_CHOICES),x("Imagining What's Next...");const ue=Ac(l,Ke.id),de=l.slice(-3).flatMap(et=>et.choices||[]).map(bs);ae=await Pc(ue.fullNarrative,K,{progressionHints:ue.progressionHints,recentChoiceTypes:de,storyPhase:ue.storyArcPhase,narrativeType:Ke,llmModel:nt})}const ne=await(await fetch(F.videoUrl)).blob(),ce={...F,videoBlob:ne,lastFrameDataUrl:K,choices:ae};await Ji(ce),a(ue=>ue.map(de=>de.id===F.id?{...de,lastFrameDataUrl:K,choices:ae}:de)),g(ae),t(ie.CHOICES),M(null),V(!1),Q(""),b(null)}catch(K){bt(K,"during video end processing")}},[l,r,S,Ke,nt]),ir=O.useCallback(async()=>{if(i!==ie.CHOICES)return;const q=l.find(F=>F.id===r);if(!(!q||!q.choices||q.choices.length===0)&&!q.selectedChoice){if(!q.lastFrameDataUrl){M(T1);return}M(null),t(ie.GENERATING_CHOICES),x(v1);try{const F=Ac(l,Ke.id),K=l.slice(-3).flatMap(ue=>ue.choices||[]).map(bs),ae=await o1({storyContext:F.fullNarrative,lastFrameDataUrl:q.lastFrameDataUrl,previousChoices:q.choices,progressionHints:F.progressionHints,recentChoiceTypes:K,storyPhase:F.storyArcPhase,narrativeType:Ke,llmModel:nt}),ne=await(await fetch(q.videoUrl)).blob(),ce={...q,videoBlob:ne,choices:ae};await Ji(ce),a(ue=>ue.map(de=>de.id===q.id?{...de,choices:ae}:de)),g(ae),b(null),_(!1),M(null),t(ie.CHOICES),V(!1),Q("")}catch(F){console.error("Failed to regenerate choices",F),M(E1),t(ie.CHOICES)}finally{x("")}}},[i,l,r,a,g,b,_,M,t,x,Ke,nt]),Qn=async q=>{var K,ae;const F=l[l.length-1];if(F&&F.lastFrameDataUrl)try{const ne=((K=F.choices)==null?void 0:K.indexOf(q))??-1;p1(ne,((ae=F.choices)==null?void 0:ae.length)??0,F.id),g([]),M(null),b(null),_(!1),V(!1),Q("");const ce=await(await fetch(F.videoUrl)).blob(),ue={...F,videoBlob:ce,selectedChoice:q};await Ji(ue),a(qe=>qe.map(Xe=>Xe.id===F.id?{...Xe,selectedChoice:q}:Xe)),t(ie.GENERATING_VIDEO),x("Enhancing Your Choice...");const de=l.map(qe=>qe.prompt).join(" Then, "),et=await Rg(q,{isInitial:!1,previousContext:de,narrativeType:Ke,llmModel:nt});x("Bringing Your Choice to Life..."),await Xn(et,"continuation",F.lastFrameDataUrl,Ke.id)}catch(ne){bt(ne,"during choice selection")}else bt(new Error("Could not find the last frame to continue the story."),"on choice selection")},na=async()=>{if(i!==ie.CHOICES)return;const q=$.trim();if(!q){M(x1);return}const F=l[l.length-1];!F||F.id!==r||F.selectedChoice||(M(null),await Qn(q))},ia=async()=>{const q=await Ki();if(q.length===0){ye({message:"There is no story to export.",action:()=>ye(null)});return}Cc("export",{segment_count:q.length,export_type:"story"}),x("Exporting your story..."),t(ie.EXPORTING);try{const K={version:2,segments:await Promise.all(q.map(async de=>{const et=de.generations?await Promise.all(de.generations.map(async qe=>({generationId:qe.generationId,videoDataUrl:await Ng(qe.videoBlob),lastFrameDataUrl:qe.lastFrameDataUrl,createdAt:qe.createdAt,model:qe.model}))):void 0;return{id:de.id,prompt:de.prompt,lastFrameDataUrl:de.lastFrameDataUrl,choices:de.choices,selectedChoice:de.selectedChoice,narrativeType:de.narrativeType,videoDataUrl:await Ng(de.videoBlob),generations:et,activeGenerationId:de.activeGenerationId}}))},ae=JSON.stringify(K,null,2),ne=new Blob([ae],{type:"application/json"}),ce=URL.createObjectURL(ne),ue=document.createElement("a");ue.href=ce,ue.download=`veo-visual-novel-story-${Date.now()}.json`,document.body.appendChild(ue),ue.click(),document.body.removeChild(ue),URL.revokeObjectURL(ce)}catch(F){bt(F,"during story export")}finally{const F=l[l.length-1];F!=null&&F.choices&&!F.selectedChoice?t(ie.CHOICES):l.length>0?t(ie.REPLAY):t(ie.START)}},Wo=async()=>{if((await Ki()).length<2){ye({message:"You need at least two video segments to create a movie.",action:()=>ye(null)});return}Ie(!0)},jo=async q=>{Ie(!1);const F=await Ki();x("Creating movie with choice overlays..."),t(ie.EXPORTING_VIDEO);try{const K=await LC(F,q),ae=URL.createObjectURL(K),ne=document.createElement("a");ne.href=ae,ne.download=`veo-visual-novel-movie-with-choices-${Date.now()}.mp4`,document.body.appendChild(ne),ne.click(),document.body.removeChild(ne),setTimeout(()=>URL.revokeObjectURL(ae),1e3)}catch(K){bt(K,"during video export with overlays")}finally{const K=l[l.length-1];K!=null&&K.choices&&!K.selectedChoice?t(ie.CHOICES):l.length>0?t(ie.REPLAY):t(ie.START)}},oa=async q=>{Ie(!1);const F=await Ki();x("Stitching your movie together..."),t(ie.EXPORTING_VIDEO);try{const K=F.map(ue=>ue.videoBlob),ae=await RC(K,q),ne=URL.createObjectURL(ae),ce=document.createElement("a");ce.href=ne,ce.download=`veo-visual-novel-movie-${Date.now()}.mp4`,document.body.appendChild(ce),ce.click(),document.body.removeChild(ce),setTimeout(()=>URL.revokeObjectURL(ne),1e3)}catch(K){bt(K,"during video export")}finally{const K=l[l.length-1];K!=null&&K.choices&&!K.selectedChoice?t(ie.CHOICES):l.length>0?t(ie.REPLAY):t(ie.START)}},la=q=>{var ae;const F=(ae=q.target.files)==null?void 0:ae[0];if(!F)return;x("Importing your story..."),t(ie.IMPORTING);const K=new FileReader;K.onload=async ne=>{var ce;try{const ue=(ce=ne.target)==null?void 0:ce.result;if(typeof ue!="string")throw new Error("Failed to read file.");const de=JSON.parse(ue);if(!de.version||!Array.isArray(de.segments))throw new Error("Invalid story file format.");Cc("import",{segment_count:de.segments.length,import_version:de.version}),await Ec(),l.forEach(qe=>URL.revokeObjectURL(qe.videoUrl)),a([]);const et=de.segments.map(qe=>{if(de.version===1||!qe.generations){const Ot=Mg(qe.videoDataUrl),gn=`gen-imported-${Date.now()}-${Math.random().toString(36).substr(2,9)}`;return{...qe,videoBlob:Ot,generations:[{generationId:gn,videoBlob:Ot,lastFrameDataUrl:qe.lastFrameDataUrl,createdAt:Date.now(),model:void 0}],activeGenerationId:gn}}const Xe=qe.generations.map(Ot=>({generationId:Ot.generationId,videoBlob:Mg(Ot.videoDataUrl),lastFrameDataUrl:Ot.lastFrameDataUrl,createdAt:Ot.createdAt,model:Ot.model})),io=Xe.find(Ot=>Ot.generationId===qe.activeGenerationId)||Xe[0];return{...qe,videoBlob:io.videoBlob,lastFrameDataUrl:io.lastFrameDataUrl,generations:Xe,activeGenerationId:io.generationId}});for(const qe of et)await Ji(qe);await un()}catch(ue){bt(ue,"during story import")}finally{Ci.current&&(Ci.current.value="")}},K.readAsText(F)},pn=O.useCallback(async q=>{const F=l.find(ue=>ue.id===q);if(!F)return;const{frameDataUrl:K,segmentId:ae}=f1(l,q),ne=F.lastFrameDataUrl??null,ce=K??ne;ce?!K&&ne?console.warn(" Previous choice frame missing; falling back to current segment frame."):ae!==null&&console.log(` Using reference frame from segment ${ae} for regeneration.`):console.warn(" No reference frame available for regeneration; proceeding without image context."),await Vt({segmentId:F.id,prompt:F.prompt,model:dt,imageData:ce,intent:"continuation",narrativeType:F.narrativeType}),x(`Regenerating video for segment ${l.indexOf(F)+1}...`)},[l,dt,Vt]),ft=O.useCallback(async(q,F)=>{try{await lC(q,F),await un(),console.log(`Switched to generation ${F} for segment ${q}`)}catch(K){console.error("Failed to switch generation:",K),bt(K,"switching video generation")}},[un]),At=O.useCallback(async(q,F)=>{try{await aC(q,F),await un(),console.log(`Deleted generation ${F} from segment ${q}`)}catch(K){console.error("Failed to delete generation:",K),bt(K,"deleting video generation")}},[un]),_n=()=>{ye({message:"Are you sure you want to start over? This will delete your current story.",action:async()=>{ye(null),$e.length>0&&await Promise.all($e.map(q=>$n(q.id))),await Ec(),l.forEach(q=>URL.revokeObjectURL(q.videoUrl)),a([]),g([]),c(null),h(null),eo()}})};return E.jsxs("div",{className:"bg-gray-900 text-gray-200 min-h-screen flex flex-col font-sans",children:[i===ie.GENERATING_IMAGE&&E.jsx(Sc,{title:v,variant:"simple"}),i===ie.GENERATING_VIDEO&&E.jsx(Sc,{title:v,variant:"video",model:dt}),(i===ie.EXPORTING||i===ie.IMPORTING||i===ie.EXPORTING_VIDEO)&&E.jsx(Sc,{title:v,variant:"simple"}),E.jsx(_b,{segments:l,currentSegmentId:r,onSegmentClick:Kn,isOpen:k,onToggle:()=>X(!k)}),Z&&E.jsx(Cb,{message:Z.message,onConfirm:Z.action,onCancel:()=>ye(null),type:"warning"}),Ae&&E.jsx(Vb,{onExportWithOverlays:jo,onExportSimple:oa,onCancel:()=>Ie(!1)}),E.jsx(Ob,{isOpen:yt,onClose:()=>Qe(!1),onSave:()=>{eo()},canClose:bc()}),E.jsx(bb,{isOpen:we,onClose:()=>R(!1)}),Y&&E.jsx(Rb,{onDismiss:()=>{ee(!1),localStorage.setItem("veo-visual-novel-welcome-seen","true")}}),E.jsx(Nb,{isVisible:oe,onClick:An}),E.jsxs("header",{className:"w-full p-4 flex justify-between items-center bg-gray-900/80 backdrop-blur-sm border-b border-slate-800 sticky top-0 z-10",children:[E.jsxs("div",{className:"flex items-center gap-3",children:[E.jsx("h1",{className:"text-xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-sky-400 to-indigo-500",children:"Veo Visual Novel"}),E.jsxs("span",{className:"hidden sm:inline-flex items-center gap-1 px-2 py-1 text-xs font-medium bg-slate-800 border border-slate-600 rounded-full text-slate-300",children:[dt.includes("fast")?"":"",dt.includes("fast")?"Fast":"Standard"]}),i!==ie.START&&E.jsxs("button",{onClick:Qo,className:"hidden sm:inline-flex items-center gap-1 px-2 py-1 text-xs font-medium bg-indigo-900/50 border border-indigo-600 rounded-full text-indigo-300 hover:bg-indigo-800/50 transition-colors cursor-pointer",title:`${Ke.description} (Press 'n' to cycle)`,children:[E.jsx("span",{children:Ke.icon}),E.jsx("span",{children:Ke.name})]})]}),E.jsxs("div",{className:"flex items-center gap-2 md:gap-4",children:[i!==ie.START&&E.jsx(Pb,{selectedModel:dt,onModelChange:_i,selectedLlmModel:nt,onLlmModelChange:ji,selectedImageModel:It,onImageModelChange:$o,pendingGenerationCount:tr,disabled:i===ie.EXPORTING||i===ie.EXPORTING_VIDEO||i===ie.IMPORTING}),E.jsx("button",{onClick:St,className:"p-2 text-slate-400 hover:text-sky-400 transition-colors",title:Jn?"Unmute Videos (m)":"Mute Videos (m)",children:Jn?E.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z",clipRule:"evenodd"}),E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2"})]}):E.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z"})})}),E.jsx("button",{onClick:()=>Qe(!0),className:"p-2 text-slate-400 hover:text-sky-400 transition-colors",title:"Configure API Keys",children:E.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"})})}),E.jsx("button",{onClick:()=>R(!0),className:"p-2 text-slate-400 hover:text-sky-400 transition-colors",title:"Keyboard Shortcuts (?)",children:E.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),l.length>1&&E.jsx("button",{onClick:Wo,className:"bg-purple-600 text-white font-semibold py-2 px-4 rounded-lg hover:bg-purple-500 transition-colors",children:"Export Video"}),l.length>0&&E.jsx("button",{onClick:ia,className:"bg-green-600 text-white font-semibold py-2 px-4 rounded-lg hover:bg-green-500 transition-colors",children:"Export Story"}),l.length>0&&E.jsx("button",{onClick:_n,className:"bg-red-600 text-white font-semibold py-2 px-4 rounded-lg hover:bg-red-500 transition-colors",children:"Start Over"})]})]}),E.jsxs("main",{ref:rn,className:"flex-grow flex flex-col items-center p-4 md:p-8 overflow-y-auto",children:[i===ie.START&&E.jsxs("div",{className:"flex flex-col items-center w-full",children:[E.jsx(ub,{onSubmit:no,disabled:!1,llmModel:nt}),E.jsxs("div",{className:"w-full max-w-3xl mx-auto mt-8 p-6 bg-slate-800/50 border border-slate-700 rounded-lg space-y-6",children:[E.jsx(jy,{selectedModel:dt,onModelChange:_i,disabled:!1}),E.jsx("div",{className:"border-t border-slate-700 pt-6",children:E.jsx(tv,{selectedModel:nt,onModelChange:ji,disabled:!1})}),E.jsx("div",{className:"border-t border-slate-700 pt-6",children:E.jsx(ev,{selectedModel:It,onModelChange:$o,disabled:!1})})]}),E.jsxs("div",{className:"text-center mt-8 border-t border-slate-700 w-full max-w-3xl pt-8",children:[E.jsx("p",{className:"text-slate-400 mb-4",children:"Or, continue a previous adventure:"}),E.jsx("label",{htmlFor:"import-story-input",className:"bg-indigo-500 text-white font-bold py-3 px-6 rounded-lg hover:bg-indigo-400 transition-colors duration-300 cursor-pointer shadow-md",children:"Import Story"}),E.jsx("input",{id:"import-story-input",ref:Ci,type:"file",accept:".json",className:"hidden",onChange:la})]})]}),i===ie.IMAGE_PREVIEW&&j&&E.jsx(Gb,{imageUrl:j,prompt:me,isRetrying:he,onAccept:Ri,onRetry:nr,onDiscard:ta}),y&&E.jsxs("div",{className:"text-center p-8 bg-red-900/50 border border-red-700 rounded-lg max-w-3xl mx-auto",children:[E.jsx("h2",{className:"text-2xl font-bold text-red-300 mb-2",children:"An Error Occurred"}),E.jsx("div",{className:"text-red-400",children:y}),E.jsx("button",{onClick:_n,className:"mt-4 bg-sky-600 hover:bg-sky-500 text-white font-bold py-2 px-4 rounded-lg",children:"Try Again"})]}),E.jsx("div",{className:"w-full flex-grow flex flex-col items-center gap-12 py-4",children:l.map((q,F)=>{const K=F===l.length-1,ae=q.id===r,ne=ae&&K&&i===ie.CHOICES&&!q.selectedChoice,ce=ae&&i===ie.GENERATING_CHOICES,ue=ae&&i===ie.GENERATING_VIDEO,de=$e.some(et=>et.segmentId===q.id&&et.status==="running");return E.jsx(Eb,{segment:q,index:F,isCurrent:ae,isLast:K,gameState:i,onSegmentSelect:()=>{c(q.id),t(K&&!q.selectedChoice&&q.choices?ie.CHOICES:ie.REPLAY)},onVideoEnd:Ni,onVideoProgress:K?Zo:void 0,onChoiceSelect:Qn,onRegenerateChoices:ne?ir:void 0,canRegenerateChoices:ne,isRegeneratingChoices:i===ie.GENERATING_CHOICES,regenerationError:G,isChoiceLoading:ce,choiceLoadingTitle:v,isCustomPromptOpen:ne?B:!1,onCustomPromptToggle:ne?Ue:void 0,customPromptValue:$,onCustomPromptChange:ne?ke:void 0,onCustomPromptSubmit:ne?na:void 0,isCustomPromptSubmitting:ue,isGlobalMuted:Jn,onRegenerateVideo:()=>pn(q.id),onSelectGeneration:et=>ft(q.id,et),onDeleteGeneration:et=>At(q.id,et),isRegeneratingVideo:de},q.id)})})]}),E.jsx(qb,{tasks:$e,activeTask:er,onCancelTask:$n,onRetryTask:js,onReturnToStory:to})]})}const nv=document.getElementById("root");if(!nv)throw new Error("Could not find root element to mount to");const w1=AE.createRoot(nv);w1.render(E.jsx(Xg.StrictMode,{children:E.jsx(S1,{})}));export{ht as g};
